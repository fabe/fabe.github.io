!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};e[a][0].call(l.exports,function(t){var n=e[a][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(n){"use strict";function r(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function i(t){return n.Buffer&&"function"==typeof n.Buffer.isBuffer?n.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function o(t){return Object.prototype.toString.call(t)}function a(t){return!i(t)&&("function"==typeof n.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function s(t){if(b.isFunction(t)){if(E)return t.name;var e=t.toString(),n=e.match(/\s*function\s+([^\(\s]*)\s*/);return n&&n[1]}}function u(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function c(t){if(E||!b.isFunction(t))return b.inspect(t);var e=s(t);return"[Function"+(e?": "+e:"")+"]"}function l(t){return u(c(t.actual),128)+" "+t.operator+" "+u(c(t.expected),128)}function f(t,e,n,r,i){throw new T.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function h(t,e){t||f(t,!0,e,"==",T.ok)}function p(t,e,n,s){if(t===e)return!0;if(i(t)&&i(e))return 0===r(t,e);if(b.isDate(t)&&b.isDate(e))return t.getTime()===e.getTime();if(b.isRegExp(t)&&b.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"==typeof t||null!==e&&"object"==typeof e){if(a(t)&&a(e)&&o(t)===o(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===r(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(i(t)!==i(e))return!1;s=s||{actual:[],expected:[]};var u=s.actual.indexOf(t);return u!==-1&&u===s.expected.indexOf(e)||(s.actual.push(t),s.expected.push(e),v(t,e,n,s))}return n?t===e:t==e}function d(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function v(t,e,n,r){if(null===t||void 0===t||null===e||void 0===e)return!1;if(b.isPrimitive(t)||b.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=d(t),o=d(e);if(i&&!o||!i&&o)return!1;if(i)return t=x.call(t),e=x.call(e),p(t,e,n);var a,s,u=S(t),c=S(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(a=u[s],!p(t[a],e[a],n,r))return!1;return!0}function m(t,e,n){p(t,e,!0)&&f(t,e,n,"notDeepStrictEqual",m)}function y(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&e.call({},t)===!0}function g(t){var e;try{t()}catch(t){e=t}return e}function _(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=g(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&f(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&b.isError(i),s=!t&&i&&!n;if((a&&o&&y(i,n)||s)&&f(i,n,"Got unwanted exception"+r),t&&i&&n&&!y(i,n)||!t&&i)throw i}var b=t("util/"),w=Object.prototype.hasOwnProperty,x=Array.prototype.slice,E=function(){return"foo"===function(){}.name}(),T=e.exports=h;T.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var e=t.stackStartFunction||f;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=s(e),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}},b.inherits(T.AssertionError,Error),T.fail=f,T.ok=h,T.equal=function(t,e,n){t!=e&&f(t,e,n,"==",T.equal)},T.notEqual=function(t,e,n){t==e&&f(t,e,n,"!=",T.notEqual)},T.deepEqual=function(t,e,n){p(t,e,!1)||f(t,e,n,"deepEqual",T.deepEqual)},T.deepStrictEqual=function(t,e,n){p(t,e,!0)||f(t,e,n,"deepStrictEqual",T.deepStrictEqual)},T.notDeepEqual=function(t,e,n){p(t,e,!1)&&f(t,e,n,"notDeepEqual",T.notDeepEqual)},T.notDeepStrictEqual=m,T.strictEqual=function(t,e,n){t!==e&&f(t,e,n,"===",T.strictEqual)},T.notStrictEqual=function(t,e,n){t===e&&f(t,e,n,"!==",T.notStrictEqual)},T.throws=function(t,e,n){_(!0,t,e,n)},T.doesNotThrow=function(t,e,n){_(!1,t,e,n)},T.ifError=function(t){if(t)throw t};var S=Object.keys||function(t){var e=[];for(var n in t)w.call(t,n)&&e.push(n);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"util/":45}],2:[function(t,e,n){"use strict";function r(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function i(t){return 3*t.length/4-r(t)}function o(t){var e,n,i,o,a,s,u=t.length;a=r(t),s=new f(3*u/4-a),i=a>0?u-4:u;var c=0;for(e=0,n=0;e<i;e+=4,n+=3)o=l[t.charCodeAt(e)]<<18|l[t.charCodeAt(e+1)]<<12|l[t.charCodeAt(e+2)]<<6|l[t.charCodeAt(e+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=l[t.charCodeAt(e)]<<2|l[t.charCodeAt(e+1)]>>4,s[c++]=255&o):1===a&&(o=l[t.charCodeAt(e)]<<10|l[t.charCodeAt(e+1)]<<4|l[t.charCodeAt(e+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function a(t){return c[t>>18&63]+c[t>>12&63]+c[t>>6&63]+c[63&t]}function s(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(a(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i="",o=[],a=0,u=n-r;a<u;a+=16383)o.push(s(t,a,a+16383>u?u:a+16383));return 1===r?(e=t[n-1],i+=c[e>>2],i+=c[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=c[e>>10],i+=c[e>>4&63],i+=c[e<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=u;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)c[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],3:[function(t,e,n){},{}],4:[function(t,e,n){(function(e,r){function i(t){if(t<n.DEFLATE||t>n.UNZIP)throw new TypeError("Bad argument");this.mode=t,this.init_done=!1,this.write_in_progress=!1,this.pending_close=!1,this.windowBits=0,this.level=0,this.memLevel=0,this.strategy=0,this.dictionary=null}function o(t,e){for(var n=0;n<t.length;n++)this[e+n]=t[n]}var a=t("pako/lib/zlib/messages"),s=t("pako/lib/zlib/zstream"),u=t("pako/lib/zlib/deflate.js"),c=t("pako/lib/zlib/inflate.js"),l=t("pako/lib/zlib/constants");for(var f in l)n[f]=l[f];n.NONE=0,n.DEFLATE=1,n.INFLATE=2,n.GZIP=3,n.GUNZIP=4,n.DEFLATERAW=5,n.INFLATERAW=6,n.UNZIP=7,i.prototype.init=function(t,e,r,i,o){switch(this.windowBits=t,this.level=e,this.memLevel=r,this.strategy=i,this.mode!==n.GZIP&&this.mode!==n.GUNZIP||(this.windowBits+=16),this.mode===n.UNZIP&&(this.windowBits+=32),this.mode!==n.DEFLATERAW&&this.mode!==n.INFLATERAW||(this.windowBits=-this.windowBits),this.strm=new s,this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var a=u.deflateInit2(this.strm,this.level,n.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:case n.UNZIP:var a=c.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}if(a!==n.Z_OK)return void this._error(a);this.write_in_progress=!1,this.init_done=!0},i.prototype.params=function(){throw new Error("deflateParams Not supported")},i.prototype._writeCheck=function(){if(!this.init_done)throw new Error("write before init");if(this.mode===n.NONE)throw new Error("already finalized");if(this.write_in_progress)throw new Error("write already in progress");if(this.pending_close)throw new Error("close is pending")},i.prototype.write=function(t,n,r,i,o,a,s){this._writeCheck(),this.write_in_progress=!0;var u=this;return e.nextTick(function(){u.write_in_progress=!1;var e=u._write(t,n,r,i,o,a,s);u.callback(e[0],e[1]),u.pending_close&&u.close()}),this},i.prototype.writeSync=function(t,e,n,r,i,o,a){return this._writeCheck(),this._write(t,e,n,r,i,o,a)},i.prototype._write=function(t,e,i,a,s,l,f){if(this.write_in_progress=!0,t!==n.Z_NO_FLUSH&&t!==n.Z_PARTIAL_FLUSH&&t!==n.Z_SYNC_FLUSH&&t!==n.Z_FULL_FLUSH&&t!==n.Z_FINISH&&t!==n.Z_BLOCK)throw new Error("Invalid flush value");null==e&&(e=new r(0),a=0,i=0),s._set?s.set=s._set:s.set=o;var h=this.strm;switch(h.avail_in=a,h.input=e,h.next_in=i,h.avail_out=f,h.output=s,h.next_out=l,this.mode){case n.DEFLATE:case n.GZIP:case n.DEFLATERAW:var p=u.deflate(h,t);break;case n.UNZIP:case n.INFLATE:case n.GUNZIP:case n.INFLATERAW:var p=c.inflate(h,t);break;default:throw new Error("Unknown mode "+this.mode)}return p!==n.Z_STREAM_END&&p!==n.Z_OK&&this._error(p),this.write_in_progress=!1,[h.avail_in,h.avail_out]},i.prototype.close=function(){if(this.write_in_progress)return void(this.pending_close=!0);this.pending_close=!1,this.mode===n.DEFLATE||this.mode===n.GZIP||this.mode===n.DEFLATERAW?u.deflateEnd(this.strm):c.inflateEnd(this.strm),this.mode=n.NONE},i.prototype.reset=function(){switch(this.mode){case n.DEFLATE:case n.DEFLATERAW:var t=u.deflateReset(this.strm);break;case n.INFLATE:case n.INFLATERAW:var t=c.inflateReset(this.strm)}t!==n.Z_OK&&this._error(t)},i.prototype._error=function(t){this.onerror(a[t]+": "+this.strm.msg,t),this.write_in_progress=!1,this.pending_close&&this.close()},n.Zlib=i}).call(this,t("_process"),t("buffer").Buffer)},{_process:28,buffer:8,"pako/lib/zlib/constants":17,"pako/lib/zlib/deflate.js":19,"pako/lib/zlib/inflate.js":21,"pako/lib/zlib/messages":23,"pako/lib/zlib/zstream":25}],5:[function(t,e,n){(function(e,r){function i(t,e,n){function i(){for(var e;null!==(e=t.read());)s.push(e),u+=e.length;t.once("readable",i)}function o(e){t.removeListener("end",a),t.removeListener("readable",i),n(e)}function a(){var e=r.concat(s,u);s=[],n(null,e),t.close()}var s=[],u=0;t.on("error",o),t.on("end",a),t.end(e),i()}function o(t,e){if("string"==typeof e&&(e=new r(e)),!r.isBuffer(e))throw new TypeError("Not a string or buffer");var n=v.Z_FINISH;return t._processChunk(e,n)}function a(t){if(!(this instanceof a))return new a(t);p.call(this,t,v.DEFLATE)}function s(t){if(!(this instanceof s))return new s(t);p.call(this,t,v.INFLATE)}function u(t){if(!(this instanceof u))return new u(t);p.call(this,t,v.GZIP)}function c(t){if(!(this instanceof c))return new c(t);p.call(this,t,v.GUNZIP)}function l(t){if(!(this instanceof l))return new l(t);p.call(this,t,v.DEFLATERAW)}function f(t){if(!(this instanceof f))return new f(t);p.call(this,t,v.INFLATERAW)}function h(t){if(!(this instanceof h))return new h(t);p.call(this,t,v.UNZIP)}function p(t,e){if(this._opts=t=t||{},this._chunkSize=t.chunkSize||n.Z_DEFAULT_CHUNK,d.call(this,t),t.flush&&t.flush!==v.Z_NO_FLUSH&&t.flush!==v.Z_PARTIAL_FLUSH&&t.flush!==v.Z_SYNC_FLUSH&&t.flush!==v.Z_FULL_FLUSH&&t.flush!==v.Z_FINISH&&t.flush!==v.Z_BLOCK)throw new Error("Invalid flush flag: "+t.flush);if(this._flushFlag=t.flush||v.Z_NO_FLUSH,t.chunkSize&&(t.chunkSize<n.Z_MIN_CHUNK||t.chunkSize>n.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<n.Z_MIN_WINDOWBITS||t.windowBits>n.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<n.Z_MIN_LEVEL||t.level>n.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<n.Z_MIN_MEMLEVEL||t.memLevel>n.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=n.Z_FILTERED&&t.strategy!=n.Z_HUFFMAN_ONLY&&t.strategy!=n.Z_RLE&&t.strategy!=n.Z_FIXED&&t.strategy!=n.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!r.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._binding=new v.Zlib(e);var i=this;this._hadError=!1,this._binding.onerror=function(t,e){i._binding=null,i._hadError=!0;var r=new Error(t);r.errno=e,r.code=n.codes[e],i.emit("error",r)};var o=n.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(o=t.level);var a=n.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(a=t.strategy),this._binding.init(t.windowBits||n.Z_DEFAULT_WINDOWBITS,o,t.memLevel||n.Z_DEFAULT_MEMLEVEL,a,t.dictionary),this._buffer=new r(this._chunkSize),this._offset=0,this._closed=!1,this._level=o,this._strategy=a,this.once("end",this.close)}var d=t("_stream_transform"),v=t("./binding"),m=t("util"),y=t("assert").ok;v.Z_MIN_WINDOWBITS=8,v.Z_MAX_WINDOWBITS=15,v.Z_DEFAULT_WINDOWBITS=15,v.Z_MIN_CHUNK=64,v.Z_MAX_CHUNK=1/0,v.Z_DEFAULT_CHUNK=16384,v.Z_MIN_MEMLEVEL=1,v.Z_MAX_MEMLEVEL=9,v.Z_DEFAULT_MEMLEVEL=8,v.Z_MIN_LEVEL=-1,v.Z_MAX_LEVEL=9,v.Z_DEFAULT_LEVEL=v.Z_DEFAULT_COMPRESSION,Object.keys(v).forEach(function(t){t.match(/^Z/)&&(n[t]=v[t])}),n.codes={Z_OK:v.Z_OK,Z_STREAM_END:v.Z_STREAM_END,Z_NEED_DICT:v.Z_NEED_DICT,Z_ERRNO:v.Z_ERRNO,Z_STREAM_ERROR:v.Z_STREAM_ERROR,Z_DATA_ERROR:v.Z_DATA_ERROR,Z_MEM_ERROR:v.Z_MEM_ERROR,Z_BUF_ERROR:v.Z_BUF_ERROR,Z_VERSION_ERROR:v.Z_VERSION_ERROR},Object.keys(n.codes).forEach(function(t){n.codes[n.codes[t]]=t}),n.Deflate=a,n.Inflate=s,n.Gzip=u,n.Gunzip=c,n.DeflateRaw=l,n.InflateRaw=f,n.Unzip=h,n.createDeflate=function(t){return new a(t)},n.createInflate=function(t){return new s(t)},n.createDeflateRaw=function(t){return new l(t)},n.createInflateRaw=function(t){return new f(t)},n.createGzip=function(t){return new u(t)},n.createGunzip=function(t){return new c(t)},n.createUnzip=function(t){return new h(t)},n.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new a(e),t,n)},n.deflateSync=function(t,e){return o(new a(e),t)},n.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new u(e),t,n)},n.gzipSync=function(t,e){return o(new u(e),t)},n.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new l(e),t,n)},n.deflateRawSync=function(t,e){return o(new l(e),t)},n.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new h(e),t,n)},n.unzipSync=function(t,e){return o(new h(e),t)},n.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new s(e),t,n)},n.inflateSync=function(t,e){return o(new s(e),t)},n.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new c(e),t,n)},n.gunzipSync=function(t,e){return o(new c(e),t)},n.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),i(new f(e),t,n)},n.inflateRawSync=function(t,e){return o(new f(e),t)},m.inherits(p,d),p.prototype.params=function(t,r,i){if(t<n.Z_MIN_LEVEL||t>n.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(r!=n.Z_FILTERED&&r!=n.Z_HUFFMAN_ONLY&&r!=n.Z_RLE&&r!=n.Z_FIXED&&r!=n.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+r);if(this._level!==t||this._strategy!==r){var o=this;this.flush(v.Z_SYNC_FLUSH,function(){o._binding.params(t,r),o._hadError||(o._level=t,o._strategy=r,i&&i())})}else e.nextTick(i)},p.prototype.reset=function(){return this._binding.reset()},p.prototype._flush=function(t){this._transform(new r(0),"",t)},p.prototype.flush=function(t,n){var i=this._writableState;if(("function"==typeof t||void 0===t&&!n)&&(n=t,t=v.Z_FULL_FLUSH),i.ended)n&&e.nextTick(n);else if(i.ending)n&&this.once("end",n);else if(i.needDrain){var o=this;this.once("drain",function(){o.flush(n)})}else this._flushFlag=t,this.write(new r(0),"",n)},p.prototype.close=function(t){if(t&&e.nextTick(t),!this._closed){this._closed=!0,this._binding.close();var n=this;e.nextTick(function(){n.emit("close")})}},p.prototype._transform=function(t,e,n){var i,o=this._writableState,a=o.ending||o.ended,s=a&&(!t||o.length===t.length);if(null===!t&&!r.isBuffer(t))return n(new Error("invalid input"));s?i=v.Z_FINISH:(i=this._flushFlag,t.length>=o.length&&(this._flushFlag=this._opts.flush||v.Z_NO_FLUSH));this._processChunk(t,i,n)},p.prototype._processChunk=function(t,e,n){function i(l,p){if(!u._hadError){var d=a-p;if(y(d>=0,"have should not go down"),d>0){var v=u._buffer.slice(u._offset,u._offset+d);u._offset+=d,c?u.push(v):(f.push(v),h+=v.length)}if((0===p||u._offset>=u._chunkSize)&&(a=u._chunkSize,u._offset=0,u._buffer=new r(u._chunkSize)),0===p){if(s+=o-l,o=l,!c)return!0;var m=u._binding.write(e,t,s,o,u._buffer,u._offset,u._chunkSize);return m.callback=i,void(m.buffer=t)}if(!c)return!1;n()}}var o=t&&t.length,a=this._chunkSize-this._offset,s=0,u=this,c="function"==typeof n;if(!c){var l,f=[],h=0;this.on("error",function(t){l=t});do var p=this._binding.writeSync(e,t,s,o,this._buffer,this._offset,a);while(!this._hadError&&i(p[0],p[1]));if(this._hadError)throw l;var d=r.concat(f,h);return this.close(),d}var v=this._binding.write(e,t,s,o,this._buffer,this._offset,a);v.buffer=t,v.callback=i},m.inherits(a,p),m.inherits(s,p),m.inherits(u,p),m.inherits(c,p),m.inherits(l,p),m.inherits(f,p),m.inherits(h,p)}).call(this,t("_process"),t("buffer").Buffer)},{"./binding":4,_process:28,_stream_transform:38,assert:1,buffer:8,util:45}],6:[function(t,e,n){arguments[4][3][0].apply(n,arguments)},{dup:3}],7:[function(t,e,n){(function(e){"use strict";var r=t("buffer"),i=r.Buffer,o=r.SlowBuffer,a=r.kMaxLength||2147483647;n.alloc=function(t,e,n){if("function"==typeof i.alloc)return i.alloc(t,e,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");var r=n,o=e;void 0===o&&(r=void 0,o=0);var s=new i(t);if("string"==typeof o)for(var u=new i(o,r),c=u.length,l=-1;++l<t;)s[l]=u[l%c];else s.fill(o);return s},n.allocUnsafe=function(t){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>a)throw new RangeError("size is too large");return new i(t)},n.from=function(t,n,r){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,n,r);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,n);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var a=r;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(t){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(t);if("number"!=typeof t)throw new TypeError("size must be a number");if(t>=a)throw new RangeError("size is too large");return new o(t)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:8}],8:[function(t,e,n){"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}function i(t){if(t>K)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=o.prototype,e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return c(t)}return a(t,e,n)}function a(t,e,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(t,e,n):"string"==typeof t?l(t,e):p(t)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function u(t,e,n){return s(t),t<=0?i(t):void 0!==e?"string"==typeof n?i(t).fill(e,n):i(t).fill(e):i(t)}function c(t){return s(t),i(t<0?0:0|d(t))}function l(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|m(t,e),r=i(n),a=r.write(t,e);return a!==n&&(r=r.slice(0,a)),r}function f(t){for(var e=t.length<0?0:0|d(t.length),n=i(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function h(t,e,n){if(t.byteLength,e<0||t.byteLength<e)throw new RangeError("'offset' is out of bounds");if(t.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=o.prototype,r}function p(t){if(o.isBuffer(t)){var e=0|d(t.length),n=i(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Y(t.length)?i(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(t){if(t>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return 0|t}function v(t){return+t!=t&&(t=0),o.alloc(+t)}function m(t,e){if(o.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return I(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function _(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=o.from(e,r)),o.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,s=t.length,u=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}var c;if(i){var l=-1;for(c=n;c<s;c++)if(o(t,c)===o(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(n+u>s&&(n=s-u),c=n;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(t,c+h)!==o(e,h)){f=!1;break}if(f)return c}return-1}function w(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function x(t,e,n,r){return q(V(e,t.length-n),t,n,r)}function E(t,e,n,r){return q(G(e),t,n,r)}function T(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return q(W(e),t,n,r)}function M(t,e,n,r){return q(H(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?X.fromByteArray(t):X.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(a=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(a=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(a=f))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return R(r)}function R(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function N(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function C(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<a)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),Z.write(t,e,n,r,23,4),n+4}function F(t,e,n,r,i){return e=+e,n>>>=0,i||j(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),Z.write(t,e,n,r,52,8),n+8}function U(t){if(t=z(t).replace(/[^+\/0-9A-Za-z-_]/g,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function z(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function H(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(t){return X.toByteArray(U(t))}function q(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Y(t){return t!==t}var X=t("base64-js"),Z=t("ieee754");n.Buffer=o,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50;var K=2147483647;n.kMaxLength=K,o.TYPED_ARRAY_SUPPORT=r(),o.TYPED_ARRAY_SUPPORT||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(t,e,n){return a(t,e,n)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(t,e,n){return u(t,e,n)},o.allocUnsafe=function(t){return c(t)},o.allocUnsafeSlow=function(t){return c(t)},o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);i<a;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=o.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=m,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t,e,n,r,i){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var a=i-r,s=n-e,u=Math.min(a,s),c=this.slice(r,i),l=t.slice(e,n),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},o.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{
type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=o.prototype,r},o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||C(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||C(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||C(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||C(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||C(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||C(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||C(t,4,this.length),Z.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||C(t,4,this.length),Z.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||C(t,8,this.length),Z.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||C(t,8,this.length),Z.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){D(this,t,e,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},o.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var a;if("number"==typeof t)for(a=e;a<n;++a)this[a]=t;else{var s=o.isBuffer(t)?t:new o(t,r),u=s.length;for(a=0;a<n-e;++a)this[a+e]=s[a%u]}return this}},{"base64-js":2,ieee754:11}],9:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===m(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===m(t)}function p(t){return"[object Error]"===m(t)||t instanceof Error}function d(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function m(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=v,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../is-buffer/index.js")})},{"../../is-buffer/index.js":13}],10:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;u<r;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],11:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},{}],12:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],13:[function(t,e,n){function r(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function i(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&r(t.slice(0,0))}e.exports=function(t){return null!=t&&(r(t)||i(t)||!!t._isBuffer)}},{}],14:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],15:[function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)return void t.set(e.subarray(n,n+r),i);for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){var e,n,r,i,o,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)o=t[e],a.set(o,i),i+=o.length;return a}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],16:[function(t,e,n){"use strict";function r(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){a=n>2e3?2e3:n,n-=a;do i=i+e[r++]|0,o=o+i|0;while(--a);i%=65521,o%=65521}return i|o<<16|0}e.exports=r},{}],17:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],18:[function(t,e,n){"use strict";function r(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}function i(t,e,n,r){var i=o,a=r+n;t^=-1;for(var s=r;s<a;s++)t=t>>>8^i[255&(t^e[s])];return t^-1}var o=r();e.exports=i},{}],19:[function(t,e,n){"use strict";function r(t,e){return t.msg=C[e],e}function i(t){return(t<<1)-(t>4?9:0)}function o(t){for(var e=t.length;--e>=0;)t[e]=0}function a(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(I.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function s(t,e){k._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,a(t.strm)}function u(t,e){t.pending_buf[t.pending++]=e}function c(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function l(t,e,n,r){var i=t.avail_in;return i>r&&(i=r),0===i?0:(t.avail_in-=i,I.arraySet(e,t.input,t.next_in,i,n),1===t.state.wrap?t.adler=P(t.adler,e,i,n):2===t.state.wrap&&(t.adler=N(t.adler,e,i,n)),t.next_in+=i,t.total_in+=i,i)}function f(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,u=t.strstart>t.w_size-262?t.strstart-(t.w_size-262):0,c=t.window,l=t.w_mask,f=t.prev,h=t.strstart+258,p=c[o+a-1],d=c[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do if(n=e,c[n+a]===d&&c[n+a-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do;while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<h);if(r=258-(h-o),o=h-258,r>a){if(t.match_start=e,a=r,r>=s)break;p=c[o+a-1],d=c[o+a]}}while((e=f[e&l])>u&&0!==--i);return a<=t.lookahead?a:t.lookahead}function h(t){var e,n,r,i,o,a=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=a+(a-262)){I.arraySet(t.window,t.window,a,a,0),t.match_start-=a,t.strstart-=a,t.block_start-=a,n=t.hash_size,e=n;do r=t.head[--e],t.head[e]=r>=a?r-a:0;while(--n);n=a,e=n;do r=t.prev[--e],t.prev[e]=r>=a?r-a:0;while(--n);i+=a}if(0===t.strm.avail_in)break;if(n=l(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+3-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<262&&0!==t.strm.avail_in)}function p(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(h(t),0===t.lookahead&&0===e)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,s(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-262&&(s(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(s(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(s(t,!1),0===t.strm.avail_out),1)}function d(t,e){for(var n,r;;){if(t.lookahead<262){if(h(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-262&&(t.match_length=f(t,n)),t.match_length>=3)if(r=k._tr_tally(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart;while(0!==--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(s(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,4===e?(s(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?1:2}function v(t,e){for(var n,r,i;;){if(t.lookahead<262){if(h(t),t.lookahead<262&&0===e)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-262&&(t.match_length=f(t,n),t.match_length<=5&&(1===t.strategy||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-3,r=k._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+3-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart);while(0!==--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(s(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(r=k._tr_tally(t,0,t.window[t.strstart-1]),r&&s(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=k._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,4===e?(s(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?1:2}function m(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=258){if(h(t),t.lookahead<=258&&0===e)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(i=t.strstart-1,r=a[i],r===a[++i]&&r===a[++i]&&r===a[++i])){o=t.strstart+258;do;while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=258-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=k._tr_tally(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(s(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(s(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?1:2}function y(t,e){for(var n;;){if(0===t.lookahead&&(h(t),0===t.lookahead)){if(0===e)return 1;break}if(t.match_length=0,n=k._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(s(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,4===e?(s(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(s(t,!1),0===t.strm.avail_out)?1:2}function g(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function _(t){t.window_size=2*t.w_size,o(t.head),t.max_lazy_match=R[t.level].max_lazy,t.good_match=R[t.level].good_length,t.nice_match=R[t.level].nice_length,t.max_chain_length=R[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}function b(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new I.Buf16(1146),this.dyn_dtree=new I.Buf16(122),this.bl_tree=new I.Buf16(78),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new I.Buf16(16),this.heap=new I.Buf16(573),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new I.Buf16(573),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=2,e=t.state,e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?42:113,t.adler=2===e.wrap?0:1,e.last_flush=0,k._tr_init(e),0):r(t,-2)}function x(t){var e=w(t);return 0===e&&_(t.state),e}function E(t,e){return t&&t.state?2!==t.state.wrap?-2:(t.state.gzhead=e,0):-2}function T(t,e,n,i,o,a){if(!t)return-2;var s=1;if(e===-1&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),o<1||o>9||8!==n||i<8||i>15||e<0||e>9||a<0||a>4)return r(t,-2);8===i&&(i=9);var u=new b;return t.state=u,u.strm=t,u.wrap=s,u.gzhead=null,u.w_bits=i,u.w_size=1<<u.w_bits,u.w_mask=u.w_size-1,u.hash_bits=o+7,u.hash_size=1<<u.hash_bits,u.hash_mask=u.hash_size-1,u.hash_shift=~~((u.hash_bits+3-1)/3),u.window=new I.Buf8(2*u.w_size),u.head=new I.Buf16(u.hash_size),u.prev=new I.Buf16(u.w_size),u.lit_bufsize=1<<o+6,u.pending_buf_size=4*u.lit_bufsize,u.pending_buf=new I.Buf8(u.pending_buf_size),u.d_buf=1*u.lit_bufsize,u.l_buf=3*u.lit_bufsize,u.level=e,u.strategy=a,u.method=n,x(t)}function S(t,e){return T(t,e,8,15,8,0)}function M(t,e){var n,s,l,f;if(!t||!t.state||e>5||e<0)return t?r(t,-2):-2;if(s=t.state,!t.output||!t.input&&0!==t.avail_in||666===s.status&&4!==e)return r(t,0===t.avail_out?-5:-2);if(s.strm=t,n=s.last_flush,s.last_flush=e,42===s.status)if(2===s.wrap)t.adler=0,u(s,31),u(s,139),u(s,8),s.gzhead?(u(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),u(s,255&s.gzhead.time),u(s,s.gzhead.time>>8&255),u(s,s.gzhead.time>>16&255),u(s,s.gzhead.time>>24&255),u(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),u(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(u(s,255&s.gzhead.extra.length),u(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(t.adler=N(t.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69):(u(s,0),u(s,0),u(s,0),u(s,0),u(s,0),u(s,9===s.level?2:s.strategy>=2||s.level<2?4:0),u(s,3),s.status=113);else{var h=8+(s.w_bits-8<<4)<<8,p=-1;p=s.strategy>=2||s.level<2?0:s.level<6?1:6===s.level?2:3,h|=p<<6,0!==s.strstart&&(h|=32),h+=31-h%31,s.status=113,c(s,h),0!==s.strstart&&(c(s,t.adler>>>16),c(s,65535&t.adler)),t.adler=1}if(69===s.status)if(s.gzhead.extra){for(l=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),a(t),l=s.pending,s.pending!==s.pending_buf_size));)u(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=73)}else s.status=73;if(73===s.status)if(s.gzhead.name){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),a(t),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.gzindex=0,s.status=91)}else s.status=91;if(91===s.status)if(s.gzhead.comment){l=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),a(t),l=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,u(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>l&&(t.adler=N(t.adler,s.pending_buf,s.pending-l,l)),0===f&&(s.status=103)}else s.status=103;if(103===s.status&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(t),s.pending+2<=s.pending_buf_size&&(u(s,255&t.adler),u(s,t.adler>>8&255),t.adler=0,s.status=113)):s.status=113),0!==s.pending){if(a(t),0===t.avail_out)return s.last_flush=-1,0}else if(0===t.avail_in&&i(e)<=i(n)&&4!==e)return r(t,-5);if(666===s.status&&0!==t.avail_in)return r(t,-5);if(0!==t.avail_in||0!==s.lookahead||0!==e&&666!==s.status){var d=2===s.strategy?y(s,e):3===s.strategy?m(s,e):R[s.level].func(s,e);if(3!==d&&4!==d||(s.status=666),1===d||3===d)return 0===t.avail_out&&(s.last_flush=-1),0;if(2===d&&(1===e?k._tr_align(s):5!==e&&(k._tr_stored_block(s,0,0,!1),3===e&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(t),0===t.avail_out))return s.last_flush=-1,0}return 4!==e?0:s.wrap<=0?1:(2===s.wrap?(u(s,255&t.adler),u(s,t.adler>>8&255),u(s,t.adler>>16&255),u(s,t.adler>>24&255),u(s,255&t.total_in),u(s,t.total_in>>8&255),u(s,t.total_in>>16&255),u(s,t.total_in>>24&255)):(c(s,t.adler>>>16),c(s,65535&t.adler)),a(t),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?0:1)}function O(t){var e;return t&&t.state?(e=t.state.status,42!==e&&69!==e&&73!==e&&91!==e&&103!==e&&113!==e&&666!==e?r(t,-2):(t.state=null,113===e?r(t,-3):0)):-2}function A(t,e){var n,r,i,a,s,u,c,l,f=e.length;if(!t||!t.state)return-2;if(n=t.state,a=n.wrap,2===a||1===a&&42!==n.status||n.lookahead)return-2;for(1===a&&(t.adler=P(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(o(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new I.Buf8(n.w_size),I.arraySet(l,e,f-n.w_size,n.w_size,0),e=l,f=n.w_size),s=t.avail_in,u=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,h(n);n.lookahead>=3;){r=n.strstart,i=n.lookahead-2;do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+3-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=2,h(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,t.next_in=u,t.input=c,t.avail_in=s,n.wrap=a,0}var R,I=t("../utils/common"),k=t("./trees"),P=t("./adler32"),N=t("./crc32"),C=t("./messages");R=[new g(0,0,0,0,p),new g(4,4,8,4,d),new g(4,5,16,8,d),new g(4,6,32,32,d),new g(4,4,16,16,v),new g(8,16,32,32,v),new g(8,16,128,128,v),new g(8,32,128,256,v),new g(32,128,258,1024,v),new g(32,258,258,4096,v)],n.deflateInit=S,n.deflateInit2=T,n.deflateReset=x,n.deflateResetKeep=w,n.deflateSetHeader=E,n.deflate=M,n.deflateEnd=O,n.deflateSetDictionary=A,n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":15,"./adler32":16,"./crc32":18,"./messages":23,"./trees":24}],20:[function(t,e,n){"use strict";e.exports=function(t,e){var n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,y,g,_,b,w,x,E,T,S,M;n=t.state,r=t.next_in,S=t.input,i=r+(t.avail_in-5),o=t.next_out,M=t.output,a=o-(e-t.avail_out),s=o+(t.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,p=n.hold,d=n.bits,v=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{d<15&&(p+=S[r++]<<d,d+=8,p+=S[r++]<<d,d+=8),_=v[p&y];e:for(;;){if(b=_>>>24,p>>>=b,d-=b,b=_>>>16&255,0===b)M[o++]=65535&_;else{if(!(16&b)){if(0===(64&b)){_=v[(65535&_)+(p&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}w=65535&_,b&=15,b&&(d<b&&(p+=S[r++]<<d,d+=8),w+=p&(1<<b)-1,p>>>=b,d-=b),d<15&&(p+=S[r++]<<d,d+=8,p+=S[r++]<<d,d+=8),_=m[p&g];n:for(;;){if(b=_>>>24,p>>>=b,d-=b,b=_>>>16&255,!(16&b)){if(0===(64&b)){_=m[(65535&_)+(p&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&_,b&=15,d<b&&(p+=S[r++]<<d,d+=8,d<b&&(p+=S[r++]<<d,d+=8)),x+=p&(1<<b)-1,x>u){t.msg="invalid distance too far back",n.mode=30;break t}if(p>>>=b,d-=b,b=o-a,x>b){if(b=x-b,b>l&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(E=0,T=h,0===f){if(E+=c-b,b<w){w-=b;do M[o++]=h[E++];while(--b);E=o-x,T=M}}else if(f<b){if(E+=c+f-b,b-=f,b<w){w-=b;do M[o++]=h[E++];while(--b);if(E=0,f<w){b=f,w-=b;do M[o++]=h[E++];while(--b);E=o-x,T=M}}}else if(E+=f-b,b<w){w-=b;do M[o++]=h[E++];while(--b);E=o-x,T=M}for(;w>2;)M[o++]=T[E++],M[o++]=T[E++],M[o++]=T[E++],w-=3;w&&(M[o++]=T[E++],w>1&&(M[o++]=T[E++]))}else{E=o-x;do M[o++]=M[E++],M[o++]=M[E++],M[o++]=M[E++],w-=3;while(w>2);w&&(M[o++]=M[E++],w>1&&(M[o++]=M[E++]))}break}}break}}while(r<i&&o<s);w=d>>3,r-=w,d-=w<<3,p&=(1<<d)-1,t.next_in=r,t.next_out=o,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=o<s?257+(s-o):257-(o-s),n.hold=p,n.bits=d}},{}],21:[function(t,e,n){"use strict";function r(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function o(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=1,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new g.Buf32(852),e.distcode=e.distdyn=new g.Buf32(592),e.sane=1,e.back=-1,0):-2}function a(t){var e;return t&&t.state?(e=t.state,e.wsize=0,e.whave=0,e.wnext=0,o(t)):-2}function s(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?-2:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,a(t))):-2}function u(t,e){var n,r;return t?(r=new i,t.state=r,r.window=null,n=s(t,e),0!==n&&(t.state=null),n):-2}function c(t){return u(t,15)}function l(t){if(E){var e;for(m=new g.Buf32(512),y=new g.Buf32(32),
e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(x(1,t.lens,0,288,m,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;x(2,t.lens,0,32,y,0,t.work,{bits:5}),E=!1}t.lencode=m,t.lenbits=9,t.distcode=y,t.distbits=5}function f(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new g.Buf8(o.wsize)),r>=o.wsize?(g.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i=o.wsize-o.wnext,i>r&&(i=r),g.arraySet(o.window,e,n-r,i,o.wnext),r-=i,r?(g.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}function h(t,e){var n,i,o,a,s,u,c,h,p,d,v,m,y,E,T,S,M,O,A,R,I,k,P,N,C=0,D=new g.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return-2;n=t.state,12===n.mode&&(n.mode=13),s=t.next_out,o=t.output,c=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,h=n.hold,p=n.bits,d=u,v=c,k=0;t:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;p<16;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(2&n.wrap&&35615===h){n.check=0,D[0]=255&h,D[1]=h>>>8&255,n.check=b(n.check,D,2,0),h=0,p=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!==(15&h)){t.msg="unknown compression method",n.mode=30;break}if(h>>>=4,p-=4,I=(15&h)+8,0===n.wbits)n.wbits=I;else if(I>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<I,t.adler=n.check=1,n.mode=512&h?10:12,h=0,p=0;break;case 2:for(;p<16;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(n.flags=h,8!==(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(D[0]=255&h,D[1]=h>>>8&255,n.check=b(n.check,D,2,0)),h=0,p=0,n.mode=3;case 3:for(;p<32;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.head&&(n.head.time=h),512&n.flags&&(D[0]=255&h,D[1]=h>>>8&255,D[2]=h>>>16&255,D[3]=h>>>24&255,n.check=b(n.check,D,4,0)),h=0,p=0,n.mode=4;case 4:for(;p<16;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(D[0]=255&h,D[1]=h>>>8&255,n.check=b(n.check,D,2,0)),h=0,p=0,n.mode=5;case 5:if(1024&n.flags){for(;p<16;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(D[0]=255&h,D[1]=h>>>8&255,n.check=b(n.check,D,2,0)),h=0,p=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(m=n.length,m>u&&(m=u),m&&(n.head&&(I=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,i,a,m,I)),512&n.flags&&(n.check=b(n.check,i,m,a)),u-=m,a+=m,n.length-=m),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break t;m=0;do I=i[a+m++],n.head&&I&&n.length<65536&&(n.head.name+=String.fromCharCode(I));while(I&&m<u);if(512&n.flags&&(n.check=b(n.check,i,m,a)),u-=m,a+=m,I)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break t;m=0;do I=i[a+m++],n.head&&I&&n.length<65536&&(n.head.comment+=String.fromCharCode(I));while(I&&m<u);if(512&n.flags&&(n.check=b(n.check,i,m,a)),u-=m,a+=m,I)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;p<16;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(h!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}h=0,p=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;p<32;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}t.adler=n.check=r(h),h=0,p=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=p,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){h>>>=7&p,p-=7&p,n.mode=27;break}for(;p<3;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}switch(n.last=1&h,h>>>=1,p-=1,3&h){case 0:n.mode=14;break;case 1:if(l(n),n.mode=20,6===e){h>>>=2,p-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}h>>>=2,p-=2;break;case 14:for(h>>>=7&p,p-=7&p;p<32;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if((65535&h)!==(h>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&h,h=0,p=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(m=n.length){if(m>u&&(m=u),m>c&&(m=c),0===m)break t;g.arraySet(o,i,a,m,s),u-=m,a+=m,c-=m,s+=m,n.length-=m;break}n.mode=12;break;case 17:for(;p<14;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(n.nlen=(31&h)+257,h>>>=5,p-=5,n.ndist=(31&h)+1,h>>>=5,p-=5,n.ncode=(15&h)+4,h>>>=4,p-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;p<3;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.lens[j[n.have++]]=7&h,h>>>=3,p-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,P={bits:n.lenbits},k=x(0,n.lens,0,19,n.lencode,0,n.work,P),n.lenbits=P.bits,k){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[h&(1<<n.lenbits)-1],T=C>>>24,S=C>>>16&255,M=65535&C,!(T<=p);){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(M<16)h>>>=T,p-=T,n.lens[n.have++]=M;else{if(16===M){for(N=T+2;p<N;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(h>>>=T,p-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}I=n.lens[n.have-1],m=3+(3&h),h>>>=2,p-=2}else if(17===M){for(N=T+3;p<N;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}h>>>=T,p-=T,I=0,m=3+(7&h),h>>>=3,p-=3}else{for(N=T+7;p<N;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}h>>>=T,p-=T,I=0,m=11+(127&h),h>>>=7,p-=7}if(n.have+m>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;m--;)n.lens[n.have++]=I}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,P={bits:n.lenbits},k=x(1,n.lens,0,n.nlen,n.lencode,0,n.work,P),n.lenbits=P.bits,k){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,P={bits:n.distbits},k=x(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,P),n.distbits=P.bits,k){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(u>=6&&c>=258){t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=p,w(t,v),s=t.next_out,o=t.output,c=t.avail_out,a=t.next_in,i=t.input,u=t.avail_in,h=n.hold,p=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;C=n.lencode[h&(1<<n.lenbits)-1],T=C>>>24,S=C>>>16&255,M=65535&C,!(T<=p);){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(S&&0===(240&S)){for(O=T,A=S,R=M;C=n.lencode[R+((h&(1<<O+A)-1)>>O)],T=C>>>24,S=C>>>16&255,M=65535&C,!(O+T<=p);){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}h>>>=O,p-=O,n.back+=O}if(h>>>=T,p-=T,n.back+=T,n.length=M,0===S){n.mode=26;break}if(32&S){n.back=-1,n.mode=12;break}if(64&S){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&S,n.mode=22;case 22:if(n.extra){for(N=n.extra;p<N;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;C=n.distcode[h&(1<<n.distbits)-1],T=C>>>24,S=C>>>16&255,M=65535&C,!(T<=p);){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(0===(240&S)){for(O=T,A=S,R=M;C=n.distcode[R+((h&(1<<O+A)-1)>>O)],T=C>>>24,S=C>>>16&255,M=65535&C,!(O+T<=p);){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}h>>>=O,p-=O,n.back+=O}if(h>>>=T,p-=T,n.back+=T,64&S){t.msg="invalid distance code",n.mode=30;break}n.offset=M,n.extra=15&S,n.mode=24;case 24:if(n.extra){for(N=n.extra;p<N;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,p-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===c)break t;if(m=v-c,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}m>n.wnext?(m-=n.wnext,y=n.wsize-m):y=n.wnext-m,m>n.length&&(m=n.length),E=n.window}else E=o,y=s-n.offset,m=n.length;m>c&&(m=c),c-=m,n.length-=m;do o[s++]=E[y++];while(--m);0===n.length&&(n.mode=21);break;case 26:if(0===c)break t;o[s++]=n.length,c--,n.mode=21;break;case 27:if(n.wrap){for(;p<32;){if(0===u)break t;u--,h|=i[a++]<<p,p+=8}if(v-=c,t.total_out+=v,n.total+=v,v&&(t.adler=n.check=n.flags?b(n.check,o,v,s-v):_(n.check,o,v,s-v)),v=c,(n.flags?h:r(h))!==n.check){t.msg="incorrect data check",n.mode=30;break}h=0,p=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;p<32;){if(0===u)break t;u--,h+=i[a++]<<p,p+=8}if(h!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}h=0,p=0}n.mode=29;case 29:k=1;break t;case 30:k=-3;break t;case 31:return-4;case 32:default:return-2}return t.next_out=s,t.avail_out=c,t.next_in=a,t.avail_in=u,n.hold=h,n.bits=p,(n.wsize||v!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&f(t,t.output,t.next_out,v-t.avail_out)?(n.mode=31,-4):(d-=t.avail_in,v-=t.avail_out,t.total_in+=d,t.total_out+=v,n.total+=v,n.wrap&&v&&(t.adler=n.check=n.flags?b(n.check,o,v,t.next_out-v):_(n.check,o,v,t.next_out-v)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===d&&0===v||4===e)&&0===k&&(k=-5),k)}function p(t){if(!t||!t.state)return-2;var e=t.state;return e.window&&(e.window=null),t.state=null,0}function d(t,e){var n;return t&&t.state?(n=t.state,0===(2&n.wrap)?-2:(n.head=e,e.done=!1,0)):-2}function v(t,e){var n,r,i=e.length;return t&&t.state?(n=t.state,0!==n.wrap&&11!==n.mode?-2:11===n.mode&&(r=1,r=_(r,e,i,0),r!==n.check)?-3:f(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,0)):-2}var m,y,g=t("../utils/common"),_=t("./adler32"),b=t("./crc32"),w=t("./inffast"),x=t("./inftrees"),E=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=o,n.inflateInit=c,n.inflateInit2=u,n.inflate=h,n.inflateEnd=p,n.inflateGetHeader=d,n.inflateSetDictionary=v,n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":15,"./adler32":16,"./crc32":18,"./inffast":20,"./inftrees":22}],22:[function(t,e,n){"use strict";var r=t("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,u,c,l,f,h){var p,d,v,m,y,g,_,b,w,x=h.bits,E=0,T=0,S=0,M=0,O=0,A=0,R=0,I=0,k=0,P=0,N=null,C=0,D=new r.Buf16(16),j=new r.Buf16(16),L=null,F=0;for(E=0;E<=15;E++)D[E]=0;for(T=0;T<u;T++)D[e[n+T]]++;for(O=x,M=15;M>=1&&0===D[M];M--);if(O>M&&(O=M),0===M)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(S=1;S<M&&0===D[S];S++);for(O<S&&(O=S),I=1,E=1;E<=15;E++)if(I<<=1,I-=D[E],I<0)return-1;if(I>0&&(0===t||1!==M))return-1;for(j[1]=0,E=1;E<15;E++)j[E+1]=j[E]+D[E];for(T=0;T<u;T++)0!==e[n+T]&&(f[j[e[n+T]]++]=T);if(0===t?(N=L=f,g=19):1===t?(N=i,C-=257,L=o,F-=257,g=256):(N=a,L=s,g=-1),P=0,T=0,E=S,y=l,A=O,R=0,v=-1,k=1<<O,m=k-1,1===t&&k>852||2===t&&k>592)return 1;for(var U=0;;){U++,_=E-R,f[T]<g?(b=0,w=f[T]):f[T]>g?(b=L[F+f[T]],w=N[C+f[T]]):(b=96,w=0),p=1<<E-R,d=1<<A,S=d;do d-=p,c[y+(P>>R)+d]=_<<24|b<<16|w|0;while(0!==d);for(p=1<<E-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,T++,0===--D[E]){if(E===M)break;E=e[n+f[T]]}if(E>O&&(P&m)!==v){for(0===R&&(R=O),y+=S,A=E-R,I=1<<A;A+R<M&&(I-=D[A+R],!(I<=0));)A++,I<<=1;if(k+=1<<A,1===t&&k>852||2===t&&k>592)return 1;v=P&m,c[v]=O<<24|A<<16|y-l|0}}return 0!==P&&(c[y+P]=E-R<<24|64<<16|0),h.bits=O,0}},{"../utils/common":15}],23:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],24:[function(t,e,n){"use strict";function r(t){for(var e=t.length;--e>=0;)t[e]=0}function i(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function a(t){return t<256?U[t]:U[256+(t>>>7)]}function s(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function u(t,e,n){t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,s(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function c(t,e,n){u(t,n[2*e],n[2*e+1])}function l(t,e){var n=0;do n|=1&t,t>>>=1,n<<=1;while(--e>0);return n>>>1}function f(t){16===t.bi_valid?(s(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}function h(t,e){var n,r,i,o,a,s,u=e.dyn_tree,c=e.max_code,l=e.stat_desc.static_tree,f=e.stat_desc.has_stree,h=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,d=e.stat_desc.max_length,v=0;for(o=0;o<=15;o++)t.bl_count[o]=0;for(u[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<573;n++)r=t.heap[n],o=u[2*u[2*r+1]+1]+1,o>d&&(o=d,v++),u[2*r+1]=o,r>c||(t.bl_count[o]++,a=0,r>=p&&(a=h[r-p]),s=u[2*r],t.opt_len+=s*(o+a),f&&(t.static_len+=s*(l[2*r+1]+a)));if(0!==v){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,v-=2}while(v>0);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)i=t.heap[--n],i>c||(u[2*i+1]!==o&&(t.opt_len+=(o-u[2*i+1])*u[2*i],u[2*i+1]=o),r--)}}function p(t,e,n){var r,i,o=new Array(16),a=0;for(r=1;r<=15;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var s=t[2*i+1];0!==s&&(t[2*i]=l(o[s]++,s))}}function d(){var t,e,n,r,o,a=new Array(16);for(n=0,r=0;r<28;r++)for(B[r]=n,t=0;t<1<<N[r];t++)z[n++]=r;for(z[n-1]=r,o=0,r=0;r<16;r++)for(V[r]=o,t=0;t<1<<C[r];t++)U[o++]=r;for(o>>=7;r<30;r++)for(V[r]=o<<7,t=0;t<1<<C[r]-7;t++)U[256+o++]=r;for(e=0;e<=15;e++)a[e]=0;for(t=0;t<=143;)L[2*t+1]=8,t++,a[8]++;for(;t<=255;)L[2*t+1]=9,t++,a[9]++;for(;t<=279;)L[2*t+1]=7,t++,a[7]++;for(;t<=287;)L[2*t+1]=8,t++,a[8]++;for(p(L,287,a),t=0;t<30;t++)F[2*t+1]=5,F[2*t]=l(t,5);G=new i(L,N,257,286,15),H=new i(F,C,0,30,15),W=new i(new Array(0),D,0,19,7)}function v(t){var e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function m(t){t.bi_valid>8?s(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function y(t,e,n,r){m(t),r&&(s(t,n),s(t,~n)),P.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}function g(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function _(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&g(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!g(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function b(t,e,n){var r,i,o,s,l=0;if(0!==t.last_lit)do r=t.pending_buf[t.d_buf+2*l]<<8|t.pending_buf[t.d_buf+2*l+1],i=t.pending_buf[t.l_buf+l],l++,0===r?c(t,i,e):(o=z[i],c(t,o+256+1,e),s=N[o],0!==s&&(i-=B[o],u(t,i,s)),r--,o=a(r),c(t,o,n),s=C[o],0!==s&&(r-=V[o],u(t,r,s)));while(l<t.last_lit);c(t,256,e)}function w(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,u=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=573,n=0;n<u;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)i=t.heap[++t.heap_len]=c<2?++c:0,o[2*i]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)_(t,o,n);i=u;do n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],_(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,_(t,o,1);while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],h(t,e),p(o,c,t.bl_count)}function x(t,e,n){var r,i,o=-1,a=e[1],s=0,u=7,c=4;for(0===a&&(u=138,c=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<u&&i===a||(s<c?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[32]++):s<=10?t.bl_tree[34]++:t.bl_tree[36]++,s=0,o=i,0===a?(u=138,c=3):i===a?(u=6,c=3):(u=7,c=4))}function E(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,f=4;for(0===a&&(l=138,f=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<f){do c(t,i,t.bl_tree);while(0!==--s)}else 0!==i?(i!==o&&(c(t,i,t.bl_tree),s--),c(t,16,t.bl_tree),u(t,s-3,2)):s<=10?(c(t,17,t.bl_tree),u(t,s-3,3)):(c(t,18,t.bl_tree),u(t,s-11,7));s=0,o=i,0===a?(l=138,f=3):i===a?(l=6,f=3):(l=7,f=4)}}function T(t){var e;for(x(t,t.dyn_ltree,t.l_desc.max_code),x(t,t.dyn_dtree,t.d_desc.max_code),w(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*j[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}function S(t,e,n,r){var i;for(u(t,e-257,5),u(t,n-1,5),u(t,r-4,4),i=0;i<r;i++)u(t,t.bl_tree[2*j[i]+1],3);E(t,t.dyn_ltree,e-1),E(t,t.dyn_dtree,n-1)}function M(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0}function O(t){q||(d(),q=!0),t.l_desc=new o(t.dyn_ltree,G),t.d_desc=new o(t.dyn_dtree,H),t.bl_desc=new o(t.bl_tree,W),t.bi_buf=0,t.bi_valid=0,v(t)}function A(t,e,n,r){u(t,0+(r?1:0),3),y(t,e,n,!0)}function R(t){u(t,2,3),c(t,256,L),f(t)}function I(t,e,n,r){var i,o,a=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=M(t)),w(t,t.l_desc),w(t,t.d_desc),a=T(t),i=t.opt_len+3+7>>>3,o=t.static_len+3+7>>>3,o<=i&&(i=o)):i=o=n+5,n+4<=i&&e!==-1?A(t,e,n,r):4===t.strategy||o===i?(u(t,2+(r?1:0),3),b(t,L,F)):(u(t,4+(r?1:0),3),S(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),b(t,t.dyn_ltree,t.dyn_dtree)),v(t),r&&m(t)}function k(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(z[n]+256+1)]++,t.dyn_dtree[2*a(e)]++),t.last_lit===t.lit_bufsize-1}var P=t("../utils/common"),N=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=new Array(576);r(L);var F=new Array(60);r(F);var U=new Array(512);r(U);var z=new Array(256);r(z);var B=new Array(29);r(B);var V=new Array(30);r(V);var G,H,W,q=!1;n._tr_init=O,n._tr_stored_block=A,n._tr_flush_block=I,n._tr_tally=k,n._tr_align=R},{"../utils/common":15}],25:[function(t,e,n){"use strict";function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=r},{}],26:[function(t,e,n){(function(t){function e(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(n=a+"/"+n,i="/"===a.charAt(0))}return n=e(r(n.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(t){var i=n.isAbsolute(t),o="/"===a(t,-1);return t=e(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},n.isAbsolute=function(t){return"/"===t.charAt(0)},n.join=function(){var t=Array.prototype.slice.call(arguments,0);return n.normalize(r(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},n.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=n.resolve(t).substr(1),e=n.resolve(e).substr(1);for(var i=r(t.split("/")),o=r(e.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}for(var c=[],u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},n.extname=function(t){return o(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,t("_process"))},{_process:28}],27:[function(t,e,n){(function(t){"use strict";function n(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,n)});case 3:return t.nextTick(function(){e.call(null,n,r)});case 4:return t.nextTick(function(){e.call(null,n,r,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=n:e.exports=t.nextTick}).call(this,t("_process"))},{_process:28}],28:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function a(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?v=d.concat(v):y=-1,v.length&&u())}function u(){if(!m){var t=o(s);m=!0;for(var e=v.length;e;){for(d=v,v=[];++y<e;)d&&d[y].run();y=-1,e=v.length}d=null,m=!1,a(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var f,h,p=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var d,v=[],m=!1,y=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new c(t,e)),1!==v.length||m||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],29:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":30}],30:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);c.call(this,t),l.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(t){t.end()}var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};e.exports=r;var s=t("process-nextick-args"),u=t("core-util-is");u.inherits=t("inherits");var c=t("./_stream_readable"),l=t("./_stream_writable");u.inherits(r,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];r.prototype[p]||(r.prototype[p]=l.prototype[p])}},{"./_stream_readable":32,"./_stream_writable":34,"core-util-is":9,inherits:12,"process-nextick-args":27}],31:[function(t,e,n){"use strict";function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":33,"core-util-is":9,inherits:12}],32:[function(t,e,n){(function(n){"use strict";function r(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?k(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}function i(e,n){R=R||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof R&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new z,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(U||(U=t("string_decoder/").StringDecoder),this.decoder=new U(e.encoding),this.encoding=e.encoding)}function o(e){if(R=R||t("./_stream_duplex"),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),P.call(this)}function a(t,e,n,r,i){var o=l(e,n);if(o)t.emit("error",o);else if(null===n)e.reading=!1,f(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var c;!e.decoder||i||r||(n=e.decoder.write(n),c=!e.objectMode&&0===n.length),i||(e.reading=!1),c||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&h(t))),d(t,e)}else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){return t>=8388608?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function c(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function l(t,e){var n=null;return C.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,h(t)}}function h(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(F("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?I(p,t):p(t))}function p(t){F("emit readable"),t.emit("readable"),b(t)}function d(t,e){e.readingMore||(e.readingMore=!0,I(v,t,e))}function v(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(F("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;F("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&N(t,"data")&&(e.flowing=!0,b(t))}}function y(t){F("readable nexttick read 0"),t.read(0)}function g(t,e){e.resumeScheduled||(e.resumeScheduled=!0,I(_,t,e))}function _(t,e){e.reading||(F("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),b(t),e.flowing&&!e.reading&&t.read(0)}function b(t){var e=t._readableState;for(F("flow",e.flowing);e.flowing&&null!==t.read(););}function w(t,e){if(0===e.length)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=x(t,e.buffer,e.decoder),n}function x(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?E(t,e):T(t,e),r}function E(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(i+=a===o.length?o:o.slice(0,t),t-=a,0===t){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}function T(t,e){var n=D.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),t-=a,0===t){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}function S(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,I(M,e,t))}function M(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function A(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=o;var R,I=t("process-nextick-args"),k=t("isarray");o.ReadableState=i;var P,N=(t("events").EventEmitter,function(t,e){return t.listeners(e).length});!function(){try{P=t("stream")}catch(t){}finally{P||(P=t("events").EventEmitter)}}();var C=t("buffer").Buffer,D=t("buffer-shims"),j=t("core-util-is");j.inherits=t("inherits");var L=t("util"),F=void 0;F=L&&L.debuglog?L.debuglog("stream"):function(){};var U,z=t("./internal/streams/BufferList");j.inherits(o,P),o.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding,e!==n.encoding&&(t=D.from(t,e),e="")),a(this,n,t,e,!1)},o.prototype.unshift=function(t){return a(this,this._readableState,t,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return U||(U=t("string_decoder/").StringDecoder),this._readableState.decoder=new U(e),this._readableState.encoding=e,this};o.prototype.read=function(t){F("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return F("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?S(this):h(this),null;if(t=c(t,e),0===t&&e.ended)return 0===e.length&&S(this),null;var r=e.needReadable;F("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,F("length less than watermark",r)),e.ended||e.reading?(r=!1,F("reading or ended",r)):r&&(F("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=c(n,e)));var i;return i=t>0?w(t,e):null,null===i?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&S(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(t,e){function i(t){F("onunpipe"),t===h&&a()}function o(){F("onend"),t.end()}function a(){F("cleanup"),t.removeListener("close",c),t.removeListener("finish",l),t.removeListener("drain",y),t.removeListener("error",u),t.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",a),h.removeListener("data",s),g=!0,!p.awaitDrain||t._writableState&&!t._writableState.needDrain||y()}function s(e){F("ondata"),_=!1,!1!==t.write(e)||_||((1===p.pipesCount&&p.pipes===t||p.pipesCount>1&&A(p.pipes,t)!==-1)&&!g&&(F("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,_=!0),h.pause())}function u(e){F("onerror",e),f(),t.removeListener("error",u),0===N(t,"error")&&t.emit("error",e)}function c(){t.removeListener("finish",l),f()}function l(){F("onfinish"),t.removeListener("close",c),f()}function f(){F("unpipe"),h.unpipe(t)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=t;break;case 1:p.pipes=[p.pipes,t];break;default:p.pipes.push(t)}p.pipesCount+=1,F("pipe count=%d opts=%j",p.pipesCount,e)
;var d=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,v=d?o:a;p.endEmitted?I(v):h.once("end",v),t.on("unpipe",i);var y=m(h);t.on("drain",y);var g=!1,_=!1;return h.on("data",s),r(t,"error",u),t.once("close",c),t.once("finish",l),t.emit("pipe",h),p.flowing||(F("pipe resume"),h.resume()),t},o.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var o=A(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},o.prototype.on=function(t,e){var n=P.prototype.on.call(this,t,e);if("data"===t)this._readableState.flowing!==!1&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&h(this,r):I(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var t=this._readableState;return t.flowing||(F("resume"),t.flowing=!0,g(this,t)),this},o.prototype.pause=function(){return F("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(F("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(F("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(F("wrapped data"),e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){r.push(i)||(n=!0,t.pause())}});for(var i in t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return O(["error","close","destroy","pause","resume"],function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){F("wrapped _read",e),n&&(n=!1,t.resume())},r},o._fromList=w}).call(this,t("_process"))},{"./_stream_duplex":30,"./internal/streams/BufferList":35,_process:28,buffer:8,"buffer-shims":7,"core-util-is":9,events:10,inherits:12,isarray:14,"process-nextick-args":27,"string_decoder/":41,util:3}],33:[function(t,e,n){"use strict";function r(t){this.afterTransform=function(e,n){return i(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new r(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t,n){a(e,t,n)}):a(e)})}function a(t,e,n){if(e)return t.emit("error",e);null!==n&&void 0!==n&&t.push(n);var r=t._writableState,i=t._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":30,"core-util-is":9,inherits:12}],34:[function(t,e,n){(function(n){"use strict";function r(){}function i(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function o(e,n){E=E||t("./_stream_duplex"),e=e||{},this.objectMode=!!e.objectMode,n instanceof E&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){d(n,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new x(this)}function a(e){if(E=E||t("./_stream_duplex"),!(k.call(a,this)||this instanceof E))return new a(e);this._writableState=new o(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),O.call(this)}function s(t,e){var n=new Error("write after end");t.emit("error",n),T(e,n)}function u(t,e,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):R.isBuffer(n)||"string"==typeof n||void 0===n||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),T(r,o),i=!1),i}function c(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=I.from(e,n)),e}function l(t,e,n,r,o){n=c(e,n,r),R.isBuffer(n)&&(r="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;if(s||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new i(n,r,o),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else f(t,e,!1,a,n,r,o);return s}function f(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,n,r,i){--e.pendingcb,n?T(i,r):i(r),t._writableState.errorEmitted=!0,t.emit("error",r)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function d(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(p(n),e)h(t,n,r,e,i);else{var o=g(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(t,n),r?S(v,t,n,o,i):v(t,n,o,i)}}function v(t,e,n,r){n||m(t,e),e.pendingcb--,r(),b(t,e)}function m(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function y(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0;n;)i[a]=n,n=n.next,a+=1;f(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new x(e)}else{for(;n;){var s=n.chunk,u=n.encoding,c=n.callback;if(f(t,e,!1,e.objectMode?1:s.length,s,u,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function g(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function _(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=g(e);return n&&(0===e.pendingcb?(_(t,e),e.finished=!0,t.emit("finish")):_(t,e)),n}function w(t,e,n){e.ending=!0,b(t,e),n&&(e.finished?T(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function x(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}e.exports=a;var E,T=t("process-nextick-args"),S=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:T;a.WritableState=o;var M=t("core-util-is");M.inherits=t("inherits");var O,A={deprecate:t("util-deprecate")};!function(){try{O=t("stream")}catch(t){}finally{O||(O=t("events").EventEmitter)}}();var R=t("buffer").Buffer,I=t("buffer-shims");M.inherits(a,O),o.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(o.prototype,"buffer",{get:A.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(t){}}();var k;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(t){return!!k.call(this,t)||t&&t._writableState instanceof o}})):k=function(t){return t instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(t,e,n){var i=this._writableState,o=!1;return"function"==typeof e&&(n=e,e=null),R.isBuffer(t)?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?s(this,n):u(this,i,t,n)&&(i.pendingcb++,o=l(this,i,t,e,n)),o},a.prototype.cork=function(){this._writableState.corked++},a.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||y(this,t))},a.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},a.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!==t&&void 0!==t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":30,_process:28,buffer:8,"buffer-shims":7,"core-util-is":9,events:10,inherits:12,"process-nextick-args":27,"util-deprecate":42}],35:[function(t,e,n){"use strict";function r(){this.head=null,this.tail=null,this.length=0}var i=(t("buffer").Buffer,t("buffer-shims"));e.exports=r,r.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},r.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},r.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},r.prototype.clear=function(){this.head=this.tail=null,this.length=0},r.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},r.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),n=this.head,r=0;n;)n.data.copy(e,r),r+=n.data.length,n=n.next;return e}},{buffer:8,"buffer-shims":7}],36:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":31}],37:[function(t,e,n){(function(r){var i=function(){try{return t("stream")}catch(t){}}();n=e.exports=t("./lib/_stream_readable.js"),n.Stream=i||n,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(e.exports=i)}).call(this,t("_process"))},{"./lib/_stream_duplex.js":30,"./lib/_stream_passthrough.js":31,"./lib/_stream_readable.js":32,"./lib/_stream_transform.js":33,"./lib/_stream_writable.js":34,_process:28}],38:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":33}],39:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":34}],40:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter;t("inherits")(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,t.end())}function a(){l||(l=!0,"function"==typeof t.destroy&&t.destroy())}function s(t){if(u(),0===i.listenerCount(this,"error"))throw t}function u(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),t.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),t.removeListener("close",u)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),t.on("error",s),c.on("end",u),c.on("close",u),t.on("close",u),t.emit("pipe",c),t}},{events:10,inherits:12,"readable-stream/duplex.js":29,"readable-stream/passthrough.js":36,"readable-stream/readable.js":37,"readable-stream/transform.js":38,"readable-stream/writable.js":39}],41:[function(t,e,n){function r(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function a(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var s=t("buffer").Buffer,u=s.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&r<=56319)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&r<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:8}],42:[function(t,e,n){(function(t){function n(t,e){function n(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}if(r("noDeprecation"))return t;var i=!1;return n}function r(e){try{if(!t.localStorage)return!1}catch(t){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],43:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],44:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],45:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(e)?r.showHidden=e:e&&n._extend(r,e),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&M(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return _(i)||(i=u(t,i,r)),i}var o=c(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),S(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(M(e)){var m=e.name?": "+e.name:"";return t.stylize("[Function"+m+"]","special")}if(x(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(T(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return l(e)}var y="",g=!1,b=["{","}"];if(d(e)&&(g=!0,b=["[","]"]),M(e)){y=" [Function"+(e.name?": "+e.name:"")+"]"}if(x(e)&&(y=" "+RegExp.prototype.toString.call(e)),T(e)&&(y=" "+Date.prototype.toUTCString.call(e)),S(e)&&(y=" "+l(e)),0===a.length&&(!g||0==e.length))return b[0]+y+b[1];if(r<0)return x(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var w;return w=g?f(t,e,r,v,a):a.map(function(n){return h(t,e,r,v,n,g)}),t.seen.pop(),p(w,y,b)}function c(t,e){if(w(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return g(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):m(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)k(e,String(a))?o.push(h(t,e,n,r,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,n,r,i,!0))}),o}function h(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),k(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=m(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,n){var r=0;return t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function m(t){return null===t}function y(t){return null==t}function g(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function w(t){return void 0===t}function x(t){return E(t)&&"[object RegExp]"===A(t)}function E(t){return"object"==typeof t&&null!==t}function T(t){return E(t)&&"[object Date]"===A(t)}function S(t){return E(t)&&("[object Error]"===A(t)||t instanceof Error)}function M(t){return"function"==typeof t}function O(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function A(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}function I(){var t=new Date,e=[R(t.getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":");return[t.getDate(),C[t.getMonth()],e].join(" ")}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}n.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(/%[sdj%]/g,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),s=r[n];n<o;s=r[++n])a+=m(s)||!E(s)?" "+s:" "+i(s);return a},n.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var P,N={};n.debuglog=function(t){if(w(P)&&(P=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!N[t])if(new RegExp("\\b"+t+"\\b","i").test(P)){var r=e.pid;N[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else N[t]=function(){};return N[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=d,n.isBoolean=v,n.isNull=m,n.isNullOrUndefined=y,n.isNumber=g,n.isString=_,n.isSymbol=b,n.isUndefined=w,n.isRegExp=x,n.isObject=E,n.isDate=T,n.isError=S,n.isFunction=M,n.isPrimitive=O,n.isBuffer=t("./support/isBuffer");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",I(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!E(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":44,_process:28,inherits:43}],46:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();t("babel-polyfill");var c=t("react"),l=r(c),f=t("d3"),h=t("react-dom"),p=t("deck.gl/react"),d=r(p),v=t("deck.gl"),m=t("react-map-gl"),y=r(m),g=t("react-map-gl-heatmap-overlay"),_=r(g);t("whatwg-fetch");var b="pk.eyJ1IjoiZnNjaHVsdHoiLCJhIjoieUlyWkhQZyJ9.b0UF4_X5Zm7bMsKRtPihYA",w=function(t){function e(){i(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={isLoading:!0,viewport:{latitude:52.520551,longitude:13.40857,zoom:14},width:window.innerWidth,height:window.innerHeight,data:[],layer:"default",count:0},t.handleLayerChange=t.handleLayerChange.bind(t),t}return a(e,t),u(e,[{key:"componentDidMount",value:function(){var t=this;fetch("/places_full.json").then(function(t){return t.json()}).then(function(e){return t.setState({data:e.p,isLoading:!1})})}},{key:"handleLayerChange",value:function(t){this.setState({layer:t.target.value,count:this.state.count+1})}},{key:"render",value:function(){var t=this,e=this.state,n=e.viewport,r=e.width,i=e.height;e.layer;return l.default.createElement("div",null,l.default.createElement("div",{className:"isLoading"+(this.state.isLoading?"":" hide")},"Downloading the data..."),l.default.createElement(x,{feature:this.state.feature,layer:this.state.layer}),l.default.createElement(E,{handleLayerChange:this.handleLayerChange,layer:this.state.layer}),l.default.createElement(y.default,s({},n,{mapStyle:"mapbox://styles/mapbox/dark-v9",onChangeViewport:function(e){return t.setState({viewport:e})},preventStyleDiffing:!1,mapboxApiAccessToken:b,perspectiveEnabled:!0,width:r,height:i}),this.handleLayerRender()))}},{key:"handleLayerRender",value:function(t){switch(this.state.layer){case"default":return this.renderDefault();case"price":return this.renderPriceScatter();case"reviews":return this.renderHeatmap()}}},{key:"renderPriceScatter",value:function(){var t=this,e=this.state,n=e.viewport,r=e.width,i=e.height,o=e.data,a=[[184,67,110],[200,107,142],[245,222,230],[251,240,244]],u=["","","",""],c=(0,f.scaleLinear)().domain([0,20]).range([2,.05]).nice(),h=[new v.ScatterplotLayer({data:o,getPosition:function(t){return[t.geometry.coordinates[0],t.geometry.coordinates[1],0]},getColor:function(t){return t.properties.p?a[u.indexOf(t.properties.p)]:[0,0,0,0]},getRadius:function(t){return c(n.zoom)},pickable:!0,onClick:function(e){return t.setState({feature:e.object.properties})},updateTriggers:{instanceRadius:{viewport:n},instanceColors:{updateCount:this.state.count}}})];return l.default.createElement(d.default,s({},n,{width:r,height:i,layers:h,debug:!0}))}},{key:"renderDefault",value:function(){var t=this,e=this.state,n=e.viewport,r=e.width,i=e.height,o=e.data,a=(0,f.scaleLinear)().domain([0,20]).range([2,.05]).nice(),u=[new v.ScatterplotLayer({data:o,getPosition:function(t){return[t.geometry.coordinates[0],t.geometry.coordinates[1],0]},getColor:function(){return[20,183,244,180]},getRadius:function(t){return a(n.zoom)},pickable:!0,onClick:function(e){return t.setState({feature:e.object.properties})},updateTriggers:{instanceRadius:{viewport:n},instanceColors:{updateCount:this.state.count}}})];return u[0].finalizeState(),l.default.createElement(d.default,s({},n,{width:r,height:i,layers:u,debug:!0}))}},{key:"renderHeatmap",value:function(){var t=this.state,e=t.viewport,n=t.width,r=t.height,i=t.data,o=((0,f.scaleLinear)().domain([0,200]).range([0,1]).nice(),(0,f.scaleLinear)().domain([0,80]).range([10,80]).nice());return l.default.createElement(_.default,s({locations:i},e,{width:n,height:r,lngLatAccessor:function(t){return[t.geometry.coordinates[0],t.geometry.coordinates[1]]},sizeAccessor:function(t){return o(t.properties.c)}}))}}]),e}(c.Component),x=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"render",value:function(){return"reviews"==this.props.layer?l.default.createElement("div",null):this.props.feature?l.default.createElement("div",{className:"info"},l.default.createElement("h3",null,this.props.feature.n),this.props.feature.t?l.default.createElement("p",null,this.props.feature.t):null,l.default.createElement("ul",null,0!=this.props.feature.c?l.default.createElement("li",null,this.props.feature.r," "):null,0!=this.props.feature.c?l.default.createElement("li",null,this.props.feature.c," review(s)"):null,this.props.feature.p?l.default.createElement("li",null,this.props.feature.p):null)):l.default.createElement("div",{className:"info"},l.default.createElement("span",null,"Click on a dot to view its details."))}}]),e}(c.Component),E=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),u(e,[{key:"render",value:function(){return l.default.createElement("div",{className:"select"},l.default.createElement("select",{value:this.props.layer,onChange:this.props.handleLayerChange},l.default.createElement("option",{value:"default"},"Default"),l.default.createElement("option",{value:"price"},"Price Scatterplot"),l.default.createElement("option",{value:"reviews"},"Reviews Heatmap")))}}]),e}(c.Component),T=document.getElementById("root");(0,h.render)(l.default.createElement(w,null),T)},{"babel-polyfill":50,d3:364,"deck.gl":417,"deck.gl/react":421,react:956,"react-dom":788,"react-map-gl":931,"react-map-gl-heatmap-overlay":915,"whatwg-fetch":991}],47:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.glMatrix=r()}(this,function(){"use strict";function t(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}function e(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function n(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function r(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function i(){var t=new Float32Array(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t}function a(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t}function s(){var t=new Float32Array(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function u(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function c(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],y=e[15],g=n*s-r*a,_=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,E=i*c-o*u,T=l*v-f*d,S=l*m-h*d,M=l*y-p*d,O=f*m-h*v,A=f*y-p*v,R=h*y-p*m,I=g*R-_*A+b*O+w*M-x*S+E*T;return I?(I=1/I,t[0]=(s*R-u*A+c*O)*I,t[1]=(i*A-r*R-o*O)*I,t[2]=(v*E-m*x+y*w)*I,t[3]=(h*x-f*E-p*w)*I,t[4]=(u*M-a*R-c*S)*I,t[5]=(n*R-i*M+o*S)*I,t[6]=(m*b-d*E-y*_)*I,t[7]=(l*E-h*b+p*_)*I,t[8]=(a*A-s*M+c*T)*I,t[9]=(r*M-n*A-o*T)*I,t[10]=(d*x-v*b+y*g)*I,t[11]=(f*b-l*x-p*g)*I,t[12]=(s*S-a*O-u*T)*I,t[13]=(n*O-r*S+i*T)*I,t[14]=(v*_-d*w-m*g)*I,t[15]=(l*w-f*_+h*g)*I,t):null}function h(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],y=e[14],g=e[15],_=n[0],b=n[1],w=n[2],x=n[3];return t[0]=_*r+b*s+w*f+x*v,t[1]=_*i+b*u+w*h+x*m,t[2]=_*o+b*c+w*p+x*y,t[3]=_*a+b*l+w*d+x*g,_=n[4],b=n[5],w=n[6],x=n[7],t[4]=_*r+b*s+w*f+x*v,
t[5]=_*i+b*u+w*h+x*m,t[6]=_*o+b*c+w*p+x*y,t[7]=_*a+b*l+w*d+x*g,_=n[8],b=n[9],w=n[10],x=n[11],t[8]=_*r+b*s+w*f+x*v,t[9]=_*i+b*u+w*h+x*m,t[10]=_*o+b*c+w*p+x*y,t[11]=_*a+b*l+w*d+x*g,_=n[12],b=n[13],w=n[14],x=n[15],t[12]=_*r+b*s+w*f+x*v,t[13]=_*i+b*u+w*h+x*m,t[14]=_*o+b*c+w*p+x*y,t[15]=_*a+b*l+w*d+x*g,t}function p(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*y+e[12],t[13]=i*v+u*m+h*y+e[13],t[14]=o*v+c*m+p*y+e[14],t[15]=a*v+l*m+d*y+e[15]),t}function d(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function v(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t}function m(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t}function y(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function g(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t}t(),n();return{vec3:{transformMat3:e},vec4:{transformMat4:r},mat2:{create:i,rotate:o,scale:a},mat3:{create:s,fromRotation:u},mat4:{create:c,identity:l,translate:p,scale:d,multiply:h,perspective:y,rotateX:v,rotateZ:m,invert:f,ortho:g}}})},{}],48:[function(t,e,n){function r(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}e.exports=r,r.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},r.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},r.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},r.prototype.solveCurveX=function(t,e){void 0===e&&(e=1e-6);var n,r,i,o,a;for(i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=t,i<n)return n;if(i>r)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;t>o?n=i:r=i,i=.5*(r-n)+n}return i},r.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},{}],49:[function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1===e.length?i.apply(void 0,e):o.apply(void 0,e)}function i(t){var e=void 0;return"undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys?e=Reflect.ownKeys(t.prototype):(e=Object.getOwnPropertyNames(t.prototype),"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(t.prototype)))),e.forEach(function(e){if("constructor"!==e){var n=Object.getOwnPropertyDescriptor(t.prototype,e);"function"==typeof n.value&&Object.defineProperty(t.prototype,e,o(t,e,n))}}),t}function o(t,e,n){var r=n.value;if("function"!=typeof r)throw new Error("@autobind decorator can only be applied to methods not: "+typeof r);var i=!1;return{configurable:!0,get:function(){if(i||this===t.prototype||this.hasOwnProperty(e))return r;var n=r.bind(this);return i=!0,Object.defineProperty(this,e,{value:n,configurable:!0,writable:!0}),i=!1,n}}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=r,e.exports=n.default},{}],50:[function(t,e,n){(function(e){"use strict";function n(t,e,n){t[e]||Object.defineProperty(t,e,{writable:!0,configurable:!0,value:n})}if(t("core-js/shim"),t("regenerator-runtime/runtime"),t("core-js/fn/regexp/escape"),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/fn/regexp/escape":55,"core-js/shim":348,"regenerator-runtime/runtime":963}],51:[function(t,e,n){!function(t,n,r){void 0!==e&&e.exports?e.exports=r():"function"==typeof define&&define.amd?define("bowser",r):t.bowser=r()}(this,"bowser",function(){function t(t){function e(e){var n=t.match(e);return n&&n.length>1&&n[1]||""}function n(e){var n=t.match(e);return n&&n.length>1&&n[2]||""}var r,i=e(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(t),s=!o&&/android/i.test(t),u=/nexus\s*[0-6]\s*/i.test(t),c=!u&&/nexus\s*[0-9]+/i.test(t),l=/CrOS/.test(t),f=/silk/i.test(t),h=/sailfish/i.test(t),p=/tizen/i.test(t),d=/(web|hpw)os/i.test(t),v=/windows phone/i.test(t),m=(/SamsungBrowser/i.test(t),!v&&/windows/i.test(t)),y=!i&&!f&&/macintosh/i.test(t),g=!s&&!h&&!p&&!d&&/linux/i.test(t),_=e(/edge\/(\d+(\.\d+)?)/i),b=e(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(t),x=!w&&/[^-]mobi/i.test(t),E=/xbox/i.test(t);/opera/i.test(t)?r={name:"Opera",opera:a,version:b||e(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(t)?r={name:"Opera",opera:a,version:e(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||b}:/SamsungBrowser/i.test(t)?r={name:"Samsung Internet for Android",samsungBrowser:a,version:b||e(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(t)?r={name:"Opera Coast",coast:a,version:b||e(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(t)?r={name:"Yandex Browser",yandexbrowser:a,version:b||e(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(t)?r={name:"UC Browser",ucbrowser:a,version:e(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(t)?r={name:"Maxthon",maxthon:a,version:e(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(t)?r={name:"Epiphany",epiphany:a,version:e(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(t)?r={name:"Puffin",puffin:a,version:e(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(t)?r={name:"Sleipnir",sleipnir:a,version:e(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(t)?r={name:"K-Meleon",kMeleon:a,version:e(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:v?(r={name:"Windows Phone",windowsphone:a},_?(r.msedge=a,r.version=_):(r.msie=a,r.version=e(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(t)?r={name:"Internet Explorer",msie:a,version:e(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?r={name:"Chrome",chromeos:a,chromeBook:a,chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(t)?r={name:"Microsoft Edge",msedge:a,version:_}:/vivaldi/i.test(t)?r={name:"Vivaldi",vivaldi:a,version:e(/vivaldi\/(\d+(\.\d+)?)/i)||b}:h?r={name:"Sailfish",sailfish:a,version:e(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(t)?r={name:"SeaMonkey",seamonkey:a,version:e(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(t)?(r={name:"Firefox",firefox:a,version:e(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(t)&&(r.firefoxos=a)):f?r={name:"Amazon Silk",silk:a,version:e(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(t)?r={name:"PhantomJS",phantom:a,version:e(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(t)?r={name:"SlimerJS",slimer:a,version:e(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(t)||/rim\stablet/i.test(t)?r={name:"BlackBerry",blackberry:a,version:b||e(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:d?(r={name:"WebOS",webos:a,version:b||e(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(t)&&(r.touchpad=a)):/bada/i.test(t)?r={name:"Bada",bada:a,version:e(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",tizen:a,version:e(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||b}:/qupzilla/i.test(t)?r={name:"QupZilla",qupzilla:a,version:e(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||b}:/chromium/i.test(t)?r={name:"Chromium",chromium:a,version:e(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||b}:/chrome|crios|crmo/i.test(t)?r={name:"Chrome",chrome:a,version:e(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?r={name:"Android",version:b}:/safari|applewebkit/i.test(t)?(r={name:"Safari",safari:a},b&&(r.version=b)):i?(r={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},b&&(r.version=b)):r=/googlebot/i.test(t)?{name:"Googlebot",googlebot:a,version:e(/googlebot\/(\d+(\.\d+))/i)||b}:{name:e(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(t)?(/(apple)?webkit\/537\.36/i.test(t)?(r.name=r.name||"Blink",r.blink=a):(r.name=r.name||"Webkit",r.webkit=a),!r.version&&b&&(r.version=b)):!r.opera&&/gecko\//i.test(t)&&(r.name=r.name||"Gecko",r.gecko=a,r.version=r.version||e(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||r.msedge||!s&&!r.silk?r.windowsphone||r.msedge||!i?y?r.mac=a:E?r.xbox=a:m?r.windows=a:g&&(r.linux=a):(r[i]=a,r.ios=a):r.android=a;var T="";r.windowsphone?T=e(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(T=e(/os (\d+([_\s]\d+)*) like mac os x/i),T=T.replace(/[_\s]/g,".")):s?T=e(/android[ \/-](\d+(\.\d+)*)/i):r.webos?T=e(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?T=e(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?T=e(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(T=e(/tizen[\/\s](\d+(\.\d+)*)/i)),T&&(r.osversion=T);var S=T.split(".")[0];return w||c||"ipad"==i||s&&(3==S||S>=4&&!x)||r.silk?r.tablet=a:(x||"iphone"==i||"ipod"==i||s||u||r.blackberry||r.webos||r.bada)&&(r.mobile=a),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=a:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=a:r.x=a,r}function e(t){return t.split(".").length}function n(t,e){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(n=0;n<t.length;n++)r.push(e(t[n]));return r}function r(t){for(var r=Math.max(e(t[0]),e(t[1])),i=n(t,function(t){var i=r-e(t);return t+=new Array(i+1).join(".0"),n(t.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});--r>=0;){if(i[0][r]>i[1][r])return 1;if(i[0][r]!==i[1][r])return-1;if(0===r)return 0}}function i(e,n,i){var o=s;"string"==typeof n&&(i=n,n=void 0),void 0===n&&(n=!1),i&&(o=t(i));var a=""+o.version;for(var u in e)if(e.hasOwnProperty(u)&&o[u]){if("string"!=typeof e[u])throw new Error("Browser version in the minVersion map should be a string: "+u+": "+String(e));return r([a,e[u]])<0}return n}function o(t,e,n){return!i(t,e,n)}var a=!0,s=t("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(t){for(var e=0;e<t.length;++e){var n=t[e];if("string"==typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=i,s.compareVersions=r,s.check=o,s._detect=t,s})},{}],52:[function(t,e,n){"use strict";e.exports=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","copy","xor","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},{}],53:[function(t,e,n){!function(){"use strict";function t(){for(var e=[],r=0;r<arguments.length;r++){var i=arguments[r];if(i){var o=typeof i;if("string"===o||"number"===o)e.push(i);else if(Array.isArray(i))e.push(t.apply(null,i));else if("object"===o)for(var a in i)n.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var n={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=t:"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return t}):window.classNames=t}()},{}],54:[function(t,e,n){(function(n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);i.call(this,e),null!==t&&void 0!==t||(t=String(t)),this._obj=t}var i=t("readable-stream").Readable,o=t("util");e.exports=r,o.inherits(r,i),r.prototype._read=function(t){var e=this._obj;"string"==typeof e?this.push(new n(e)):n.isBuffer(e)?this.push(e):this.push(new n(JSON.stringify(e))),this.push(null)}}).call(this,t("buffer").Buffer)},{buffer:8,"readable-stream":962,util:45}],55:[function(t,e,n){t("../../modules/core.regexp.escape"),e.exports=t("../../modules/_core").RegExp.escape},{"../../modules/_core":76,"../../modules/core.regexp.escape":172}],56:[function(t,e,n){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],57:[function(t,e,n){var r=t("./_cof");e.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},{"./_cof":71}],58:[function(t,e,n){var r=t("./_wks")("unscopables"),i=Array.prototype;void 0==i[r]&&t("./_hide")(i,r,{}),e.exports=function(t){i[r][t]=!0}},{"./_hide":93,"./_wks":170}],59:[function(t,e,n){e.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},{}],60:[function(t,e,n){var r=t("./_is-object");e.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},{"./_is-object":102}],61:[function(t,e,n){"use strict";var r=t("./_to-object"),i=t("./_to-index"),o=t("./_to-length");e.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),s=i(t,a),u=i(e,a),c=arguments.length>2?arguments[2]:void 0,l=Math.min((void 0===c?a:i(c,a))-u,a-s),f=1;for(u<s&&s<u+l&&(f=-1,u+=l-1,s+=l-1);l-- >0;)u in n?n[s]=n[u]:delete n[s],s+=f,u+=f;return n}},{"./_to-index":158,"./_to-length":161,"./_to-object":162}],62:[function(t,e,n){"use strict";var r=t("./_to-object"),i=t("./_to-index"),o=t("./_to-length");e.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),u=a>2?arguments[2]:void 0,c=void 0===u?n:i(u,n);c>s;)e[s++]=t;return e}},{"./_to-index":158,"./_to-length":161,"./_to-object":162}],63:[function(t,e,n){var r=t("./_for-of");e.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},{"./_for-of":90}],64:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_to-length"),o=t("./_to-index");e.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},{"./_to-index":158,"./_to-iobject":160,"./_to-length":161}],65:[function(t,e,n){var r=t("./_ctx"),i=t("./_iobject"),o=t("./_to-object"),a=t("./_to-length"),s=t("./_array-species-create");e.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,f=6==t,h=5==t||f,p=e||s;return function(e,s,d){for(var v,m,y=o(e),g=i(y),_=r(s,d,3),b=a(g.length),w=0,x=n?p(e,b):u?p(e,0):void 0;b>w;w++)if((h||w in g)&&(v=g[w],m=_(v,w,y),t))if(n)x[w]=m;else if(m)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},{"./_array-species-create":68,"./_ctx":78,"./_iobject":98,"./_to-length":161,"./_to-object":162}],66:[function(t,e,n){var r=t("./_a-function"),i=t("./_to-object"),o=t("./_iobject"),a=t("./_to-length");e.exports=function(t,e,n,s,u){r(e);var c=i(t),l=o(c),f=a(c.length),h=u?f-1:0,p=u?-1:1;if(n<2)for(;;){if(h in l){s=l[h],h+=p;break}if(h+=p,u?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;u?h>=0:f>h;h+=p)h in l&&(s=e(s,l[h],h,c));return s}},{"./_a-function":56,"./_iobject":98,"./_to-length":161,"./_to-object":162}],67:[function(t,e,n){var r=t("./_is-object"),i=t("./_is-array"),o=t("./_wks")("species");e.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},{"./_is-array":100,"./_is-object":102,"./_wks":170}],68:[function(t,e,n){var r=t("./_array-species-constructor");e.exports=function(t,e){return new(r(t))(e)}},{"./_array-species-constructor":67}],69:[function(t,e,n){"use strict";var r=t("./_a-function"),i=t("./_is-object"),o=t("./_invoke"),a=[].slice,s={},u=function(t,e,n){if(!(e in s)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";s[e]=Function("F,a","return new F("+r.join(",")+")")}return s[e](t,n)};e.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),s=function(){var r=n.concat(a.call(arguments));return this instanceof s?u(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(s.prototype=e.prototype),s}},{"./_a-function":56,"./_invoke":97,"./_is-object":102}],70:[function(t,e,n){var r=t("./_cof"),i=t("./_wks")("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};e.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},{"./_cof":71,"./_wks":170}],71:[function(t,e,n){var r={}.toString;e.exports=function(t){return r.call(t).slice(8,-1)}},{}],72:[function(t,e,n){"use strict";var r=t("./_object-dp").f,i=t("./_object-create"),o=t("./_redefine-all"),a=t("./_ctx"),s=t("./_an-instance"),u=t("./_defined"),c=t("./_for-of"),l=t("./_iter-define"),f=t("./_iter-step"),h=t("./_set-species"),p=t("./_descriptors"),d=t("./_meta").fastKey,v=p?"_s":"size",m=function(t,e){var n,r=d(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};e.exports={getConstructor:function(t,e,n,l){var f=t(function(t,r){s(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&c(r,n,t[l],t)});return o(f.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var e=this,n=m(e,t);if(n){var r=n.n,i=n.p;delete e._i[n.i],n.r=!0,i&&(i.n=r),r&&(r.p=i),e._f==n&&(e._f=r),e._l==n&&(e._l=i),e[v]--}return!!n},forEach:function(t){s(this,f,"forEach");for(var e,n=a(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),p&&r(f.prototype,"size",{get:function(){return u(this[v])}}),f},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=d(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,e,n){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),h(e)}}},{"./_an-instance":59,"./_ctx":78,"./_defined":80,"./_descriptors":81,"./_for-of":90,"./_iter-define":106,"./_iter-step":108,"./_meta":115,"./_object-create":119,"./_object-dp":120,"./_redefine-all":139,"./_set-species":144}],73:[function(t,e,n){var r=t("./_classof"),i=t("./_array-from-iterable");e.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},{"./_array-from-iterable":63,"./_classof":70}],74:[function(t,e,n){"use strict";var r=t("./_redefine-all"),i=t("./_meta").getWeak,o=t("./_an-object"),a=t("./_is-object"),s=t("./_an-instance"),u=t("./_for-of"),c=t("./_array-methods"),l=t("./_has"),f=c(5),h=c(6),p=0,d=function(t){return t._l||(t._l=new v)},v=function(){this.a=[]},m=function(t,e){return f(t.a,function(t){return t[0]===e})};v.prototype={get:function(t){var e=m(this,t);if(e)return e[1]},has:function(t){return!!m(this,t)},set:function(t,e){var n=m(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=h(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},e.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){s(t,c,e,"_i"),t._i=p++,t._l=void 0,void 0!=r&&u(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var e=i(t);return e===!0?d(this).delete(t):e&&l(e,this._i)&&delete e[this._i]},has:function(t){if(!a(t))return!1;var e=i(t);return e===!0?d(this).has(t):e&&l(e,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return r===!0?d(t).set(e,n):r[t._i]=n,t},ufstore:d}},{"./_an-instance":59,"./_an-object":60,"./_array-methods":65,"./_for-of":90,"./_has":92,"./_is-object":102,"./_meta":115,"./_redefine-all":139}],75:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_export"),o=t("./_redefine"),a=t("./_redefine-all"),s=t("./_meta"),u=t("./_for-of"),c=t("./_an-instance"),l=t("./_is-object"),f=t("./_fails"),h=t("./_iter-detect"),p=t("./_set-to-string-tag"),d=t("./_inherit-if-required");e.exports=function(t,e,n,v,m,y){var g=r[t],_=g,b=m?"set":"add",w=_&&_.prototype,x={},E=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(y&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return y&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(y||w.forEach&&!f(function(){(new _).entries().next()}))){var T=new _,S=T[b](y?{}:-0,1)!=T,M=f(function(){T.has(1)}),O=h(function(t){new _(t)}),A=!y&&f(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});O||(_=e(function(e,n){c(e,_,t);var r=d(new g,e,_);return void 0!=n&&u(n,m,r[b],r),r}),_.prototype=w,w.constructor=_),(M||A)&&(E("delete"),E("has"),m&&E("get")),(A||S)&&E(b),y&&w.clear&&delete w.clear}else _=v.getConstructor(e,t,m,b),a(_.prototype,n),s.NEED=!0;return p(_,t),x[t]=_,i(i.G+i.W+i.F*(_!=g),x),y||v.setStrong(_,t,m),_}},{"./_an-instance":59,"./_export":85,"./_fails":87,"./_for-of":90,"./_global":91,"./_inherit-if-required":96,"./_is-object":102,"./_iter-detect":107,"./_meta":115,"./_redefine":140,"./_redefine-all":139,"./_set-to-string-tag":145}],76:[function(t,e,n){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},{}],77:[function(t,e,n){"use strict";var r=t("./_object-dp"),i=t("./_property-desc");e.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},{"./_object-dp":120,"./_property-desc":138}],78:[function(t,e,n){var r=t("./_a-function");e.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},{"./_a-function":56}],79:[function(t,e,n){"use strict";var r=t("./_an-object"),i=t("./_to-primitive");e.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),"number"!=t)}},{"./_an-object":60,"./_to-primitive":163}],80:[function(t,e,n){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],81:[function(t,e,n){e.exports=!t("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":87}],82:[function(t,e,n){var r=t("./_is-object"),i=t("./_global").document,o=r(i)&&r(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{"./_global":91,"./_is-object":102}],83:[function(t,e,n){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],84:[function(t,e,n){var r=t("./_object-keys"),i=t("./_object-gops"),o=t("./_object-pie");e.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},{"./_object-gops":126,"./_object-keys":129,"./_object-pie":130}],85:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_hide"),a=t("./_redefine"),s=t("./_ctx"),u=function(t,e,n){var c,l,f,h,p=t&u.F,d=t&u.G,v=t&u.S,m=t&u.P,y=t&u.B,g=d?r:v?r[e]||(r[e]={}):(r[e]||{}).prototype,_=d?i:i[e]||(i[e]={}),b=_.prototype||(_.prototype={});d&&(n=e);for(c in n)l=!p&&g&&void 0!==g[c],f=(l?g:n)[c],h=y&&l?s(f,r):m&&"function"==typeof f?s(Function.call,f):f,g&&a(g,c,f,t&u.U),_[c]!=f&&o(_,c,h),m&&b[c]!=f&&(b[c]=f)};r.core=i,u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},{"./_core":76,"./_ctx":78,"./_global":91,"./_hide":93,"./_redefine":140}],86:[function(t,e,n){var r=t("./_wks")("match");e.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},{"./_wks":170}],87:[function(t,e,n){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],88:[function(t,e,n){"use strict";var r=t("./_hide"),i=t("./_redefine"),o=t("./_fails"),a=t("./_defined"),s=t("./_wks");e.exports=function(t,e,n){var u=s(t),c=n(a,u,""[t]),l=c[0],f=c[1];o(function(){var e={};return e[u]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,l),r(RegExp.prototype,u,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)}))}},{"./_defined":80,"./_fails":87,"./_hide":93,"./_redefine":140,"./_wks":170}],89:[function(t,e,n){"use strict";var r=t("./_an-object");e.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},{"./_an-object":60}],90:[function(t,e,n){var r=t("./_ctx"),i=t("./_iter-call"),o=t("./_is-array-iter"),a=t("./_an-object"),s=t("./_to-length"),u=t("./core.get-iterator-method"),c={},l={},n=e.exports=function(t,e,n,f,h){var p,d,v,m,y=h?function(){return t}:u(t),g=r(n,f,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(p=s(t.length);p>_;_++)if(m=e?g(a(d=t[_])[0],d[1]):g(t[_]),m===c||m===l)return m}else for(v=y.call(t);!(d=v.next()).done;)if(m=i(v,g,d.value,e),m===c||m===l)return m};n.BREAK=c,n.RETURN=l},{"./_an-object":60,"./_ctx":78,"./_is-array-iter":99,"./_iter-call":104,"./_to-length":161,"./core.get-iterator-method":171}],91:[function(t,e,n){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},{}],92:[function(t,e,n){var r={}.hasOwnProperty;e.exports=function(t,e){return r.call(t,e)}},{}],93:[function(t,e,n){var r=t("./_object-dp"),i=t("./_property-desc");e.exports=t("./_descriptors")?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},{"./_descriptors":81,"./_object-dp":120,"./_property-desc":138}],94:[function(t,e,n){e.exports=t("./_global").document&&document.documentElement},{"./_global":91}],95:[function(t,e,n){e.exports=!t("./_descriptors")&&!t("./_fails")(function(){return 7!=Object.defineProperty(t("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":81,"./_dom-create":82,"./_fails":87}],96:[function(t,e,n){var r=t("./_is-object"),i=t("./_set-proto").set;e.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},{"./_is-object":102,"./_set-proto":143}],97:[function(t,e,n){e.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},{}],98:[function(t,e,n){var r=t("./_cof");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},{"./_cof":71}],99:[function(t,e,n){var r=t("./_iterators"),i=t("./_wks")("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},{"./_iterators":109,"./_wks":170}],100:[function(t,e,n){var r=t("./_cof");e.exports=Array.isArray||function(t){return"Array"==r(t)}},{"./_cof":71}],101:[function(t,e,n){var r=t("./_is-object"),i=Math.floor;e.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},{"./_is-object":102}],102:[function(t,e,n){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],103:[function(t,e,n){var r=t("./_is-object"),i=t("./_cof"),o=t("./_wks")("match");e.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},{"./_cof":71,"./_is-object":102,"./_wks":170}],104:[function(t,e,n){var r=t("./_an-object");e.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},{"./_an-object":60}],105:[function(t,e,n){"use strict";var r=t("./_object-create"),i=t("./_property-desc"),o=t("./_set-to-string-tag"),a={};t("./_hide")(a,t("./_wks")("iterator"),function(){return this}),e.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},{"./_hide":93,"./_object-create":119,"./_property-desc":138,"./_set-to-string-tag":145,"./_wks":170}],106:[function(t,e,n){"use strict";var r=t("./_library"),i=t("./_export"),o=t("./_redefine"),a=t("./_hide"),s=t("./_has"),u=t("./_iterators"),c=t("./_iter-create"),l=t("./_set-to-string-tag"),f=t("./_object-gpo"),h=t("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(t,e,n,v,m,y,g){c(n,e,v);var _,b,w,x=function(t){if(!p&&t in M)return M[t];switch(t){case"keys":return function(){return new n(this,t)};case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},E=e+" Iterator",T="values"==m,S=!1,M=t.prototype,O=M[h]||M["@@iterator"]||m&&M[m],A=O||x(m),R=m?T?x("entries"):A:void 0,I="Array"==e?M.entries||O:O;if(I&&(w=f(I.call(new t)),w!==Object.prototype&&(l(w,E,!0),r||s(w,h)||a(w,h,d))),T&&O&&"values"!==O.name&&(S=!0,A=function(){return O.call(this)}),r&&!g||!p&&!S&&M[h]||a(M,h,A),u[e]=A,u[E]=d,m)if(_={values:T?A:x("values"),keys:y?A:x("keys"),entries:R},g)for(b in _)b in M||o(M,b,_[b]);else i(i.P+i.F*(p||S),e,_);return _}},{"./_export":85,"./_has":92,"./_hide":93,"./_iter-create":105,"./_iterators":109,"./_library":111,"./_object-gpo":127,"./_redefine":140,"./_set-to-string-tag":145,"./_wks":170}],107:[function(t,e,n){var r=t("./_wks")("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},{"./_wks":170}],108:[function(t,e,n){e.exports=function(t,e){return{value:e,done:!!t}}},{}],109:[function(t,e,n){e.exports={}},{}],110:[function(t,e,n){var r=t("./_object-keys"),i=t("./_to-iobject");e.exports=function(t,e){for(var n,o=i(t),a=r(o),s=a.length,u=0;s>u;)if(o[n=a[u++]]===e)return n}},{"./_object-keys":129,"./_to-iobject":160}],111:[function(t,e,n){e.exports=!1},{}],112:[function(t,e,n){var r=Math.expm1;e.exports=!r||r(10)>22025.465794806718||r(10)<22025.465794806718||r(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:r},{}],113:[function(t,e,n){e.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},{}],114:[function(t,e,n){e.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},{}],115:[function(t,e,n){var r=t("./_uid")("meta"),i=t("./_is-object"),o=t("./_has"),a=t("./_object-dp").f,s=0,u=Object.isExtensible||function(){return!0},c=!t("./_fails")(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},f=function(t,e){
if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},p=function(t){return c&&d.NEED&&u(t)&&!o(t,r)&&l(t),t},d=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},{"./_fails":87,"./_has":92,"./_is-object":102,"./_object-dp":120,"./_uid":167}],116:[function(t,e,n){var r=t("./es6.map"),i=t("./_export"),o=t("./_shared")("metadata"),a=o.store||(o.store=new(t("./es6.weak-map"))),s=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},u=function(t,e,n){var r=s(e,n,!1);return void 0!==r&&r.has(t)},c=function(t,e,n){var r=s(e,n,!1);return void 0===r?void 0:r.get(t)},l=function(t,e,n,r){s(n,r,!0).set(t,e)},f=function(t,e){var n=s(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){i(i.S,"Reflect",t)};e.exports={store:a,map:s,has:u,get:c,set:l,keys:f,key:h,exp:p}},{"./_export":85,"./_shared":147,"./es6.map":202,"./es6.weak-map":308}],117:[function(t,e,n){var r=t("./_global"),i=t("./_task").set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==t("./_cof")(a);e.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},{"./_cof":71,"./_global":91,"./_task":157}],118:[function(t,e,n){"use strict";var r=t("./_object-keys"),i=t("./_object-gops"),o=t("./_object-pie"),a=t("./_to-object"),s=t("./_iobject"),u=Object.assign;e.exports=!u||t("./_fails")(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r})?function(t,e){for(var n=a(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,p=s(arguments[c++]),d=l?r(p).concat(l(p)):r(p),v=d.length,m=0;v>m;)f.call(p,h=d[m++])&&(n[h]=p[h]);return n}:u},{"./_fails":87,"./_iobject":98,"./_object-gops":126,"./_object-keys":129,"./_object-pie":130,"./_to-object":162}],119:[function(t,e,n){var r=t("./_an-object"),i=t("./_object-dps"),o=t("./_enum-bug-keys"),a=t("./_shared-key")("IE_PROTO"),s=function(){},u=function(){var e,n=t("./_dom-create")("iframe"),r=o.length;for(n.style.display="none",t("./_html").appendChild(n),n.src="javascript:",e=n.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=u(),void 0===e?n:i(n,e)}},{"./_an-object":60,"./_dom-create":82,"./_enum-bug-keys":83,"./_html":94,"./_object-dps":121,"./_shared-key":146}],120:[function(t,e,n){var r=t("./_an-object"),i=t("./_ie8-dom-define"),o=t("./_to-primitive"),a=Object.defineProperty;n.f=t("./_descriptors")?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},{"./_an-object":60,"./_descriptors":81,"./_ie8-dom-define":95,"./_to-primitive":163}],121:[function(t,e,n){var r=t("./_object-dp"),i=t("./_an-object"),o=t("./_object-keys");e.exports=t("./_descriptors")?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},{"./_an-object":60,"./_descriptors":81,"./_object-dp":120,"./_object-keys":129}],122:[function(t,e,n){e.exports=t("./_library")||!t("./_fails")(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete t("./_global")[e]})},{"./_fails":87,"./_global":91,"./_library":111}],123:[function(t,e,n){var r=t("./_object-pie"),i=t("./_property-desc"),o=t("./_to-iobject"),a=t("./_to-primitive"),s=t("./_has"),u=t("./_ie8-dom-define"),c=Object.getOwnPropertyDescriptor;n.f=t("./_descriptors")?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},{"./_descriptors":81,"./_has":92,"./_ie8-dom-define":95,"./_object-pie":130,"./_property-desc":138,"./_to-iobject":160,"./_to-primitive":163}],124:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_object-gopn").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(t){return a.slice()}};e.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},{"./_object-gopn":125,"./_to-iobject":160}],125:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys").concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},{"./_enum-bug-keys":83,"./_object-keys-internal":128}],126:[function(t,e,n){n.f=Object.getOwnPropertySymbols},{}],127:[function(t,e,n){var r=t("./_has"),i=t("./_to-object"),o=t("./_shared-key")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},{"./_has":92,"./_shared-key":146,"./_to-object":162}],128:[function(t,e,n){var r=t("./_has"),i=t("./_to-iobject"),o=t("./_array-includes")(!1),a=t("./_shared-key")("IE_PROTO");e.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},{"./_array-includes":64,"./_has":92,"./_shared-key":146,"./_to-iobject":160}],129:[function(t,e,n){var r=t("./_object-keys-internal"),i=t("./_enum-bug-keys");e.exports=Object.keys||function(t){return r(t,i)}},{"./_enum-bug-keys":83,"./_object-keys-internal":128}],130:[function(t,e,n){n.f={}.propertyIsEnumerable},{}],131:[function(t,e,n){var r=t("./_export"),i=t("./_core"),o=t("./_fails");e.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},{"./_core":76,"./_export":85,"./_fails":87}],132:[function(t,e,n){var r=t("./_object-keys"),i=t("./_to-iobject"),o=t("./_object-pie").f;e.exports=function(t){return function(e){for(var n,a=i(e),s=r(a),u=s.length,c=0,l=[];u>c;)o.call(a,n=s[c++])&&l.push(t?[n,a[n]]:a[n]);return l}}},{"./_object-keys":129,"./_object-pie":130,"./_to-iobject":160}],133:[function(t,e,n){var r=t("./_object-gopn"),i=t("./_object-gops"),o=t("./_an-object"),a=t("./_global").Reflect;e.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},{"./_an-object":60,"./_global":91,"./_object-gopn":125,"./_object-gops":126}],134:[function(t,e,n){var r=t("./_global").parseFloat,i=t("./_string-trim").trim;e.exports=1/r(t("./_string-ws")+"-0")!==-(1/0)?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},{"./_global":91,"./_string-trim":155,"./_string-ws":156}],135:[function(t,e,n){var r=t("./_global").parseInt,i=t("./_string-trim").trim,o=t("./_string-ws"),a=/^[\-+]?0[xX]/;e.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},{"./_global":91,"./_string-trim":155,"./_string-ws":156}],136:[function(t,e,n){"use strict";var r=t("./_path"),i=t("./_invoke"),o=t("./_a-function");e.exports=function(){for(var t=o(this),e=arguments.length,n=Array(e),a=0,s=r._,u=!1;e>a;)(n[a]=arguments[a++])===s&&(u=!0);return function(){var r,o=this,a=arguments.length,c=0,l=0;if(!u&&!a)return i(t,n,o);if(r=n.slice(),u)for(;e>c;c++)r[c]===s&&(r[c]=arguments[l++]);for(;a>l;)r.push(arguments[l++]);return i(t,r,o)}}},{"./_a-function":56,"./_invoke":97,"./_path":137}],137:[function(t,e,n){e.exports=t("./_global")},{"./_global":91}],138:[function(t,e,n){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],139:[function(t,e,n){var r=t("./_redefine");e.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},{"./_redefine":140}],140:[function(t,e,n){var r=t("./_global"),i=t("./_hide"),o=t("./_has"),a=t("./_uid")("src"),s=Function.toString,u=(""+s).split("toString");t("./_core").inspectSource=function(t){return s.call(t)},(e.exports=function(t,e,n,s){var c="function"==typeof n;c&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(c&&(o(n,a)||i(n,a,t[e]?""+t[e]:u.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[a]||s.call(this)})},{"./_core":76,"./_global":91,"./_has":92,"./_hide":93,"./_uid":167}],141:[function(t,e,n){e.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},{}],142:[function(t,e,n){e.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},{}],143:[function(t,e,n){var r=t("./_is-object"),i=t("./_an-object"),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,n,r){try{r=t("./_ctx")(Function.call,t("./_object-gopd").f(Object.prototype,"__proto__").set,2),r(e,[]),n=!(e instanceof Array)}catch(t){n=!0}return function(t,e){return o(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:o}},{"./_an-object":60,"./_ctx":78,"./_is-object":102,"./_object-gopd":123}],144:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_object-dp"),o=t("./_descriptors"),a=t("./_wks")("species");e.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},{"./_descriptors":81,"./_global":91,"./_object-dp":120,"./_wks":170}],145:[function(t,e,n){var r=t("./_object-dp").f,i=t("./_has"),o=t("./_wks")("toStringTag");e.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},{"./_has":92,"./_object-dp":120,"./_wks":170}],146:[function(t,e,n){var r=t("./_shared")("keys"),i=t("./_uid");e.exports=function(t){return r[t]||(r[t]=i(t))}},{"./_shared":147,"./_uid":167}],147:[function(t,e,n){var r=t("./_global"),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(t){return i[t]||(i[t]={})}},{"./_global":91}],148:[function(t,e,n){var r=t("./_an-object"),i=t("./_a-function"),o=t("./_wks")("species");e.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},{"./_a-function":56,"./_an-object":60,"./_wks":170}],149:[function(t,e,n){var r=t("./_fails");e.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},{"./_fails":87}],150:[function(t,e,n){var r=t("./_to-integer"),i=t("./_defined");e.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return u<0||u>=c?t?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},{"./_defined":80,"./_to-integer":159}],151:[function(t,e,n){var r=t("./_is-regexp"),i=t("./_defined");e.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},{"./_defined":80,"./_is-regexp":103}],152:[function(t,e,n){var r=t("./_export"),i=t("./_fails"),o=t("./_defined"),a=function(t,e,n,r){var i=String(o(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+String(r).replace(/"/g,"&quot;")+'"'),a+">"+i+"</"+e+">"};e.exports=function(t,e){var n={};n[t]=e(a),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},{"./_defined":80,"./_export":85,"./_fails":87}],153:[function(t,e,n){var r=t("./_to-length"),i=t("./_string-repeat"),o=t("./_defined");e.exports=function(t,e,n,a){var s=String(o(t)),u=s.length,c=void 0===n?" ":String(n),l=r(e);if(l<=u||""==c)return s;var f=l-u,h=i.call(c,Math.ceil(f/c.length));return h.length>f&&(h=h.slice(0,f)),a?h+s:s+h}},{"./_defined":80,"./_string-repeat":154,"./_to-length":161}],154:[function(t,e,n){"use strict";var r=t("./_to-integer"),i=t("./_defined");e.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},{"./_defined":80,"./_to-integer":159}],155:[function(t,e,n){var r=t("./_export"),i=t("./_defined"),o=t("./_fails"),a=t("./_string-ws"),s="["+a+"]",u="",c=RegExp("^"+s+s+"*"),l=RegExp(s+s+"*$"),f=function(t,e,n){var i={},s=o(function(){return!!a[t]()||u[t]()!=u}),c=i[t]=s?e(h):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},h=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(l,"")),t};e.exports=f},{"./_defined":80,"./_export":85,"./_fails":87,"./_string-ws":156}],156:[function(t,e,n){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},{}],157:[function(t,e,n){var r,i,o,a=t("./_ctx"),s=t("./_invoke"),u=t("./_html"),c=t("./_dom-create"),l=t("./_global"),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,m={},y=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},g=function(t){y.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++v]=function(){s("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete m[t]},"process"==t("./_cof")(f)?r=function(t){f.nextTick(a(y,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(t){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),e.exports={set:h,clear:p}},{"./_cof":71,"./_ctx":78,"./_dom-create":82,"./_global":91,"./_html":94,"./_invoke":97}],158:[function(t,e,n){var r=t("./_to-integer"),i=Math.max,o=Math.min;e.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},{"./_to-integer":159}],159:[function(t,e,n){var r=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?i:r)(t)}},{}],160:[function(t,e,n){var r=t("./_iobject"),i=t("./_defined");e.exports=function(t){return r(i(t))}},{"./_defined":80,"./_iobject":98}],161:[function(t,e,n){var r=t("./_to-integer"),i=Math.min;e.exports=function(t){return t>0?i(r(t),9007199254740991):0}},{"./_to-integer":159}],162:[function(t,e,n){var r=t("./_defined");e.exports=function(t){return Object(r(t))}},{"./_defined":80}],163:[function(t,e,n){var r=t("./_is-object");e.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":102}],164:[function(t,e,n){"use strict";if(t("./_descriptors")){var r=t("./_library"),i=t("./_global"),o=t("./_fails"),a=t("./_export"),s=t("./_typed"),u=t("./_typed-buffer"),c=t("./_ctx"),l=t("./_an-instance"),f=t("./_property-desc"),h=t("./_hide"),p=t("./_redefine-all"),d=t("./_to-integer"),v=t("./_to-length"),m=t("./_to-index"),y=t("./_to-primitive"),g=t("./_has"),_=t("./_same-value"),b=t("./_classof"),w=t("./_is-object"),x=t("./_to-object"),E=t("./_is-array-iter"),T=t("./_object-create"),S=t("./_object-gpo"),M=t("./_object-gopn").f,O=t("./core.get-iterator-method"),A=t("./_uid"),R=t("./_wks"),I=t("./_array-methods"),k=t("./_array-includes"),P=t("./_species-constructor"),N=t("./es6.array.iterator"),C=t("./_iterators"),D=t("./_iter-detect"),j=t("./_set-species"),L=t("./_array-fill"),F=t("./_array-copy-within"),U=t("./_object-dp"),z=t("./_object-gopd"),B=U.f,V=z.f,G=i.RangeError,H=i.TypeError,W=i.Uint8Array,q=Array.prototype,Y=u.ArrayBuffer,X=u.DataView,Z=I(0),K=I(2),Q=I(3),J=I(4),$=I(5),tt=I(6),et=k(!0),nt=k(!1),rt=N.values,it=N.keys,ot=N.entries,at=q.lastIndexOf,st=q.reduce,ut=q.reduceRight,ct=q.join,lt=q.sort,ft=q.slice,ht=q.toString,pt=q.toLocaleString,dt=R("iterator"),vt=R("toStringTag"),mt=A("typed_constructor"),yt=A("def_constructor"),gt=s.CONSTR,_t=s.TYPED,bt=s.VIEW,wt=I(1,function(t,e){return Ot(P(t,t[yt]),e)}),xt=o(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),Et=!!W&&!!W.prototype.set&&o(function(){new W(1).set({})}),Tt=function(t,e){if(void 0===t)throw H("Wrong length!");var n=+t,r=v(t);if(e&&!_(n,r))throw G("Wrong length!");return r},St=function(t,e){var n=d(t);if(n<0||n%e)throw G("Wrong offset!");return n},Mt=function(t){if(w(t)&&_t in t)return t;throw H(t+" is not a typed array!")},Ot=function(t,e){if(!(w(t)&&mt in t))throw H("It is not a typed array constructor!");return new t(e)},At=function(t,e){return Rt(P(t,t[yt]),e)},Rt=function(t,e){for(var n=0,r=e.length,i=Ot(t,r);r>n;)i[n]=e[n++];return i},It=function(t,e,n){B(t,e,{get:function(){return this._d[n]}})},kt=function(t){var e,n,r,i,o,a,s=x(t),u=arguments.length,l=u>1?arguments[1]:void 0,f=void 0!==l,h=O(s);if(void 0!=h&&!E(h)){for(a=h.call(s),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);s=r}for(f&&u>2&&(l=c(l,arguments[2],2)),e=0,n=v(s.length),i=Ot(this,n);n>e;e++)i[e]=f?l(s[e],e):s[e];return i},Pt=function(){for(var t=0,e=arguments.length,n=Ot(this,e);e>t;)n[t]=arguments[t++];return n},Nt=!!W&&o(function(){pt.call(new W(1))}),Ct=function(){return pt.apply(Nt?ft.call(Mt(this)):Mt(this),arguments)},Dt={copyWithin:function(t,e){return F.call(Mt(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return J(Mt(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return L.apply(Mt(this),arguments)},filter:function(t){return At(this,K(Mt(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return $(Mt(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Mt(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return nt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Mt(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Mt(this),arguments)},lastIndexOf:function(t){return at.apply(Mt(this),arguments)},map:function(t){return wt(Mt(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return st.apply(Mt(this),arguments)},reduceRight:function(t){return ut.apply(Mt(this),arguments)},reverse:function(){for(var t,e=this,n=Mt(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return Q(Mt(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return lt.call(Mt(this),t)},subarray:function(t,e){var n=Mt(this),r=n.length,i=m(t,r);return new(P(n,n[yt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:m(e,r))-i))}},jt=function(t,e){return At(this,ft.call(Mt(this),t,e))},Lt=function(t){Mt(this);var e=St(arguments[1],1),n=this.length,r=x(t),i=v(r.length),o=0;if(i+e>n)throw G("Wrong length!");for(;o<i;)this[e+o]=r[o++]},Ft={entries:function(){return ot.call(Mt(this))},keys:function(){return it.call(Mt(this))},values:function(){return rt.call(Mt(this))}},Ut=function(t,e){return w(t)&&t[_t]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},zt=function(t,e){return Ut(t,e=y(e,!0))?f(2,t[e]):V(t,e)},Bt=function(t,e,n){return!(Ut(t,e=y(e,!0))&&w(n)&&g(n,"value"))||g(n,"get")||g(n,"set")||n.configurable||g(n,"writable")&&!n.writable||g(n,"enumerable")&&!n.enumerable?B(t,e,n):(t[e]=n.value,t)};gt||(z.f=zt,U.f=Bt),a(a.S+a.F*!gt,"Object",{getOwnPropertyDescriptor:zt,defineProperty:Bt}),o(function(){ht.call({})})&&(ht=pt=function(){return ct.call(this)});var Vt=p({},Dt);p(Vt,Ft),h(Vt,dt,Ft.values),p(Vt,{slice:jt,set:Lt,constructor:function(){},toString:ht,toLocaleString:Ct}),It(Vt,"buffer","b"),It(Vt,"byteOffset","o"),It(Vt,"byteLength","l"),It(Vt,"length","e"),B(Vt,vt,{get:function(){return this[_t]}}),e.exports=function(t,e,n,u){u=!!u;var c=t+(u?"Clamped":"")+"Array",f="Uint8Array"!=c,p="get"+t,d="set"+t,m=i[c],y=m||{},g=m&&S(m),_=!m||!s.ABV,x={},E=m&&m.prototype,O=function(t,n){var r=t._d;return r.v[p](n*e+r.o,xt)},A=function(t,n,r){var i=t._d;u&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[d](n*e+i.o,r,xt)},R=function(t,e){B(t,e,{get:function(){return O(this,e)},set:function(t){return A(this,e,t)},enumerable:!0})};_?(m=n(function(t,n,r,i){l(t,m,c,"_d");var o,a,s,u,f=0,p=0;if(w(n)){if(!(n instanceof Y||"ArrayBuffer"==(u=b(n))||"SharedArrayBuffer"==u))return _t in n?Rt(m,n):kt.call(m,n);o=n,p=St(r,e);var d=n.byteLength;if(void 0===i){if(d%e)throw G("Wrong length!");if(a=d-p,a<0)throw G("Wrong length!")}else if(a=v(i)*e,a+p>d)throw G("Wrong length!");s=a/e}else s=Tt(n,!0),a=s*e,o=new Y(a);for(h(t,"_d",{b:o,o:p,l:a,e:s,v:new X(o)});f<s;)R(t,f++)}),E=m.prototype=T(Vt),h(E,"constructor",m)):D(function(t){new m(null),new m(t)},!0)||(m=n(function(t,n,r,i){l(t,m,c);var o;return w(n)?n instanceof Y||"ArrayBuffer"==(o=b(n))||"SharedArrayBuffer"==o?void 0!==i?new y(n,St(r,e),i):void 0!==r?new y(n,St(r,e)):new y(n):_t in n?Rt(m,n):kt.call(m,n):new y(Tt(n,f))}),Z(g!==Function.prototype?M(y).concat(M(g)):M(y),function(t){t in m||h(m,t,y[t])}),m.prototype=E,r||(E.constructor=m));var I=E[dt],k=!!I&&("values"==I.name||void 0==I.name),P=Ft.values;h(m,mt,!0),h(E,_t,c),h(E,bt,!0),h(E,yt,m),(u?new m(1)[vt]==c:vt in E)||B(E,vt,{get:function(){return c}}),x[c]=m,a(a.G+a.W+a.F*(m!=y),x),a(a.S,c,{BYTES_PER_ELEMENT:e,from:kt,of:Pt}),"BYTES_PER_ELEMENT"in E||h(E,"BYTES_PER_ELEMENT",e),a(a.P,c,Dt),j(c),a(a.P+a.F*Et,c,{set:Lt}),a(a.P+a.F*!k,c,Ft),a(a.P+a.F*(E.toString!=ht),c,{toString:ht}),a(a.P+a.F*o(function(){new m(1).slice()}),c,{slice:jt}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:Ct}),C[c]=k?I:P,r||k||h(E,dt,P)}}else e.exports=function(){}},{"./_an-instance":59,"./_array-copy-within":61,"./_array-fill":62,"./_array-includes":64,"./_array-methods":65,"./_classof":70,"./_ctx":78,"./_descriptors":81,"./_export":85,"./_fails":87,"./_global":91,"./_has":92,"./_hide":93,"./_is-array-iter":99,"./_is-object":102,"./_iter-detect":107,"./_iterators":109,"./_library":111,"./_object-create":119,"./_object-dp":120,"./_object-gopd":123,"./_object-gopn":125,"./_object-gpo":127,"./_property-desc":138,"./_redefine-all":139,"./_same-value":142,"./_set-species":144,"./_species-constructor":148,"./_to-index":158,"./_to-integer":159,"./_to-length":161,"./_to-object":162,"./_to-primitive":163,"./_typed":166,"./_typed-buffer":165,"./_uid":167,"./_wks":170,"./core.get-iterator-method":171,"./es6.array.iterator":183}],165:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_descriptors"),o=t("./_library"),a=t("./_typed"),s=t("./_hide"),u=t("./_redefine-all"),c=t("./_fails"),l=t("./_an-instance"),f=t("./_to-integer"),h=t("./_to-length"),p=t("./_object-gopn").f,d=t("./_object-dp").f,v=t("./_array-fill"),m=t("./_set-to-string-tag"),y=r.ArrayBuffer,g=r.DataView,_=r.Math,b=r.RangeError,w=r.Infinity,x=y,E=_.abs,T=_.pow,S=_.floor,M=_.log,O=_.LN2,A=i?"_b":"buffer",R=i?"_l":"byteLength",I=i?"_o":"byteOffset",k=function(t,e,n){var r,i,o,a=Array(n),s=8*n-e-1,u=(1<<s)-1,c=u>>1,l=23===e?T(2,-24)-T(2,-77):0,f=0,h=t<0||0===t&&1/t<0?1:0;for(t=E(t),t!=t||t===w?(i=t!=t?1:0,r=u):(r=S(M(t)/O),t*(o=T(2,-r))<1&&(r--,o*=2),t+=r+c>=1?l/o:l*T(2,1-c),t*o>=2&&(r++,o/=2),r+c>=u?(i=0,r=u):r+c>=1?(i=(t*o-1)*T(2,e),r+=c):(i=t*T(2,c-1)*T(2,e),r=0));e>=8;a[f++]=255&i,i/=256,e-=8);for(r=r<<e|i,s+=e;s>0;a[f++]=255&r,r/=256,s-=8);return a[--f]|=128*h,a},P=function(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,s=i-7,u=n-1,c=t[u--],l=127&c;for(c>>=7;s>0;l=256*l+t[u],u--,s-=8);for(r=l&(1<<-s)-1,l>>=-s,s+=e;s>0;r=256*r+t[u],u--,s-=8);if(0===l)l=1-a;else{if(l===o)return r?NaN:c?-w:w;r+=T(2,e),l-=a}return(c?-1:1)*r*T(2,l-e)},N=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},C=function(t){return[255&t]},D=function(t){return[255&t,t>>8&255]},j=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},L=function(t){return k(t,52,8)},F=function(t){return k(t,23,4)},U=function(t,e,n){d(t.prototype,e,{get:function(){return this[n]}})},z=function(t,e,n,r){var i=+n,o=f(i);if(i!=o||o<0||o+e>t[R])throw b("Wrong index!");var a=t[A]._b,s=o+t[I],u=a.slice(s,s+e);return r?u:u.reverse()},B=function(t,e,n,r,i,o){var a=+n,s=f(a);if(a!=s||s<0||s+e>t[R])throw b("Wrong index!");for(var u=t[A]._b,c=s+t[I],l=r(+i),h=0;h<e;h++)u[c+h]=l[o?h:e-h-1]},V=function(t,e){l(t,y,"ArrayBuffer");var n=+e,r=h(n);if(n!=r)throw b("Wrong length!");return r};if(a.ABV){if(!c(function(){new y})||!c(function(){new y(.5)})){y=function(t){return new x(V(this,t))};for(var G,H=y.prototype=x.prototype,W=p(x),q=0;W.length>q;)(G=W[q++])in y||s(y,G,x[G]);o||(H.constructor=y)}var Y=new g(new y(2)),X=g.prototype.setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||u(g.prototype,{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else y=function(t){var e=V(this,t);this._b=v.call(Array(e),0),this[R]=e},g=function(t,e,n){l(this,g,"DataView"),l(t,y,"DataView");var r=t[R],i=f(e);if(i<0||i>r)throw b("Wrong offset!");if(n=void 0===n?r-i:h(n),i+n>r)throw b("Wrong length!");this[A]=t,this[I]=i,this[R]=n},i&&(U(y,"byteLength","_l"),U(g,"buffer","_b"),U(g,"byteLength","_l"),U(g,"byteOffset","_o")),u(g.prototype,{getInt8:function(t){return z(this,1,t)[0]<<24>>24},getUint8:function(t){return z(this,1,t)[0]},getInt16:function(t){var e=z(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=z(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return N(z(this,4,t,arguments[1]))},getUint32:function(t){return N(z(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return P(z(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return P(z(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){B(this,1,t,C,e)},setUint8:function(t,e){B(this,1,t,C,e)},setInt16:function(t,e){B(this,2,t,D,e,arguments[2])},setUint16:function(t,e){B(this,2,t,D,e,arguments[2])},setInt32:function(t,e){B(this,4,t,j,e,arguments[2])},setUint32:function(t,e){B(this,4,t,j,e,arguments[2])},setFloat32:function(t,e){B(this,4,t,F,e,arguments[2])},setFloat64:function(t,e){B(this,8,t,L,e,arguments[2])}});m(y,"ArrayBuffer"),m(g,"DataView"),s(g.prototype,a.VIEW,!0),n.ArrayBuffer=y,n.DataView=g},{"./_an-instance":59,"./_array-fill":62,"./_descriptors":81,"./_fails":87,"./_global":91,"./_hide":93,"./_library":111,"./_object-dp":120,"./_object-gopn":125,"./_redefine-all":139,"./_set-to-string-tag":145,"./_to-integer":159,"./_to-length":161,"./_typed":166}],166:[function(t,e,n){for(var r,i=t("./_global"),o=t("./_hide"),a=t("./_uid"),s=a("typed_array"),u=a("view"),c=!(!i.ArrayBuffer||!i.DataView),l=c,f=0,h="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<9;)(r=i[h[f++]])?(o(r.prototype,s,!0),o(r.prototype,u,!0)):l=!1;e.exports={ABV:c,CONSTR:l,TYPED:s,VIEW:u}},{"./_global":91,"./_hide":93,"./_uid":167}],167:[function(t,e,n){var r=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++r+i).toString(36))}},{}],168:[function(t,e,n){var r=t("./_global"),i=t("./_core"),o=t("./_library"),a=t("./_wks-ext"),s=t("./_object-dp").f;e.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},{"./_core":76,"./_global":91,"./_library":111,"./_object-dp":120,"./_wks-ext":169}],169:[function(t,e,n){n.f=t("./_wks")},{"./_wks":170}],170:[function(t,e,n){var r=t("./_shared")("wks"),i=t("./_uid"),o=t("./_global").Symbol,a="function"==typeof o;(e.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},{"./_global":91,"./_shared":147,"./_uid":167}],171:[function(t,e,n){var r=t("./_classof"),i=t("./_wks")("iterator"),o=t("./_iterators");e.exports=t("./_core").getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},{"./_classof":70,"./_core":76,"./_iterators":109,"./_wks":170}],172:[function(t,e,n){var r=t("./_export"),i=t("./_replacer")(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},{"./_export":85,"./_replacer":141}],173:[function(t,e,n){var r=t("./_export");r(r.P,"Array",{copyWithin:t("./_array-copy-within")}),t("./_add-to-unscopables")("copyWithin")},{"./_add-to-unscopables":58,"./_array-copy-within":61,"./_export":85}],174:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(4);r(r.P+r.F*!t("./_strict-method")([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":65,"./_export":85,"./_strict-method":149}],175:[function(t,e,n){var r=t("./_export");r(r.P,"Array",{fill:t("./_array-fill")}),t("./_add-to-unscopables")("fill")},{"./_add-to-unscopables":58,"./_array-fill":62,"./_export":85}],176:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(2);r(r.P+r.F*!t("./_strict-method")([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":65,"./_export":85,"./_strict-method":149}],177:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")(o)},{"./_add-to-unscopables":58,"./_array-methods":65,"./_export":85}],178:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(5),o=!0;"find"in[]&&Array(1).find(function(){o=!1}),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")("find")},{"./_add-to-unscopables":58,"./_array-methods":65,"./_export":85}],179:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(0),o=t("./_strict-method")([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":65,"./_export":85,"./_strict-method":149}],180:[function(t,e,n){"use strict";var r=t("./_ctx"),i=t("./_export"),o=t("./_to-object"),a=t("./_iter-call"),s=t("./_is-array-iter"),u=t("./_to-length"),c=t("./_create-property"),l=t("./core.get-iterator-method");i(i.S+i.F*!t("./_iter-detect")(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,m=void 0!==v,y=0,g=l(h);if(m&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(e=u(h.length),n=new p(e);e>y;y++)c(n,y,m?v(h[y],y):h[y]);else for(f=g.call(h),n=new p;!(i=f.next()).done;y++)c(n,y,m?a(f,v,[i.value,y],!0):i.value);return n.length=y,n}})},{"./_create-property":77,"./_ctx":78,"./_export":85,"./_is-array-iter":99,"./_iter-call":104,"./_iter-detect":107,"./_to-length":161,"./_to-object":162,"./core.get-iterator-method":171}],181:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-includes")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!t("./_strict-method")(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},{"./_array-includes":64,"./_export":85,"./_strict-method":149}],182:[function(t,e,n){var r=t("./_export");r(r.S,"Array",{isArray:t("./_is-array")})},{"./_export":85,"./_is-array":100}],183:[function(t,e,n){"use strict";var r=t("./_add-to-unscopables"),i=t("./_iter-step"),o=t("./_iterators"),a=t("./_to-iobject");e.exports=t("./_iter-define")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])
},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},{"./_add-to-unscopables":58,"./_iter-define":106,"./_iter-step":108,"./_iterators":109,"./_to-iobject":160}],184:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-iobject"),o=[].join;r(r.P+r.F*(t("./_iobject")!=Object||!t("./_strict-method")(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},{"./_export":85,"./_iobject":98,"./_strict-method":149,"./_to-iobject":160}],185:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-iobject"),o=t("./_to-integer"),a=t("./_to-length"),s=[].lastIndexOf,u=!!s&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(u||!t("./_strict-method")(s)),"Array",{lastIndexOf:function(t){if(u)return s.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},{"./_export":85,"./_strict-method":149,"./_to-integer":159,"./_to-iobject":160,"./_to-length":161}],186:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(1);r(r.P+r.F*!t("./_strict-method")([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":65,"./_export":85,"./_strict-method":149}],187:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_create-property");r(r.S+r.F*t("./_fails")(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},{"./_create-property":77,"./_export":85,"./_fails":87}],188:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-reduce");r(r.P+r.F*!t("./_strict-method")([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},{"./_array-reduce":66,"./_export":85,"./_strict-method":149}],189:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-reduce");r(r.P+r.F*!t("./_strict-method")([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},{"./_array-reduce":66,"./_export":85,"./_strict-method":149}],190:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_html"),o=t("./_cof"),a=t("./_to-index"),s=t("./_to-length"),u=[].slice;r(r.P+r.F*t("./_fails")(function(){i&&u.call(i)}),"Array",{slice:function(t,e){var n=s(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return u.call(this,t,e);for(var i=a(t,n),c=a(e,n),l=s(c-i),f=Array(l),h=0;h<l;h++)f[h]="String"==r?this.charAt(i+h):this[i+h];return f}})},{"./_cof":71,"./_export":85,"./_fails":87,"./_html":94,"./_to-index":158,"./_to-length":161}],191:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-methods")(3);r(r.P+r.F*!t("./_strict-method")([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},{"./_array-methods":65,"./_export":85,"./_strict-method":149}],192:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_a-function"),o=t("./_to-object"),a=t("./_fails"),s=[].sort,u=[1,2,3];r(r.P+r.F*(a(function(){u.sort(void 0)})||!a(function(){u.sort(null)})||!t("./_strict-method")(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},{"./_a-function":56,"./_export":85,"./_fails":87,"./_strict-method":149,"./_to-object":162}],193:[function(t,e,n){t("./_set-species")("Array")},{"./_set-species":144}],194:[function(t,e,n){var r=t("./_export");r(r.S,"Date",{now:function(){return(new Date).getTime()}})},{"./_export":85}],195:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_fails"),o=Date.prototype.getTime,a=function(t){return t>9?t:"0"+t};r(r.P+r.F*(i(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!i(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(o.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}})},{"./_export":85,"./_fails":87}],196:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive");r(r.P+r.F*t("./_fails")(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},{"./_export":85,"./_fails":87,"./_to-object":162,"./_to-primitive":163}],197:[function(t,e,n){var r=t("./_wks")("toPrimitive"),i=Date.prototype;r in i||t("./_hide")(i,r,t("./_date-to-primitive"))},{"./_date-to-primitive":79,"./_hide":93,"./_wks":170}],198:[function(t,e,n){var r=Date.prototype,i=r.toString,o=r.getTime;new Date(NaN)+""!="Invalid Date"&&t("./_redefine")(r,"toString",function(){var t=o.call(this);return t===t?i.call(this):"Invalid Date"})},{"./_redefine":140}],199:[function(t,e,n){var r=t("./_export");r(r.P,"Function",{bind:t("./_bind")})},{"./_bind":69,"./_export":85}],200:[function(t,e,n){"use strict";var r=t("./_is-object"),i=t("./_object-gpo"),o=t("./_wks")("hasInstance"),a=Function.prototype;o in a||t("./_object-dp").f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},{"./_is-object":102,"./_object-dp":120,"./_object-gpo":127,"./_wks":170}],201:[function(t,e,n){var r=t("./_object-dp").f,i=t("./_property-desc"),o=t("./_has"),a=Function.prototype,s=Object.isExtensible||function(){return!0};"name"in a||t("./_descriptors")&&r(a,"name",{configurable:!0,get:function(){try{var t=this,e=(""+t).match(/^\s*function ([^ (]*)/)[1];return o(t,"name")||!s(t)||r(t,"name",i(5,e)),e}catch(t){return""}}})},{"./_descriptors":81,"./_has":92,"./_object-dp":120,"./_property-desc":138}],202:[function(t,e,n){"use strict";var r=t("./_collection-strong");e.exports=t("./_collection")("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},{"./_collection":75,"./_collection-strong":72}],203:[function(t,e,n){var r=t("./_export"),i=t("./_math-log1p"),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},{"./_export":85,"./_math-log1p":113}],204:[function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=t("./_export"),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},{"./_export":85}],205:[function(t,e,n){var r=t("./_export"),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},{"./_export":85}],206:[function(t,e,n){var r=t("./_export"),i=t("./_math-sign");r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},{"./_export":85,"./_math-sign":114}],207:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},{"./_export":85}],208:[function(t,e,n){var r=t("./_export"),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},{"./_export":85}],209:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1");r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},{"./_export":85,"./_math-expm1":112}],210:[function(t,e,n){var r=t("./_export"),i=t("./_math-sign"),o=Math.pow,a=o(2,-52),s=o(2,-23),u=o(2,127)*(2-s),c=o(2,-126),l=function(t){return t+1/a-1/a};r(r.S,"Math",{fround:function(t){var e,n,r=Math.abs(t),o=i(t);return r<c?o*l(r/c/s)*c*s:(e=(1+s/a)*r,n=e-(e-r),n>u||n!=n?o*(1/0):o*n)}})},{"./_export":85,"./_math-sign":114}],211:[function(t,e,n){var r=t("./_export"),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,s=arguments.length,u=0;a<s;)n=i(arguments[a++]),u<n?(r=u/n,o=o*r*r+1,u=n):n>0?(r=n/u,o+=r*r):o+=n;return u===1/0?1/0:u*Math.sqrt(o)}})},{"./_export":85}],212:[function(t,e,n){var r=t("./_export"),i=Math.imul;r(r.S+r.F*t("./_fails")(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r;return 0|i*o+((65535&n>>>16)*o+i*(65535&r>>>16)<<16>>>0)}})},{"./_export":85,"./_fails":87}],213:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log10:function(t){return Math.log(t)/Math.LN10}})},{"./_export":85}],214:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log1p:t("./_math-log1p")})},{"./_export":85,"./_math-log1p":113}],215:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},{"./_export":85}],216:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{sign:t("./_math-sign")})},{"./_export":85,"./_math-sign":114}],217:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1"),o=Math.exp;r(r.S+r.F*t("./_fails")(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},{"./_export":85,"./_fails":87,"./_math-expm1":112}],218:[function(t,e,n){var r=t("./_export"),i=t("./_math-expm1"),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},{"./_export":85,"./_math-expm1":112}],219:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},{"./_export":85}],220:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_has"),o=t("./_cof"),a=t("./_inherit-if-required"),s=t("./_to-primitive"),u=t("./_fails"),c=t("./_object-gopn").f,l=t("./_object-gopd").f,f=t("./_object-dp").f,h=t("./_string-trim").trim,p=r.Number,d=p,v=p.prototype,m="Number"==o(t("./_object-create")(v)),y="trim"in String.prototype,g=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=y?e.trim():h(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,u=e.slice(2),c=0,l=u.length;c<l;c++)if(a=u.charCodeAt(c),a<48||a>i)return NaN;return parseInt(u,r)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?u(function(){v.valueOf.call(n)}):"Number"!=o(n))?a(new d(g(e)),n,p):g(e)};for(var _,b=t("./_descriptors")?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;b.length>w;w++)i(d,_=b[w])&&!i(p,_)&&f(p,_,l(d,_));p.prototype=v,v.constructor=p,t("./_redefine")(r,"Number",p)}},{"./_cof":71,"./_descriptors":81,"./_fails":87,"./_global":91,"./_has":92,"./_inherit-if-required":96,"./_object-create":119,"./_object-dp":120,"./_object-gopd":123,"./_object-gopn":125,"./_redefine":140,"./_string-trim":155,"./_to-primitive":163}],221:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},{"./_export":85}],222:[function(t,e,n){var r=t("./_export"),i=t("./_global").isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},{"./_export":85,"./_global":91}],223:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{isInteger:t("./_is-integer")})},{"./_export":85,"./_is-integer":101}],224:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{isNaN:function(t){return t!=t}})},{"./_export":85}],225:[function(t,e,n){var r=t("./_export"),i=t("./_is-integer"),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},{"./_export":85,"./_is-integer":101}],226:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},{"./_export":85}],227:[function(t,e,n){var r=t("./_export");r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},{"./_export":85}],228:[function(t,e,n){var r=t("./_export"),i=t("./_parse-float");r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},{"./_export":85,"./_parse-float":134}],229:[function(t,e,n){var r=t("./_export"),i=t("./_parse-int");r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},{"./_export":85,"./_parse-int":135}],230:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-integer"),o=t("./_a-number-value"),a=t("./_string-repeat"),s=1..toFixed,u=Math.floor,c=[0,0,0,0,0,0],l="Number.toFixed: incorrect invocation!",f=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=u(r/1e7)},h=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=u(n/t),n=n%t*1e7},p=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call("0",7-n.length)+n}return e},d=function(t,e,n){return 0===e?n:e%2===1?d(t,e-1,n*t):d(t*t,e/2,n)},v=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!s&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!t("./_fails")(function(){s.call({})})),"Number",{toFixed:function(t){var e,n,r,s,u=o(this,l),c=i(t),m="",y="0";if(c<0||c>20)throw RangeError(l);if(u!=u)return"NaN";if(u<=-1e21||u>=1e21)return String(u);if(u<0&&(m="-",u=-u),u>1e-21)if(e=v(u*d(2,69,1))-69,n=e<0?u*d(2,-e,1):u/d(2,e,1),n*=4503599627370496,e=52-e,e>0){for(f(0,n),r=c;r>=7;)f(1e7,0),r-=7;for(f(d(10,r,1),0),r=e-1;r>=23;)h(1<<23),r-=23;h(1<<r),f(1,1),h(2),y=p()}else f(0,n),f(1<<-e,0),y=p()+a.call("0",c);return c>0?(s=y.length,y=m+(s<=c?"0."+a.call("0",c-s)+y:y.slice(0,s-c)+"."+y.slice(s-c))):y=m+y,y}})},{"./_a-number-value":57,"./_export":85,"./_fails":87,"./_string-repeat":154,"./_to-integer":159}],231:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_fails"),o=t("./_a-number-value"),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},{"./_a-number-value":57,"./_export":85,"./_fails":87}],232:[function(t,e,n){var r=t("./_export");r(r.S+r.F,"Object",{assign:t("./_object-assign")})},{"./_export":85,"./_object-assign":118}],233:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{create:t("./_object-create")})},{"./_export":85,"./_object-create":119}],234:[function(t,e,n){var r=t("./_export");r(r.S+r.F*!t("./_descriptors"),"Object",{defineProperties:t("./_object-dps")})},{"./_descriptors":81,"./_export":85,"./_object-dps":121}],235:[function(t,e,n){var r=t("./_export");r(r.S+r.F*!t("./_descriptors"),"Object",{defineProperty:t("./_object-dp").f})},{"./_descriptors":81,"./_export":85,"./_object-dp":120}],236:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":102,"./_meta":115,"./_object-sap":131}],237:[function(t,e,n){var r=t("./_to-iobject"),i=t("./_object-gopd").f;t("./_object-sap")("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},{"./_object-gopd":123,"./_object-sap":131,"./_to-iobject":160}],238:[function(t,e,n){t("./_object-sap")("getOwnPropertyNames",function(){return t("./_object-gopn-ext").f})},{"./_object-gopn-ext":124,"./_object-sap":131}],239:[function(t,e,n){var r=t("./_to-object"),i=t("./_object-gpo");t("./_object-sap")("getPrototypeOf",function(){return function(t){return i(r(t))}})},{"./_object-gpo":127,"./_object-sap":131,"./_to-object":162}],240:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},{"./_is-object":102,"./_object-sap":131}],241:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},{"./_is-object":102,"./_object-sap":131}],242:[function(t,e,n){var r=t("./_is-object");t("./_object-sap")("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},{"./_is-object":102,"./_object-sap":131}],243:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{is:t("./_same-value")})},{"./_export":85,"./_same-value":142}],244:[function(t,e,n){var r=t("./_to-object"),i=t("./_object-keys");t("./_object-sap")("keys",function(){return function(t){return i(r(t))}})},{"./_object-keys":129,"./_object-sap":131,"./_to-object":162}],245:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":102,"./_meta":115,"./_object-sap":131}],246:[function(t,e,n){var r=t("./_is-object"),i=t("./_meta").onFreeze;t("./_object-sap")("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},{"./_is-object":102,"./_meta":115,"./_object-sap":131}],247:[function(t,e,n){var r=t("./_export");r(r.S,"Object",{setPrototypeOf:t("./_set-proto").set})},{"./_export":85,"./_set-proto":143}],248:[function(t,e,n){"use strict";var r=t("./_classof"),i={};i[t("./_wks")("toStringTag")]="z",i+""!="[object z]"&&t("./_redefine")(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},{"./_classof":70,"./_redefine":140,"./_wks":170}],249:[function(t,e,n){var r=t("./_export"),i=t("./_parse-float");r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},{"./_export":85,"./_parse-float":134}],250:[function(t,e,n){var r=t("./_export"),i=t("./_parse-int");r(r.G+r.F*(parseInt!=i),{parseInt:i})},{"./_export":85,"./_parse-int":135}],251:[function(t,e,n){"use strict";var r,i,o,a=t("./_library"),s=t("./_global"),u=t("./_ctx"),c=t("./_classof"),l=t("./_export"),f=t("./_is-object"),h=t("./_a-function"),p=t("./_an-instance"),d=t("./_for-of"),v=t("./_species-constructor"),m=t("./_task").set,y=t("./_microtask")(),g=s.TypeError,_=s.process,b=s.Promise,_=s.process,w="process"==c(_),x=function(){},E=!!function(){try{var e=b.resolve(1),n=(e.constructor={})[t("./_wks")("species")]=function(t){t(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof n}catch(t){}}(),T=function(t,e){return t===e||t===b&&e===o},S=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},M=function(t){return T(b,t)?new O(t):new i(t)},O=i=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw g("Bad Promise constructor");e=t,n=r}),this.resolve=h(e),this.reject=h(n)},A=function(t){try{t()}catch(t){return{error:t}}},R=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,s=e.resolve,u=e.reject,c=e.domain;try{a?(i||(2==t._h&&P(t),t._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?u(g("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(t){u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){m.call(s,function(){var e,n,r,i=t._v;if(k(t)&&(e=A(function(){w?_.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=w||k(t)?2:1),t._a=void 0,e)throw e.error})},k=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!k(e.promise))return!1;return!0},P=function(t){m.call(s,function(){var e;w?_.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},N=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),R(e,!0))},C=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw g("Promise can't be resolved itself");(e=S(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,u(C,r,1),u(N,r,1))}catch(t){N.call(r,t)}}):(n._v=t,n._s=1,R(n,!1))}catch(t){N.call({_w:n,_d:!1},t)}}};E||(b=function(t){p(this,b,"Promise","_h"),h(t),r.call(this);try{t(u(C,this,1),u(N,this,1))}catch(t){N.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=t("./_redefine-all")(b.prototype,{then:function(t,e){var n=M(v(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&R(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),O=function(){var t=new r;this.promise=t,this.resolve=u(C,t,1),this.reject=u(N,t,1)}),l(l.G+l.W+l.F*!E,{Promise:b}),t("./_set-to-string-tag")(b,"Promise"),t("./_set-species")("Promise"),o=t("./_core").Promise,l(l.S+l.F*!E,"Promise",{reject:function(t){var e=M(this);return(0,e.reject)(t),e.promise}}),l(l.S+l.F*(a||!E),"Promise",{resolve:function(t){if(t instanceof b&&T(t.constructor,this))return t;var e=M(this);return(0,e.resolve)(t),e.promise}}),l(l.S+l.F*!(E&&t("./_iter-detect")(function(t){b.all(t).catch(x)})),"Promise",{all:function(t){var e=this,n=M(e),r=n.resolve,i=n.reject,o=A(function(){var n=[],o=0,a=1;d(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(t){var e=this,n=M(e),r=n.reject,i=A(function(){d(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},{"./_a-function":56,"./_an-instance":59,"./_classof":70,"./_core":76,"./_ctx":78,"./_export":85,"./_for-of":90,"./_global":91,"./_is-object":102,"./_iter-detect":107,"./_library":111,"./_microtask":117,"./_redefine-all":139,"./_set-species":144,"./_set-to-string-tag":145,"./_species-constructor":148,"./_task":157,"./_wks":170}],252:[function(t,e,n){var r=t("./_export"),i=t("./_a-function"),o=t("./_an-object"),a=(t("./_global").Reflect||{}).apply,s=Function.apply;r(r.S+r.F*!t("./_fails")(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),u=o(n);return a?a(r,e,u):s.call(r,e,u)}})},{"./_a-function":56,"./_an-object":60,"./_export":85,"./_fails":87,"./_global":91}],253:[function(t,e,n){var r=t("./_export"),i=t("./_object-create"),o=t("./_a-function"),a=t("./_an-object"),s=t("./_is-object"),u=t("./_fails"),c=t("./_bind"),l=(t("./_global").Reflect||{}).construct,f=u(function(){function t(){}return!(l(function(){},[],t)instanceof t)}),h=!u(function(){l(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!f)return l(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var u=n.prototype,p=i(s(u)?u:Object.prototype),d=Function.apply.call(t,p,e);return s(d)?d:p}})},{"./_a-function":56,"./_an-object":60,"./_bind":69,"./_export":85,"./_fails":87,"./_global":91,"./_is-object":102,"./_object-create":119}],254:[function(t,e,n){var r=t("./_object-dp"),i=t("./_export"),o=t("./_an-object"),a=t("./_to-primitive");i(i.S+i.F*t("./_fails")(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},{"./_an-object":60,"./_export":85,"./_fails":87,"./_object-dp":120,"./_to-primitive":163}],255:[function(t,e,n){var r=t("./_export"),i=t("./_object-gopd").f,o=t("./_an-object");r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},{"./_an-object":60,"./_export":85,"./_object-gopd":123}],256:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_an-object"),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};t("./_iter-create")(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},{"./_an-object":60,"./_export":85,"./_iter-create":105}],257:[function(t,e,n){var r=t("./_object-gopd"),i=t("./_export"),o=t("./_an-object");i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},{"./_an-object":60,"./_export":85,"./_object-gopd":123}],258:[function(t,e,n){var r=t("./_export"),i=t("./_object-gpo"),o=t("./_an-object");r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},{"./_an-object":60,"./_export":85,"./_object-gpo":127}],259:[function(t,e,n){function r(t,e){var n,s,l=arguments.length<3?t:arguments[2];return c(t)===l?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(l):void 0:u(s=o(t))?r(s,e,l):void 0}var i=t("./_object-gopd"),o=t("./_object-gpo"),a=t("./_has"),s=t("./_export"),u=t("./_is-object"),c=t("./_an-object");s(s.S,"Reflect",{get:r})},{"./_an-object":60,"./_export":85,"./_has":92,"./_is-object":102,"./_object-gopd":123,"./_object-gpo":127}],260:[function(t,e,n){var r=t("./_export");r(r.S,"Reflect",{has:function(t,e){return e in t}})},{"./_export":85}],261:[function(t,e,n){var r=t("./_export"),i=t("./_an-object"),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},{"./_an-object":60,"./_export":85}],262:[function(t,e,n){var r=t("./_export");r(r.S,"Reflect",{ownKeys:t("./_own-keys")})},{"./_export":85,"./_own-keys":133}],263:[function(t,e,n){var r=t("./_export"),i=t("./_an-object"),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},{"./_an-object":60,"./_export":85}],264:[function(t,e,n){var r=t("./_export"),i=t("./_set-proto");i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},{"./_export":85,"./_set-proto":143}],265:[function(t,e,n){function r(t,e,n){var u,h,p=arguments.length<4?t:arguments[3],d=o.f(l(t),e);if(!d){if(f(h=a(t)))return r(h,e,n,p);d=c(0)}return s(d,"value")?!(d.writable===!1||!f(p))&&(u=o.f(p,e)||c(0),u.value=n,i.f(p,e,u),!0):void 0!==d.set&&(d.set.call(p,n),!0)}var i=t("./_object-dp"),o=t("./_object-gopd"),a=t("./_object-gpo"),s=t("./_has"),u=t("./_export"),c=t("./_property-desc"),l=t("./_an-object"),f=t("./_is-object");u(u.S,"Reflect",{set:r})},{"./_an-object":60,"./_export":85,"./_has":92,"./_is-object":102,"./_object-dp":120,"./_object-gopd":123,"./_object-gpo":127,"./_property-desc":138}],266:[function(t,e,n){var r=t("./_global"),i=t("./_inherit-if-required"),o=t("./_object-dp").f,a=t("./_object-gopn").f,s=t("./_is-regexp"),u=t("./_flags"),c=r.RegExp,l=c,f=c.prototype,h=/a/g,p=/a/g!==new c(/a/g);if(t("./_descriptors")&&(!p||t("./_fails")(function(){return h[t("./_wks")("match")]=!1,/a/g!=c(/a/g)||c(h)==h||"/a/i"!=c(/a/g,"i")}))){c=function(t,e){var n=this instanceof c,r=s(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(p?new l(r&&!o?t.source:t,e):l((r=t instanceof c)?t.source:t,r&&o?u.call(t):e),n?this:f,c)};for(var d=(function(t){t in c||o(c,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})}),v=a(l),m=0;v.length>m;)d(v[m++]);f.constructor=c,c.prototype=f,t("./_redefine")(r,"RegExp",c)}t("./_set-species")("RegExp")},{"./_descriptors":81,"./_fails":87,"./_flags":89,"./_global":91,"./_inherit-if-required":96,"./_is-regexp":103,"./_object-dp":120,"./_object-gopn":125,"./_redefine":140,"./_set-species":144,"./_wks":170}],267:[function(t,e,n){t("./_descriptors")&&"g"!=/./g.flags&&t("./_object-dp").f(RegExp.prototype,"flags",{configurable:!0,get:t("./_flags")})},{"./_descriptors":81,"./_flags":89,"./_object-dp":120}],268:[function(t,e,n){t("./_fix-re-wks")("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},{"./_fix-re-wks":88}],269:[function(t,e,n){t("./_fix-re-wks")("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},{"./_fix-re-wks":88}],270:[function(t,e,n){t("./_fix-re-wks")("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},{"./_fix-re-wks":88}],271:[function(t,e,n){t("./_fix-re-wks")("split",2,function(e,n,r){"use strict";var i=t("./_is-regexp"),o=r,a=[].push,s="length";if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1)[s]||2!="ab".split(/(?:ab)*/)[s]||4!=".".split(/(.?)(.?)/)[s]||".".split(/()()/)[s]>1||"".split(/.?/)[s]){var u=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,c,l,f,h,p=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,m=void 0===e?4294967295:e>>>0,y=new RegExp(t.source,d+"g");for(u||(r=new RegExp("^"+y.source+"$(?!\\s)",d));(c=y.exec(n))&&(l=c.index+c[0][s],!(l>v&&(p.push(n.slice(v,c.index)),!u&&c[s]>1&&c[0].replace(r,function(){for(h=1;h<arguments[s]-2;h++)void 0===arguments[h]&&(c[h]=void 0)}),c[s]>1&&c.index<n[s]&&a.apply(p,c.slice(1)),f=c[0][s],v=l,p[s]>=m)));)y.lastIndex===c.index&&y.lastIndex++;return v===n[s]?!f&&y.test("")||p.push(""):p.push(n.slice(v)),p[s]>m?p.slice(0,m):p}}else"0".split(void 0,0)[s]&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(t,i){var o=e(this),a=void 0==t?void 0:t[n];return void 0!==a?a.call(t,o,i):r.call(String(o),t,i)},r]})},{"./_fix-re-wks":88,"./_is-regexp":103}],272:[function(t,e,n){"use strict";t("./es6.regexp.flags");var r=t("./_an-object"),i=t("./_flags"),o=t("./_descriptors"),a=/./.toString,s=function(e){t("./_redefine")(RegExp.prototype,"toString",e,!0)};t("./_fails")(function(){return"/a/b"!=a.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):"toString"!=a.name&&s(function(){return a.call(this)})},{"./_an-object":60,"./_descriptors":81,"./_fails":87,"./_flags":89,"./_redefine":140,"./es6.regexp.flags":267}],273:[function(t,e,n){"use strict";var r=t("./_collection-strong");e.exports=t("./_collection")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t=0===t?0:t,t)}},r)},{"./_collection":75,"./_collection-strong":72}],274:[function(t,e,n){"use strict";t("./_string-html")("anchor",function(t){return function(e){return t(this,"a","name",e)}})},{"./_string-html":152}],275:[function(t,e,n){"use strict";t("./_string-html")("big",function(t){return function(){return t(this,"big","","")}})},{"./_string-html":152}],276:[function(t,e,n){"use strict";t("./_string-html")("blink",function(t){return function(){return t(this,"blink","","")}})},{"./_string-html":152}],277:[function(t,e,n){"use strict";t("./_string-html")("bold",function(t){return function(){return t(this,"b","","")}})},{"./_string-html":152}],278:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-at")(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},{"./_export":85,"./_string-at":150}],279:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-length"),o=t("./_string-context"),a="".endsWith;r(r.P+r.F*t("./_fails-is-regexp")("endsWith"),"String",{endsWith:function(t){var e=o(this,t,"endsWith"),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),u=String(t);return a?a.call(e,u,s):e.slice(s-u.length,s)===u}})},{"./_export":85,"./_fails-is-regexp":86,"./_string-context":151,"./_to-length":161}],280:[function(t,e,n){"use strict";t("./_string-html")("fixed",function(t){return function(){return t(this,"tt","","")}})},{"./_string-html":152}],281:[function(t,e,n){"use strict";t("./_string-html")("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},{"./_string-html":152}],282:[function(t,e,n){"use strict";t("./_string-html")("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},{"./_string-html":152}],283:[function(t,e,n){
var r=t("./_export"),i=t("./_to-index"),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},{"./_export":85,"./_to-index":158}],284:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-context");r(r.P+r.F*t("./_fails-is-regexp")("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},{"./_export":85,"./_fails-is-regexp":86,"./_string-context":151}],285:[function(t,e,n){"use strict";t("./_string-html")("italics",function(t){return function(){return t(this,"i","","")}})},{"./_string-html":152}],286:[function(t,e,n){"use strict";var r=t("./_string-at")(!0);t("./_iter-define")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},{"./_iter-define":106,"./_string-at":150}],287:[function(t,e,n){"use strict";t("./_string-html")("link",function(t){return function(e){return t(this,"a","href",e)}})},{"./_string-html":152}],288:[function(t,e,n){var r=t("./_export"),i=t("./_to-iobject"),o=t("./_to-length");r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],s=0;n>s;)a.push(String(e[s++])),s<r&&a.push(String(arguments[s]));return a.join("")}})},{"./_export":85,"./_to-iobject":160,"./_to-length":161}],289:[function(t,e,n){var r=t("./_export");r(r.P,"String",{repeat:t("./_string-repeat")})},{"./_export":85,"./_string-repeat":154}],290:[function(t,e,n){"use strict";t("./_string-html")("small",function(t){return function(){return t(this,"small","","")}})},{"./_string-html":152}],291:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-length"),o=t("./_string-context"),a="".startsWith;r(r.P+r.F*t("./_fails-is-regexp")("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},{"./_export":85,"./_fails-is-regexp":86,"./_string-context":151,"./_to-length":161}],292:[function(t,e,n){"use strict";t("./_string-html")("strike",function(t){return function(){return t(this,"strike","","")}})},{"./_string-html":152}],293:[function(t,e,n){"use strict";t("./_string-html")("sub",function(t){return function(){return t(this,"sub","","")}})},{"./_string-html":152}],294:[function(t,e,n){"use strict";t("./_string-html")("sup",function(t){return function(){return t(this,"sup","","")}})},{"./_string-html":152}],295:[function(t,e,n){"use strict";t("./_string-trim")("trim",function(t){return function(){return t(this,3)}})},{"./_string-trim":155}],296:[function(t,e,n){"use strict";var r=t("./_global"),i=t("./_has"),o=t("./_descriptors"),a=t("./_export"),s=t("./_redefine"),u=t("./_meta").KEY,c=t("./_fails"),l=t("./_shared"),f=t("./_set-to-string-tag"),h=t("./_uid"),p=t("./_wks"),d=t("./_wks-ext"),v=t("./_wks-define"),m=t("./_keyof"),y=t("./_enum-keys"),g=t("./_is-array"),_=t("./_an-object"),b=t("./_to-iobject"),w=t("./_to-primitive"),x=t("./_property-desc"),E=t("./_object-create"),T=t("./_object-gopn-ext"),S=t("./_object-gopd"),M=t("./_object-dp"),O=t("./_object-keys"),A=S.f,R=M.f,I=T.f,k=r.Symbol,P=r.JSON,N=P&&P.stringify,C=p("_hidden"),D=p("toPrimitive"),j={}.propertyIsEnumerable,L=l("symbol-registry"),F=l("symbols"),U=l("op-symbols"),z=Object.prototype,B="function"==typeof k,V=r.QObject,G=!V||!V.prototype||!V.prototype.findChild,H=o&&c(function(){return 7!=E(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=A(z,e);r&&delete z[e],R(t,e,n),r&&t!==z&&R(z,e,r)}:R,W=function(t){var e=F[t]=E(k.prototype);return e._k=t,e},q=B&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},Y=function(t,e,n){return t===z&&Y(U,e,n),_(t),e=w(e,!0),_(n),i(F,e)?(n.enumerable?(i(t,C)&&t[C][e]&&(t[C][e]=!1),n=E(n,{enumerable:x(0,!1)})):(i(t,C)||R(t,C,x(1,{})),t[C][e]=!0),H(t,e,n)):R(t,e,n)},X=function(t,e){_(t);for(var n,r=y(e=b(e)),i=0,o=r.length;o>i;)Y(t,n=r[i++],e[n]);return t},Z=function(t,e){return void 0===e?E(t):X(E(t),e)},K=function(t){var e=j.call(this,t=w(t,!0));return!(this===z&&i(F,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,C)&&this[C][t])||e)},Q=function(t,e){if(t=b(t),e=w(e,!0),t!==z||!i(F,e)||i(U,e)){var n=A(t,e);return!n||!i(F,e)||i(t,C)&&t[C][e]||(n.enumerable=!0),n}},J=function(t){for(var e,n=I(b(t)),r=[],o=0;n.length>o;)i(F,e=n[o++])||e==C||e==u||r.push(e);return r},$=function(t){for(var e,n=t===z,r=I(n?U:b(t)),o=[],a=0;r.length>a;)!i(F,e=r[a++])||n&&!i(z,e)||o.push(F[e]);return o};B||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(U,n),i(this,C)&&i(this[C],t)&&(this[C][t]=!1),H(this,t,x(1,n))};return o&&G&&H(z,t,{configurable:!0,set:e}),W(t)},s(k.prototype,"toString",function(){return this._k}),S.f=Q,M.f=Y,t("./_object-gopn").f=T.f=J,t("./_object-pie").f=K,t("./_object-gops").f=$,o&&!t("./_library")&&s(z,"propertyIsEnumerable",K,!0),d.f=function(t){return W(p(t))}),a(a.G+a.W+a.F*!B,{Symbol:k});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var tt=O(p.store),et=0;tt.length>et;)v(tt[et++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=k(t)},keyFor:function(t){if(q(t))return m(L,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!B,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:Q,getOwnPropertyNames:J,getOwnPropertySymbols:$}),P&&a(a.S+a.F*(!B||c(function(){var t=k();return"[null]"!=N([t])||"{}"!=N({a:t})||"{}"!=N(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!q(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!q(e))return e}),r[1]=e,N.apply(P,r)}}}),k.prototype[D]||t("./_hide")(k.prototype,D,k.prototype.valueOf),f(k,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},{"./_an-object":60,"./_descriptors":81,"./_enum-keys":84,"./_export":85,"./_fails":87,"./_global":91,"./_has":92,"./_hide":93,"./_is-array":100,"./_keyof":110,"./_library":111,"./_meta":115,"./_object-create":119,"./_object-dp":120,"./_object-gopd":123,"./_object-gopn":125,"./_object-gopn-ext":124,"./_object-gops":126,"./_object-keys":129,"./_object-pie":130,"./_property-desc":138,"./_redefine":140,"./_set-to-string-tag":145,"./_shared":147,"./_to-iobject":160,"./_to-primitive":163,"./_uid":167,"./_wks":170,"./_wks-define":168,"./_wks-ext":169}],297:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_typed"),o=t("./_typed-buffer"),a=t("./_an-object"),s=t("./_to-index"),u=t("./_to-length"),c=t("./_is-object"),l=t("./_global").ArrayBuffer,f=t("./_species-constructor"),h=o.ArrayBuffer,p=o.DataView,d=i.ABV&&l.isView,v=h.prototype.slice,m=i.VIEW;r(r.G+r.W+r.F*(l!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,"ArrayBuffer",{isView:function(t){return d&&d(t)||c(t)&&m in t}}),r(r.P+r.U+r.F*t("./_fails")(function(){return!new h(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=s(t,n),i=s(void 0===e?n:e,n),o=new(f(this,h))(u(i-r)),c=new p(this),l=new p(o),d=0;r<i;)l.setUint8(d++,c.getUint8(r++));return o}}),t("./_set-species")("ArrayBuffer")},{"./_an-object":60,"./_export":85,"./_fails":87,"./_global":91,"./_is-object":102,"./_set-species":144,"./_species-constructor":148,"./_to-index":158,"./_to-length":161,"./_typed":166,"./_typed-buffer":165}],298:[function(t,e,n){var r=t("./_export");r(r.G+r.W+r.F*!t("./_typed").ABV,{DataView:t("./_typed-buffer").DataView})},{"./_export":85,"./_typed":166,"./_typed-buffer":165}],299:[function(t,e,n){t("./_typed-array")("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],300:[function(t,e,n){t("./_typed-array")("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],301:[function(t,e,n){t("./_typed-array")("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],302:[function(t,e,n){t("./_typed-array")("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],303:[function(t,e,n){t("./_typed-array")("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],304:[function(t,e,n){t("./_typed-array")("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],305:[function(t,e,n){t("./_typed-array")("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],306:[function(t,e,n){t("./_typed-array")("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},{"./_typed-array":164}],307:[function(t,e,n){t("./_typed-array")("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},{"./_typed-array":164}],308:[function(t,e,n){"use strict";var r,i=t("./_array-methods")(0),o=t("./_redefine"),a=t("./_meta"),s=t("./_object-assign"),u=t("./_collection-weak"),c=t("./_is-object"),l=a.getWeak,f=Object.isExtensible,h=u.ufstore,p={},d=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(t){if(c(t)){var e=l(t);return e===!0?h(this).get(t):e?e[this._i]:void 0}},set:function(t,e){return u.def(this,t,e)}},m=e.exports=t("./_collection")("WeakMap",d,v,u,!0,!0);7!=(new m).set((Object.freeze||Object)(p),7).get(p)&&(r=u.getConstructor(d),s(r.prototype,v),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=m.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!f(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},{"./_array-methods":65,"./_collection":75,"./_collection-weak":74,"./_is-object":102,"./_meta":115,"./_object-assign":118,"./_redefine":140}],309:[function(t,e,n){"use strict";var r=t("./_collection-weak");t("./_collection")("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(this,t,!0)}},r,!1,!0)},{"./_collection":75,"./_collection-weak":74}],310:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_array-includes")(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),t("./_add-to-unscopables")("includes")},{"./_add-to-unscopables":58,"./_array-includes":64,"./_export":85}],311:[function(t,e,n){var r=t("./_export"),i=t("./_microtask")(),o=t("./_global").process,a="process"==t("./_cof")(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},{"./_cof":71,"./_export":85,"./_global":91,"./_microtask":117}],312:[function(t,e,n){var r=t("./_export"),i=t("./_cof");r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},{"./_cof":71,"./_export":85}],313:[function(t,e,n){var r=t("./_export");r(r.P+r.R,"Map",{toJSON:t("./_collection-to-json")("Map")})},{"./_collection-to-json":73,"./_export":85}],314:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},{"./_export":85}],315:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{imulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>16,s=r>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>16)+((i*s>>>0)+(65535&u)>>16)}})},{"./_export":85}],316:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},{"./_export":85}],317:[function(t,e,n){var r=t("./_export");r(r.S,"Math",{umulh:function(t,e){var n=+t,r=+e,i=65535&n,o=65535&r,a=n>>>16,s=r>>>16,u=(a*o>>>0)+(i*o>>>16);return a*s+(u>>>16)+((i*s>>>0)+(65535&u)>>>16)}})},{"./_export":85}],318:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_a-function"),a=t("./_object-dp");t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},{"./_a-function":56,"./_descriptors":81,"./_export":85,"./_object-dp":120,"./_object-forced-pam":122,"./_to-object":162}],319:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_a-function"),a=t("./_object-dp");t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},{"./_a-function":56,"./_descriptors":81,"./_export":85,"./_object-dp":120,"./_object-forced-pam":122,"./_to-object":162}],320:[function(t,e,n){var r=t("./_export"),i=t("./_object-to-array")(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},{"./_export":85,"./_object-to-array":132}],321:[function(t,e,n){var r=t("./_export"),i=t("./_own-keys"),o=t("./_to-iobject"),a=t("./_object-gopd"),s=t("./_create-property");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n=o(t),r=a.f,u=i(n),c={},l=0;u.length>l;)s(c,e=u[l++],r(n,e));return c}})},{"./_create-property":77,"./_export":85,"./_object-gopd":123,"./_own-keys":133,"./_to-iobject":160}],322:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive"),a=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=s(n,r))return e.get;while(n=a(n))}})},{"./_descriptors":81,"./_export":85,"./_object-forced-pam":122,"./_object-gopd":123,"./_object-gpo":127,"./_to-object":162,"./_to-primitive":163}],323:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_to-object"),o=t("./_to-primitive"),a=t("./_object-gpo"),s=t("./_object-gopd").f;t("./_descriptors")&&r(r.P+t("./_object-forced-pam"),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=s(n,r))return e.set;while(n=a(n))}})},{"./_descriptors":81,"./_export":85,"./_object-forced-pam":122,"./_object-gopd":123,"./_object-gpo":127,"./_to-object":162,"./_to-primitive":163}],324:[function(t,e,n){var r=t("./_export"),i=t("./_object-to-array")(!1);r(r.S,"Object",{values:function(t){return i(t)}})},{"./_export":85,"./_object-to-array":132}],325:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_global"),o=t("./_core"),a=t("./_microtask")(),s=t("./_wks")("observable"),u=t("./_a-function"),c=t("./_an-object"),l=t("./_an-instance"),f=t("./_redefine-all"),h=t("./_hide"),p=t("./_for-of"),d=p.RETURN,v=function(t){return null==t?void 0:u(t)},m=function(t){var e=t._c;e&&(t._c=void 0,e())},y=function(t){return void 0===t._o},g=function(t){y(t)||(t._o=void 0,m(t))},_=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:u(n),this._c=n)}catch(e){return void t.error(e)}y(this)&&m(this)};_.prototype=f({},{unsubscribe:function(){g(this)}});var b=function(t){this._s=t};b.prototype=f({},{next:function(t){var e=this._s;if(!y(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{g(e)}finally{throw t}}}},error:function(t){var e=this._s;if(y(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{m(e)}finally{throw t}}return m(e),t},complete:function(t){var e=this._s;if(!y(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{m(e)}finally{throw t}}return m(e),t}}});var w=function(t){l(this,w,"Observable","_f")._f=u(t)};f(w.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){u(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),f(w,{from:function(t){var e="function"==typeof this?this:w,n=v(c(t)[s]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(w.prototype,s,function(){return this}),r(r.G,{Observable:w}),t("./_set-species")("Observable")},{"./_a-function":56,"./_an-instance":59,"./_an-object":60,"./_core":76,"./_export":85,"./_for-of":90,"./_global":91,"./_hide":93,"./_microtask":117,"./_redefine-all":139,"./_set-species":144,"./_wks":170}],326:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},{"./_an-object":60,"./_metadata":116}],327:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.key,a=r.map,s=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var u=s.get(e);return u.delete(n),!!u.size||s.delete(e)}})},{"./_an-object":60,"./_metadata":116}],328:[function(t,e,n){var r=t("./es6.set"),i=t("./_array-from-iterable"),o=t("./_metadata"),a=t("./_an-object"),s=t("./_object-gpo"),u=o.keys,c=o.key,l=function(t,e){var n=u(t,e),o=s(t);if(null===o)return n;var a=l(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return l(a(t),arguments.length<2?void 0:c(arguments[1]))}})},{"./_an-object":60,"./_array-from-iterable":63,"./_metadata":116,"./_object-gpo":127,"./es6.set":273}],329:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_object-gpo"),a=r.has,s=r.get,u=r.key,c=function(t,e,n){if(a(t,e,n))return s(t,e,n);var r=o(e);return null!==r?c(t,r,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},{"./_an-object":60,"./_metadata":116,"./_object-gpo":127}],330:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},{"./_an-object":60,"./_metadata":116}],331:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":60,"./_metadata":116}],332:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_object-gpo"),a=r.has,s=r.key,u=function(t,e,n){if(a(t,e,n))return!0;var r=o(e);return null!==r&&u(t,r,n)};r.exp({hasMetadata:function(t,e){return u(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},{"./_an-object":60,"./_metadata":116,"./_object-gpo":127}],333:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},{"./_an-object":60,"./_metadata":116}],334:[function(t,e,n){var r=t("./_metadata"),i=t("./_an-object"),o=t("./_a-function"),a=r.key,s=r.set;r.exp({metadata:function(t,e){return function(n,r){s(t,e,(void 0!==r?i:o)(n),a(r))}}})},{"./_a-function":56,"./_an-object":60,"./_metadata":116}],335:[function(t,e,n){var r=t("./_export");r(r.P+r.R,"Set",{toJSON:t("./_collection-to-json")("Set")})},{"./_collection-to-json":73,"./_export":85}],336:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-at")(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},{"./_export":85,"./_string-at":150}],337:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_defined"),o=t("./_to-length"),a=t("./_is-regexp"),s=t("./_flags"),u=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};t("./_iter-create")(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in u?String(t.flags):s.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},{"./_defined":80,"./_export":85,"./_flags":89,"./_is-regexp":103,"./_iter-create":105,"./_to-length":161}],338:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-pad");r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},{"./_export":85,"./_string-pad":153}],339:[function(t,e,n){"use strict";var r=t("./_export"),i=t("./_string-pad");r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},{"./_export":85,"./_string-pad":153}],340:[function(t,e,n){"use strict";t("./_string-trim")("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},{"./_string-trim":155}],341:[function(t,e,n){"use strict";t("./_string-trim")("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},{"./_string-trim":155}],342:[function(t,e,n){t("./_wks-define")("asyncIterator")},{"./_wks-define":168}],343:[function(t,e,n){t("./_wks-define")("observable")},{"./_wks-define":168}],344:[function(t,e,n){var r=t("./_export");r(r.S,"System",{global:t("./_global")})},{"./_export":85,"./_global":91}],345:[function(t,e,n){for(var r=t("./es6.array.iterator"),i=t("./_redefine"),o=t("./_global"),a=t("./_hide"),s=t("./_iterators"),u=t("./_wks"),c=u("iterator"),l=u("toStringTag"),f=s.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],p=0;p<5;p++){var d,v=h[p],m=o[v],y=m&&m.prototype;if(y){y[c]||a(y,c,f),y[l]||a(y,l,v),s[v]=f;for(d in r)y[d]||i(y,d,r[d],!0)}}},{"./_global":91,"./_hide":93,"./_iterators":109,"./_redefine":140,"./_wks":170,"./es6.array.iterator":183}],346:[function(t,e,n){var r=t("./_export"),i=t("./_task");r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},{"./_export":85,"./_task":157}],347:[function(t,e,n){var r=t("./_global"),i=t("./_export"),o=t("./_invoke"),a=t("./_partial"),s=r.navigator,u=!!s&&/MSIE .\./.test(s.userAgent),c=function(t){return u?function(e,n){return t(o(a,[].slice.call(arguments,2),"function"==typeof e?e:Function(e)),n)}:t};i(i.G+i.B+i.F*u,{setTimeout:c(r.setTimeout),setInterval:c(r.setInterval)})},{"./_export":85,"./_global":91,"./_invoke":97,"./_partial":136}],348:[function(t,e,n){t("./modules/es6.symbol"),t("./modules/es6.object.create"),t("./modules/es6.object.define-property"),t("./modules/es6.object.define-properties"),t("./modules/es6.object.get-own-property-descriptor"),t("./modules/es6.object.get-prototype-of"),t("./modules/es6.object.keys"),t("./modules/es6.object.get-own-property-names"),t("./modules/es6.object.freeze"),t("./modules/es6.object.seal"),t("./modules/es6.object.prevent-extensions"),t("./modules/es6.object.is-frozen"),t("./modules/es6.object.is-sealed"),t("./modules/es6.object.is-extensible"),t("./modules/es6.object.assign"),t("./modules/es6.object.is"),t("./modules/es6.object.set-prototype-of"),t("./modules/es6.object.to-string"),t("./modules/es6.function.bind"),t("./modules/es6.function.name"),t("./modules/es6.function.has-instance"),t("./modules/es6.parse-int"),t("./modules/es6.parse-float"),t("./modules/es6.number.constructor"),t("./modules/es6.number.to-fixed"),t("./modules/es6.number.to-precision"),t("./modules/es6.number.epsilon"),t("./modules/es6.number.is-finite"),t("./modules/es6.number.is-integer"),t("./modules/es6.number.is-nan"),t("./modules/es6.number.is-safe-integer"),t("./modules/es6.number.max-safe-integer"),t("./modules/es6.number.min-safe-integer"),t("./modules/es6.number.parse-float"),t("./modules/es6.number.parse-int"),t("./modules/es6.math.acosh"),t("./modules/es6.math.asinh"),t("./modules/es6.math.atanh"),t("./modules/es6.math.cbrt"),t("./modules/es6.math.clz32"),t("./modules/es6.math.cosh"),t("./modules/es6.math.expm1"),t("./modules/es6.math.fround"),t("./modules/es6.math.hypot"),t("./modules/es6.math.imul"),t("./modules/es6.math.log10"),t("./modules/es6.math.log1p"),t("./modules/es6.math.log2"),t("./modules/es6.math.sign"),t("./modules/es6.math.sinh"),t("./modules/es6.math.tanh"),t("./modules/es6.math.trunc"),t("./modules/es6.string.from-code-point"),t("./modules/es6.string.raw"),t("./modules/es6.string.trim"),t("./modules/es6.string.iterator"),t("./modules/es6.string.code-point-at"),t("./modules/es6.string.ends-with"),t("./modules/es6.string.includes"),t("./modules/es6.string.repeat"),t("./modules/es6.string.starts-with"),t("./modules/es6.string.anchor"),t("./modules/es6.string.big"),t("./modules/es6.string.blink"),t("./modules/es6.string.bold"),t("./modules/es6.string.fixed"),t("./modules/es6.string.fontcolor"),t("./modules/es6.string.fontsize"),t("./modules/es6.string.italics"),t("./modules/es6.string.link"),t("./modules/es6.string.small"),t("./modules/es6.string.strike"),t("./modules/es6.string.sub"),t("./modules/es6.string.sup"),t("./modules/es6.date.now"),t("./modules/es6.date.to-json"),t("./modules/es6.date.to-iso-string"),t("./modules/es6.date.to-string"),t("./modules/es6.date.to-primitive"),t("./modules/es6.array.is-array"),t("./modules/es6.array.from"),t("./modules/es6.array.of"),t("./modules/es6.array.join"),t("./modules/es6.array.slice"),t("./modules/es6.array.sort"),t("./modules/es6.array.for-each"),t("./modules/es6.array.map"),t("./modules/es6.array.filter"),t("./modules/es6.array.some"),t("./modules/es6.array.every"),t("./modules/es6.array.reduce"),t("./modules/es6.array.reduce-right"),t("./modules/es6.array.index-of"),t("./modules/es6.array.last-index-of"),t("./modules/es6.array.copy-within"),t("./modules/es6.array.fill"),t("./modules/es6.array.find"),t("./modules/es6.array.find-index"),t("./modules/es6.array.species"),t("./modules/es6.array.iterator"),t("./modules/es6.regexp.constructor"),t("./modules/es6.regexp.to-string"),t("./modules/es6.regexp.flags"),t("./modules/es6.regexp.match"),t("./modules/es6.regexp.replace"),t("./modules/es6.regexp.search"),t("./modules/es6.regexp.split"),t("./modules/es6.promise"),t("./modules/es6.map"),t("./modules/es6.set"),t("./modules/es6.weak-map"),t("./modules/es6.weak-set"),t("./modules/es6.typed.array-buffer"),t("./modules/es6.typed.data-view"),t("./modules/es6.typed.int8-array"),t("./modules/es6.typed.uint8-array"),t("./modules/es6.typed.uint8-clamped-array"),t("./modules/es6.typed.int16-array"),t("./modules/es6.typed.uint16-array"),t("./modules/es6.typed.int32-array"),t("./modules/es6.typed.uint32-array"),t("./modules/es6.typed.float32-array"),t("./modules/es6.typed.float64-array"),t("./modules/es6.reflect.apply"),t("./modules/es6.reflect.construct"),t("./modules/es6.reflect.define-property"),t("./modules/es6.reflect.delete-property"),t("./modules/es6.reflect.enumerate"),t("./modules/es6.reflect.get"),t("./modules/es6.reflect.get-own-property-descriptor"),t("./modules/es6.reflect.get-prototype-of"),t("./modules/es6.reflect.has"),t("./modules/es6.reflect.is-extensible"),t("./modules/es6.reflect.own-keys"),t("./modules/es6.reflect.prevent-extensions"),t("./modules/es6.reflect.set"),t("./modules/es6.reflect.set-prototype-of"),t("./modules/es7.array.includes"),t("./modules/es7.string.at"),t("./modules/es7.string.pad-start"),t("./modules/es7.string.pad-end"),t("./modules/es7.string.trim-left"),t("./modules/es7.string.trim-right"),t("./modules/es7.string.match-all"),t("./modules/es7.symbol.async-iterator"),t("./modules/es7.symbol.observable"),t("./modules/es7.object.get-own-property-descriptors"),t("./modules/es7.object.values"),t("./modules/es7.object.entries"),t("./modules/es7.object.define-getter"),t("./modules/es7.object.define-setter"),t("./modules/es7.object.lookup-getter"),t("./modules/es7.object.lookup-setter"),t("./modules/es7.map.to-json"),t("./modules/es7.set.to-json"),t("./modules/es7.system.global"),t("./modules/es7.error.is-error"),t("./modules/es7.math.iaddh"),t("./modules/es7.math.isubh"),t("./modules/es7.math.imulh"),t("./modules/es7.math.umulh"),t("./modules/es7.reflect.define-metadata"),t("./modules/es7.reflect.delete-metadata"),t("./modules/es7.reflect.get-metadata"),t("./modules/es7.reflect.get-metadata-keys"),t("./modules/es7.reflect.get-own-metadata"),t("./modules/es7.reflect.get-own-metadata-keys"),t("./modules/es7.reflect.has-metadata"),t("./modules/es7.reflect.has-own-metadata"),t("./modules/es7.reflect.metadata"),t("./modules/es7.asap"),t("./modules/es7.observable"),t("./modules/web.timers"),t("./modules/web.immediate"),t("./modules/web.dom.iterable"),e.exports=t("./modules/_core")},{"./modules/_core":76,"./modules/es6.array.copy-within":173,"./modules/es6.array.every":174,"./modules/es6.array.fill":175,"./modules/es6.array.filter":176,"./modules/es6.array.find":178,"./modules/es6.array.find-index":177,"./modules/es6.array.for-each":179,"./modules/es6.array.from":180,"./modules/es6.array.index-of":181,"./modules/es6.array.is-array":182,"./modules/es6.array.iterator":183,"./modules/es6.array.join":184,"./modules/es6.array.last-index-of":185,"./modules/es6.array.map":186,"./modules/es6.array.of":187,"./modules/es6.array.reduce":189,"./modules/es6.array.reduce-right":188,"./modules/es6.array.slice":190,"./modules/es6.array.some":191,"./modules/es6.array.sort":192,"./modules/es6.array.species":193,"./modules/es6.date.now":194,"./modules/es6.date.to-iso-string":195,"./modules/es6.date.to-json":196,"./modules/es6.date.to-primitive":197,"./modules/es6.date.to-string":198,"./modules/es6.function.bind":199,"./modules/es6.function.has-instance":200,"./modules/es6.function.name":201,"./modules/es6.map":202,"./modules/es6.math.acosh":203,"./modules/es6.math.asinh":204,"./modules/es6.math.atanh":205,"./modules/es6.math.cbrt":206,"./modules/es6.math.clz32":207,"./modules/es6.math.cosh":208,"./modules/es6.math.expm1":209,"./modules/es6.math.fround":210,"./modules/es6.math.hypot":211,"./modules/es6.math.imul":212,"./modules/es6.math.log10":213,"./modules/es6.math.log1p":214,"./modules/es6.math.log2":215,"./modules/es6.math.sign":216,"./modules/es6.math.sinh":217,"./modules/es6.math.tanh":218,"./modules/es6.math.trunc":219,"./modules/es6.number.constructor":220,"./modules/es6.number.epsilon":221,"./modules/es6.number.is-finite":222,"./modules/es6.number.is-integer":223,"./modules/es6.number.is-nan":224,"./modules/es6.number.is-safe-integer":225,"./modules/es6.number.max-safe-integer":226,"./modules/es6.number.min-safe-integer":227,"./modules/es6.number.parse-float":228,"./modules/es6.number.parse-int":229,"./modules/es6.number.to-fixed":230,"./modules/es6.number.to-precision":231,"./modules/es6.object.assign":232,"./modules/es6.object.create":233,"./modules/es6.object.define-properties":234,"./modules/es6.object.define-property":235,"./modules/es6.object.freeze":236,"./modules/es6.object.get-own-property-descriptor":237,"./modules/es6.object.get-own-property-names":238,"./modules/es6.object.get-prototype-of":239,"./modules/es6.object.is":243,"./modules/es6.object.is-extensible":240,"./modules/es6.object.is-frozen":241,"./modules/es6.object.is-sealed":242,"./modules/es6.object.keys":244,"./modules/es6.object.prevent-extensions":245,"./modules/es6.object.seal":246,"./modules/es6.object.set-prototype-of":247,"./modules/es6.object.to-string":248,"./modules/es6.parse-float":249,"./modules/es6.parse-int":250,"./modules/es6.promise":251,"./modules/es6.reflect.apply":252,"./modules/es6.reflect.construct":253,"./modules/es6.reflect.define-property":254,"./modules/es6.reflect.delete-property":255,"./modules/es6.reflect.enumerate":256,"./modules/es6.reflect.get":259,"./modules/es6.reflect.get-own-property-descriptor":257,
"./modules/es6.reflect.get-prototype-of":258,"./modules/es6.reflect.has":260,"./modules/es6.reflect.is-extensible":261,"./modules/es6.reflect.own-keys":262,"./modules/es6.reflect.prevent-extensions":263,"./modules/es6.reflect.set":265,"./modules/es6.reflect.set-prototype-of":264,"./modules/es6.regexp.constructor":266,"./modules/es6.regexp.flags":267,"./modules/es6.regexp.match":268,"./modules/es6.regexp.replace":269,"./modules/es6.regexp.search":270,"./modules/es6.regexp.split":271,"./modules/es6.regexp.to-string":272,"./modules/es6.set":273,"./modules/es6.string.anchor":274,"./modules/es6.string.big":275,"./modules/es6.string.blink":276,"./modules/es6.string.bold":277,"./modules/es6.string.code-point-at":278,"./modules/es6.string.ends-with":279,"./modules/es6.string.fixed":280,"./modules/es6.string.fontcolor":281,"./modules/es6.string.fontsize":282,"./modules/es6.string.from-code-point":283,"./modules/es6.string.includes":284,"./modules/es6.string.italics":285,"./modules/es6.string.iterator":286,"./modules/es6.string.link":287,"./modules/es6.string.raw":288,"./modules/es6.string.repeat":289,"./modules/es6.string.small":290,"./modules/es6.string.starts-with":291,"./modules/es6.string.strike":292,"./modules/es6.string.sub":293,"./modules/es6.string.sup":294,"./modules/es6.string.trim":295,"./modules/es6.symbol":296,"./modules/es6.typed.array-buffer":297,"./modules/es6.typed.data-view":298,"./modules/es6.typed.float32-array":299,"./modules/es6.typed.float64-array":300,"./modules/es6.typed.int16-array":301,"./modules/es6.typed.int32-array":302,"./modules/es6.typed.int8-array":303,"./modules/es6.typed.uint16-array":304,"./modules/es6.typed.uint32-array":305,"./modules/es6.typed.uint8-array":306,"./modules/es6.typed.uint8-clamped-array":307,"./modules/es6.weak-map":308,"./modules/es6.weak-set":309,"./modules/es7.array.includes":310,"./modules/es7.asap":311,"./modules/es7.error.is-error":312,"./modules/es7.map.to-json":313,"./modules/es7.math.iaddh":314,"./modules/es7.math.imulh":315,"./modules/es7.math.isubh":316,"./modules/es7.math.umulh":317,"./modules/es7.object.define-getter":318,"./modules/es7.object.define-setter":319,"./modules/es7.object.entries":320,"./modules/es7.object.get-own-property-descriptors":321,"./modules/es7.object.lookup-getter":322,"./modules/es7.object.lookup-setter":323,"./modules/es7.object.values":324,"./modules/es7.observable":325,"./modules/es7.reflect.define-metadata":326,"./modules/es7.reflect.delete-metadata":327,"./modules/es7.reflect.get-metadata":329,"./modules/es7.reflect.get-metadata-keys":328,"./modules/es7.reflect.get-own-metadata":331,"./modules/es7.reflect.get-own-metadata-keys":330,"./modules/es7.reflect.has-metadata":332,"./modules/es7.reflect.has-own-metadata":333,"./modules/es7.reflect.metadata":334,"./modules/es7.set.to-json":335,"./modules/es7.string.at":336,"./modules/es7.string.match-all":337,"./modules/es7.string.pad-end":338,"./modules/es7.string.pad-start":339,"./modules/es7.string.trim-left":340,"./modules/es7.string.trim-right":341,"./modules/es7.symbol.async-iterator":342,"./modules/es7.symbol.observable":343,"./modules/es7.system.global":344,"./modules/web.dom.iterable":345,"./modules/web.immediate":346,"./modules/web.timers":347}],349:[function(t,e,n){(function(t){function e(t){return Array.isArray?Array.isArray(t):"[object Array]"===m(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function a(t){return"number"==typeof t}function s(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function c(t){return void 0===t}function l(t){return"[object RegExp]"===m(t)}function f(t){return"object"==typeof t&&null!==t}function h(t){return"[object Date]"===m(t)}function p(t){return"[object Error]"===m(t)||t instanceof Error}function d(t){return"function"==typeof t}function v(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function m(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=a,n.isString=s,n.isSymbol=u,n.isUndefined=c,n.isRegExp=l,n.isObject=f,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=v,n.isBuffer=t.isBuffer}).call(this,{isBuffer:t("../../../../.nvm/versions/node/v6.9.2/lib/node_modules/watchify/node_modules/is-buffer/index.js")})},{"../../../../.nvm/versions/node/v6.9.2/lib/node_modules/watchify/node_modules/is-buffer/index.js":13}],350:[function(t,e,n){function r(t){return t=Math.round(t),t<0?0:t>255?255:t}function i(t){return t<0?0:t>1?1:t}function o(t){return r("%"===t[t.length-1]?parseFloat(t)/100*255:parseInt(t))}function a(t){return i("%"===t[t.length-1]?parseFloat(t)/100:parseFloat(t))}function s(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function u(t){var e=t.replace(/ /g,"").toLowerCase();if(e in c)return c[e].slice();if("#"===e[0]){if(4===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===e.length){var n=parseInt(e.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=e.indexOf("("),u=e.indexOf(")");if(i!==-1&&u+1===e.length){var l=e.substr(0,i),f=e.substr(i+1,u-(i+1)).split(","),h=1;switch(l){case"rgba":if(4!==f.length)return null;h=a(f.pop());case"rgb":return 3!==f.length?null:[o(f[0]),o(f[1]),o(f[2]),h];case"hsla":if(4!==f.length)return null;h=a(f.pop());case"hsl":if(3!==f.length)return null;var p=(parseFloat(f[0])%360+360)%360/360,d=a(f[1]),v=a(f[2]),m=v<=.5?v*(d+1):v+d-v*d,y=2*v-m;return[r(255*s(y,m,p+1/3)),r(255*s(y,m,p)),r(255*s(y,m,p-1/3)),h];default:return null}}return null}var c={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=u}catch(t){}},{}],351:[function(t,e,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(t){var e=new r;e.pre=t.pre,e.body=t.body,e.post=t.post;var n=t.args.slice(0);e.argTypes=n;for(var i=0;i<n.length;++i){var a=n[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===a){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,o(e)}var o=t("./lib/thunk.js");e.exports=i},{"./lib/thunk.js":353}],352:[function(t,e,n){"use strict";function r(t,e,n){var r,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],c=[],l=0,f=0;for(r=0;r<o;++r)c.push(["i",r,"=0"].join(""));for(i=0;i<a;++i)for(r=0;r<o;++r)f=l,l=t[r],0===r?c.push(["d",i,"s",r,"=t",i,"p",l].join("")):c.push(["d",i,"s",r,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(u.push("var "+c.join(",")),r=o-1;r>=0;--r)l=t[r],u.push(["for(i",r,"=0;i",r,"<s",l,";++i",r,"){"].join(""));for(u.push(n),r=0;r<o;++r){for(f=l,l=t[r],i=0;i<a;++i)u.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",l,"]"].join(""))),u.push("}")}return u.join("\n")}function i(t,e,n,i){for(var o=e.length,a=n.arrayArgs.length,s=n.blockSize,u=n.indexArgs.length>0,c=[],l=0;l<a;++l)c.push(["var offset",l,"=p",l].join(""));for(var l=t;l<o;++l)c.push(["for(var j"+l+"=SS[",e[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",s,"){"].join("")),c.push(["s",e[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",e[l],"=",s].join("")),c.push(["j",l,"-=",s,"}"].join("")),u&&c.push(["index[",e[l],"]=j",l].join(""));for(var l=0;l<a;++l){for(var f=["offset"+l],h=t;h<o;++h)f.push(["j",h,"*t",l,"p",e[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(r(e,n,i));for(var l=t;l<o;++l)c.push("}");return c.join("\n")}function o(t){for(var e=0,n=t[0].length;e<n;){for(var r=1;r<t.length;++r)if(t[r][e]!==t[0][e])return e;++e}return e}function a(t,e,n){for(var r=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),c="",l=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var f=e.offsetArgIndex.indexOf(a);l=e.offsetArgs[f].array,c="+q"+f;case"array":c="p"+l+c;var h="l"+a,p="a"+l;if(0===e.arrayBlockIndices[l])1===s.count?"generic"===n[l]?s.lvalue?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),r=r.replace(u,h),o.push([p,".set(",c,",",h,")"].join(""))):r=r.replace(u,[p,".get(",c,")"].join("")):r=r.replace(u,[p,"[",c,"]"].join("")):"generic"===n[l]?(i.push(["var ",h,"=",p,".get(",c,")"].join("")),r=r.replace(u,h),s.lvalue&&o.push([p,".set(",c,",",h,")"].join(""))):(i.push(["var ",h,"=",p,"[",c,"]"].join("")),r=r.replace(u,h),s.lvalue&&o.push([p,"[",c,"]=",h].join("")));else{for(var d=[s.name],v=[c],m=0;m<Math.abs(e.arrayBlockIndices[l]);m++)d.push("\\s*\\[([^\\]]+)\\]"),v.push("$"+(m+1)+"*t"+l+"b"+m);if(u=new RegExp(d.join(""),"g"),c=v.join("+"),"generic"===n[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(u,[p,"[",c,"]"].join(""))}break;case"scalar":r=r.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":r=r.replace(u,"index");break;case"shape":r=r.replace(u,"shape")}}}return[i.join("\n"),r,o.join("\n")].join("\n").trim()}function s(t){for(var e=new Array(t.length),n=!0,r=0;r<t.length;++r){var i=t[r],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[r]="u"+i.charAt(1)+o:e[r]=i.charAt(0)+o,r>0&&(n=n&&e[r]===e[r-1])}return n?e[0]:e.join("")}function u(t,e){for(var n=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,u=new Array(t.arrayArgs.length),l=new Array(t.arrayArgs.length),f=0;f<t.arrayArgs.length;++f)l[f]=e[2*f],u[f]=e[2*f+1];for(var h=[],p=[],d=[],v=[],m=[],f=0;f<t.arrayArgs.length;++f){t.arrayBlockIndices[f]<0?(d.push(0),v.push(n),h.push(n),p.push(n+t.arrayBlockIndices[f])):(d.push(t.arrayBlockIndices[f]),v.push(t.arrayBlockIndices[f]+n),h.push(0),p.push(t.arrayBlockIndices[f]));for(var y=[],g=0;g<u[f].length;g++)d[f]<=u[f][g]&&u[f][g]<v[f]&&y.push(u[f][g]-d[f]);m.push(y)}for(var _=["SS"],b=["'use strict'"],w=[],g=0;g<n;++g)w.push(["s",g,"=SS[",g,"]"].join(""));for(var f=0;f<t.arrayArgs.length;++f){_.push("a"+f),_.push("t"+f),_.push("p"+f);for(var g=0;g<n;++g)w.push(["t",f,"p",g,"=t",f,"[",d[f]+g,"]"].join(""));for(var g=0;g<Math.abs(t.arrayBlockIndices[f]);++g)w.push(["t",f,"b",g,"=t",f,"[",h[f]+g,"]"].join(""))}for(var f=0;f<t.scalarArgs.length;++f)_.push("Y"+f);if(t.shapeArgs.length>0&&w.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var x=new Array(n),f=0;f<n;++f)x[f]="0";w.push(["index=[",x.join(","),"]"].join(""))}for(var f=0;f<t.offsetArgs.length;++f){for(var E=t.offsetArgs[f],T=[],g=0;g<E.offset.length;++g)0!==E.offset[g]&&(1===E.offset[g]?T.push(["t",E.array,"p",g].join("")):T.push([E.offset[g],"*t",E.array,"p",g].join("")));0===T.length?w.push("q"+f+"=0"):w.push(["q",f,"=",T.join("+")].join(""))}var S=c([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));w=w.concat(S),b.push("var "+w.join(","));for(var f=0;f<t.arrayArgs.length;++f)b.push("p"+f+"|=0");t.pre.body.length>3&&b.push(a(t.pre,t,l));var M=a(t.body,t,l),O=o(m);O<n?b.push(i(O,m[0],t,M)):b.push(r(m[0],t,M)),t.post.body.length>3&&b.push(a(t.post,t,l)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+b.join("\n")+"\n----------");var A=[t.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",O,s(l)].join("");return new Function(["function ",A,"(",_.join(","),"){",b.join("\n"),"} return ",A].join(""))()}var c=t("uniq");e.exports=u},{uniq:972}],353:[function(t,e,n){"use strict";function r(t){var e=["'use strict'","var CACHED={}"],n=[],r=t.funcName+"_cwise_thunk";e.push(["return function ",r,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],u=[],c=[],l=0;l<t.arrayArgs.length;++l){var f=t.arrayArgs[l];n.push(["t",f,"=array",f,".dtype,","r",f,"=array",f,".order"].join("")),o.push("t"+f),o.push("r"+f),a.push("t"+f),a.push("r"+f+".join()"),s.push("array"+f+".data"),s.push("array"+f+".stride"),s.push("array"+f+".offset|0"),l>0&&(u.push("array"+t.arrayArgs[0]+".shape.length===array"+f+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[l]))),c.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+f+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[l])+"]"))}t.arrayArgs.length>1&&(e.push("if (!("+u.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),e.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}"));for(var l=0;l<t.scalarArgs.length;++l)s.push("scalar"+t.scalarArgs[l]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),e.push("var "+n.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(i.bind(void 0,t))}var i=t("./compile.js");e.exports=r},{"./compile.js":352}],354:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return i(t(e),n)}}function n(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=b?i*=10:o>=w?i*=5:o>=x&&(i*=2),e<t?-i:i}function r(t){return t.length}var i=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},o=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},a=o(i),s=a.right,u=a.left,c=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},l=function(t){return null===t?NaN:+t},f=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,u=0;if(null==e)for(;++s<i;)isNaN(n=l(t[s]))||(r=n-o,o+=r/++u,a+=r*(n-o));else for(;++s<i;)isNaN(n=l(e(t[s],s,t)))||(r=n-o,o+=r/++u,a+=r*(n-o));if(u>1)return a/(u-1)},h=function(t,e){var n=f(t,e);return n?Math.sqrt(n):n},p=function(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},d=Array.prototype,v=d.slice,m=d.map,y=function(t){return function(){return t}},g=function(t){return t},_=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},b=Math.sqrt(50),w=Math.sqrt(10),x=Math.sqrt(2),E=function(t,e,r){var i=n(t,e,r);return _(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)},T=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},S=function(){function t(t){var i,o,a=t.length,u=new Array(a);for(i=0;i<a;++i)u[i]=e(t[i],i,t);var c=n(u),l=c[0],f=c[1],h=r(u,l,f);Array.isArray(h)||(h=E(l,f,h));for(var p=h.length;h[0]<=l;)h.shift(),--p;for(;h[p-1]>=f;)h.pop(),--p;var d,v=new Array(p+1);for(i=0;i<=p;++i)d=v[i]=[],d.x0=i>0?h[i-1]:l,d.x1=i<p?h[i]:f;for(i=0;i<a;++i)o=u[i],l<=o&&o<=f&&v[s(h,o,0,p)].push(t[i]);return v}var e=g,n=p,r=T;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:y(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:y([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:y(Array.isArray(e)?v.call(e):e),t):r},t},M=function(t,e,n){if(null==n&&(n=l),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},O=function(t,e,n){return t=m.call(t,l).sort(i),Math.ceil((n-e)/(2*(M(t,.75)-M(t,.25))*Math.pow(t.length,-1/3)))},A=function(t,e,n){return Math.ceil((n-e)/(3.5*h(t)*Math.pow(t.length,-1/3)))},R=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},I=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(null==e)for(;++o<i;)isNaN(n=l(t[o]))?--a:r+=n;else for(;++o<i;)isNaN(n=l(e(t[o],o,t)))?--a:r+=n;if(a)return r/a},k=function(t,e){var n,r=[],o=t.length,a=-1;if(null==e)for(;++a<o;)isNaN(n=l(t[a]))||r.push(n);else for(;++a<o;)isNaN(n=l(e(t[a],a,t)))||r.push(n);return M(r.sort(i),.5)},P=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},N=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},C=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},D=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},j=function(t,e){if(n=t.length){var n,r,o=0,a=0,s=t[a];for(e||(e=i);++o<n;)(e(r=t[o],s)<0||0!==e(s,s))&&(s=r,a=o);return 0===e(s,s)?a:void 0}},L=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},F=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},U=function(t){if(!(o=t.length))return[];for(var e=-1,n=N(t,r),i=new Array(n);++e<n;)for(var o,a=-1,s=i[e]=new Array(o);++a<o;)s[a]=t[a][e];return i},z=function(){return U(arguments)};t.bisect=s,t.bisectRight=s,t.bisectLeft=u,t.ascending=i,t.bisector=o,t.descending=c,t.deviation=h,t.extent=p,t.histogram=S,t.thresholdFreedmanDiaconis=O,t.thresholdScott=A,t.thresholdSturges=T,t.max=R,t.mean=I,t.median=k,t.merge=P,t.min=N,t.pairs=C,t.permute=D,t.quantile=M,t.range=_,t.scan=j,t.shuffle=L,t.sum=F,t.ticks=E,t.tickStep=n,t.transpose=U,t.variance=f,t.zip=z,Object.defineProperty(t,"__esModule",{value:!0})})},{}],355:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(){}function n(t,n){var r=new e;if(t instanceof e)t.each(function(t,e){r.set(e,t)});else if(Array.isArray(t)){var i,o=-1,a=t.length;if(null==n)for(;++o<a;)r.set(o,t[o]);else for(;++o<a;)r.set(n(i=t[o],o,t),i)}else if(t)for(var s in t)r.set(s,t[s]);return r}function r(){return{}}function i(t,e,n){t[e]=n}function o(){return n()}function a(t,e,n){t.set(e,n)}function s(){}function u(t,e){var n=new s;if(t instanceof s)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}e.prototype=n.prototype={constructor:e,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var c=function(){function t(e,r,i,o){if(r>=l.length)return null!=u?u(e):null!=s?e.sort(s):e;for(var a,c,f,h=-1,p=e.length,d=l[r++],v=n(),m=i();++h<p;)(f=v.get(a=d(c=e[h])+""))?f.push(c):v.set(a,[c]);return v.each(function(e,n){o(m,n,t(e,r,i,o))}),m}function e(t,n){if(++n>l.length)return t;var r,i=f[n-1];return null!=u&&n>=l.length?r=t.entries():(r=[],t.each(function(t,i){r.push({key:i,values:e(t,n)})})),null!=i?r.sort(function(t,e){return i(t.key,e.key)}):r}var s,u,c,l=[],f=[];return c={object:function(e){return t(e,0,r,i)},map:function(e){return t(e,0,o,a)},entries:function(n){return e(t(n,0,o,a),0)},key:function(t){return l.push(t),c},sortKeys:function(t){return f[l.length-1]=t,c},sortValues:function(t){return s=t,c},rollup:function(t){return u=t,c}}},l=n.prototype;s.prototype=u.prototype={constructor:s,has:l.has,add:function(t){return t+="",this["$"+t]=t,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};var f=function(t){var e=[];for(var n in t)e.push(n);return e},h=function(t){var e=[];for(var n in t)e.push(t[n]);return e},p=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e};t.nest=c,t.set=u,t.map=n,t.keys=f,t.values=h,t.entries=p,Object.defineProperty(t,"__esModule",{value:!0})})},{}],356:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function n(){}function r(t){var e;return t=(t+"").trim().toLowerCase(),(e=k.exec(t))?(e=parseInt(e[1],16),new u(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=P.exec(t))?i(parseInt(e[1],16)):(e=N.exec(t))?new u(e[1],e[2],e[3],1):(e=C.exec(t))?new u(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=D.exec(t))?o(e[1],e[2],e[3],e[4]):(e=j.exec(t))?o(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=L.exec(t))?c(e[1],e[2]/100,e[3]/100,1):(e=F.exec(t))?c(e[1],e[2]/100,e[3]/100,e[4]):U.hasOwnProperty(t)?i(U[t]):"transparent"===t?new u(NaN,NaN,NaN,0):null}function i(t){return new u(t>>16&255,t>>8&255,255&t,1)}function o(t,e,n,r){return r<=0&&(t=e=n=NaN),new u(t,e,n,r)}function a(t){return t instanceof n||(t=r(t)),t?(t=t.rgb(),new u(t.r,t.g,t.b,t.opacity)):new u}function s(t,e,n,r){return 1===arguments.length?a(t):new u(t,e,n,null==r?1:r)}function u(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function c(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new h(t,e,n,r)}function l(t){if(t instanceof h)return new h(t.h,t.s,t.l,t.opacity);if(t instanceof n||(t=r(t)),!t)return new h;if(t instanceof h)return t;t=t.rgb();var e=t.r/255,i=t.g/255,o=t.b/255,a=Math.min(e,i,o),s=Math.max(e,i,o),u=NaN,c=s-a,l=(s+a)/2;return c?(u=e===s?(i-o)/c+6*(i<o):i===s?(o-e)/c+2:(e-i)/c+4,c/=l<.5?s+a:2-s-a,u*=60):c=l>0&&l<1?0:u,new h(u,c,l,t.opacity)}function f(t,e,n,r){return 1===arguments.length?l(t):new h(t,e,n,null==r?1:r)}function h(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function p(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function d(t){if(t instanceof m)return new m(t.l,t.a,t.b,t.opacity);if(t instanceof E){var e=t.h*z;return new m(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof u||(t=a(t));var n=b(t.r),r=b(t.g),i=b(t.b),o=y((.4124564*n+.3575761*r+.1804375*i)/.95047),s=y((.2126729*n+.7151522*r+.072175*i)/1);return new m(116*s-16,500*(o-s),200*(s-y((.0193339*n+.119192*r+.9503041*i)/1.08883)),t.opacity)}function v(t,e,n,r){return 1===arguments.length?d(t):new m(t,e,n,null==r?1:r)}function m(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function y(t){return t>V*V*V?Math.pow(t,1/3):t/(3*V*V)+4/29}function g(t){return t>V?t*t*t:3*V*V*(t-4/29)}function _(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function b(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function w(t){if(t instanceof E)return new E(t.h,t.c,t.l,t.opacity);t instanceof m||(t=d(t));var e=Math.atan2(t.b,t.a)*B;return new E(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function x(t,e,n,r){return 1===arguments.length?w(t):new E(t,e,n,null==r?1:r)}function E(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function T(t){if(t instanceof M)return new M(t.h,t.s,t.l,t.opacity);t instanceof u||(t=a(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=((H*W-q*G)*r+Y*q*e-Y*H*n)/-5.9615122912,o=r-i,s=(Y*(n-i)-W*o)/q,c=Math.sqrt(s*s+o*o)/(Y*i*(1-i)),l=c?Math.atan2(s,o)*B-120:NaN;return new M(l<0?l+360:l,c,i,t.opacity)}function S(t,e,n,r){return 1===arguments.length?T(t):new M(t,e,n,null==r?1:r)}function M(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}var O=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},A="\\s*([+-]?\\d+)\\s*",R="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",I="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",k=/^#([0-9a-f]{3})$/,P=/^#([0-9a-f]{6})$/,N=new RegExp("^rgb\\("+[A,A,A]+"\\)$"),C=new RegExp("^rgb\\("+[I,I,I]+"\\)$"),D=new RegExp("^rgba\\("+[A,A,A,R]+"\\)$"),j=new RegExp("^rgba\\("+[I,I,I,R]+"\\)$"),L=new RegExp("^hsl\\("+[R,I,I]+"\\)$"),F=new RegExp("^hsla\\("+[R,I,I,R]+"\\)$"),U={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,
lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};O(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),O(u,s,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new u(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),O(h,f,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new h(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new h(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new u(p(t>=240?t-240:t+120,i,r),p(t,i,r),p(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var z=Math.PI/180,B=180/Math.PI,V=6/29;O(m,v,e(n,{brighter:function(t){return new m(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new m(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*g(t),e=.95047*g(e),n=1.08883*g(n),new u(_(3.2404542*e-1.5371385*t-.4985314*n),_(-.969266*e+1.8760108*t+.041556*n),_(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),O(E,x,e(n,{brighter:function(t){return new E(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new E(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return d(this).rgb()}}));var G=-.14861,H=1.78277,W=-.29227,q=-.90649,Y=1.97294;O(M,S,e(n,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new M(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new M(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*z,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new u(255*(e+n*(G*r+H*i)),255*(e+n*(W*r+q*i)),255*(e+n*(Y*r)),this.opacity)}})),t.color=r,t.rgb=s,t.hsl=f,t.lab=v,t.hcl=x,t.cubehelix=S,Object.defineProperty(t,"__esModule",{value:!0})})},{}],357:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function n(t){return t=e(Math.abs(t)),t?t[1]:NaN}function r(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}}function i(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t}function o(t,n){var r=e(t,n);if(!r)return t+"";var i=r[0],o=r[1],a=o-(v=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+e(t,Math.max(0,n+a-1))[0]}function a(t,n){var r=e(t,n);if(!r)return t+"";var i=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}function s(t){return new u(t)}function u(t){if(!(e=y.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):m[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}function c(t){return t}function l(t){function e(t){function e(t){var e,a,s,c=y,m=g;if("c"===d)m=b(t)+m,t="";else{t=+t;var x=(t<0||1/t<0)&&(t*=-1,!0);if(t=b(t,p),x)for(e=-1,a=t.length,x=!1;++e<a;)if(s=t.charCodeAt(e),48<s&&s<58||"x"===d&&96<s&&s<103||"X"===d&&64<s&&s<71){x=!0;break}if(c=(x?"("===i?i:"-":"-"===i||"("===i?"":i)+c,m=m+("s"===d?_[8+v/3]:"")+(x&&"("===i?")":""),w)for(e=-1,a=t.length;++e<a;)if(s=t.charCodeAt(e),48>s||s>57){m=(46===s?u+t.slice(e+1):t.slice(e))+m,t=t.slice(0,e);break}}h&&!l&&(t=o(t,1/0));var E=c.length+t.length+m.length,T=E<f?new Array(f-E+1).join(n):"";switch(h&&l&&(t=o(T+t,T.length?f-m.length:1/0),T=""),r){case"<":return c+t+m+T;case"=":return c+T+t+m;case"^":return T.slice(0,E=T.length>>1)+c+t+m+T.slice(E)}return T+c+t+m}t=s(t);var n=t.fill,r=t.align,i=t.sign,c=t.symbol,l=t.zero,f=t.width,h=t.comma,p=t.precision,d=t.type,y="$"===c?a[0]:"#"===c&&/[boxX]/.test(d)?"0"+d.toLowerCase():"",g="$"===c?a[1]:/[%p]/.test(d)?"%":"",b=m[d],w=!d||/[defgprs%]/.test(d);return p=null==p?d?6:12:/[gprs]/.test(d)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}function i(t,r){var i=e((t=s(t),t.type="f",t)),o=3*Math.max(-8,Math.min(8,Math.floor(n(r)/3))),a=Math.pow(10,-o),u=_[8+o/3];return function(t){return i(a*t)+u}}var o=t.grouping&&t.thousands?r(t.grouping,t.thousands):c,a=t.currency,u=t.decimal;return{format:e,formatPrefix:i}}function f(e){return g=l(e),t.format=g.format,t.formatPrefix=g.formatPrefix,g}function h(t){return Math.max(0,-n(Math.abs(t)))}function p(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(n(e)/3)))-n(Math.abs(t)))}function d(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,n(e)-n(t))+1}var v,m={"":i,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return a(100*t,e)},r:a,s:o,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},y=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;u.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var g,_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];f({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),t.formatDefaultLocale=f,t.formatLocale=l,t.formatSpecifier=s,t.precisionFixed=h,t.precisionPrefix=p,t.precisionRound=d,Object.defineProperty(t,"__esModule",{value:!0})})},{}],358:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-array")):"function"==typeof define&&define.amd?define(["exports","d3-array"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(){this.reset()}function r(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function i(t){return t>1?0:t<-1?Ce:Math.acos(t)}function o(t){return t>1?De:t<-1?-De:Math.asin(t)}function a(t){return(t=Xe(t/2))*t}function s(){}function u(t,e){t&&$e.hasOwnProperty(t.type)&&$e[t.type](t,e)}function c(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function l(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)c(t[n],e,1);e.polygonEnd()}function f(){rn.point=p}function h(){d(ne,re)}function p(t,e){rn.point=d,ne=t,re=e,t*=Ue,e*=Ue,ie=t,oe=Ge(e=e/2+je),ae=Xe(e)}function d(t,e){t*=Ue,e*=Ue,e=e/2+je;var n=t-ie,r=n>=0?1:-1,i=r*n,o=Ge(e),a=Xe(e),s=ae*a,u=oe*o+s*Ge(i),c=s*r*Xe(i);en.add(Ve(c,u)),ie=t,oe=o,ae=a}function v(t){return[Ve(t[1],t[0]),o(t[2])]}function m(t){var e=t[0],n=t[1],r=Ge(n);return[r*Ge(e),r*Xe(e),Xe(n)]}function y(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function g(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function _(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function b(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function w(t){var e=Ke(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function x(t,e){ve.push(me=[se=t,ce=t]),e<ue&&(ue=e),e>le&&(le=e)}function E(t,e){var n=m([t*Ue,e*Ue]);if(de){var r=g(de,n),i=[r[1],-r[0],0],o=g(i,r);w(o),o=v(o);var a,s=t-fe,u=s>0?1:-1,c=o[0]*Fe*u,l=ze(s)>180;l^(u*fe<c&&c<u*t)?(a=o[1]*Fe,a>le&&(le=a)):(c=(c+360)%360-180,l^(u*fe<c&&c<u*t)?(a=-o[1]*Fe,a<ue&&(ue=a)):(e<ue&&(ue=e),e>le&&(le=e))),l?t<fe?R(se,t)>R(se,ce)&&(ce=t):R(t,ce)>R(se,ce)&&(se=t):ce>=se?(t<se&&(se=t),t>ce&&(ce=t)):t>fe?R(se,t)>R(se,ce)&&(ce=t):R(t,ce)>R(se,ce)&&(se=t)}else ve.push(me=[se=t,ce=t]);e<ue&&(ue=e),e>le&&(le=e),de=n,fe=t}function T(){sn.point=E}function S(){me[0]=se,me[1]=ce,sn.point=x,de=null}function M(t,e){if(de){var n=t-fe;an.add(ze(n)>180?n+(n>0?360:-360):n)}else he=t,pe=e;rn.point(t,e),E(t,e)}function O(){rn.lineStart()}function A(){M(he,pe),rn.lineEnd(),ze(an)>1e-6&&(se=-(ce=180)),me[0]=se,me[1]=ce,de=null}function R(t,e){return(e-=t)<0?e+360:e}function I(t,e){return t[0]-e[0]}function k(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function P(t,e){t*=Ue,e*=Ue;var n=Ge(e);N(n*Ge(t),n*Xe(t),Xe(e))}function N(t,e,n){++ye,_e+=(t-_e)/ye,be+=(e-be)/ye,we+=(n-we)/ye}function C(){cn.point=D}function D(t,e){t*=Ue,e*=Ue;var n=Ge(e);Ie=n*Ge(t),ke=n*Xe(t),Pe=Xe(e),cn.point=j,N(Ie,ke,Pe)}function j(t,e){t*=Ue,e*=Ue;var n=Ge(e),r=n*Ge(t),i=n*Xe(t),o=Xe(e),a=Ve(Ke((a=ke*o-Pe*i)*a+(a=Pe*r-Ie*o)*a+(a=Ie*i-ke*r)*a),Ie*r+ke*i+Pe*o);ge+=a,xe+=a*(Ie+(Ie=r)),Ee+=a*(ke+(ke=i)),Te+=a*(Pe+(Pe=o)),N(Ie,ke,Pe)}function L(){cn.point=P}function F(){cn.point=z}function U(){B(Ae,Re),cn.point=P}function z(t,e){Ae=t,Re=e,t*=Ue,e*=Ue,cn.point=B;var n=Ge(e);Ie=n*Ge(t),ke=n*Xe(t),Pe=Xe(e),N(Ie,ke,Pe)}function B(t,e){t*=Ue,e*=Ue;var n=Ge(e),r=n*Ge(t),i=n*Xe(t),a=Xe(e),s=ke*a-Pe*i,u=Pe*r-Ie*a,c=Ie*i-ke*r,l=Ke(s*s+u*u+c*c),f=Ie*r+ke*i+Pe*a,h=l&&-o(l)/l,p=Ve(l,f);Se+=h*s,Me+=h*u,Oe+=h*c,ge+=p,xe+=p*(Ie+(Ie=r)),Ee+=p*(ke+(ke=i)),Te+=p*(Pe+(Pe=a)),N(Ie,ke,Pe)}function V(t,e){return[t>Ce?t-Le:t<-Ce?t+Le:t,e]}function G(t,e,n){return(t%=Le)?e||n?hn(W(t),q(e,n)):W(t):e||n?q(e,n):V}function H(t){return function(e,n){return e+=t,[e>Ce?e-Le:e<-Ce?e+Le:e,n]}}function W(t){var e=H(t);return e.invert=H(-t),e}function q(t,e){function n(t,e){var n=Ge(e),u=Ge(t)*n,c=Xe(t)*n,l=Xe(e),f=l*r+u*i;return[Ve(c*a-f*s,u*r-l*i),o(f*a+c*s)]}var r=Ge(t),i=Xe(t),a=Ge(e),s=Xe(e);return n.invert=function(t,e){var n=Ge(e),u=Ge(t)*n,c=Xe(t)*n,l=Xe(e),f=l*a-c*s;return[Ve(c*a+l*s,u*r+f*i),o(f*r-u*i)]},n}function Y(t,e,n,r,i,o){if(n){var a=Ge(e),s=Xe(e),u=r*n;null==i?(i=e+r*Le,o=e-u/2):(i=X(a,i),o=X(a,o),(r>0?i<o:i>o)&&(i+=r*Le));for(var c,l=i;r>0?l>o:l<o;l-=u)c=v([a,-s*Ge(l),-s*Xe(l)]),t.point(c[0],c[1])}}function X(t,e){e=m(e),e[0]-=t,w(e);var n=i(-e[1]);return((-e[2]<0?-n:n)+Le-1e-6)%Le}function Z(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function K(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Q(t,n,r,i){function o(e,o){return t<=e&&e<=r&&n<=o&&o<=i}function a(e,o,a,u){var l=0,f=0;if(null==e||(l=s(e,a))!==(f=s(o,a))||c(e,o)<0^a>0){do u.point(0===l||3===l?t:r,l>1?i:n);while((l=(l+a+4)%4)!==f)}else u.point(o[0],o[1])}function s(e,i){return ze(e[0]-t)<1e-6?i>0?0:3:ze(e[0]-r)<1e-6?i>0?2:1:ze(e[1]-n)<1e-6?i>0?1:0:i>0?3:2}function u(t,e){return c(t.x,e.x)}function c(t,e){var n=s(t,1),r=s(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function c(t,e){o(t,e)&&O.point(t,e)}function l(){for(var e=0,n=0,r=y.length;n<r;++n)for(var o,a,s=y[n],u=1,c=s.length,l=s[0],f=l[0],h=l[1];u<c;++u)o=f,a=h,l=s[u],f=l[0],h=l[1],a<=i?h>i&&(f-o)*(i-a)>(h-a)*(t-o)&&++e:h<=i&&(f-o)*(i-a)<(h-a)*(t-o)&&--e;return e}function f(){O=A,m=[],y=[],M=!0}function h(){var t=l(),n=M&&t,r=(m=e.merge(m)).length;(n||r)&&(s.polygonStart(),n&&(s.lineStart(),a(null,null,1,s),s.lineEnd()),r&&Rn(m,u,t,a,s),s.polygonEnd()),O=s,m=y=g=null}function p(){R.point=v,y&&y.push(g=[]),S=!0,T=!1,x=E=NaN}function d(){m&&(v(_,b),w&&T&&A.rejoin(),m.push(A.result())),R.point=c,T&&O.lineEnd()}function v(e,a){var s=o(e,a);if(y&&g.push([e,a]),S)_=e,b=a,w=s,S=!1,s&&(O.lineStart(),O.point(e,a));else if(s&&T)O.point(e,a);else{var u=[x=Math.max(-1e9,Math.min(1e9,x)),E=Math.max(-1e9,Math.min(1e9,E))],c=[e=Math.max(-1e9,Math.min(1e9,e)),a=Math.max(-1e9,Math.min(1e9,a))];On(u,c,t,n,r,i)?(T||(O.lineStart(),O.point(u[0],u[1])),O.point(c[0],c[1]),s||O.lineEnd(),M=!1):s&&(O.lineStart(),O.point(e,a),M=!1)}x=e,E=a,T=s}var m,y,g,_,b,w,x,E,T,S,M,O=s,A=Mn(),R={point:c,lineStart:p,lineEnd:d,polygonStart:f,polygonEnd:h};return R}}function J(){Pn.point=tt,Pn.lineEnd=$}function $(){Pn.point=Pn.lineEnd=s}function tt(t,e){t*=Ue,e*=Ue,pn=t,dn=Xe(e),vn=Ge(e),Pn.point=et}function et(t,e){t*=Ue,e*=Ue;var n=Xe(e),r=Ge(e),i=ze(t-pn),o=Ge(i),a=Xe(i),s=r*a,u=vn*n-dn*r*o,c=dn*n+vn*r*o;kn.add(Ve(Ke(s*s+u*u),c)),pn=t,dn=n,vn=r}function nt(t,n,r){var i=e.range(t,n-1e-6,r).concat(n);return function(t){return i.map(function(e){return[t,e]})}}function rt(t,n,r){var i=e.range(t,n-1e-6,r).concat(n);return function(t){return i.map(function(e){return[e,t]})}}function it(){function t(){return{type:"MultiLineString",coordinates:n()}}function n(){return e.range(He(a/y)*y,o,y).map(p).concat(e.range(He(l/g)*g,c,g).map(d)).concat(e.range(He(i/v)*v,r,v).filter(function(t){return ze(t%y)>1e-6}).map(f)).concat(e.range(He(u/m)*m,s,m).filter(function(t){return ze(t%g)>1e-6}).map(h))}var r,i,o,a,s,u,c,l,f,h,p,d,v=10,m=v,y=90,g=360,_=2.5;return t.lines=function(){return n().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[p(a).concat(d(c).slice(1),p(o).reverse().slice(1),d(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],o=+e[1][0],l=+e[0][1],c=+e[1][1],a>o&&(e=a,a=o,o=e),l>c&&(e=l,l=c,c=e),t.precision(_)):[[a,l],[o,c]]},t.extentMinor=function(e){return arguments.length?(i=+e[0][0],r=+e[1][0],u=+e[0][1],s=+e[1][1],i>r&&(e=i,i=r,r=e),u>s&&(e=u,u=s,s=e),t.precision(_)):[[i,u],[r,s]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(y=+e[0],g=+e[1],t):[y,g]},t.stepMinor=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.precision=function(e){return arguments.length?(_=+e,f=nt(u,s,90),h=rt(i,r,_),p=nt(l,c,90),d=rt(a,o,_),t):_},t.extentMajor([[-180,-90+1e-6],[180,90-1e-6]]).extentMinor([[-180,-80-1e-6],[180,80+1e-6]])}function ot(){return it()()}function at(){Bn.point=st}function st(t,e){Bn.point=ut,mn=gn=t,yn=_n=e}function ut(t,e){zn.add(_n*t-gn*e),gn=t,_n=e}function ct(){ut(mn,yn)}function lt(t,e){t<Vn&&(Vn=t),t>Hn&&(Hn=t),e<Gn&&(Gn=e),e>Wn&&(Wn=e)}function ft(t,e){Yn+=t,Xn+=e,++Zn}function ht(){nr.point=pt}function pt(t,e){nr.point=dt,ft(xn=t,En=e)}function dt(t,e){var n=t-xn,r=e-En,i=Ke(n*n+r*r);Kn+=i*(xn+t)/2,Qn+=i*(En+e)/2,Jn+=i,ft(xn=t,En=e)}function vt(){nr.point=ft}function mt(){nr.point=gt}function yt(){_t(bn,wn)}function gt(t,e){nr.point=_t,ft(bn=xn=t,wn=En=e)}function _t(t,e){var n=t-xn,r=e-En,i=Ke(n*n+r*r);Kn+=i*(xn+t)/2,Qn+=i*(En+e)/2,Jn+=i,i=En*t-xn*e,$n+=i*(xn+t),tr+=i*(En+e),er+=3*i,ft(xn=t,En=e)}function bt(t){this._context=t}function wt(t,e){cr.point=xt,ir=ar=t,or=sr=e}function xt(t,e){ar-=t,sr-=e,ur.add(Ke(ar*ar+sr*sr)),ar=t,sr=e}function Et(){this._string=[]}function Tt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function St(t){return t.length>1}function Mt(t,e){return((t=t.x)[0]<0?t[1]-De-1e-6:De-t[1])-((e=e.x)[0]<0?e[1]-De-1e-6:De-e[1])}function Ot(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ce:-Ce,u=ze(o-n);ze(u-Ce)<1e-6?(t.point(n,r=(r+a)/2>0?De:-De),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Ce&&(ze(n-i)<1e-6&&(n-=1e-6*i),ze(o-s)<1e-6&&(o-=1e-6*s),r=At(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function At(t,e,n,r){var i,o,a=Xe(t-n);return ze(a)>1e-6?Be((Xe(e)*(o=Ge(r))*Xe(n)-Xe(r)*(i=Ge(e))*Xe(t))/(i*o*a)):(e+r)/2}function Rt(t,e,n,r){var i;if(null==t)i=n*De,r.point(-Ce,i),r.point(0,i),r.point(Ce,i),r.point(Ce,0),r.point(Ce,-i),r.point(0,-i),r.point(-Ce,-i),r.point(-Ce,0),r.point(-Ce,i);else if(ze(t[0]-e[0])>1e-6){var o=t[0]<e[0]?Ce:-Ce;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function It(t){return function(e){var n=new kt;for(var r in t)n[r]=t[r];return n.stream=e,n}}function kt(){}function Pt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),tn(n,t.stream(qn));var a=qn.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function Nt(t,e,n){return Pt(t,[[0,0],e],n)}function Ct(t){return It({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Dt(t,e){function n(r,i,a,s,u,c,l,f,h,p,d,v,m,y){var g=l-r,_=f-i,b=g*g+_*_;if(b>4*e&&m--){var w=s+p,x=u+d,E=c+v,T=Ke(w*w+x*x+E*E),S=o(E/=T),M=ze(ze(E)-1)<1e-6||ze(a-h)<1e-6?(a+h)/2:Ve(x,w),O=t(M,S),A=O[0],R=O[1],I=A-r,k=R-i,P=_*I-g*k;(P*P/b>e||ze((g*I+_*k)/b-.5)>.3||s*p+u*d+c*v<yr)&&(n(r,i,a,s,u,c,A,R,M,w/=T,x/=T,E,m,y),y.point(A,R),n(A,R,M,w,x,E,l,f,h,p,d,v,m,y))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){g=NaN,E.point=o,e.lineStart()}function o(r,i){var o=m([r,i]),a=t(r,i);n(g,_,y,b,w,x,g=a[0],_=a[1],y=r,b=o[0],w=o[1],x=o[2],16,e),e.point(g,_)}function a(){E.point=r,e.lineEnd()}function s(){i(),E.point=u,E.lineEnd=c}function u(t,e){o(l=t,e),f=g,h=_,p=b,d=w,v=x,E.point=o}function c(){n(g,_,y,b,w,x,f,h,l,p,d,v,16,e),E.lineEnd=a,a()}var l,f,h,p,d,v,y,g,_,b,w,x,E={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),E.lineStart=s},polygonEnd:function(){e.polygonEnd(),E.lineStart=i}};return E}}function jt(t){return Lt(function(){return t})()}function Lt(t){function e(t){return t=l(t[0]*Ue,t[1]*Ue),[t[0]*m+s,u-t[1]*m]}function n(t){return t=l.invert((t[0]-s)/m,(u-t[1])/m),t&&[t[0]*Fe,t[1]*Fe]}function r(t,e){return t=a(t,e),[t[0]*m+s,u-t[1]*m]}function i(){l=hn(c=G(w,x,E),a);var t=a(_,b);return s=y-t[0]*m,u=g+t[1]*m,o()}function o(){return d=v=null,e}var a,s,u,c,l,f,h,p,d,v,m=150,y=480,g=250,_=0,b=0,w=0,x=0,E=0,T=null,S=dr,M=null,O=Fn,A=.5,R=gr(r,A);return e.stream=function(t){return d&&v===t?d:d=_r(S(c,R(O(v=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?vr(T=t*Ue,6*Ue):(T=null,dr),o()):T*Fe},e.clipExtent=function(t){return arguments.length?(O=null==t?(M=f=h=p=null,Fn):Q(M=+t[0][0],f=+t[0][1],h=+t[1][0],p=+t[1][1]),o()):null==M?null:[[M,f],[h,p]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(y=+t[0],g=+t[1],i()):[y,g]},e.center=function(t){return arguments.length?(_=t[0]%360*Ue,b=t[1]%360*Ue,i()):[_*Fe,b*Fe]},e.rotate=function(t){return arguments.length?(w=t[0]%360*Ue,x=t[1]%360*Ue,E=t.length>2?t[2]%360*Ue:0,i()):[w*Fe,x*Fe,E*Fe]},e.precision=function(t){return arguments.length?(R=gr(r,A=t*t),o()):Ke(A)},e.fitExtent=function(t,n){return Pt(e,t,n)},e.fitSize=function(t,n){return Nt(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function Ft(t){var e=0,n=Ce/3,r=Lt(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ue,n=t[1]*Ue):[e*Fe,n*Fe]},i}function Ut(t){function e(t,e){return[t*n,Xe(e)/n]}var n=Ge(t);return e.invert=function(t,e){return[t/n,o(e*n)]},e}function zt(t,e){function n(t,e){var n=Ke(a-2*i*Xe(e))/i;return[n*Xe(t*=i),s-n*Ge(t)]}var r=Xe(t),i=(r+Xe(e))/2;if(ze(i)<1e-6)return Ut(t);var a=1+r*(2*i-r),s=Ke(a)/i;return n.invert=function(t,e){var n=s-e;return[Ve(t,ze(n))/i*Ze(n),o((a-(t*t+n*n)*i*i)/(2*i))]},n}function Bt(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function Vt(t){return function(e,n){var r=Ge(e),i=Ge(n),o=t(r*i);return[o*i*Xe(e),o*Xe(n)]}}function Gt(t){return function(e,n){var r=Ke(e*e+n*n),i=t(r),a=Xe(i);return[Ve(e*a,r*Ge(i)),o(r&&n*a/r)]}}function Ht(t,e){return[t,qe(Qe((De+e)/2))]}function Wt(t){var e,n=jt(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=Ce*r(),s=i();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function qt(t){return Qe((De+t)/2)}function Yt(t,e){function n(t,e){o>0?e<-De+1e-6&&(e=-De+1e-6):e>De-1e-6&&(e=De-1e-6);var n=o/Ye(qt(e),i);return[n*Xe(i*t),o-n*Ge(i*t)]}var r=Ge(t),i=t===e?Xe(t):qe(r/Ge(e))/qe(qt(e)/qt(t)),o=r*Ye(qt(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Ze(i)*Ke(t*t+n*n);return[Ve(t,ze(n))/i*Ze(n),2*Be(Ye(o/r,1/i))-De]},n):Ht}function Xt(t,e){return[t,e]}function Zt(t,e){function n(t,e){var n=o-e,r=i*t;return[n*Xe(r),o-n*Ge(r)]}var r=Ge(t),i=t===e?Xe(t):(r-Ge(e))/(e-t),o=r/i+t;return ze(i)<1e-6?Xt:(n.invert=function(t,e){var n=o-e;return[Ve(t,ze(n))/i*Ze(n),o-Ze(i)*Ke(t*t+n*n)]},n)}function Kt(t,e){var n=Ge(e),r=Ge(t)*n;return[n*Xe(t)/r,Xe(e)/r]}function Qt(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Fn:It({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function Jt(t,e){return[Ge(e)*Xe(t),Xe(e)]}function $t(t,e){var n=Ge(e),r=1+Ge(t)*n;return[n*Xe(t)/r,Xe(e)/r]}function te(t,e){return[qe(Qe((De+e)/2)),-t]}var ee=function(){return new n};n.prototype={constructor:n,reset:function(){this.s=this.t=0},add:function(t){r(Ne,t,this.t),r(this,Ne.s,this.s),this.s?this.t+=Ne.t:this.s=Ne.t},valueOf:function(){return this.s}};var ne,re,ie,oe,ae,se,ue,ce,le,fe,he,pe,de,ve,me,ye,ge,_e,be,we,xe,Ee,Te,Se,Me,Oe,Ae,Re,Ie,ke,Pe,Ne=new n,Ce=Math.PI,De=Ce/2,je=Ce/4,Le=2*Ce,Fe=180/Ce,Ue=Ce/180,ze=Math.abs,Be=Math.atan,Ve=Math.atan2,Ge=Math.cos,He=Math.ceil,We=Math.exp,qe=Math.log,Ye=Math.pow,Xe=Math.sin,Ze=Math.sign||function(t){return t>0?1:t<0?-1:0},Ke=Math.sqrt,Qe=Math.tan,Je={Feature:function(t,e){u(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)u(n[r].geometry,e)}},$e={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){c(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)c(n[r],e,0)},Polygon:function(t,e){l(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)l(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)u(n[r],e)}},tn=function(t,e){t&&Je.hasOwnProperty(t.type)?Je[t.type](t,e):u(t,e)},en=ee(),nn=ee(),rn={point:s,lineStart:s,lineEnd:s,polygonStart:function(){en.reset(),rn.lineStart=f,rn.lineEnd=h},polygonEnd:function(){var t=+en;nn.add(t<0?Le+t:t),this.lineStart=this.lineEnd=this.point=s},sphere:function(){nn.add(Le)}},on=function(t){return nn.reset(),tn(t,rn),2*nn},an=ee(),sn={point:x,lineStart:T,lineEnd:S,polygonStart:function(){sn.point=M,sn.lineStart=O,sn.lineEnd=A,an.reset(),rn.polygonStart()},polygonEnd:function(){rn.polygonEnd(),sn.point=x,sn.lineStart=T,sn.lineEnd=S,en<0?(se=-(ce=180),ue=-(le=90)):an>1e-6?le=90:an<-1e-6&&(ue=-90),me[0]=se,me[1]=ce}},un=function(t){var e,n,r,i,o,a,s;if(le=ce=-(se=ue=1/0),ve=[],tn(t,sn),n=ve.length){for(ve.sort(I),e=1,r=ve[0],o=[r];e<n;++e)i=ve[e],k(r,i[0])||k(r,i[1])?(R(r[0],i[1])>R(r[0],r[1])&&(r[1]=i[1]),R(i[0],r[1])>R(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-(1/0),n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=R(r[1],i[0]))>a&&(a=s,se=i[0],ce=r[1])}return ve=me=null,se===1/0||ue===1/0?[[NaN,NaN],[NaN,NaN]]:[[se,ue],[ce,le]]},cn={sphere:s,point:P,lineStart:C,lineEnd:L,polygonStart:function(){cn.lineStart=F,cn.lineEnd=U},polygonEnd:function(){cn.lineStart=C,cn.lineEnd=L}},ln=function(t){ye=ge=_e=be=we=xe=Ee=Te=Se=Me=Oe=0,tn(t,cn);var e=Se,n=Me,r=Oe,i=e*e+n*n+r*r;return i<1e-12&&(e=xe,n=Ee,r=Te,ge<1e-6&&(e=_e,n=be,r=we),i=e*e+n*n+r*r,i<1e-12)?[NaN,NaN]:[Ve(n,e)*Fe,o(r/Ke(i))*Fe]},fn=function(t){return function(){return t}},hn=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};V.invert=V;var pn,dn,vn,mn,yn,gn,_n,bn,wn,xn,En,Tn=function(t){function e(e){return e=t(e[0]*Ue,e[1]*Ue),e[0]*=Fe,e[1]*=Fe,e}return t=G(t[0]*Ue,t[1]*Ue,t.length>2?t[2]*Ue:0),e.invert=function(e){return e=t.invert(e[0]*Ue,e[1]*Ue),e[0]*=Fe,e[1]*=Fe,e},e},Sn=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=Fe,t[1]*=Fe}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*Ue,u=a.apply(this,arguments)*Ue;return n=[],r=G(-t[0]*Ue,-t[1]*Ue,0).invert,Y(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=fn([0,0]),o=fn(90),a=fn(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:fn([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:fn(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:fn(+t),e):a},e},Mn=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:s,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},On=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,h=1,p=c-s,d=l-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>f&&(f=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<h&&(h=a)}return f>0&&(t[0]=s+f*p,t[1]=u+f*d),h<1&&(e[0]=s+h*p,e[1]=u+h*d),!0}}}}},An=function(t,e){return ze(t[0]-e[0])<1e-6&&ze(t[1]-e[1])<1e-6},Rn=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(An(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new Z(r,t,null,!0)),u.push(n.o=new Z(r,null,n,!1)),s.push(n=new Z(a,t,null,!1)),u.push(n.o=new Z(a,null,n,!0))}}),s.length){for(u.sort(e),K(s),K(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}},In=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Q(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},kn=ee(),Pn={sphere:s,point:s,lineStart:J,lineEnd:s,polygonStart:s,polygonEnd:s},Nn=function(t){return kn.reset(),tn(t,Pn),+kn},Cn=[null,null],Dn={type:"LineString",coordinates:Cn},jn=function(t,e){return Cn[0]=t,Cn[1]=e,Nn(Dn)},Ln=function(t,e){var n=t[0]*Ue,r=t[1]*Ue,i=e[0]*Ue,s=e[1]*Ue,u=Ge(r),c=Xe(r),l=Ge(s),f=Xe(s),h=u*Ge(n),p=u*Xe(n),d=l*Ge(i),v=l*Xe(i),m=2*o(Ke(a(s-r)+u*l*a(i-n))),y=Xe(m),g=m?function(t){var e=Xe(t*=m)/y,n=Xe(m-t)/y,r=n*h+e*d,i=n*p+e*v,o=n*c+e*f;return[Ve(i,r)*Fe,Ve(o,Ke(r*r+i*i))*Fe]}:function(){return[n*Fe,r*Fe]};return g.distance=m,g},Fn=function(t){return t},Un=ee(),zn=ee(),Bn={point:s,lineStart:s,lineEnd:s,polygonStart:function(){Bn.lineStart=at,Bn.lineEnd=ct},polygonEnd:function(){Bn.lineStart=Bn.lineEnd=Bn.point=s,Un.add(ze(zn)),zn.reset()},result:function(){var t=Un/2;return Un.reset(),t}},Vn=1/0,Gn=Vn,Hn=-Vn,Wn=Hn,qn={point:lt,lineStart:s,lineEnd:s,polygonStart:s,polygonEnd:s,result:function(){var t=[[Vn,Gn],[Hn,Wn]];return Hn=Wn=-(Gn=Vn=1/0),t}},Yn=0,Xn=0,Zn=0,Kn=0,Qn=0,Jn=0,$n=0,tr=0,er=0,nr={point:ft,lineStart:ht,lineEnd:vt,polygonStart:function(){nr.lineStart=mt,nr.lineEnd=yt},polygonEnd:function(){nr.point=ft,nr.lineStart=ht,nr.lineEnd=vt},result:function(){var t=er?[$n/er,tr/er]:Jn?[Kn/Jn,Qn/Jn]:Zn?[Yn/Zn,Xn/Zn]:[NaN,NaN];return Yn=Xn=Zn=Kn=Qn=Jn=$n=tr=er=0,t}};bt.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Le)}},result:s};var rr,ir,or,ar,sr,ur=ee(),cr={point:s,lineStart:function(){cr.point=wt},lineEnd:function(){rr&&xt(ir,or),cr.point=s},polygonStart:function(){rr=!0},polygonEnd:function(){rr=null},result:function(){var t=+ur;return ur.reset(),t}};Et.prototype={_circle:Tt(4.5),pointRadius:function(t){return this._circle=Tt(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}}
;var lr=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),tn(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return tn(t,r(Bn)),Bn.result()},n.measure=function(t){return tn(t,r(cr)),cr.result()},n.bounds=function(t){return tn(t,r(qn)),qn.result()},n.centroid=function(t){return tn(t,r(nr)),nr.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,Fn):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new Et):new bt(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},fr=ee(),hr=function(t,e){var n=e[0],r=e[1],i=[Xe(n),-Ge(n),0],a=0,s=0;fr.reset();for(var u=0,c=t.length;u<c;++u)if(f=(l=t[u]).length)for(var l,f,h=l[f-1],p=h[0],d=h[1]/2+je,v=Xe(d),y=Ge(d),_=0;_<f;++_,p=x,v=T,y=S,h=b){var b=l[_],x=b[0],E=b[1]/2+je,T=Xe(E),S=Ge(E),M=x-p,O=M>=0?1:-1,A=O*M,R=A>Ce,I=v*T;if(fr.add(Ve(I*O*Xe(A),y*S+I*Ge(A))),a+=R?M+O*Le:M,R^p>=n^x>=n){var k=g(m(h),m(b));w(k);var P=g(i,k);w(P);var N=(R^M>=0?-1:1)*o(P[2]);(r>N||r===N&&(k[0]||k[1]))&&(s+=R^M>=0?1:-1)}}return(a<-1e-6||a<1e-6&&fr<-1e-6)^1&s},pr=function(t,n,r,i){return function(o,a){function s(e,n){var r=o(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function u(t,e){var n=o(t,e);y.point(n[0],n[1])}function c(){x.point=u,y.lineStart()}function l(){x.point=s,y.lineEnd()}function f(t,e){m.push([t,e]);var n=o(t,e);b.point(n[0],n[1])}function h(){b.lineStart(),m=[]}function p(){f(m[0][0],m[0][1]),b.lineEnd();var t,e,n,r,i=b.clean(),o=_.result(),s=o.length;if(m.pop(),d.push(m),m=null,s)if(1&i){if(n=o[0],(e=n.length-1)>0){for(w||(a.polygonStart(),w=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else s>1&&2&i&&o.push(o.pop().concat(o.shift())),v.push(o.filter(St))}var d,v,m,y=n(a),g=o.invert(i[0],i[1]),_=Mn(),b=n(_),w=!1,x={point:s,lineStart:c,lineEnd:l,polygonStart:function(){x.point=f,x.lineStart=h,x.lineEnd=p,v=[],d=[]},polygonEnd:function(){x.point=s,x.lineStart=c,x.lineEnd=l,v=e.merge(v);var t=hr(d,g);v.length?(w||(a.polygonStart(),w=!0),Rn(v,Mt,t,r,a)):t&&(w||(a.polygonStart(),w=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),w&&(a.polygonEnd(),w=!1),v=d=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return x}},dr=pr(function(){return!0},Ot,Rt,[-Ce,-De]),vr=function(t,e){function n(n,r,i,o){Y(o,t,e,i,n,r)}function r(t,e){return Ge(t)*Ge(e)>s}function i(t){var e,n,i,s,l;return{lineStart:function(){s=i=!1,l=1},point:function(f,h){var p,d=[f,h],v=r(f,h),m=u?v?0:a(f,h):v?a(f+(f<0?Ce:-Ce),h):0;if(!e&&(s=i=v)&&t.lineStart(),v!==i&&(p=o(e,d),(An(e,p)||An(d,p))&&(d[0]+=1e-6,d[1]+=1e-6,v=r(d[0],d[1]))),v!==i)l=0,v?(t.lineStart(),p=o(d,e),t.point(p[0],p[1])):(p=o(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(c&&e&&u^v){var y;m&n||!(y=o(d,e,!0))||(l=0,u?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||e&&An(e,d)||t.point(d[0],d[1]),e=d,i=v,n=m},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return l|(s&&i)<<1}}}function o(t,e,n){var r=m(t),i=m(e),o=[1,0,0],a=g(r,i),u=y(a,a),c=a[0],l=u-c*c;if(!l)return!n&&t;var f=s*u/l,h=-s*c/l,p=g(o,a),d=b(o,f);_(d,b(a,h));var w=p,x=y(d,w),E=y(w,w),T=x*x-E*(y(d,d)-1);if(!(T<0)){var S=Ke(T),M=b(w,(-x-S)/E);if(_(M,d),M=v(M),!n)return M;var O,A=t[0],R=e[0],I=t[1],k=e[1];R<A&&(O=A,A=R,R=O);var P=R-A,N=ze(P-Ce)<1e-6,C=N||P<1e-6;if(!N&&k<I&&(O=I,I=k,k=O),C?N?I+k>0^M[1]<(ze(M[0]-A)<1e-6?I:k):I<=M[1]&&M[1]<=k:P>Ce^(A<=M[0]&&M[0]<=R)){var D=b(w,(-x+S)/E);return _(D,d),[M,v(D)]}}}function a(e,n){var r=u?t:Ce-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=Ge(t),u=s>0,c=ze(s)>1e-6;return pr(r,i,n,u?[0,-t]:[-Ce,t-Ce])},mr=function(t){return{stream:It(t)}};kt.prototype={constructor:kt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var yr=Ge(30*Ue),gr=function(t,e){return+e?Dt(t,e):Ct(t)},_r=It({point:function(t,e){this.stream.point(t*Ue,e*Ue)}}),br=function(){return Ft(zt).scale(155.424).center([0,33.6442])},wr=function(){return br().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},xr=function(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=wr(),c=br().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=br().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=Bt([u.stream(r=t),c.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),c.scale(.35*e),l.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(f),o=c.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+1e-6,s+.12*n+1e-6],[r-.214*n-1e-6,s+.234*n-1e-6]]).stream(f),a=l.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+1e-6,s+.166*n+1e-6],[r-.115*n-1e-6,s+.234*n-1e-6]]).stream(f),e()},t.fitExtent=function(e,n){return Pt(t,e,n)},t.fitSize=function(e,n){return Nt(t,e,n)},t.scale(1070)},Er=Vt(function(t){return Ke(2/(1+t))});Er.invert=Gt(function(t){return 2*o(t/2)});var Tr=function(){return jt(Er).scale(124.75).clipAngle(179.999)},Sr=Vt(function(t){return(t=i(t))&&t/Xe(t)});Sr.invert=Gt(function(t){return t});var Mr=function(){return jt(Sr).scale(79.4188).clipAngle(179.999)};Ht.invert=function(t,e){return[t,2*Be(We(e))-De]};var Or=function(){return Wt(Ht).scale(961/Le)},Ar=function(){return Ft(Yt).scale(109.5).parallels([30,30])};Xt.invert=Xt;var Rr=function(){return jt(Xt).scale(152.63)},Ir=function(){return Ft(Zt).scale(131.154).center([0,13.9389])};Kt.invert=Gt(Be);var kr=function(){return jt(Kt).scale(144.049).clipAngle(60)},Pr=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,c=0,l=1,f=1,h=Fn,p=null,d=Fn;return a={stream:function(t){return i&&o===t?i:i=h(d(o=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=e=n=r=null,Fn):Q(p=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,e],[n,r]]},scale:function(e){return arguments.length?(h=Qt((s=+e)*l,s*f,u,c),t()):s},translate:function(e){return arguments.length?(h=Qt(s*l,s*f,u=+e[0],c=+e[1]),t()):[u,c]},reflectX:function(e){return arguments.length?(h=Qt(s*(l=e?-1:1),s*f,u,c),t()):l<0},reflectY:function(e){return arguments.length?(h=Qt(s*l,s*(f=e?-1:1),u,c),t()):f<0},fitExtent:function(t,e){return Pt(a,t,e)},fitSize:function(t,e){return Nt(a,t,e)}}};Jt.invert=Gt(o);var Nr=function(){return jt(Jt).scale(249.5).clipAngle(90+1e-6)};$t.invert=Gt(function(t){return 2*Be(t)});var Cr=function(){return jt($t).scale(250).clipAngle(142)};te.invert=function(t,e){return[-e,2*Be(We(t))-De]};var Dr=function(){var t=Wt(te),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)};t.geoArea=on,t.geoBounds=un,t.geoCentroid=ln,t.geoCircle=Sn,t.geoClipExtent=In,t.geoDistance=jn,t.geoGraticule=it,t.geoGraticule10=ot,t.geoInterpolate=Ln,t.geoLength=Nn,t.geoPath=lr,t.geoAlbers=wr,t.geoAlbersUsa=xr,t.geoAzimuthalEqualArea=Tr,t.geoAzimuthalEqualAreaRaw=Er,t.geoAzimuthalEquidistant=Mr,t.geoAzimuthalEquidistantRaw=Sr,t.geoConicConformal=Ar,t.geoConicConformalRaw=Yt,t.geoConicEqualArea=br,t.geoConicEqualAreaRaw=zt,t.geoConicEquidistant=Ir,t.geoConicEquidistantRaw=Zt,t.geoEquirectangular=Rr,t.geoEquirectangularRaw=Xt,t.geoGnomonic=kr,t.geoGnomonicRaw=Kt,t.geoIdentity=Pr,t.geoProjection=jt,t.geoProjectionMutator=Lt,t.geoMercator=Or,t.geoMercatorRaw=Ht,t.geoOrthographic=Nr,t.geoOrthographicRaw=Jt,t.geoStereographic=Cr,t.geoStereographicRaw=$t,t.geoTransverseMercator=Dr,t.geoTransverseMercatorRaw=te,t.geoRotation=Tn,t.geoStream=tn,t.geoTransform=mr,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":354}],359:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-color"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function r(t,e){return function(n){return t+n*e}}function i(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):O(isNaN(t)?e:t)}function a(t){return 1===(t=+t)?s:function(e,n){return n-e?i(e,n,t):O(isNaN(e)?n:e)}}function s(t,e){var n=e-t;return n?r(t,n):O(isNaN(t)?e:t)}function u(t){return function(n){var r,i,o=n.length,a=new Array(o),s=new Array(o),u=new Array(o);for(r=0;r<o;++r)i=e.rgb(n[r]),a[r]=i.r||0,s[r]=i.g||0,u[r]=i.b||0;return a=t(a),s=t(s),u=t(u),i.opacity=1,function(t){return i.r=a(t),i.g=s(t),i.b=u(t),i+""}}}function c(t){return function(){return t}}function l(t){return function(e){return t(e)+""}}function f(t){return"none"===t?B:(w||(w=document.createElement("DIV"),x=document.documentElement,E=document.defaultView),w.style.transform=t,t=E.getComputedStyle(x.appendChild(w),null).getPropertyValue("transform"),x.removeChild(w),t=t.slice(7,-1).split(","),V(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function h(t){return null==t?B:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",t),(t=T.transform.baseVal.consolidate())?(t=t.matrix,V(t.a,t.b,t.c,t.d,t.e,t.f)):B)}function p(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:N(t,i)},{i:u-2,x:N(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:N(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:N(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:N(t,n)},{i:s-2,x:N(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function d(t){return((t=Math.exp(t))+1/t)/2}function v(t){return((t=Math.exp(t))-1/t)/2}function m(t){return((t=Math.exp(2*t))-1)/(t+1)}function y(t){return function(n,r){var i=t((n=e.hsl(n)).h,(r=e.hsl(r)).h),o=s(n.s,r.s),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function g(t,n){var r=s((t=e.lab(t)).l,(n=e.lab(n)).l),i=s(t.a,n.a),o=s(t.b,n.b),a=s(t.opacity,n.opacity);return function(e){return t.l=r(e),t.a=i(e),t.b=o(e),t.opacity=a(e),t+""}}function _(t){return function(n,r){var i=t((n=e.hcl(n)).h,(r=e.hcl(r)).h),o=s(n.c,r.c),a=s(n.l,r.l),u=s(n.opacity,r.opacity);return function(t){return n.h=i(t),n.c=o(t),n.l=a(t),n.opacity=u(t),n+""}}}function b(t){return function n(r){function i(n,i){var o=t((n=e.cubehelix(n)).h,(i=e.cubehelix(i)).h),a=s(n.s,i.s),u=s(n.l,i.l),c=s(n.opacity,i.opacity);return function(t){return n.h=o(t),n.s=a(t),n.l=u(Math.pow(t,r)),n.opacity=c(t),n+""}}return r=+r,i.gamma=n,i}(1)}var w,x,E,T,S=function(t){var e=t.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),o=t[i],a=t[i+1];return n((r-i/e)*e,i>0?t[i-1]:2*o-a,o,a,i<e-1?t[i+2]:2*a-o)}},M=function(t){var e=t.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*e);return n((r-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}},O=function(t){return function(){return t}},A=function t(n){function r(t,n){var r=i((t=e.rgb(t)).r,(n=e.rgb(n)).r),o=i(t.g,n.g),a=i(t.b,n.b),u=s(t.opacity,n.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=u(e),t+""}}var i=a(1);return r.gamma=t,r}(1),R=u(S),I=u(M),k=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=F(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},P=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},N=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},C=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=F(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},D=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,j=new RegExp(D.source,"g"),L=function(t,e){var n,r,i,o=D.lastIndex=j.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=D.exec(t))&&(r=j.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:N(n,r)})),o=j.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?l(u[0].x):c(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},F=function(t,n){var r,i=typeof n;return null==n||"boolean"===i?O(n):("number"===i?N:"string"===i?(r=e.color(n))?(n=r,A):L:n instanceof e.color?A:n instanceof Date?P:Array.isArray(n)?k:isNaN(n)?C:N)(t,n)},U=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},z=180/Math.PI,B={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*z,skewX:Math.atan(u)*z,scaleX:a,scaleY:s}},G=p(f,"px, ","px)","deg)"),H=p(h,", ",")",")"),W=Math.SQRT2,q=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-o,h=l*l+f*f;if(h<1e-12)r=Math.log(c/a)/W,n=function(t){return[i+t*l,o+t*f,a*Math.exp(W*t*r)]};else{var p=Math.sqrt(h),y=(c*c-a*a+4*h)/(2*a*2*p),g=(c*c-a*a-4*h)/(2*c*2*p),_=Math.log(Math.sqrt(y*y+1)-y);r=(Math.log(Math.sqrt(g*g+1)-g)-_)/W,n=function(t){var e=t*r,n=d(_),s=a/(2*p)*(n*m(W*e+_)-v(_));return[i+s*l,o+s*f,a*n/d(W*e+_)]}}return n.duration=1e3*r,n},Y=y(o),X=y(s),Z=_(o),K=_(s),Q=b(o),J=b(s),$=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};t.interpolate=F,t.interpolateArray=k,t.interpolateBasis=S,t.interpolateBasisClosed=M,t.interpolateDate=P,t.interpolateNumber=N,t.interpolateObject=C,t.interpolateRound=U,t.interpolateString=L,t.interpolateTransformCss=G,t.interpolateTransformSvg=H,t.interpolateZoom=q,t.interpolateRgb=A,t.interpolateRgbBasis=R,t.interpolateRgbBasisClosed=I,t.interpolateHsl=Y,t.interpolateHslLong=X,t.interpolateLab=g,t.interpolateHcl=Z,t.interpolateHclLong=K,t.interpolateCubehelix=Q,t.interpolateCubehelixLong=J,t.quantize=$,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-color":356}],360:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-array"),t("d3-collection"),t("d3-interpolate"),t("d3-format"),t("d3-time"),t("d3-time-format"),t("d3-color")):"function"==typeof define&&define.amd?define(["exports","d3-array","d3-collection","d3-interpolate","d3-format","d3-time","d3-time-format","d3-color"],i):i(r.d3=r.d3||{},r.d3,r.d3,r.d3,r.d3,r.d3,r.d3,r.d3)}(this,function(t,e,n,r,i,o,a,s){"use strict";function u(t){function e(e){var n=e+"",a=r.get(n);if(!a){if(o!==G)return o;r.set(n,a=i.push(e))}return t[(a-1)%t.length]}var r=n.map(),i=[],o=G;return t=null==t?[]:V.call(t),e.domain=function(t){if(!arguments.length)return i.slice();i=[],r=n.map();for(var o,a,s=-1,u=t.length;++s<u;)r.has(a=(o=t[s])+"")||r.set(a,i.push(o));return e},e.range=function(n){return arguments.length?(t=V.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(o=t,e):o},e.copy=function(){return u().domain(i).range(t).unknown(o)},e}function c(){function t(){var t=o().length,i=s[1]<s[0],u=s[i-0],c=s[1-i];n=(c-u)/Math.max(1,t-f+2*h),l&&(n=Math.floor(n)),u+=(c-u-n*(t-f))*p,r=n*(1-f),l&&(u=Math.round(u),r=Math.round(r));var d=e.range(t).map(function(t){return u+n*t});return a(i?d.reverse():d)}var n,r,i=u().unknown(void 0),o=i.domain,a=i.range,s=[0,1],l=!1,f=0,h=0,p=.5;return delete i.unknown,i.domain=function(e){return arguments.length?(o(e),t()):o()},i.range=function(e){return arguments.length?(s=[+e[0],+e[1]],t()):s.slice()},i.rangeRound=function(e){return s=[+e[0],+e[1]],l=!0,t()},i.bandwidth=function(){return r},i.step=function(){return n},i.round=function(e){return arguments.length?(l=!!e,t()):l},i.padding=function(e){return arguments.length?(f=h=Math.max(0,Math.min(1,e)),t()):f},i.paddingInner=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},i.paddingOuter=function(e){return arguments.length?(h=Math.max(0,Math.min(1,e)),t()):h},i.align=function(e){return arguments.length?(p=Math.max(0,Math.min(1,e)),t()):p},i.copy=function(){return c().domain(o()).range(s).round(l).paddingInner(f).paddingOuter(h).align(p)},t()}function l(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return l(e())},t}function f(){return l(c().paddingInner(1))}function h(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:H(e)}function p(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function d(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function v(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function m(t,n,r,i){var o=Math.min(t.length,n.length)-1,a=new Array(o),s=new Array(o),u=-1;for(t[o]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<o;)a[u]=r(t[u],t[u+1]),s[u]=i(n[u],n[u+1]);return function(n){var r=e.bisect(t,n,1,o)-1;return s[r](a[r](n))}}function y(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function g(t,e){function n(){return o=Math.min(u.length,c.length)>2?m:v,a=s=null,i}function i(e){return(a||(a=o(u,c,f?p(t):t,l)))(+e)}var o,a,s,u=q,c=q,l=r.interpolate,f=!1;return i.invert=function(t){return(s||(s=o(c,u,h,f?d(e):e)))(+t)},i.domain=function(t){return arguments.length?(u=B.call(t,W),n()):u.slice()},i.range=function(t){return arguments.length?(c=V.call(t),n()):c.slice()},i.rangeRound=function(t){return c=V.call(t),l=r.interpolateRound,n()},i.clamp=function(t){return arguments.length?(f=!!t,n()):f},i.interpolate=function(t){return arguments.length?(l=t,n()):l},n()}function _(t){var n=t.domain;return t.ticks=function(t){var r=n();return e.ticks(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,e){return Y(n(),t,e)},t.nice=function(r){var i=n(),o=i.length-1,a=null==r?10:r,s=i[0],u=i[o],c=e.tickStep(s,u,a);return c&&(c=e.tickStep(Math.floor(s/c)*c,Math.ceil(u/c)*c,a),i[0]=Math.floor(s/c)*c,i[o]=Math.ceil(u/c)*c,n(i)),t},t}function b(){var t=g(h,r.interpolateNumber);return t.copy=function(){return y(t,b())},_(t)}function w(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=B.call(n,W),t):e.slice()},t.copy=function(){return w().domain(e)},_(t)}function x(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:H(e)}function E(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function T(t){return isFinite(t)?+("1e"+t):t<0?0:t}function S(t){return 10===t?T:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function M(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function O(t){return function(e){return-t(-e)}}function A(){function t(){return a=M(o),s=S(o),r()[0]<0&&(a=O(a),s=O(s)),n}var n=g(x,E).domain([1,10]),r=n.domain,o=10,a=M(10),s=S(10);return n.base=function(e){return arguments.length?(o=+e,t()):o},n.domain=function(e){return arguments.length?(r(e),t()):r()},n.ticks=function(t){var n,i=r(),u=i[0],c=i[i.length-1];(n=c<u)&&(p=u,u=c,c=p);var l,f,h,p=a(u),d=a(c),v=null==t?10:+t,m=[];if(!(o%1)&&d-p<v){if(p=Math.round(p)-1,d=Math.round(d)+1,u>0){for(;p<d;++p)for(f=1,l=s(p);f<o;++f)if(h=l*f,!(h<u)){if(h>c)break;m.push(h)}}else for(;p<d;++p)for(f=o-1,l=s(p);f>=1;--f)if(h=l*f,!(h<u)){if(h>c)break;m.push(h)}}else m=e.ticks(p,d,Math.min(d-p,v)).map(s);return n?m.reverse():m},n.tickFormat=function(t,e){if(null==e&&(e=10===o?".0e":","),"function"!=typeof e&&(e=i.format(e)),t===1/0)return e;null==t&&(t=10);var r=Math.max(1,o*t/n.ticks().length);return function(t){var n=t/s(Math.round(a(t)));return n*o<o-.5&&(n*=o),n<=r?e(t):""}},n.nice=function(){return r(X(r(),{floor:function(t){return s(Math.floor(a(t)))},ceil:function(t){return s(Math.ceil(a(t)))}}))},n.copy=function(){return y(n,A().base(o))},n}function R(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function I(){function t(t,e){return(e=R(e,n)-(t=R(t,n)))?function(r){return(R(r,n)-t)/e}:H(e)}function e(t,e){return e=R(e,n)-(t=R(t,n)),function(r){return R(t+e*r,1/n)}}var n=1,r=g(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return y(r,I().exponent(n))},_(r)}function k(){return I().exponent(.5)}function P(){function t(){var t=0,a=Math.max(1,i.length);for(o=new Array(a-1);++t<a;)o[t-1]=e.quantile(r,t/a);return n}function n(t){if(!isNaN(t=+t))return i[e.bisect(o,t)]}var r=[],i=[],o=[];return n.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?o[e-1]:r[0],e<o.length?o[e]:r[r.length-1]]},n.domain=function(n){if(!arguments.length)return r.slice();r=[];for(var i,o=0,a=n.length;o<a;++o)i=n[o],null==i||isNaN(i=+i)||r.push(i);return r.sort(e.ascending),t()},n.range=function(e){return arguments.length?(i=V.call(e),t()):i.slice()},n.quantiles=function(){return o.slice()},n.copy=function(){return P().domain(r).range(i)},n}function N(){function t(t){if(t<=t)return s[e.bisect(a,t,0,o)]}function n(){var e=-1;for(a=new Array(o);++e<o;)a[e]=((e+1)*i-(e-o)*r)/(o+1);return t}var r=0,i=1,o=1,a=[.5],s=[0,1];return t.domain=function(t){return arguments.length?(r=+t[0],i=+t[1],n()):[r,i]},t.range=function(t){return arguments.length?(o=(s=V.call(t)).length-1,n()):s.slice()},t.invertExtent=function(t){var e=s.indexOf(t);return e<0?[NaN,NaN]:e<1?[r,a[0]]:e>=o?[a[o-1],i]:[a[e-1],a[e]]},t.copy=function(){return N().domain([r,i]).range(s)},_(t)}function C(){function t(t){if(t<=t)return r[e.bisect(n,t,0,i)]}var n=[.5],r=[0,1],i=1;return t.domain=function(e){return arguments.length?(n=V.call(e),i=Math.min(n.length,r.length-1),t):n.slice()},t.range=function(e){return arguments.length?(r=V.call(e),i=Math.min(n.length,r.length-1),t):r.slice()},t.invertExtent=function(t){var e=r.indexOf(t);return[n[e-1],n[e]]},t.copy=function(){return C().domain(n).range(r)},t}function D(t){return new Date(t)}function j(t){return t instanceof Date?+t:+new Date(+t)}function L(t,n,i,o,a,s,u,c,l){function f(e){return(u(e)<e?_:s(e)<e?b:a(e)<e?w:o(e)<e?x:n(e)<e?i(e)<e?E:T:t(e)<e?S:M)(e)}function p(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,s=e.bisector(function(t){return t[2]}).right(O,a);s===O.length?(o=e.tickStep(r/31536e6,i/31536e6,n),n=t):s?(s=O[a/O[s-1][2]<O[s][2]/a?s-1:s],o=s[1],n=s[0]):(o=e.tickStep(r,i,n),n=c)}return null==o?n:n.every(o)}var d=g(h,r.interpolateNumber),v=d.invert,m=d.domain,_=l(".%L"),b=l(":%S"),w=l("%I:%M"),x=l("%I %p"),E=l("%a %d"),T=l("%b %d"),S=l("%B"),M=l("%Y"),O=[[u,1,1e3],[u,5,5e3],[u,15,15e3],[u,30,3e4],[s,1,6e4],[s,5,3e5],[s,15,9e5],[s,30,18e5],[a,1,36e5],[a,3,108e5],[a,6,216e5],[a,12,432e5],[o,1,864e5],[o,2,1728e5],[i,1,6048e5],[n,1,2592e6],[n,3,7776e6],[t,1,31536e6]];return d.invert=function(t){return new Date(v(t))},d.domain=function(t){return arguments.length?m(B.call(t,j)):m().map(D)},d.ticks=function(t,e){var n,r=m(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=p(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},d.tickFormat=function(t,e){return null==e?f:l(e)},d.nice=function(t,e){var n=m();return(t=p(t,n[0],n[n.length-1],e))?m(X(n,t)):d},d.copy=function(){return y(d,L(t,n,i,o,a,s,u,c,l))},d}function F(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function U(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return U(t).domain([n,r]).clamp(i)},_(e)}var z=Array.prototype,B=z.map,V=z.slice,G={name:"implicit"},H=function(t){return function(){return t}},W=function(t){return+t},q=[0,1],Y=function(t,n,r){var o,a=t[0],s=t[t.length-1],u=e.tickStep(a,s,null==n?10:n);switch(r=i.formatSpecifier(null==r?",f":r),r.type){case"s":var c=Math.max(Math.abs(a),Math.abs(s));return null!=r.precision||isNaN(o=i.precisionPrefix(u,c))||(r.precision=o),i.formatPrefix(r,c);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=i.precisionRound(u,Math.max(Math.abs(a),Math.abs(s))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=i.precisionFixed(u))||(r.precision=o-2*("%"===r.type))}return i.format(r)},X=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},Z=function(){return L(o.timeYear,o.timeMonth,o.timeWeek,o.timeDay,o.timeHour,o.timeMinute,o.timeSecond,o.timeMillisecond,a.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},K=function(){return L(o.utcYear,o.utcMonth,o.utcWeek,o.utcDay,o.utcHour,o.utcMinute,o.utcSecond,o.utcMillisecond,a.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},Q=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},J=Q("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),$=Q("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),tt=Q("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),et=Q("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),nt=r.interpolateCubehelixLong(s.cubehelix(300,.5,0),s.cubehelix(-240,.5,1)),rt=r.interpolateCubehelixLong(s.cubehelix(-100,.75,.35),s.cubehelix(80,1.5,.8)),it=r.interpolateCubehelixLong(s.cubehelix(260,.75,.35),s.cubehelix(80,1.5,.8)),ot=s.cubehelix(),at=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return ot.h=360*t-100,ot.s=1.5-1.5*e,ot.l=.8-.9*e,ot+""
},st=F(Q("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),ut=F(Q("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ct=F(Q("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),lt=F(Q("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));t.scaleBand=c,t.scalePoint=f,t.scaleIdentity=w,t.scaleLinear=b,t.scaleLog=A,t.scaleOrdinal=u,t.scaleImplicit=G,t.scalePow=I,t.scaleSqrt=k,t.scaleQuantile=P,t.scaleQuantize=N,t.scaleThreshold=C,t.scaleTime=Z,t.scaleUtc=K,t.schemeCategory10=J,t.schemeCategory20b=$,t.schemeCategory20c=tt,t.schemeCategory20=et,t.interpolateCubehelixDefault=nt,t.interpolateRainbow=at,t.interpolateWarm=rt,t.interpolateCool=it,t.interpolateViridis=st,t.interpolateMagma=ut,t.interpolateInferno=ct,t.interpolatePlasma=lt,t.scaleSequential=U,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-array":354,"d3-collection":355,"d3-color":356,"d3-format":357,"d3-interpolate":359,"d3-time":363,"d3-time-format":362}],361:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===J&&e.documentElement.namespaceURI===J?e.createElement(t):e.createElementNS(n,t)}}function n(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function r(){return new i}function i(){this._="@"+(++nt).toString(36)}function o(t,e,n){return t=a(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function a(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function s(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function u(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function c(t,e,n){var r=st.hasOwnProperty(t.type)?o:a;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function l(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function f(){}function h(){return[]}function p(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function d(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new p(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function v(t,e,n,r,i,o,a){var s,u,c,l={},f=e.length,h=o.length,d=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(d[s]=c="$"+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<h;++s)c="$"+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new p(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l[d[s]]===u&&(i[s]=u)}function m(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function y(t){return function(){this.removeAttribute(t)}}function g(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _(t,e){return function(){this.setAttribute(t,e)}}function b(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function w(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function x(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function E(t){return function(){this.style.removeProperty(t)}}function T(t,e,n){return function(){this.style.setProperty(t,e,n)}}function S(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function M(t){return function(){delete this[t]}}function O(t,e){return function(){this[t]=e}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function R(t){return t.trim().split(/^|\s+/)}function I(t){return t.classList||new k(t)}function k(t){this._node=t,this._names=R(t.getAttribute("class")||"")}function P(t,e){for(var n=I(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function N(t,e){for(var n=I(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function C(t){return function(){P(this,t)}}function D(t){return function(){N(this,t)}}function j(t,e){return function(){(e.apply(this,arguments)?P:N)(this,t)}}function L(){this.textContent=""}function F(t){return function(){this.textContent=t}}function U(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function z(){this.innerHTML=""}function B(t){return function(){this.innerHTML=t}}function V(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function H(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function W(){return null}function q(){var t=this.parentNode;t&&t.removeChild(this)}function Y(t,e,n){var r=Pt(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function X(t,e){return function(){return Y(this,t,e)}}function Z(t,e){return function(){return Y(this,t,e.apply(this,arguments))}}function K(t,e){this._groups=t,this._parents=e}function Q(){return new K([[document.documentElement]],Wt)}var J="http://www.w3.org/1999/xhtml",$={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tt=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),$.hasOwnProperty(e)?{space:$[e],local:t}:t},et=function(t){var r=tt(t);return(r.local?n:e)(r)},nt=0;i.prototype=r.prototype={constructor:i,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var rt=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var it=document.documentElement;if(!it.matches){var ot=it.webkitMatchesSelector||it.msMatchesSelector||it.mozMatchesSelector||it.oMatchesSelector;rt=function(t){return function(){return ot.call(this,t)}}}}var at=rt,st={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(st={mouseenter:"mouseover",mouseleave:"mouseout"})}var ut=function(t,e,n){var r,i,o=s(t+""),a=o.length;{if(!(arguments.length<2)){for(l=e?c:u,null==n&&(n=!1),r=0;r<a;++r)this.each(l(o[r],e,n));return this}var l=this.node().__on;if(l)for(var f,h=0,p=l.length;h<p;++h)for(r=0,f=l[h];r<a;++r)if((i=o[r]).type===f.type&&i.name===f.name)return f.value}},ct=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},lt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},ft=function(t){var e=ct();return e.changedTouches&&(e=e.changedTouches[0]),lt(t,e)},ht=function(t){return null==t?f:function(){return this.querySelector(t)}},pt=function(t){"function"!=typeof t&&(t=ht(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new K(r,this._parents)},dt=function(t){return null==t?h:function(){return this.querySelectorAll(t)}},vt=function(t){"function"!=typeof t&&(t=dt(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new K(r,i)},mt=function(t){"function"!=typeof t&&(t=at(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new K(r,this._parents)},yt=function(t){return new Array(t.length)},gt=function(){return new K(this._enter||this._groups.map(yt),this._parents)};p.prototype={constructor:p,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var _t=function(t){return function(){return t}},bt=function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var n=e?v:d,r=this._parents,i=this._groups;"function"!=typeof t&&(t=_t(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,p=t.call(l,l&&l.__data__,c,r),m=p.length,y=s[c]=new Array(m),g=a[c]=new Array(m);n(l,f,y,g,u[c]=new Array(h),p,e);for(var _,b,w=0,x=0;w<m;++w)if(_=y[w]){for(w>=x&&(x=w+1);!(b=g[x])&&++x<m;);_._next=b||null}}return a=new K(a,r),a._enter=s,a._exit=u,a},wt=function(){return new K(this._exit||this._groups.map(yt),this._parents)},xt=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new K(a,this._parents)},Et=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Tt=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=m);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new K(i,this._parents).order()},St=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},Mt=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Ot=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},At=function(){var t=0;return this.each(function(){++t}),t},Rt=function(){return!this.node()},It=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},kt=function(t,e){var n=tt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?g:y:"function"==typeof e?n.local?x:w:n.local?b:_)(n,e))},Pt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Nt=function(t,e,n){var r;return arguments.length>1?this.each((null==e?E:"function"==typeof e?S:T)(t,e,null==n?"":n)):Pt(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},Ct=function(t,e){return arguments.length>1?this.each((null==e?M:"function"==typeof e?A:O)(t,e)):this.node()[t]};k.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Dt=function(t,e){var n=R(t+"");if(arguments.length<2){for(var r=I(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?j:e?C:D)(n,e))},jt=function(t){return arguments.length?this.each(null==t?L:("function"==typeof t?U:F)(t)):this.node().textContent},Lt=function(t){return arguments.length?this.each(null==t?z:("function"==typeof t?V:B)(t)):this.node().innerHTML},Ft=function(){return this.each(G)},Ut=function(){return this.each(H)},zt=function(t){var e="function"==typeof t?t:et(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},Bt=function(t,e){var n="function"==typeof t?t:et(t),r=null==e?W:"function"==typeof e?e:ht(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},Vt=function(){return this.each(q)},Gt=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},Ht=function(t,e){return this.each(("function"==typeof e?Z:X)(t,e))},Wt=[null];K.prototype=Q.prototype={constructor:K,select:pt,selectAll:vt,filter:mt,data:bt,enter:gt,exit:wt,merge:xt,order:Et,sort:Tt,call:St,nodes:Mt,node:Ot,size:At,empty:Rt,each:It,attr:kt,style:Nt,property:Ct,classed:Dt,text:jt,html:Lt,raise:Ft,lower:Ut,append:zt,insert:Bt,remove:Vt,datum:Gt,on:ut,dispatch:Ht};var qt=function(t){return"string"==typeof t?new K([[document.querySelector(t)]],[document.documentElement]):new K([[t]],Wt)},Yt=function(t){return"string"==typeof t?new K([document.querySelectorAll(t)],[document.documentElement]):new K([null==t?[]:t],Wt)},Xt=function(t,e,n){arguments.length<3&&(n=e,e=ct().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return lt(t,r);return null},Zt=function(t,e){null==e&&(e=ct().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=lt(t,e[n]);return i};t.creator=et,t.local=r,t.matcher=at,t.mouse=ft,t.namespace=tt,t.namespaces=$,t.select=qt,t.selectAll=Yt,t.selection=Q,t.selector=ht,t.selectorAll=dt,t.touch=Xt,t.touches=Zt,t.window=Pt,t.customEvent=l,Object.defineProperty(t,"__esModule",{value:!0})})},{}],362:[function(t,e,n){!function(r,i){"object"==typeof n&&void 0!==e?i(n,t("d3-time")):"function"==typeof define&&define.amd?define(["exports","d3-time"],i):i(r.d3=r.d3||{},r.d3)}(this,function(t,e){"use strict";function n(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function r(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function i(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function o(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=rt[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function o(t,e){return function(n){var o=i(1900);if(a(o,t,n+="",0)!=n.length)return null;if("p"in o&&(o.H=o.H%12+12*o.p),"W"in o||"U"in o){"w"in o||(o.w="W"in o?1:0);var s="Z"in o?r(i(o.y)).getUTCDay():e(i(o.y)).getDay();o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(s+5)%7:o.w+7*o.U-(s+6)%7}return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,r(o)):e(o)}}function a(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=Lt[i in rt?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function s(t,e,n){var r=St.exec(e.slice(n));return r?(t.p=Mt[r[0].toLowerCase()],n+r[0].length):-1}function $(t,e,n){var r=Rt.exec(e.slice(n));return r?(t.w=It[r[0].toLowerCase()],n+r[0].length):-1}function tt(t,e,n){var r=Ot.exec(e.slice(n));return r?(t.w=At[r[0].toLowerCase()],n+r[0].length):-1}function et(t,e,n){var r=Nt.exec(e.slice(n));return r?(t.m=Ct[r[0].toLowerCase()],n+r[0].length):-1}function nt(t,e,n){var r=kt.exec(e.slice(n));return r?(t.m=Pt[r[0].toLowerCase()],n+r[0].length):-1}function it(t,e,n){return a(t,yt,e,n)}function ot(t,e,n){return a(t,gt,e,n)}function at(t,e,n){return a(t,_t,e,n)}function st(t){return xt[t.getDay()]}function ut(t){return wt[t.getDay()]}function ct(t){return Tt[t.getMonth()]}function lt(t){return Et[t.getMonth()]}function ft(t){return bt[+(t.getHours()>=12)]}function ht(t){return xt[t.getUTCDay()]}function pt(t){return wt[t.getUTCDay()]}function dt(t){return Tt[t.getUTCMonth()]}function vt(t){return Et[t.getUTCMonth()]}function mt(t){return bt[+(t.getUTCHours()>=12)]}var yt=t.dateTime,gt=t.date,_t=t.time,bt=t.periods,wt=t.days,xt=t.shortDays,Et=t.months,Tt=t.shortMonths,St=u(bt),Mt=c(bt),Ot=u(wt),At=c(wt),Rt=u(xt),It=c(xt),kt=u(Et),Pt=c(Et),Nt=u(Tt),Ct=c(Tt),Dt={a:st,A:ut,b:ct,B:lt,c:null,d:T,e:T,H:S,I:M,j:O,L:A,m:R,M:I,p:ft,S:k,U:P,w:N,W:C,x:null,X:null,y:D,Y:j,Z:L,"%":J},jt={a:ht,A:pt,b:dt,B:vt,c:null,d:F,e:F,H:U,I:z,j:B,L:V,m:G,M:H,p:mt,S:W,U:q,w:Y,W:X,x:null,X:null,y:Z,Y:K,Z:Q,"%":J},Lt={a:$,A:tt,b:et,B:nt,c:it,d:y,e:y,H:_,I:_,j:g,L:x,m:m,M:b,p:s,S:w,U:f,w:l,W:h,x:ot,X:at,y:d,Y:p,Z:v,"%":E};return Dt.x=e(gt,Dt),Dt.X=e(_t,Dt),Dt.c=e(yt,Dt),jt.x=e(gt,jt),jt.X=e(_t,jt),jt.c=e(yt,jt),{format:function(t){var n=e(t+="",Dt);return n.toString=function(){return t},n},parse:function(t){var e=o(t+="",n);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",jt);return n.toString=function(){return t},n},utcParse:function(t){var e=o(t,r);return e.toString=function(){return t},e}}}function a(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function s(t){return t.replace(/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,"\\$&")}function u(t){return new RegExp("^(?:"+t.map(s).join("|")+")","i")}function c(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function l(t,e,n){var r=it.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function f(t,e,n){var r=it.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function h(t,e,n){var r=it.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function p(t,e,n){var r=it.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function d(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function v(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function y(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function g(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function _(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function b(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function w(t,e,n){var r=it.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function x(t,e,n){var r=it.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function E(t,e,n){var r=ot.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function T(t,e){return a(t.getDate(),e,2)}function S(t,e){return a(t.getHours(),e,2)}function M(t,e){return a(t.getHours()%12||12,e,2)}function O(t,n){return a(1+e.timeDay.count(e.timeYear(t),t),n,3)}function A(t,e){return a(t.getMilliseconds(),e,3)}function R(t,e){return a(t.getMonth()+1,e,2)}function I(t,e){return a(t.getMinutes(),e,2)}function k(t,e){return a(t.getSeconds(),e,2)}function P(t,n){return a(e.timeSunday.count(e.timeYear(t),t),n,2)}function N(t){return t.getDay()}function C(t,n){return a(e.timeMonday.count(e.timeYear(t),t),n,2)}function D(t,e){return a(t.getFullYear()%100,e,2)}function j(t,e){return a(t.getFullYear()%1e4,e,4)}function L(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+a(e/60|0,"0",2)+a(e%60,"0",2)}function F(t,e){return a(t.getUTCDate(),e,2)}function U(t,e){return a(t.getUTCHours(),e,2)}function z(t,e){return a(t.getUTCHours()%12||12,e,2)}function B(t,n){return a(1+e.utcDay.count(e.utcYear(t),t),n,3)}function V(t,e){return a(t.getUTCMilliseconds(),e,3)}function G(t,e){return a(t.getUTCMonth()+1,e,2)}function H(t,e){return a(t.getUTCMinutes(),e,2)}function W(t,e){return a(t.getUTCSeconds(),e,2)}function q(t,n){return a(e.utcSunday.count(e.utcYear(t),t),n,2)}function Y(t){return t.getUTCDay()}function X(t,n){return a(e.utcMonday.count(e.utcYear(t),t),n,2)}function Z(t,e){return a(t.getUTCFullYear()%100,e,2)}function K(t,e){return a(t.getUTCFullYear()%1e4,e,4)}function Q(){return"+0000"}function J(){return"%"}function $(e){return nt=o(e),t.timeFormat=nt.format,t.timeParse=nt.parse,t.utcFormat=nt.utcFormat,t.utcParse=nt.utcParse,nt}function tt(t){return t.toISOString()}function et(t){var e=new Date(t);return isNaN(e)?null:e}var nt,rt={"-":"",_:" ",0:"0"},it=/^\s*\d+/,ot=/^%/;$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var at=Date.prototype.toISOString?tt:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),st=+new Date("2000-01-01T00:00:00.000Z")?et:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");t.timeFormatDefaultLocale=$,t.timeFormatLocale=o,t.isoFormat=at,t.isoParse=st,Object.defineProperty(t,"__esModule",{value:!0})})},{"d3-time":363}],363:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t,n,r,a){function s(e){return t(e=new Date(+e)),e}return s.floor=s,s.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},s.round=function(t){var e=s(t),n=s.ceil(t);return t-e<n-t?e:n},s.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},s.range=function(e,r,i){var o=[];if(e=s.ceil(e),i=null==i?1:Math.floor(i),!(e<r&&i>0))return o;do o.push(new Date(+e));while(n(e,i),t(e),e<r);return o},s.filter=function(r){return e(function(e){if(e>=e)for(;t(e),!r(e);)e.setTime(e-1)},function(t,e){if(t>=t)for(;--e>=0;)for(;n(t,1),!r(t););})},r&&(s.count=function(e,n){return i.setTime(+e),o.setTime(+n),t(i),t(o),Math.floor(r(i,o))},s.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?s.filter(a?function(e){return a(e)%t===0}:function(e){return s.count(0,e)%t===0}):s:null}),s}function n(t){return e(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}function r(t){return e(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var i=new Date,o=new Date,a=e(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});a.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?e(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):a:null};var s=a.range,u=e(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),c=u.range,l=e(function(t){t.setTime(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),f=l.range,h=e(function(t){var e=6e4*t.getTimezoneOffset()%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),p=h.range,d=e(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),v=d.range,m=n(0),y=n(1),g=n(2),_=n(3),b=n(4),w=n(5),x=n(6),E=m.range,T=y.range,S=g.range,M=_.range,O=b.range,A=w.range,R=x.range,I=e(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),k=I.range,P=e(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});P.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var N=P.range,C=e(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),D=C.range,j=e(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),L=j.range,F=e(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),U=F.range,z=r(0),B=r(1),V=r(2),G=r(3),H=r(4),W=r(5),q=r(6),Y=z.range,X=B.range,Z=V.range,K=G.range,Q=H.range,J=W.range,$=q.range,tt=e(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),et=tt.range,nt=e(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});nt.every=function(t){return isFinite(t=Math.floor(t))&&t>0?e(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var rt=nt.range;t.timeInterval=e,t.timeMillisecond=a,t.timeMilliseconds=s,t.utcMillisecond=a,
t.utcMilliseconds=s,t.timeSecond=u,t.timeSeconds=c,t.utcSecond=u,t.utcSeconds=c,t.timeMinute=l,t.timeMinutes=f,t.timeHour=h,t.timeHours=p,t.timeDay=d,t.timeDays=v,t.timeWeek=m,t.timeWeeks=E,t.timeSunday=m,t.timeSundays=E,t.timeMonday=y,t.timeMondays=T,t.timeTuesday=g,t.timeTuesdays=S,t.timeWednesday=_,t.timeWednesdays=M,t.timeThursday=b,t.timeThursdays=O,t.timeFriday=w,t.timeFridays=A,t.timeSaturday=x,t.timeSaturdays=R,t.timeMonth=I,t.timeMonths=k,t.timeYear=P,t.timeYears=N,t.utcMinute=C,t.utcMinutes=D,t.utcHour=j,t.utcHours=L,t.utcDay=F,t.utcDays=U,t.utcWeek=z,t.utcWeeks=Y,t.utcSunday=z,t.utcSundays=Y,t.utcMonday=B,t.utcMondays=X,t.utcTuesday=V,t.utcTuesdays=Z,t.utcWednesday=G,t.utcWednesdays=K,t.utcThursday=H,t.utcThursdays=Q,t.utcFriday=W,t.utcFridays=J,t.utcSaturday=q,t.utcSaturdays=$,t.utcMonth=tt,t.utcMonths=et,t.utcYear=nt,t.utcYears=rt,Object.defineProperty(t,"__esModule",{value:!0})})},{}],364:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.d3=t.d3||{})}(this,function(t){"use strict";function e(t){return function(e,n){return Mc(t(e),n)}}function n(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Vc?i*=10:o>=Gc?i*=5:o>=Hc&&(i*=2),e<t?-i:i}function r(t){return t.length}function i(t,e,n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"}function o(t,e,n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"}function a(t){var e=t.bandwidth()/2;return t.round()&&(e=Math.round(e)),function(n){return t(n)+e}}function s(){return!this.__axis}function u(t,e){function n(n){var p,d=null==u?e.ticks?e.ticks.apply(e,r):e.domain():u,v=null==c?e.tickFormat?e.tickFormat.apply(e,r):ll:c,m=Math.max(l,0)+h,y=1===t||3===t?i:o,g=e.range(),_=g[0]+.5,b=g[g.length-1]+.5,w=(e.bandwidth?a:ll)(e.copy()),x=n.selection?n.selection():n,E=x.selectAll(".domain").data([null]),T=x.selectAll(".tick").data(d,e).order(),S=T.exit(),M=T.enter().append("g").attr("class","tick"),O=T.select("line"),A=T.select("text"),R=1===t||4===t?-1:1,I=4===t||2===t?(p="x","y"):(p="y","x");E=E.merge(E.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),T=T.merge(M),O=O.merge(M.append("line").attr("stroke","#000").attr(p+"2",R*l).attr(I+"1",.5).attr(I+"2",.5)),A=A.merge(M.append("text").attr("fill","#000").attr(p,R*m).attr(I,.5).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),n!==x&&(E=E.transition(n),T=T.transition(n),O=O.transition(n),A=A.transition(n),S=S.transition(n).attr("opacity",1e-6).attr("transform",function(t){return y(w,this.parentNode.__axis||w,t)}),M.attr("opacity",1e-6).attr("transform",function(t){return y(this.parentNode.__axis||w,w,t)})),S.remove(),E.attr("d",4===t||2==t?"M"+R*f+","+_+"H0.5V"+b+"H"+R*f:"M"+_+","+R*f+"V0.5H"+b+"V"+R*f),T.attr("opacity",1).attr("transform",function(t){return y(w,w,t)}),O.attr(p+"2",R*l),A.attr(p,R*m).text(v),x.filter(s).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),x.each(function(){this.__axis=w})}var r=[],u=null,c=null,l=6,f=6,h=3;return n.scale=function(t){return arguments.length?(e=t,n):e},n.ticks=function(){return r=cl.call(arguments),n},n.tickArguments=function(t){return arguments.length?(r=null==t?[]:cl.call(t),n):r.slice()},n.tickValues=function(t){return arguments.length?(u=null==t?null:cl.call(t),n):u&&u.slice()},n.tickFormat=function(t){return arguments.length?(c=t,n):c},n.tickSize=function(t){return arguments.length?(l=f=+t,n):l},n.tickSizeInner=function(t){return arguments.length?(l=+t,n):l},n.tickSizeOuter=function(t){return arguments.length?(f=+t,n):f},n.tickPadding=function(t){return arguments.length?(h=+t,n):h},n}function c(t){return u(1,t)}function l(t){return u(2,t)}function f(t){return u(3,t)}function h(t){return u(4,t)}function p(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new d(r)}function d(t){this._=t}function v(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function m(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function y(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=fl,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function g(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===hl&&e.documentElement.namespaceURI===hl?e.createElement(t):e.createElementNS(n,t)}}function _(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function b(){return new w}function w(){this._="@"+(++ml).toString(36)}function x(t,e,n){return t=E(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function E(e,n,r){return function(i){var o=t.event;t.event=i;try{e.call(this,this.__data__,n,r)}finally{t.event=o}}}function T(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}function S(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function M(t,e,n){var r=wl.hasOwnProperty(t.type)?x:E;return function(i,o,a){var s,u=this.__on,c=r(e,o,a);if(u)for(var l=0,f=u.length;l<f;++l)if((s=u[l]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=n),void(s.value=e);this.addEventListener(t.type,c,n),s={type:t.type,name:t.name,value:e,listener:c,capture:n},u?u.push(s):this.__on=[s]}}function O(e,n,r,i){var o=t.event;e.sourceEvent=t.event,t.event=e;try{return n.apply(r,i)}finally{t.event=o}}function A(){}function R(){return[]}function I(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function k(t,e,n,r,i,o){for(var a,s=0,u=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new I(t,o[s]);for(;s<u;++s)(a=e[s])&&(i[s]=a)}function P(t,e,n,r,i,o,a){var s,u,c,l={},f=e.length,h=o.length,p=new Array(f);for(s=0;s<f;++s)(u=e[s])&&(p[s]=c="$"+a.call(u,u.__data__,s,e),c in l?i[s]=u:l[c]=u);for(s=0;s<h;++s)c="$"+a.call(t,o[s],s,o),(u=l[c])?(r[s]=u,u.__data__=o[s],l[c]=null):n[s]=new I(t,o[s]);for(s=0;s<f;++s)(u=e[s])&&l[p[s]]===u&&(i[s]=u)}function N(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function C(t){return function(){this.removeAttribute(t)}}function D(t){return function(){this.removeAttributeNS(t.space,t.local)}}function j(t,e){return function(){this.setAttribute(t,e)}}function L(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function F(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function U(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function z(t){return function(){this.style.removeProperty(t)}}function B(t,e,n){return function(){this.style.setProperty(t,e,n)}}function V(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function G(t){return function(){delete this[t]}}function H(t,e){return function(){this[t]=e}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function q(t){return t.trim().split(/^|\s+/)}function Y(t){return t.classList||new X(t)}function X(t){this._node=t,this._names=q(t.getAttribute("class")||"")}function Z(t,e){for(var n=Y(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function K(t,e){for(var n=Y(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Q(t){return function(){Z(this,t)}}function J(t){return function(){K(this,t)}}function $(t,e){return function(){(e.apply(this,arguments)?Z:K)(this,t)}}function tt(){this.textContent=""}function et(t){return function(){this.textContent=t}}function nt(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function rt(){this.innerHTML=""}function it(t){return function(){this.innerHTML=t}}function ot(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function at(){this.nextSibling&&this.parentNode.appendChild(this)}function st(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ut(){return null}function ct(){var t=this.parentNode;t&&t.removeChild(this)}function lt(t,e,n){var r=ql(t),i=r.CustomEvent;i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ft(t,e){return function(){return lt(this,t,e)}}function ht(t,e){return function(){return lt(this,t,e.apply(this,arguments))}}function pt(t,e){this._groups=t,this._parents=e}function dt(){return new pt([[document.documentElement]],af)}function vt(){t.event.stopImmediatePropagation()}function mt(t,e){var n=t.document.documentElement,r=sf(t).on("dragstart.drag",null);e&&(r.on("click.drag",ff,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function yt(t,e,n,r,i,o,a,s,u,c){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=s,this.dy=u,this._=c}function gt(){return!t.event.button}function _t(){return this.parentNode}function bt(e){return null==e?{x:t.event.x,y:t.event.y}:e}function wt(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xt(){}function Et(t){var e;return t=(t+"").trim().toLowerCase(),(e=_f.exec(t))?(e=parseInt(e[1],16),new At(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=bf.exec(t))?Tt(parseInt(e[1],16)):(e=wf.exec(t))?new At(e[1],e[2],e[3],1):(e=xf.exec(t))?new At(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ef.exec(t))?St(e[1],e[2],e[3],e[4]):(e=Tf.exec(t))?St(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Sf.exec(t))?Rt(e[1],e[2]/100,e[3]/100,1):(e=Mf.exec(t))?Rt(e[1],e[2]/100,e[3]/100,e[4]):Of.hasOwnProperty(t)?Tt(Of[t]):"transparent"===t?new At(NaN,NaN,NaN,0):null}function Tt(t){return new At(t>>16&255,t>>8&255,255&t,1)}function St(t,e,n,r){return r<=0&&(t=e=n=NaN),new At(t,e,n,r)}function Mt(t){return t instanceof xt||(t=Et(t)),t?(t=t.rgb(),new At(t.r,t.g,t.b,t.opacity)):new At}function Ot(t,e,n,r){return 1===arguments.length?Mt(t):new At(t,e,n,null==r?1:r)}function At(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Rt(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pt(t,e,n,r)}function It(t){if(t instanceof Pt)return new Pt(t.h,t.s,t.l,t.opacity);if(t instanceof xt||(t=Et(t)),!t)return new Pt;if(t instanceof Pt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Pt(a,s,u,t.opacity)}function kt(t,e,n,r){return 1===arguments.length?It(t):new Pt(t,e,n,null==r?1:r)}function Pt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Nt(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Ct(t){if(t instanceof jt)return new jt(t.l,t.a,t.b,t.opacity);if(t instanceof Gt){var e=t.h*Af;return new jt(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof At||(t=Mt(t));var n=zt(t.r),r=zt(t.g),i=zt(t.b),o=Lt((.4124564*n+.3575761*r+.1804375*i)/.95047),a=Lt((.2126729*n+.7151522*r+.072175*i)/1);return new jt(116*a-16,500*(o-a),200*(a-Lt((.0193339*n+.119192*r+.9503041*i)/1.08883)),t.opacity)}function Dt(t,e,n,r){return 1===arguments.length?Ct(t):new jt(t,e,n,null==r?1:r)}function jt(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function Lt(t){return t>If*If*If?Math.pow(t,1/3):t/(3*If*If)+4/29}function Ft(t){return t>If?t*t*t:3*If*If*(t-4/29)}function Ut(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bt(t){if(t instanceof Gt)return new Gt(t.h,t.c,t.l,t.opacity);t instanceof jt||(t=Ct(t));var e=Math.atan2(t.b,t.a)*Rf;return new Gt(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Vt(t,e,n,r){return 1===arguments.length?Bt(t):new Gt(t,e,n,null==r?1:r)}function Gt(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function Ht(t){if(t instanceof qt)return new qt(t.h,t.s,t.l,t.opacity);t instanceof At||(t=Mt(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=((Pf*Nf-Cf*kf)*r+Df*Cf*e-Df*Pf*n)/-5.9615122912,o=r-i,a=(Df*(n-i)-Nf*o)/Cf,s=Math.sqrt(a*a+o*o)/(Df*i*(1-i)),u=s?Math.atan2(a,o)*Rf-120:NaN;return new qt(u<0?u+360:u,s,i,t.opacity)}function Wt(t,e,n,r){return 1===arguments.length?Ht(t):new qt(t,e,n,null==r?1:r)}function qt(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Yt(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Xt(t,e){return function(n){return t+n*e}}function Zt(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Kt(t,e){var n=e-t;return n?Xt(t,n>180||n<-180?n-360*Math.round(n/360):n):Hf(isNaN(t)?e:t)}function Qt(t){return 1===(t=+t)?Jt:function(e,n){return n-e?Zt(e,n,t):Hf(isNaN(e)?n:e)}}function Jt(t,e){var n=e-t;return n?Xt(t,n):Hf(isNaN(t)?e:t)}function $t(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Ot(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}function te(t){return function(){return t}}function ee(t){return function(e){return t(e)+""}}function ne(t){return"none"===t?ih:(jf||(jf=document.createElement("DIV"),Lf=document.documentElement,Ff=document.defaultView),jf.style.transform=t,t=Ff.getComputedStyle(Lf.appendChild(jf),null).getPropertyValue("transform"),Lf.removeChild(jf),t=t.slice(7,-1).split(","),oh(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function re(t){return null==t?ih:(Uf||(Uf=document.createElementNS("http://www.w3.org/2000/svg","g")),Uf.setAttribute("transform",t),(t=Uf.transform.baseVal.consolidate())?(t=t.matrix,oh(t.a,t.b,t.c,t.d,t.e,t.f)):ih)}function ie(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,s){if(t!==i||r!==o){var u=a.push("translate(",null,e,null,n);s.push({i:u-4,x:Kf(t,i)},{i:u-2,x:Kf(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Kf(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function s(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Kf(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function u(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:Kf(t,n)},{i:s-2,x:Kf(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),s(e.skewX,n.skewX,r,i),u(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function oe(t){return((t=Math.exp(t))+1/t)/2}function ae(t){return((t=Math.exp(t))-1/t)/2}function se(t){return((t=Math.exp(2*t))-1)/(t+1)}function ue(t){return function(e,n){var r=t((e=kt(e)).h,(n=kt(n)).h),i=Jt(e.s,n.s),o=Jt(e.l,n.l),a=Jt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function ce(t,e){var n=Jt((t=Dt(t)).l,(e=Dt(e)).l),r=Jt(t.a,e.a),i=Jt(t.b,e.b),o=Jt(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function le(t){return function(e,n){var r=t((e=Vt(e)).h,(n=Vt(n)).h),i=Jt(e.c,n.c),o=Jt(e.l,n.l),a=Jt(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}function fe(t){return function e(n){function r(e,r){var i=t((e=Wt(e)).h,(r=Wt(r)).h),o=Jt(e.s,r.s),a=Jt(e.l,r.l),s=Jt(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=s(t),e+""}}return n=+n,r.gamma=e,r}(1)}function he(){return wh||(Th(pe),wh=Eh.now()+xh)}function pe(){wh=0}function de(){this._call=this._time=this._next=null}function ve(t,e,n){var r=new de;return r.restart(t,e,n),r}function me(){he(),++yh;for(var t,e=zf;e;)(t=wh-e._time)>=0&&e._call.call(null,t),e=e._next;--yh}function ye(){wh=(bh=Eh.now())+xh,yh=gh=0;try{me()}finally{yh=0,_e(),wh=0}}function ge(){var t=Eh.now(),e=t-bh;e>1e3&&(xh-=e,bh=t)}function _e(){for(var t,e,n=zf,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:zf=e);Bf=t,be(r)}function be(t){if(!yh){gh&&(gh=clearTimeout(gh));var e=t-wh;e>24?(t<1/0&&(gh=setTimeout(ye,e)),_h&&(_h=clearInterval(_h))):(_h||(bh=wh,_h=setInterval(ge,1e3)),yh=1,Th(ye))}}function we(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>0)throw new Error("too late");return n}function xe(t,e){var n=t.__transition;if(!n||!(n=n[e])||n.state>2)throw new Error("too late");return n}function Ee(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("too late");return n}function Te(t,e,n){function r(t){n.state=1,n.timer.restart(i,n.delay,n.time),n.delay<=t&&i(t-n.delay)}function i(r){var c,l,f,h;if(1!==n.state)return a();for(c in u)if(h=u[c],h.name===n.name){if(3===h.state)return Sh(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete u[c]):+c<e&&(h.state=6,h.timer.stop(),delete u[c])}if(Sh(function(){3===n.state&&(n.state=4,n.timer.restart(o,n.delay,n.time),o(r))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,s=new Array(f=n.tween.length),c=0,l=-1;c<f;++c)(h=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(s[++l]=h);s.length=l+1}}function o(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),i=-1,o=s.length;++i<o;)s[i].call(null,r);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){n.state=6,n.timer.stop(),delete u[e];for(var r in u)return;delete t.__transition}var s,u=t.__transition;u[e]=n,n.timer=ve(r,0,n.time)}function Se(t,e){var n,r;return function(){var i=xe(this,t),o=i.tween;if(o!==n){r=n=o;for(var a=0,s=r.length;a<s;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function Me(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=xe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},u=0,c=i.length;u<c;++u)if(i[u].name===e){i[u]=s;break}u===c&&i.push(s)}o.tween=i}}function Oe(t,e,n){var r=t._id;return t.each(function(){var t=xe(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return Ee(t,r).value[e]}}function Ae(t){return function(){this.removeAttribute(t)}}function Re(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ie(t,e,n){var r,i;return function(){var o=this.getAttribute(t);return o===n?null:o===r?i:i=e(r=o,n)}}function ke(t,e,n){var r,i;return function(){var o=this.getAttributeNS(t.space,t.local);return o===n?null:o===r?i:i=e(r=o,n)}}function Pe(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttribute(t):(a=this.getAttribute(t),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function Ne(t,e,n){var r,i,o;return function(){var a,s=n(this);return null==s?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),a===s?null:a===r&&s===i?o:o=e(r=a,i=s))}}function Ce(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttributeNS(t.space,t.local,r(e))}}return n._value=e,n}function De(t,e){function n(){var n=this,r=e.apply(n,arguments);return r&&function(e){n.setAttribute(t,r(e))}}return n._value=e,n}function je(t,e){return function(){we(this,t).delay=+e.apply(this,arguments)}}function Le(t,e){return e=+e,function(){we(this,t).delay=e}}function Fe(t,e){return function(){xe(this,t).duration=+e.apply(this,arguments)}}function Ue(t,e){return e=+e,function(){xe(this,t).duration=e}}function ze(t,e){if("function"!=typeof e)throw new Error;return function(){xe(this,t).ease=e}}function Be(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}function Ve(t,e,n){var r,i,o=Be(e)?we:xe;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}function Ge(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function He(t,e){var n,r,i;return function(){var o=ql(this).getComputedStyle(this,null),a=o.getPropertyValue(t),s=(this.style.removeProperty(t),o.getPropertyValue(t));return a===s?null:a===n&&s===r?i:i=e(n=a,r=s)}}function We(t){return function(){this.style.removeProperty(t)}}function qe(t,e,n){var r,i;return function(){var o=ql(this).getComputedStyle(this,null).getPropertyValue(t);return o===n?null:o===r?i:i=e(r=o,n)}}function Ye(t,e,n){var r,i,o;return function(){var a=ql(this).getComputedStyle(this,null),s=a.getPropertyValue(t),u=n(this);return null==u&&(this.style.removeProperty(t),u=a.getPropertyValue(t)),s===u?null:s===r&&u===i?o:o=e(r=s,i=u)}}function Xe(t,e,n){function r(){var r=this,i=e.apply(r,arguments);return i&&function(e){r.style.setProperty(t,i(e),n)}}return r._value=e,r}function Ze(t){return function(){this.textContent=t}}function Ke(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function Qe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Je(t){return dt().transition(t)}function $e(){return++Qh}function tn(t){return+t}function en(t){return t*t}function nn(t){return t*(2-t)}function rn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function on(t){return t*t*t}function an(t){return--t*t*t+1}function sn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}function un(t){return 1-Math.cos(t*rp)}function cn(t){return Math.sin(t*rp)}function ln(t){return(1-Math.cos(np*t))/2}function fn(t){return Math.pow(2,10*t-10)}function hn(t){return 1-Math.pow(2,-10*t)}function pn(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function dn(t){return 1-Math.sqrt(1-t*t)}function vn(t){return Math.sqrt(1- --t*t)}function mn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}function yn(t){return 1-gn(1-t)}function gn(t){return(t=+t)<4/11?ip*t*t:t<8/11?ip*(t-=6/11)*t+.75:t<10/11?ip*(t-=9/11)*t+.9375:ip*(t-=21/22)*t+63/64}function _n(t){return((t*=2)<=1?1-gn(1-t):gn(t-1)+1)/2}function bn(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return hp.time=he(),hp;return n}function wn(){t.event.stopImmediatePropagation()}function xn(t){return{type:t}}function En(){return!t.event.button}function Tn(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Sn(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Mn(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function On(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function An(){return In(Ep)}function Rn(){return In(Tp)}function In(e){function n(t){var n=t.property("__brush",s).selectAll(".overlay").data([xn("overlay")]);n.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Mp.overlay).merge(n).each(function(){var t=Sn(this).extent;sf(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([xn("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Mp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var i=t.selectAll(".handle").data(e.handles,function(t){return t.type});i.exit().remove(),i.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Mp[t.type]}),t.each(r).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",a)}function r(){var t=sf(this),e=Sn(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-h/2:e[0][0]-h/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-h/2:e[0][1]-h/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+h:h}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+h:h})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function i(t,e){return t.__brush.emitter||new o(t,e)}function o(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function a(){function n(){var t=Sl(T);!j||x||E||(Math.abs(t[0]-F[0])>Math.abs(t[1]-F[1])?E=!0:x=!0),F=t,w=!0,gp(),o()}function o(){var t;switch(_=F[0]-L[0],b=F[1]-L[1],M){case bp:case _p:O&&(_=Math.max(P-f,Math.min(C-v,_)),h=f+_,m=v+_),A&&(b=Math.max(N-p,Math.min(D-y,b)),d=p+b,g=y+b);break;case wp:O<0?(_=Math.max(P-f,Math.min(C-f,_)),h=f+_,m=v):O>0&&(_=Math.max(P-v,Math.min(C-v,_)),h=f,m=v+_),A<0?(b=Math.max(N-p,Math.min(D-p,b)),d=p+b,g=y):A>0&&(b=Math.max(N-y,Math.min(D-y,b)),d=p,g=y+b);break;case xp:O&&(h=Math.max(P,Math.min(C,f-_*O)),m=Math.max(P,Math.min(C,v+_*O))),A&&(d=Math.max(N,Math.min(D,p-b*A)),g=Math.max(N,Math.min(D,y+b*A)))}m<h&&(O*=-1,t=f,f=v,v=t,t=h,h=m,m=t,S in Op&&B.attr("cursor",Mp[S=Op[S]])),g<d&&(A*=-1,t=p,p=y,y=t,t=d,d=g,g=t,S in Ap&&B.attr("cursor",Mp[S=Ap[S]])),R.selection&&(k=R.selection),x&&(h=k[0][0],m=k[1][0]),E&&(d=k[0][1],g=k[1][1]),k[0][0]===h&&k[0][1]===d&&k[1][0]===m&&k[1][1]===g||(R.selection=[[h,d],[m,g]],r.call(T),U.brush())}function a(){if(wn(),t.event.touches){if(t.event.touches.length)return;u&&clearTimeout(u),u=setTimeout(function(){u=null},500),z.on("touchmove.brush touchend.brush touchcancel.brush",null)}else mt(t.event.view,w),V.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);z.attr("pointer-events","all"),B.attr("cursor",Mp.overlay),R.selection&&(k=R.selection),Mn(k)&&(R.selection=null,r.call(T)),U.end()}function s(){switch(t.event.keyCode){case 16:j=O&&A;break;case 18:M===wp&&(O&&(v=m-_*O,f=h+_*O),A&&(y=g-b*A,p=d+b*A),M=xp,o());break;case 32:M!==wp&&M!==xp||(O<0?v=m-_:O>0&&(f=h-_),A<0?y=g-b:A>0&&(p=d-b),M=bp,B.attr("cursor",Mp.selection),o());break;default:return}gp()}function c(){switch(t.event.keyCode){case 16:j&&(x=E=j=!1,o());break;case 18:M===xp&&(O<0?v=m:O>0&&(f=h),A<0?y=g:A>0&&(p=d),M=wp,o());break;case 32:M===bp&&(t.event.altKey?(O&&(v=m-_*O,f=h+_*O),A&&(y=g-b*A,p=d+b*A),M=xp):(O<0?v=m:O>0&&(f=h),A<0?y=g:A>0&&(p=d),M=wp),B.attr("cursor",Mp[S]),o());break;default:return}gp()}if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return gp()}else if(u)return;if(l.apply(this,arguments)){var f,h,p,d,v,m,y,g,_,b,w,x,E,T=this,S=t.event.target.__data__.type,M="selection"===(t.event.metaKey?S="overlay":S)?_p:t.event.altKey?xp:wp,O=e===Tp?null:Rp[S],A=e===Ep?null:Ip[S],R=Sn(T),I=R.extent,k=R.selection,P=I[0][0],N=I[0][1],C=I[1][0],D=I[1][1],j=O&&A&&t.event.shiftKey,L=Sl(T),F=L,U=i(T,arguments).beforestart();"overlay"===S?R.selection=k=[[f=e===Tp?P:L[0],p=e===Ep?N:L[1]],[v=e===Tp?C:f,y=e===Ep?D:p]]:(f=k[0][0],p=k[0][1],v=k[1][0],y=k[1][1]),h=f,d=p,m=v,g=y;var z=sf(T).attr("pointer-events","none"),B=z.selectAll(".overlay").attr("cursor",Mp[S]);if(t.event.touches)z.on("touchmove.brush",n,!0).on("touchend.brush touchcancel.brush",a,!0);else{var V=sf(t.event.view).on("keydown.brush",s,!0).on("keyup.brush",c,!0).on("mousemove.brush",n,!0).on("mouseup.brush",a,!0);hf(t.event.view)}wn(),Ih(T),r.call(T),U.start()}}function s(){var t=this.__brush||{selection:null};return t.extent=c.apply(this,arguments),t.dim=e,t}var u,c=Tn,l=En,f=p(n,"start","brush","end"),h=6;return n.move=function(t,n){t.selection?t.on("start.brush",function(){i(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){i(this,arguments).end()}).tween("brush",function(){function t(t){a.selection=1===t&&Mn(c)?null:l(t),r.call(o),s.brush()}var o=this,a=o.__brush,s=i(o,arguments),u=a.selection,c=e.input("function"==typeof n?n.apply(this,arguments):n,a.extent),l=eh(u,c);return u&&c?t:t(1)}):t.each(function(){var t=this,o=arguments,a=t.__brush,s=e.input("function"==typeof n?n.apply(t,o):n,a.extent),u=i(t,o).beforestart();Ih(t),a.selection=null==s||Mn(s)?null:s,r.call(t),u.start().brush().end()})},o.prototype={beforestart:function(){return 1===++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0===--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){O(new yp(n,t,e.output(this.state.selection)),f.apply,f,[t,this.that,this.args])}},n.extent=function(t){return arguments.length?(c="function"==typeof t?t:mp([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),n):c},n.filter=function(t){return arguments.length?(l="function"==typeof t?t:mp(!!t),n):l},n.handleSize=function(t){return arguments.length?(h=+t,n):h},n.on=function(){var t=f.on.apply(f,arguments);return t===f?n:t},n}function kn(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function Pn(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Nn(){return new Pn}function Cn(t){return t.source}function Dn(t){return t.target}function jn(t){return t.radius}function Ln(t){return t.startAngle}function Fn(t){return t.endAngle}function Un(){}function zn(t,e){var n=new Un;if(t instanceof Un)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==e)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e(r=t[i],i,t),r)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Bn(){return{}}function Vn(t,e,n){t[e]=n}function Gn(){return zn()}function Hn(t,e,n){t.set(e,n)}function Wn(){}function qn(t,e){var n=new Wn;if(t instanceof Wn)t.each(function(t){n.add(t)});else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function Yn(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Xn(t,e){var n=Yn(t);return function(r,i){return e(n(r),i,t)}}function Zn(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Kn(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,a,s,u,c,l,f,h,p=t._root,d={data:r},v=t._x0,m=t._y0,y=t._x1,g=t._y1;if(!p)return t._root=d,t;for(;p.length;)if((c=e>=(o=(v+y)/2))?v=o:y=o,(l=n>=(a=(m+g)/2))?m=a:g=a,i=p,!(p=p[f=l<<1|c]))return i[f]=d,t;if(s=+t._x.call(null,p.data),u=+t._y.call(null,p.data),e===s&&n===u)return d.next=p,i?i[f]=d:t._root=d,t;do i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(v+y)/2))?v=o:y=o,(l=n>=(a=(m+g)/2))?m=a:g=a;while((f=l<<1|c)===(h=(u>=a)<<1|s>=o));return i[h]=p,i[f]=d,t}function Qn(t){var e,n,r,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,l=-(1/0),f=-(1/0);for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(a[n]=r,s[n]=i,r<u&&(u=r),r>l&&(l=r),i<c&&(c=i),i>f&&(f=i));for(l<u&&(u=this._x0,l=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(u,c).cover(l,f),n=0;n<o;++n)Kn(this,a[n],s[n],t[n]);return this}function Jn(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function $n(t){return t[0]}function tr(t){return t[1]}
function er(t,e,n){var r=new nr(null==e?$n:e,null==n?tr:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function nr(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function rr(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function ir(t){return t.x+t.vx}function or(t){return t.y+t.vy}function ar(t){return t.index}function sr(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function ur(t){return t.x}function cr(t){return t.y}function lr(t){if(!(e=Ud.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",o=e[4]||"",a=!!e[5],s=e[6]&&+e[6],u=!!e[7],c=e[8]&&+e[8].slice(1),l=e[9]||"";"n"===l?(u=!0,l="g"):Fd[l]||(l=""),(a||"0"===n&&"="===r)&&(a=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=o,this.zero=a,this.width=s,this.comma=u,this.precision=c,this.type=l}function fr(t){return t}function hr(e){return Bd=Gd(e),t.format=Bd.format,t.formatPrefix=Bd.formatPrefix,Bd}function pr(){this.reset()}function dr(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}function vr(t){return t>1?0:t<-1?Mv:Math.acos(t)}function mr(t){return t>1?Ov:t<-1?-Ov:Math.asin(t)}function yr(t){return(t=zv(t/2))*t}function gr(){}function _r(t,e){t&&Wv.hasOwnProperty(t.type)&&Wv[t.type](t,e)}function br(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function wr(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)br(t[n],e,1);e.polygonEnd()}function xr(){Zv.point=Tr}function Er(){Sr(Xd,Zd)}function Tr(t,e){Zv.point=Sr,Xd=t,Zd=e,t*=kv,e*=kv,Kd=t,Qd=Dv(e=e/2+Av),Jd=zv(e)}function Sr(t,e){t*=kv,e*=kv,e=e/2+Av;var n=t-Kd,r=n>=0?1:-1,i=r*n,o=Dv(e),a=zv(e),s=Jd*a,u=Qd*o+s*Dv(i),c=s*r*zv(i);Yv.add(Cv(c,u)),Kd=t,Qd=o,Jd=a}function Mr(t){return[Cv(t[1],t[0]),mr(t[2])]}function Or(t){var e=t[0],n=t[1],r=Dv(n);return[r*Dv(e),r*zv(e),zv(n)]}function Ar(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Ir(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function kr(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Pr(t){var e=Vv(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Nr(t,e){sv.push(uv=[$d=t,ev=t]),e<tv&&(tv=e),e>nv&&(nv=e)}function Cr(t,e){var n=Or([t*kv,e*kv]);if(av){var r=Rr(av,n),i=[r[1],-r[0],0],o=Rr(i,r);Pr(o),o=Mr(o);var a,s=t-rv,u=s>0?1:-1,c=o[0]*Iv*u,l=Pv(s)>180;l^(u*rv<c&&c<u*t)?(a=o[1]*Iv,a>nv&&(nv=a)):(c=(c+360)%360-180,l^(u*rv<c&&c<u*t)?(a=-o[1]*Iv,a<tv&&(tv=a)):(e<tv&&(tv=e),e>nv&&(nv=e))),l?t<rv?zr($d,t)>zr($d,ev)&&(ev=t):zr(t,ev)>zr($d,ev)&&($d=t):ev>=$d?(t<$d&&($d=t),t>ev&&(ev=t)):t>rv?zr($d,t)>zr($d,ev)&&(ev=t):zr(t,ev)>zr($d,ev)&&($d=t)}else sv.push(uv=[$d=t,ev=t]);e<tv&&(tv=e),e>nv&&(nv=e),av=n,rv=t}function Dr(){Jv.point=Cr}function jr(){uv[0]=$d,uv[1]=ev,Jv.point=Nr,av=null}function Lr(t,e){if(av){var n=t-rv;Qv.add(Pv(n)>180?n+(n>0?360:-360):n)}else iv=t,ov=e;Zv.point(t,e),Cr(t,e)}function Fr(){Zv.lineStart()}function Ur(){Lr(iv,ov),Zv.lineEnd(),Pv(Qv)>1e-6&&($d=-(ev=180)),uv[0]=$d,uv[1]=ev,av=null}function zr(t,e){return(e-=t)<0?e+360:e}function Br(t,e){return t[0]-e[0]}function Vr(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function Gr(t,e){t*=kv,e*=kv;var n=Dv(e);Hr(n*Dv(t),n*zv(t),zv(e))}function Hr(t,e,n){++cv,fv+=(t-fv)/cv,hv+=(e-hv)/cv,pv+=(n-pv)/cv}function Wr(){tm.point=qr}function qr(t,e){t*=kv,e*=kv;var n=Dv(e);xv=n*Dv(t),Ev=n*zv(t),Tv=zv(e),tm.point=Yr,Hr(xv,Ev,Tv)}function Yr(t,e){t*=kv,e*=kv;var n=Dv(e),r=n*Dv(t),i=n*zv(t),o=zv(e),a=Cv(Vv((a=Ev*o-Tv*i)*a+(a=Tv*r-xv*o)*a+(a=xv*i-Ev*r)*a),xv*r+Ev*i+Tv*o);lv+=a,dv+=a*(xv+(xv=r)),vv+=a*(Ev+(Ev=i)),mv+=a*(Tv+(Tv=o)),Hr(xv,Ev,Tv)}function Xr(){tm.point=Gr}function Zr(){tm.point=Qr}function Kr(){Jr(bv,wv),tm.point=Gr}function Qr(t,e){bv=t,wv=e,t*=kv,e*=kv,tm.point=Jr;var n=Dv(e);xv=n*Dv(t),Ev=n*zv(t),Tv=zv(e),Hr(xv,Ev,Tv)}function Jr(t,e){t*=kv,e*=kv;var n=Dv(e),r=n*Dv(t),i=n*zv(t),o=zv(e),a=Ev*o-Tv*i,s=Tv*r-xv*o,u=xv*i-Ev*r,c=Vv(a*a+s*s+u*u),l=xv*r+Ev*i+Tv*o,f=c&&-mr(c)/c,h=Cv(c,l);yv+=f*a,gv+=f*s,_v+=f*u,lv+=h,dv+=h*(xv+(xv=r)),vv+=h*(Ev+(Ev=i)),mv+=h*(Tv+(Tv=o)),Hr(xv,Ev,Tv)}function $r(t,e){return[t>Mv?t-Rv:t<-Mv?t+Rv:t,e]}function ti(t,e,n){return(t%=Rv)?e||n?rm(ni(t),ri(e,n)):ni(t):e||n?ri(e,n):$r}function ei(t){return function(e,n){return e+=t,[e>Mv?e-Rv:e<-Mv?e+Rv:e,n]}}function ni(t){var e=ei(t);return e.invert=ei(-t),e}function ri(t,e){function n(t,e){var n=Dv(e),s=Dv(t)*n,u=zv(t)*n,c=zv(e),l=c*r+s*i;return[Cv(u*o-l*a,s*r-c*i),mr(l*o+u*a)]}var r=Dv(t),i=zv(t),o=Dv(e),a=zv(e);return n.invert=function(t,e){var n=Dv(e),s=Dv(t)*n,u=zv(t)*n,c=zv(e),l=c*o-u*a;return[Cv(u*o+c*a,s*r+l*i),mr(l*r-s*i)]},n}function ii(t,e,n,r,i,o){if(n){var a=Dv(e),s=zv(e),u=r*n;null==i?(i=e+r*Rv,o=e-u/2):(i=oi(a,i),o=oi(a,o),(r>0?i<o:i>o)&&(i+=r*Rv));for(var c,l=i;r>0?l>o:l<o;l-=u)c=Mr([a,-s*Dv(l),-s*zv(l)]),t.point(c[0],c[1])}}function oi(t,e){e=Or(e),e[0]-=t,Pr(e);var n=vr(-e[1]);return((-e[2]<0?-n:n)+Rv-1e-6)%Rv}function ai(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function si(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ui(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,s,c){var l=0,f=0;if(null==i||(l=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0){do c.point(0===l||3===l?t:n,l>1?r:e);while((l=(l+s+4)%4)!==f)}else c.point(o[0],o[1])}function a(r,i){return Pv(r[0]-t)<1e-6?i>0?0:3:Pv(r[0]-n)<1e-6?i>0?2:1:Pv(r[1]-e)<1e-6?i>0?1:0:i>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){function u(t,e){i(t,e)&&M.point(t,e)}function c(){for(var e=0,n=0,i=m.length;n<i;++n)for(var o,a,s=m[n],u=1,c=s.length,l=s[0],f=l[0],h=l[1];u<c;++u)o=f,a=h,l=s[u],f=l[0],h=l[1],a<=r?h>r&&(f-o)*(r-a)>(h-a)*(t-o)&&++e:h<=r&&(f-o)*(r-a)<(h-a)*(t-o)&&--e;return e}function l(){M=O,v=[],m=[],S=!0}function f(){var t=c(),e=S&&t,n=(v=tl(v)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&bm(v,s,t,o,a),a.polygonEnd()),M=a,v=m=y=null}function h(){A.point=d,m&&m.push(y=[]),T=!0,E=!1,w=x=NaN}function p(){v&&(d(g,_),b&&E&&O.rejoin(),v.push(O.result())),A.point=u,E&&M.lineEnd()}function d(o,a){var s=i(o,a);if(m&&y.push([o,a]),T)g=o,_=a,b=s,T=!1,s&&(M.lineStart(),M.point(o,a));else if(s&&E)M.point(o,a);else{var u=[w=Math.max(-1e9,Math.min(1e9,w)),x=Math.max(-1e9,Math.min(1e9,x))],c=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];gm(u,c,t,e,n,r)?(E||(M.lineStart(),M.point(u[0],u[1])),M.point(c[0],c[1]),s||M.lineEnd(),S=!1):s&&(M.lineStart(),M.point(o,a),S=!1)}w=o,x=a,E=s}var v,m,y,g,_,b,w,x,E,T,S,M=a,O=ym(),A={point:u,lineStart:h,lineEnd:p,polygonStart:l,polygonEnd:f};return A}}function ci(){Em.point=fi,Em.lineEnd=li}function li(){Em.point=Em.lineEnd=gr}function fi(t,e){t*=kv,e*=kv,im=t,om=zv(e),am=Dv(e),Em.point=hi}function hi(t,e){t*=kv,e*=kv;var n=zv(e),r=Dv(e),i=Pv(t-im),o=Dv(i),a=zv(i),s=r*a,u=am*n-om*r*o,c=om*n+am*r*o;xm.add(Cv(Vv(s*s+u*u),c)),im=t,om=n,am=r}function pi(t,e,n){var r=Bc(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function di(t,e,n){var r=Bc(t,e-1e-6,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function vi(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return Bc(jv(o/m)*m,i,m).map(h).concat(Bc(jv(c/y)*y,u,y).map(p)).concat(Bc(jv(r/d)*d,n,d).filter(function(t){return Pv(t%m)>1e-6}).map(l)).concat(Bc(jv(s/v)*v,a,v).filter(function(t){return Pv(t%y)>1e-6}).map(f))}var n,r,i,o,a,s,u,c,l,f,h,p,d=10,v=d,m=90,y=360,g=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(p(u).slice(1),h(i).reverse().slice(1),p(c).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],c=+e[0][1],u=+e[1][1],o>i&&(e=o,o=i,i=e),c>u&&(e=c,c=u,u=e),t.precision(g)):[[o,c],[i,u]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(g)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(d=+e[0],v=+e[1],t):[d,v]},t.precision=function(e){return arguments.length?(g=+e,l=pi(s,a,90),f=di(r,n,g),h=pi(c,u,90),p=di(o,i,g),t):g},t.extentMajor([[-180,-90+1e-6],[180,90-1e-6]]).extentMinor([[-180,-80-1e-6],[180,80+1e-6]])}function mi(){return vi()()}function yi(){Pm.point=gi}function gi(t,e){Pm.point=_i,sm=cm=t,um=lm=e}function _i(t,e){km.add(lm*t-cm*e),cm=t,lm=e}function bi(){_i(sm,um)}function wi(t,e){t<Nm&&(Nm=t),t>Dm&&(Dm=t),e<Cm&&(Cm=e),e>jm&&(jm=e)}function xi(t,e){Fm+=t,Um+=e,++zm}function Ei(){Ym.point=Ti}function Ti(t,e){Ym.point=Si,xi(pm=t,dm=e)}function Si(t,e){var n=t-pm,r=e-dm,i=Vv(n*n+r*r);Bm+=i*(pm+t)/2,Vm+=i*(dm+e)/2,Gm+=i,xi(pm=t,dm=e)}function Mi(){Ym.point=xi}function Oi(){Ym.point=Ri}function Ai(){Ii(fm,hm)}function Ri(t,e){Ym.point=Ii,xi(fm=pm=t,hm=dm=e)}function Ii(t,e){var n=t-pm,r=e-dm,i=Vv(n*n+r*r);Bm+=i*(pm+t)/2,Vm+=i*(dm+e)/2,Gm+=i,i=dm*t-pm*e,Hm+=i*(pm+t),Wm+=i*(dm+e),qm+=3*i,xi(pm=t,dm=e)}function ki(t){this._context=t}function Pi(t,e){ty.point=Ni,Zm=Qm=t,Km=Jm=e}function Ni(t,e){Qm-=t,Jm-=e,$m.add(Vv(Qm*Qm+Jm*Jm)),Qm=t,Jm=e}function Ci(){this._string=[]}function Di(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function ji(t){return t.length>1}function Li(t,e){return((t=t.x)[0]<0?t[1]-Ov-1e-6:Ov-t[1])-((e=e.x)[0]<0?e[1]-Ov-1e-6:Ov-e[1])}function Fi(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Mv:-Mv,u=Pv(o-n);Pv(u-Mv)<1e-6?(t.point(n,r=(r+a)/2>0?Ov:-Ov),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&u>=Mv&&(Pv(n-i)<1e-6&&(n-=1e-6*i),Pv(o-s)<1e-6&&(o-=1e-6*s),r=Ui(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Ui(t,e,n,r){var i,o,a=zv(t-n);return Pv(a)>1e-6?Nv((zv(e)*(o=Dv(r))*zv(n)-zv(r)*(i=Dv(e))*zv(t))/(i*o*a)):(e+r)/2}function zi(t,e,n,r){var i;if(null==t)i=n*Ov,r.point(-Mv,i),r.point(0,i),r.point(Mv,i),r.point(Mv,0),r.point(Mv,-i),r.point(0,-i),r.point(-Mv,-i),r.point(-Mv,0),r.point(-Mv,i);else if(Pv(t[0]-e[0])>1e-6){var o=t[0]<e[0]?Mv:-Mv;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Bi(t){return function(e){var n=new Vi;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Vi(){}function Gi(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),qv(n,t.stream(Lm));var a=Lm.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),u=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,c=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([u,c])}function Hi(t,e,n){return Gi(t,[[0,0],e],n)}function Wi(t){return Bi({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function qi(t,e){function n(r,i,o,a,s,u,c,l,f,h,p,d,v,m){var y=c-r,g=l-i,_=y*y+g*g;if(_>4*e&&v--){var b=a+h,w=s+p,x=u+d,E=Vv(b*b+w*w+x*x),T=mr(x/=E),S=Pv(Pv(x)-1)<1e-6||Pv(o-f)<1e-6?(o+f)/2:Cv(w,b),M=t(S,T),O=M[0],A=M[1],R=O-r,I=A-i,k=g*R-y*I;(k*k/_>e||Pv((y*R+g*I)/_-.5)>.3||a*h+s*p+u*d<uy)&&(n(r,i,o,a,s,u,O,A,S,b/=E,w/=E,x,v,m),m.point(O,A),n(O,A,S,b,w,x,c,l,f,h,p,d,v,m))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){y=NaN,x.point=o,e.lineStart()}function o(r,i){var o=Or([r,i]),a=t(r,i);n(y,g,m,_,b,w,y=a[0],g=a[1],m=r,_=o[0],b=o[1],w=o[2],16,e),e.point(y,g)}function a(){x.point=r,e.lineEnd()}function s(){i(),x.point=u,x.lineEnd=c}function u(t,e){o(l=t,e),f=y,h=g,p=_,d=b,v=w,x.point=o}function c(){n(y,g,m,_,b,w,f,h,l,p,d,v,16,e),x.lineEnd=a,a()}var l,f,h,p,d,v,m,y,g,_,b,w,x={point:r,lineStart:i,lineEnd:a,polygonStart:function(){e.polygonStart(),x.lineStart=s},polygonEnd:function(){e.polygonEnd(),x.lineStart=i}};return x}}function Yi(t){return Xi(function(){return t})()}function Xi(t){function e(t){return t=l(t[0]*kv,t[1]*kv),[t[0]*m+s,u-t[1]*m]}function n(t){return t=l.invert((t[0]-s)/m,(u-t[1])/m),t&&[t[0]*Iv,t[1]*Iv]}function r(t,e){return t=a(t,e),[t[0]*m+s,u-t[1]*m]}function i(){l=rm(c=ti(w,x,E),a);var t=a(_,b);return s=y-t[0]*m,u=g+t[1]*m,o()}function o(){return d=v=null,e}var a,s,u,c,l,f,h,p,d,v,m=150,y=480,g=250,_=0,b=0,w=0,x=0,E=0,T=null,S=oy,M=null,O=Rm,A=.5,R=cy(r,A);return e.stream=function(t){return d&&v===t?d:d=ly(S(c,R(O(v=t))))},e.clipAngle=function(t){return arguments.length?(S=+t?ay(T=t*kv,6*kv):(T=null,oy),o()):T*Iv},e.clipExtent=function(t){return arguments.length?(O=null==t?(M=f=h=p=null,Rm):ui(M=+t[0][0],f=+t[0][1],h=+t[1][0],p=+t[1][1]),o()):null==M?null:[[M,f],[h,p]]},e.scale=function(t){return arguments.length?(m=+t,i()):m},e.translate=function(t){return arguments.length?(y=+t[0],g=+t[1],i()):[y,g]},e.center=function(t){return arguments.length?(_=t[0]%360*kv,b=t[1]%360*kv,i()):[_*Iv,b*Iv]},e.rotate=function(t){return arguments.length?(w=t[0]%360*kv,x=t[1]%360*kv,E=t.length>2?t[2]%360*kv:0,i()):[w*Iv,x*Iv,E*Iv]},e.precision=function(t){return arguments.length?(R=cy(r,A=t*t),o()):Vv(A)},e.fitExtent=function(t,n){return Gi(e,t,n)},e.fitSize=function(t,n){return Hi(e,t,n)},function(){return a=t.apply(this,arguments),e.invert=a.invert&&n,i()}}function Zi(t){var e=0,n=Mv/3,r=Xi(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*kv,n=t[1]*kv):[e*Iv,n*Iv]},i}function Ki(t){function e(t,e){return[t*n,zv(e)/n]}var n=Dv(t);return e.invert=function(t,e){return[t/n,mr(e*n)]},e}function Qi(t,e){function n(t,e){var n=Vv(o-2*i*zv(e))/i;return[n*zv(t*=i),a-n*Dv(t)]}var r=zv(t),i=(r+zv(e))/2;if(Pv(i)<1e-6)return Ki(t);var o=1+r*(2*i-r),a=Vv(o)/i;return n.invert=function(t,e){var n=a-e;return[Cv(t,Pv(n))/i*Bv(n),mr((o-(t*t+n*n)*i*i)/(2*i))]},n}function Ji(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function $i(t){return function(e,n){var r=Dv(e),i=Dv(n),o=t(r*i);return[o*i*zv(e),o*zv(n)]}}function to(t){return function(e,n){var r=Vv(e*e+n*n),i=t(r),o=zv(i);return[Cv(e*o,r*Dv(i)),mr(r&&n*o/r)]}}function eo(t,e){return[t,Fv(Gv((Ov+e)/2))]}function no(t){var e,n=Yi(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(t){return arguments.length?(r(t),e&&n.clipExtent(null),n):r()},n.translate=function(t){return arguments.length?(i(t),e&&n.clipExtent(null),n):i()},n.clipExtent=function(t){if(!arguments.length)return e?null:o();if(e=null==t){var a=Mv*r(),s=i();t=[[s[0]-a,s[1]-a],[s[0]+a,s[1]+a]]}return o(t),n},n.clipExtent(null)}function ro(t){return Gv((Ov+t)/2)}function io(t,e){function n(t,e){o>0?e<-Ov+1e-6&&(e=-Ov+1e-6):e>Ov-1e-6&&(e=Ov-1e-6);var n=o/Uv(ro(e),i);return[n*zv(i*t),o-n*Dv(i*t)]}var r=Dv(t),i=t===e?zv(t):Fv(r/Dv(e))/Fv(ro(e)/ro(t)),o=r*Uv(ro(t),i)/i;return i?(n.invert=function(t,e){var n=o-e,r=Bv(i)*Vv(t*t+n*n);return[Cv(t,Pv(n))/i*Bv(n),2*Nv(Uv(o/r,1/i))-Ov]},n):eo}function oo(t,e){return[t,e]}function ao(t,e){function n(t,e){var n=o-e,r=i*t;return[n*zv(r),o-n*Dv(r)]}var r=Dv(t),i=t===e?zv(t):(r-Dv(e))/(e-t),o=r/i+t;return Pv(i)<1e-6?oo:(n.invert=function(t,e){var n=o-e;return[Cv(t,Pv(n))/i*Bv(n),o-Bv(i)*Vv(t*t+n*n)]},n)}function so(t,e){var n=Dv(e),r=Dv(t)*n;return[n*zv(t)/r,zv(e)/r]}function uo(t,e,n,r){return 1===t&&1===e&&0===n&&0===r?Rm:Bi({point:function(i,o){this.stream.point(i*t+n,o*e+r)}})}function co(t,e){return[Dv(e)*zv(t),zv(e)]}function lo(t,e){var n=Dv(e),r=1+Dv(t)*n;return[n*zv(t)/r,zv(e)/r]}function fo(t,e){return[Fv(Gv((Ov+e)/2)),-t]}function ho(t,e){return t.parent===e.parent?1:2}function po(t){return t.reduce(vo,0)/t.length}function vo(t,e){return t+e.x}function mo(t){return 1+t.reduce(yo,0)}function yo(t,e){return Math.max(t,e.y)}function go(t){for(var e;e=t.children;)t=e[0];return t}function _o(t){for(var e;e=t.children;)t=e[e.length-1];return t}function bo(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function wo(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function xo(t,e){var n,r,i,o,a,s=new Oo(t),u=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=To);n=c.pop();)if(u&&(n.value=+n.data.value),(i=e(n.data))&&(a=i.length))for(n.children=new Array(a),o=a-1;o>=0;--o)c.push(r=n.children[o]=new Oo(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Mo)}function Eo(){return xo(this).eachBefore(So)}function To(t){return t.children}function So(t){t.data=t.data.data}function Mo(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Oo(t){this.data=t,this.depth=this.height=0,this.parent=null}function Ao(t){this._=t,this.next=null}function Ro(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function Io(t,e){var n,r,i,o=null,a=t.head;switch(e.length){case 1:n=ko(e[0]);break;case 2:n=Po(e[0],e[1]);break;case 3:n=No(e[0],e[1],e[2])}for(;a;)i=a._,r=a.next,n&&Ro(n,i)?o=a:(o?(t.tail=o,o.next=null):t.head=t.tail=null,e.push(i),n=Io(t,e),e.pop(),t.head?(a.next=t.head,t.head=a):(a.next=null,t.head=t.tail=a),o=t.tail,o.next=r),a=r;return t.tail=o,n}function ko(t){return{x:t.x,y:t.y,r:t.r}}function Po(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,s=e.r,u=o-n,c=a-r,l=s-i,f=Math.sqrt(u*u+c*c);return{x:(n+o+u/f*l)/2,y:(r+a+c/f*l)/2,r:(f+i+s)/2}}function No(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,s=e.y,u=e.r,c=n.x,l=n.y,f=n.r,h=2*(r-a),p=2*(i-s),d=2*(u-o),v=r*r+i*i-o*o-a*a-s*s+u*u,m=2*(r-c),y=2*(i-l),g=2*(f-o),_=r*r+i*i-o*o-c*c-l*l+f*f,b=m*p-h*y,w=(p*_-y*v)/b-r,x=(y*d-p*g)/b,E=(m*v-h*_)/b-i,T=(h*g-m*d)/b,S=x*x+T*T-1,M=2*(w*x+E*T+o),O=w*w+E*E-o*o,A=(-M-Math.sqrt(M*M-4*S*O))/(2*S);return{x:w+x*A+r,y:E+T*A+i,r:A}}function Co(t,e,n){var r=t.x,i=t.y,o=e.r+n.r,a=t.r+n.r,s=e.x-r,u=e.y-i,c=s*s+u*u;if(c){var l=.5+((a*=a)-(o*=o))/(2*c),f=Math.sqrt(Math.max(0,2*o*(a+c)-(a-=c)*a-o*o))/(2*c);n.x=r+l*s+f*u,n.y=i+l*u-f*s}else n.x=r+a,n.y=i}function Do(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function jo(t,e){for(var n=t._.r;t!==e;)n+=2*(t=t.next)._.r;return n-e._.r}function Lo(t,e,n){var r=t._,i=t.next._,o=r.r+i.r,a=(r.x*i.r+i.x*r.r)/o-e,s=(r.y*i.r+i.y*r.r)/o-n;return a*a+s*s}function Fo(t){this._=t,this.next=null,this.previous=null}function Uo(t){if(!(i=t.length))return 0;var e,n,r,i;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;Co(n,e,r=t[2]);var o,a,s,u,c,l,f,h=e.r*e.r,p=n.r*n.r,d=r.r*r.r,v=h+p+d,m=h*e.x+p*n.x+d*r.x,y=h*e.y+p*n.y+d*r.y;e=new Fo(e),n=new Fo(n),r=new Fo(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(s=3;s<i;++s){Co(e._,n._,r=t[s]),r=new Fo(r),u=n.next,c=e.previous,l=n._.r,f=e._.r;do if(l<=f){if(Do(u._,r._)){l+e._.r+n._.r>jo(u,n)?e=u:n=u,e.next=n,n.previous=e,--s;continue t}l+=u._.r,u=u.next}else{if(Do(c._,r._)){jo(e,c)>f+e._.r+n._.r?e=c:n=c,e.next=n,n.previous=e,--s;continue t}f+=c._.r,c=c.previous}while(u!==c.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,v+=d=r._.r*r._.r,m+=d*r._.x,y+=d*r._.y,h=Lo(e,o=m/v,a=y/v);(r=r.next)!==n;)(d=Lo(r,o,a))<h&&(e=r,h=d);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=zy(e),s=0;s<i;++s)e=t[s],e.x-=r.x,e.y-=r.y;return r.r}function zo(t){return null==t?null:Bo(t)}function Bo(t){if("function"!=typeof t)throw new Error;return t}function Vo(){return 0}function Go(t){return Math.sqrt(t.value)}function Ho(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Wo(t,e){return function(n){if(r=n.children){var r,i,o,a=r.length,s=t(n)*e||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=Uo(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function qo(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Yo(t){return t.id}function Xo(t){return t.parentId}function Zo(t,e){return t.parent===e.parent?1:2}function Ko(t){var e=t.children;return e?e[0]:t.t}function Qo(t){var e=t.children;return e?e[e.length-1]:t.t}function Jo(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function $o(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function ta(t,e,n){return t.a.parent===e.parent?t.a:n}function ea(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function na(t){for(var e,n,r,i,o,a=new ea(t,0),s=[a];e=s.pop();)if(r=e._.children)for(e.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=e.children[i]=new ea(r[i],i)),n.parent=e;return(a.parent=new ea(null,0)).children=[a],a}function ra(t,e,n,r,i,o){for(var a,s,u,c,l,f,h,p,d,v,m,y=[],g=e.children,_=0,b=0,w=g.length,x=e.value;_<w;){u=i-n,c=o-r;do l=g[b++].value;while(!l&&b<w);for(f=h=l,v=Math.max(c/u,u/c)/(x*t),m=l*l*v,d=Math.max(h/m,m/f);b<w;++b){if(l+=s=g[b].value,s<f&&(f=s),s>h&&(h=s),m=l*l*v,p=Math.max(h/m,m/f),p>d){l-=s;break}d=p}y.push(a={value:l,dice:u<c,children:g.slice(_,b)}),a.dice?Wy(a,n,r,i,x?r+=c*l/x:o):Qy(a,n,r,x?n+=u*l/x:i,o),x-=l,_=b}return y}function ia(t,e){return t[0]-e[0]||t[1]-e[1]}function oa(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;++i){for(;r>1&&ag(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function aa(t){if(!(t>=1))throw new Error;this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function sa(t){if(!t._start)try{ua(t)}catch(e){if(t._tasks[t._ended+t._active-1])la(t,e);else if(!t._data)throw e}}function ua(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,i=n[r];n[r]=ca(t,e),--t._waiting,++t._active,n=i.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||fg)}}function ca(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?la(t,n):(t._data[e]=r,t._waiting?sa(t):fa(t))))}}function la(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(t){}t._active=NaN,fa(t)}function fa(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function ha(t){return new aa(arguments.length?+t:1/0)}function pa(t){return function(e,n){t(null==e?n:null)}}function da(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function va(t,e){return function(n){return t(n.responseText,e)}}function ma(t){function e(e){var o=e+"",a=n.get(o);if(!a){if(i!==Ig)return i;n.set(o,a=r.push(e))}return t[(a-1)%t.length]}var n=zn(),r=[],i=Ig;return t=null==t?[]:Rg.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=zn();for(var i,o,a=-1,s=t.length;++a<s;)n.has(o=(i=t[a])+"")||n.set(o,r.push(i));return e},e.range=function(n){return arguments.length?(t=Rg.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return ma().domain(r).range(t).unknown(i)},e}function ya(){function t(){var t=i().length,r=a[1]<a[0],f=a[r-0],h=a[1-r];e=(h-f)/Math.max(1,t-u+2*c),s&&(e=Math.floor(e)),f+=(h-f-e*(t-u))*l,n=e*(1-u),s&&(f=Math.round(f),n=Math.round(n));var p=Bc(t).map(function(t){return f+e*t});return o(r?p.reverse():p)}var e,n,r=ma().unknown(void 0),i=r.domain,o=r.range,a=[0,1],s=!1,u=0,c=0,l=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(a=[+e[0],+e[1]],t()):a.slice()},r.rangeRound=function(e){return a=[+e[0],+e[1]],s=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,t()):s},r.padding=function(e){return arguments.length?(u=c=Math.max(0,Math.min(1,e)),t()):u},r.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),t()):u},r.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),t()):c},r.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.copy=function(){return ya().domain(i()).range(a).round(s).paddingInner(u).paddingOuter(c).align(l)},t()}function ga(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return ga(e())},t}function _a(){return ga(ya().paddingInner(1))}function ba(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:kg(e)}function wa(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function xa(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function Ea(t,e,n,r){var i=t[0],o=t[1],a=e[0],s=e[1];return o<i?(i=n(o,i),a=r(s,a)):(i=n(i,o),a=r(a,s)),function(t){return a(i(t))}}function Ta(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),s=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++s<i;)o[s]=n(t[s],t[s+1]),a[s]=r(e[s],e[s+1]);return function(e){var n=Rc(t,e,1,i)-1;return a[n](o[n](e))}}function Sa(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Ma(t,e){function n(){return i=Math.min(s.length,u.length)>2?Ta:Ea,o=a=null,r}function r(e){return(o||(o=i(s,u,l?wa(t):t,c)))(+e)}var i,o,a,s=Ng,u=Ng,c=eh,l=!1;return r.invert=function(t){return(a||(a=i(u,s,ba,l?xa(e):e)))(+t)},r.domain=function(t){return arguments.length?(s=Ag.call(t,Pg),n()):s.slice()},r.range=function(t){return arguments.length?(u=Rg.call(t),n()):u.slice()},r.rangeRound=function(t){return u=Rg.call(t),c=nh,n()},r.clamp=function(t){return arguments.length?(l=!!t,n()):l},r.interpolate=function(t){return arguments.length?(c=t,n()):c},n()}function Oa(t){var e=t.domain;return t.ticks=function(t){var n=e();return Wc(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Cg(e(),t,n)},t.nice=function(r){var i=e(),o=i.length-1,a=null==r?10:r,s=i[0],u=i[o],c=n(s,u,a);return c&&(c=n(Math.floor(s/c)*c,Math.ceil(u/c)*c,a),i[0]=Math.floor(s/c)*c,i[o]=Math.ceil(u/c)*c,e(i)),t},t}function Aa(){var t=Ma(ba,Kf);return t.copy=function(){return Sa(t,Aa())},Oa(t)}function Ra(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=Ag.call(n,Pg),t):e.slice()},t.copy=function(){return Ra().domain(e)},Oa(t)}function Ia(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:kg(e)}function ka(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function Pa(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Na(t){return 10===t?Pa:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Ca(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Da(t){return function(e){return-t(-e)}}function ja(){function e(){return o=Ca(i),a=Na(i),r()[0]<0&&(o=Da(o),a=Da(a)),n}var n=Ma(Ia,ka).domain([1,10]),r=n.domain,i=10,o=Ca(10),a=Na(10);return n.base=function(t){return arguments.length?(i=+t,e()):i},n.domain=function(t){return arguments.length?(r(t),e()):r()},n.ticks=function(t){var e,n=r(),s=n[0],u=n[n.length-1];(e=u<s)&&(h=s,s=u,u=h);var c,l,f,h=o(s),p=o(u),d=null==t?10:+t,v=[];if(!(i%1)&&p-h<d){if(h=Math.round(h)-1,p=Math.round(p)+1,s>0){for(;h<p;++h)for(l=1,c=a(h);l<i;++l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else for(;h<p;++h)for(l=i-1,c=a(h);l>=1;--l)if(f=c*l,!(f<s)){if(f>u)break;v.push(f)}}else v=Wc(h,p,Math.min(p-h,d)).map(a);return e?v.reverse():v},n.tickFormat=function(e,r){if(null==r&&(r=10===i?".0e":","),"function"!=typeof r&&(r=t.format(r)),e===1/0)return r;null==e&&(e=10);var s=Math.max(1,i*e/n.ticks().length);return function(t){var e=t/a(Math.round(o(t)));return e*i<i-.5&&(e*=i),e<=s?r(t):""}},n.nice=function(){return r(Dg(r(),{floor:function(t){return a(Math.floor(o(t)))},ceil:function(t){return a(Math.ceil(o(t)))}}))},n.copy=function(){return Sa(n,ja().base(i))},n}function La(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Fa(){function t(t,e){return(e=La(e,n)-(t=La(t,n)))?function(r){return(La(r,n)-t)/e}:kg(e)}function e(t,e){return e=La(e,n)-(t=La(t,n)),function(r){return La(t+e*r,1/n)}}var n=1,r=Ma(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return Sa(r,Fa().exponent(n))},Oa(r)}function Ua(){return Fa().exponent(.5)}function za(){function t(){var t=0,o=Math.max(1,r.length);for(i=new Array(o-1);++t<o;)i[t-1]=Xc(n,t/o);return e}function e(t){if(!isNaN(t=+t))return r[Rc(i,t)]}var n=[],r=[],i=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,i=0,o=e.length;i<o;++i)r=e[i],null==r||isNaN(r=+r)||n.push(r);return n.sort(Mc),t()},e.range=function(e){return arguments.length?(r=Rg.call(e),t()):r.slice()},e.quantiles=function(){return i.slice()},e.copy=function(){return za().domain(n).range(r)},e}function Ba(){function t(t){if(t<=t)return a[Rc(o,t,0,i)]}function e(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,o=[.5],a=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(a=Rg.call(t)).length-1,e()):a.slice()},t.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,o[0]]:e>=i?[o[i-1],r]:[o[e-1],o[e]]},t.copy=function(){return Ba().domain([n,r]).range(a)},Oa(t)}function Va(){function t(t){if(t<=t)return n[Rc(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=Rg.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=Rg.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return Va().domain(e).range(n)},t}function Ga(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do a.push(new Date(+n));while(e(n,o),t(n),n<r);return a},i.filter=function(n){return Ga(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return jg.setTime(+e),Lg.setTime(+r),t(jg),t(Lg),Math.floor(n(jg,Lg))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t===0}:function(e){return i.count(0,e)%t===0}):i:null}),i}function Ha(t){return Ga(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5})}function Wa(t){return Ga(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}function qa(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ya(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}
return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Xa(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Za(t){function e(t,e){return function(n){var r,i,o,a=[],s=-1,u=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(u,s)),null!=(i=L_[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(t.slice(u,s)),a.join("")}}function n(t,e){return function(n){var i=Xa(1900);if(r(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var o="Z"in i?Ya(Xa(i.y)).getUTCDay():e(Xa(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,Ya(i)):e(i)}}function r(t,e,n,r){for(var i,o,a=0,s=e.length,u=n.length;a<s;){if(r>=u)return-1;if(i=e.charCodeAt(a++),37===i){if(i=e.charAt(a++),o=V[i in L_?e.charAt(a++):i],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=I.exec(e.slice(n));return r?(t.p=k[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=C.exec(e.slice(n));return r?(t.w=D[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=P.exec(e.slice(n));return r?(t.w=N[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=F.exec(e.slice(n));return r?(t.m=U[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=j.exec(e.slice(n));return r?(t.m=L[r[0].toLowerCase()],n+r[0].length):-1}function c(t,e,n){return r(t,x,e,n)}function l(t,e,n){return r(t,E,e,n)}function f(t,e,n){return r(t,T,e,n)}function h(t){return O[t.getDay()]}function p(t){return M[t.getDay()]}function d(t){return R[t.getMonth()]}function v(t){return A[t.getMonth()]}function m(t){return S[+(t.getHours()>=12)]}function y(t){return O[t.getUTCDay()]}function g(t){return M[t.getUTCDay()]}function _(t){return R[t.getUTCMonth()]}function b(t){return A[t.getUTCMonth()]}function w(t){return S[+(t.getUTCHours()>=12)]}var x=t.dateTime,E=t.date,T=t.time,S=t.periods,M=t.days,O=t.shortDays,A=t.months,R=t.shortMonths,I=Ja(S),k=$a(S),P=Ja(M),N=$a(M),C=Ja(O),D=$a(O),j=Ja(A),L=$a(A),F=Ja(R),U=$a(R),z={a:h,A:p,b:d,B:v,c:null,d:ds,e:ds,H:vs,I:ms,j:ys,L:gs,m:_s,M:bs,p:m,S:ws,U:xs,w:Es,W:Ts,x:null,X:null,y:Ss,Y:Ms,Z:Os,"%":Vs},B={a:y,A:g,b:_,B:b,c:null,d:As,e:As,H:Rs,I:Is,j:ks,L:Ps,m:Ns,M:Cs,p:w,S:Ds,U:js,w:Ls,W:Fs,x:null,X:null,y:Us,Y:zs,Z:Bs,"%":Vs},V={a:o,A:a,b:s,B:u,c:c,d:ss,e:ss,H:cs,I:cs,j:us,L:hs,m:as,M:ls,p:i,S:fs,U:es,w:ts,W:ns,x:l,X:f,y:is,Y:rs,Z:os,"%":ps};return z.x=e(E,z),z.X=e(T,z),z.c=e(x,z),B.x=e(E,B),B.X=e(T,B),B.c=e(x,B),{format:function(t){var n=e(t+="",z);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",qa);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",B);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,Ya);return e.toString=function(){return t},e}}}function Ka(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Qa(t){return t.replace(/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,"\\$&")}function Ja(t){return new RegExp("^(?:"+t.map(Qa).join("|")+")","i")}function $a(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ts(t,e,n){var r=F_.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function es(t,e,n){var r=F_.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function ns(t,e,n){var r=F_.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function rs(t,e,n){var r=F_.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function is(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function os(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function as(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function ss(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function us(t,e,n){var r=F_.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function cs(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ls(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function fs(t,e,n){var r=F_.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function hs(t,e,n){var r=F_.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ps(t,e,n){var r=U_.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ds(t,e){return Ka(t.getDate(),e,2)}function vs(t,e){return Ka(t.getHours(),e,2)}function ms(t,e){return Ka(t.getHours()%12||12,e,2)}function ys(t,e){return Ka(1+qg.count(l_(t),t),e,3)}function gs(t,e){return Ka(t.getMilliseconds(),e,3)}function _s(t,e){return Ka(t.getMonth()+1,e,2)}function bs(t,e){return Ka(t.getMinutes(),e,2)}function ws(t,e){return Ka(t.getSeconds(),e,2)}function xs(t,e){return Ka(Xg.count(l_(t),t),e,2)}function Es(t){return t.getDay()}function Ts(t,e){return Ka(Zg.count(l_(t),t),e,2)}function Ss(t,e){return Ka(t.getFullYear()%100,e,2)}function Ms(t,e){return Ka(t.getFullYear()%1e4,e,4)}function Os(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ka(e/60|0,"0",2)+Ka(e%60,"0",2)}function As(t,e){return Ka(t.getUTCDate(),e,2)}function Rs(t,e){return Ka(t.getUTCHours(),e,2)}function Is(t,e){return Ka(t.getUTCHours()%12||12,e,2)}function ks(t,e){return Ka(1+m_.count(C_(t),t),e,3)}function Ps(t,e){return Ka(t.getUTCMilliseconds(),e,3)}function Ns(t,e){return Ka(t.getUTCMonth()+1,e,2)}function Cs(t,e){return Ka(t.getUTCMinutes(),e,2)}function Ds(t,e){return Ka(t.getUTCSeconds(),e,2)}function js(t,e){return Ka(g_.count(C_(t),t),e,2)}function Ls(t){return t.getUTCDay()}function Fs(t,e){return Ka(__.count(C_(t),t),e,2)}function Us(t,e){return Ka(t.getUTCFullYear()%100,e,2)}function zs(t,e){return Ka(t.getUTCFullYear()%1e4,e,4)}function Bs(){return"+0000"}function Vs(){return"%"}function Gs(e){return D_=Za(e),t.timeFormat=D_.format,t.timeParse=D_.parse,t.utcFormat=D_.utcFormat,t.utcParse=D_.utcParse,D_}function Hs(t){return t.toISOString()}function Ws(t){var e=new Date(t);return isNaN(e)?null:e}function qs(t){return new Date(t)}function Ys(t){return t instanceof Date?+t:+new Date(+t)}function Xs(t,e,r,i,o,a,s,u,c){function l(n){return(s(n)<n?v:a(n)<n?m:o(n)<n?y:i(n)<n?g:e(n)<n?r(n)<n?_:b:t(n)<n?w:x)(n)}function f(e,r,i,o){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(i-r)/e,s=Oc(function(t){return t[2]}).right(E,a);s===E.length?(o=n(r/31536e6,i/31536e6,e),e=t):s?(s=E[a/E[s-1][2]<E[s][2]/a?s-1:s],o=s[1],e=s[0]):(o=n(r,i,e),e=u)}return null==o?e:e.every(o)}var h=Ma(ba,Kf),p=h.invert,d=h.domain,v=c(".%L"),m=c(":%S"),y=c("%I:%M"),g=c("%I %p"),_=c("%a %d"),b=c("%b %d"),w=c("%B"),x=c("%Y"),E=[[s,1,1e3],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[o,1,36e5],[o,3,108e5],[o,6,216e5],[o,12,432e5],[i,1,864e5],[i,2,1728e5],[r,1,6048e5],[e,1,2592e6],[e,3,7776e6],[t,1,31536e6]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?d(Ag.call(t,Ys)):d().map(qs)},h.ticks=function(t,e){var n,r=d(),i=r[0],o=r[r.length-1],a=o<i;return a&&(n=i,i=o,o=n),n=f(t,i,o,e),n=n?n.range(i,o+1):[],a?n.reverse():n},h.tickFormat=function(t,e){return null==e?l:c(e)},h.nice=function(t,e){var n=d();return(t=f(t,n[0],n[n.length-1],e))?d(Dg(n,t)):h},h.copy=function(){return Sa(h,Xs(t,e,r,i,o,a,s,u,c))},h}function Zs(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Ks(t){function e(e){var o=(e-n)/(r-n);return t(i?Math.max(0,Math.min(1,o)):o)}var n=0,r=1,i=!1;return e.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e):[n,r]},e.clamp=function(t){return arguments.length?(i=!!t,e):i},e.interpolator=function(n){return arguments.length?(t=n,e):t},e.copy=function(){return Ks(t).domain([n,r]).clamp(i)},Oa(e)}function Qs(t){return t.innerRadius}function Js(t){return t.outerRadius}function $s(t){return t.startAngle}function tu(t){return t.endAngle}function eu(t){return t&&t.padAngle}function nu(t){return t>=1?ab:t<=-1?-ab:Math.asin(t)}function ru(t,e,n,r,i,o,a,s){var u=n-t,c=r-e,l=a-i,f=s-o,h=(l*(e-o)-f*(t-i))/(f*u-l*c);return[t+h*u,e+h*c]}function iu(t,e,n,r,i,o,a){var s=t-n,u=e-r,c=(a?o:-o)/Math.sqrt(s*s+u*u),l=c*u,f=-c*s,h=t+l,p=e+f,d=n+l,v=r+f,m=(h+d)/2,y=(p+v)/2,g=d-h,_=v-p,b=g*g+_*_,w=i-o,x=h*v-d*p,E=(_<0?-1:1)*Math.sqrt(Math.max(0,w*w*b-x*x)),T=(x*_-g*E)/b,S=(-x*g-_*E)/b,M=(x*_+g*E)/b,O=(-x*g+_*E)/b,A=T-m,R=S-y,I=M-m,k=O-y;return A*A+R*R>I*I+k*k&&(T=M,S=O),{cx:T,cy:S,x01:-l,y01:-f,x11:T*(i/w-1),y11:S*(i/w-1)}}function ou(t){this._context=t}function au(t){return t[0]}function su(t){return t[1]}function uu(t){this._curve=t}function cu(t){function e(e){return new uu(t(e))}return e._curve=t,e}function lu(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(cu(t)):e()._curve},t}function fu(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function hu(t){this._context=t}function pu(t){this._context=t}function du(t){this._context=t}function vu(t,e){this._basis=new hu(t),this._beta=e}function mu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function yu(t,e){this._context=t,this._k=(1-e)/6}function gu(t,e){this._context=t,this._k=(1-e)/6}function _u(t,e){this._context=t,this._k=(1-e)/6}function bu(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>1e-12){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>1e-12){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/l,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/l}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function wu(t,e){this._context=t,this._alpha=e}function xu(t,e){this._context=t,this._alpha=e}function Eu(t,e){this._context=t,this._alpha=e}function Tu(t){this._context=t}function Su(t){return t<0?-1:1}function Mu(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Su(o)+Su(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Ou(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Au(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function Ru(t){this._context=t}function Iu(t){this._context=new ku(t)}function ku(t){this._context=t}function Pu(t){return new Ru(t)}function Nu(t){return new Iu(t)}function Cu(t){this._context=t}function Du(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function ju(t,e){this._context=t,this._t=e}function Lu(t){return new ju(t,0)}function Fu(t){return new ju(t,1)}function Uu(t,e){return t[e]}function zu(t){for(var e,n=0,r=-1,i=t.length;++r<i;)(e=+t[r][1])&&(n+=e);return n}function Bu(t){return t[0]}function Vu(t){return t[1]}function Gu(){this._=null}function Hu(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Wu(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function qu(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Yu(t){for(;t.L;)t=t.L;return t}function Xu(t,e,n,r){var i=[null,null],o=pw.push(i)-1;return i.left=t,i.right=e,n&&Ku(i,t,e,n),r&&Ku(i,e,t,r),fw[t.index].halfedges.push(o),fw[e.index].halfedges.push(o),i}function Zu(t,e,n){var r=[e,n];return r.left=t,r}function Ku(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function Qu(t,e,n,r,i){var o,a=t[0],s=t[1],u=a[0],c=a[1],l=s[0],f=s[1],h=0,p=1,d=l-u,v=f-c;if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<h)return;o<p&&(p=o)}else if(d>0){if(o>p)return;o>h&&(h=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>p)return;o>h&&(h=o)}else if(d>0){if(o<h)return;o<p&&(p=o)}if(o=n-c,v||!(o>0)){if(o/=v,v<0){if(o<h)return;o<p&&(p=o)}else if(v>0){if(o>p)return;o>h&&(h=o)}if(o=i-c,v||!(o<0)){if(o/=v,v<0){if(o>p)return;o>h&&(h=o)}else if(v>0){if(o<h)return;o<p&&(p=o)}return!(h>0||p<1)||(h>0&&(t[0]=[u+h*d,c+h*v]),p<1&&(t[1]=[u+p*d,c+p*v]),!0)}}}}}function Ju(t,e,n,r,i){var o=t[1];if(o)return!0;var a,s,u=t[0],c=t.left,l=t.right,f=c[0],h=c[1],p=l[0],d=l[1],v=(f+p)/2,m=(h+d)/2;if(d===h){if(v<e||v>=r)return;if(f>p){if(u){if(u[1]>=i)return}else u=[v,n];o=[v,i]}else{if(u){if(u[1]<n)return}else u=[v,i];o=[v,n]}}else if(a=(f-p)/(d-h),s=m-a*v,a<-1||a>1)if(f>p){if(u){if(u[1]>=i)return}else u=[(n-s)/a,n];o=[(i-s)/a,i]}else{if(u){if(u[1]<n)return}else u=[(i-s)/a,i];o=[(n-s)/a,n]}else if(h<d){if(u){if(u[0]>=r)return}else u=[e,a*e+s];o=[r,a*r+s]}else{if(u){if(u[0]<e)return}else u=[r,a*r+s];o=[e,a*e+s]}return t[0]=u,t[1]=o,!0}function $u(t,e,n,r){for(var i,o=pw.length;o--;)Ju(i=pw[o],t,e,n,r)&&Qu(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>1e-6||Math.abs(i[0][1]-i[1][1])>1e-6)||delete pw[o]}function tc(t){return fw[t.index]={site:t,halfedges:[]}}function ec(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function nc(t,e){return e[+(e.left!==t.site)]}function rc(t,e){return e[+(e.left===t.site)]}function ic(){for(var t,e,n,r,i=0,o=fw.length;i<o;++i)if((t=fw[i])&&(r=(e=t.halfedges).length)){var a=new Array(r),s=new Array(r);for(n=0;n<r;++n)a[n]=n,s[n]=ec(t,pw[e[n]]);for(a.sort(function(t,e){return s[e]-s[t]}),n=0;n<r;++n)s[n]=e[a[n]];for(n=0;n<r;++n)e[n]=s[n]}}function oc(t,e,n,r){var i,o,a,s,u,c,l,f,h,p,d,v,m=fw.length,y=!0;for(i=0;i<m;++i)if(o=fw[i]){for(a=o.site,u=o.halfedges,s=u.length;s--;)pw[u[s]]||u.splice(s,1);for(s=0,c=u.length;s<c;)p=rc(o,pw[u[s]]),d=p[0],v=p[1],l=nc(o,pw[u[++s%c]]),f=l[0],h=l[1],(Math.abs(d-f)>1e-6||Math.abs(v-h)>1e-6)&&(u.splice(s,0,pw.push(Zu(a,p,Math.abs(d-t)<1e-6&&r-v>1e-6?[t,Math.abs(f-t)<1e-6?h:r]:Math.abs(v-r)<1e-6&&n-d>1e-6?[Math.abs(h-r)<1e-6?f:n,r]:Math.abs(d-n)<1e-6&&v-e>1e-6?[n,Math.abs(f-n)<1e-6?h:e]:Math.abs(v-e)<1e-6&&d-t>1e-6?[Math.abs(h-e)<1e-6?f:t,e]:null))-1),++c);c&&(y=!1)}if(y){var g,_,b,w=1/0;for(i=0,y=null;i<m;++i)(o=fw[i])&&(a=o.site,g=a[0]-t,_=a[1]-e,b=g*g+_*_,b<w&&(w=b,y=o));if(y){var x=[t,e],E=[t,r],T=[n,r],S=[n,e];y.halfedges.push(pw.push(Zu(a=y.site,x,E))-1,pw.push(Zu(a,E,T))-1,pw.push(Zu(a,T,S))-1,pw.push(Zu(a,S,x))-1)}}for(i=0;i<m;++i)(o=fw[i])&&(o.halfedges.length||delete fw[i])}function ac(){Hu(this),this.x=this.y=this.arc=this.site=this.cy=null}function sc(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i[0],s=i[1],u=r[0]-a,c=r[1]-s,l=o[0]-a,f=o[1]-s,h=2*(u*f-c*l);if(!(h>=-1e-12)){var p=u*u+c*c,d=l*l+f*f,v=(f*p-c*d)/h,m=(u*d-l*p)/h,y=dw.pop()||new ac;y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=m+s)+Math.sqrt(v*v+m*m),t.circle=y;for(var g=null,_=hw._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){g=_.P;break}_=_.L}else{if(!_.R){g=_;break}_=_.R}hw.insert(g,y),g||(cw=y)}}}}function uc(t){var e=t.circle;e&&(e.P||(cw=e.N),hw.remove(e),dw.push(e),Hu(e),t.circle=null)}function cc(){Hu(this),this.edge=this.site=this.circle=null}function lc(t){var e=vw.pop()||new cc;return e.site=t,e}function fc(t){uc(t),lw.remove(t),vw.push(t),Hu(t)}function hc(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],o=t.P,a=t.N,s=[t];fc(t);for(var u=o;u.circle&&Math.abs(n-u.circle.x)<1e-6&&Math.abs(r-u.circle.cy)<1e-6;)o=u.P,s.unshift(u),fc(u),u=o;s.unshift(u),uc(u);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<1e-6&&Math.abs(r-c.circle.cy)<1e-6;)a=c.N,s.push(c),fc(c),c=a;s.push(c),uc(c);var l,f=s.length;for(l=1;l<f;++l)c=s[l],u=s[l-1],Ku(c.edge,u.site,c.site,i);u=s[0],c=s[f-1],c.edge=Xu(u.site,c.site,null,i),sc(u),sc(c)}function pc(t){for(var e,n,r,i,o=t[0],a=t[1],s=lw._;s;)if(r=dc(s,a)-o,r>1e-6)s=s.L;else{if(i=o-vc(s,a),!(i>1e-6)){r>-1e-6?(e=s.P,n=s):i>-1e-6?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}tc(t);var u=lc(t);if(lw.insert(e,u),e||n){if(e===n)return uc(e),n=lc(e.site),lw.insert(u,n),u.edge=n.edge=Xu(e.site,u.site),sc(e),void sc(n);if(!n)return void(u.edge=Xu(e.site,u.site));uc(e),uc(n);var c=e.site,l=c[0],f=c[1],h=t[0]-l,p=t[1]-f,d=n.site,v=d[0]-l,m=d[1]-f,y=2*(h*m-p*v),g=h*h+p*p,_=v*v+m*m,b=[(m*g-p*_)/y+l,(h*_-v*g)/y+f];Ku(n.edge,c,d,b),u.edge=Xu(c,t,null,b),n.edge=Xu(t,d,null,b),sc(e),sc(n)}}function dc(t,e){var n=t.site,r=n[0],i=n[1],o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n[0],u=n[1],c=u-e;if(!c)return s;var l=s-r,f=1/o-1/c,h=l/c;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*c)-u+c/2+i-o/2)))/f+r:(r+s)/2}function vc(t,e){var n=t.N;if(n)return dc(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function mc(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function yc(t,e){return e[1]-t[1]||e[0]-t[0]}function gc(t,e){var n,r,i,o=t.sort(yc).pop();for(pw=[],fw=new Array(t.length),lw=new Gu,hw=new Gu;;)if(i=cw,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===n&&o[1]===r||(pc(o),n=o[0],r=o[1]),o=t.pop();else{if(!i)break;hc(i.arc)}if(ic(),e){var a=+e[0][0],s=+e[0][1],u=+e[1][0],c=+e[1][1];$u(a,s,u,c),oc(a,s,u,c)}this.edges=pw,this.cells=fw,lw=hw=pw=fw=null}function _c(t,e,n){this.target=t,this.type=e,this.transform=n}function bc(t,e,n){this.k=t,this.x=e,this.y=n}function wc(t){return t.__zoom||gw}function xc(){t.event.stopImmediatePropagation()}function Ec(){return!t.event.button}function Tc(){var t,e,n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,t=n.width.baseVal.value,e=n.height.baseVal.value):(t=n.clientWidth,e=n.clientHeight),[[0,0],[t,e]]}function Sc(){return this.__zoom||gw}var Mc=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},Oc=function(t){return 1===t.length&&(t=e(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}},Ac=Oc(Mc),Rc=Ac.right,Ic=Ac.left,kc=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Pc=function(t){return null===t?NaN:+t},Nc=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,u=0;if(null==e)for(;++s<i;)isNaN(n=Pc(t[s]))||(r=n-o,o+=r/++u,a+=r*(n-o));else for(;++s<i;)isNaN(n=Pc(e(t[s],s,t)))||(r=n-o,o+=r/++u,a+=r*(n-o));if(u>1)return a/(u-1)},Cc=function(t,e){var n=Nc(t,e);return n?Math.sqrt(n):n},Dc=function(t,e){var n,r,i,o=-1,a=t.length;if(null==e){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e(t[o],o,t))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e(t[o],o,t))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},jc=Array.prototype,Lc=jc.slice,Fc=jc.map,Uc=function(t){return function(){return t}},zc=function(t){return t},Bc=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o},Vc=Math.sqrt(50),Gc=Math.sqrt(10),Hc=Math.sqrt(2),Wc=function(t,e,r){var i=n(t,e,r);return Bc(Math.ceil(t/i)*i,Math.floor(e/i)*i+i/2,i)},qc=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},Yc=function(){function t(t){var i,o,a=t.length,s=new Array(a);for(i=0;i<a;++i)s[i]=e(t[i],i,t);var u=n(s),c=u[0],l=u[1],f=r(s,c,l);Array.isArray(f)||(f=Wc(c,l,f));for(var h=f.length;f[0]<=c;)f.shift(),--h;for(;f[h-1]>=l;)f.pop(),--h;var p,d=new Array(h+1);for(i=0;i<=h;++i)p=d[i]=[],p.x0=i>0?f[i-1]:c,p.x1=i<h?f[i]:l;for(i=0;i<a;++i)o=s[i],c<=o&&o<=l&&d[Rc(f,o,0,h)].push(t[i]);return d}var e=zc,n=Dc,r=qc;return t.value=function(n){return arguments.length?(e="function"==typeof n?n:Uc(n),t):e},t.domain=function(e){return arguments.length?(n="function"==typeof e?e:Uc([e[0],e[1]]),t):n},t.thresholds=function(e){return arguments.length?(r="function"==typeof e?e:Uc(Array.isArray(e)?Lc.call(e):e),t):r},t},Xc=function(t,e,n){if(null==n&&(n=Pc),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t);return a+(+n(t[o+1],o+1,t)-a)*(i-o)}},Zc=function(t,e,n){return t=Fc.call(t,Pc).sort(Mc),Math.ceil((n-e)/(2*(Xc(t,.75)-Xc(t,.25))*Math.pow(t.length,-1/3)))},Kc=function(t,e,n){return Math.ceil((n-e)/(3.5*Cc(t)*Math.pow(t.length,-1/3)))},Qc=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&r>n&&(n=r)}return n},Jc=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(null==e)for(;++o<i;)isNaN(n=Pc(t[o]))?--a:r+=n;else for(;++o<i;)isNaN(n=Pc(e(t[o],o,t)))?--a:r+=n;if(a)return r/a},$c=function(t,e){var n,r=[],i=t.length,o=-1;if(null==e)for(;++o<i;)isNaN(n=Pc(t[o]))||r.push(n);else for(;++o<i;)isNaN(n=Pc(e(t[o],o,t)))||r.push(n);return Xc(r.sort(Mc),.5)},tl=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},el=function(t,e){var n,r,i=-1,o=t.length;if(null==e){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e(t[i],i,t))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e(t[i],i,t))&&n>r&&(n=r)}return n},nl=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},rl=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},il=function(t,e){if(n=t.length){var n,r,i=0,o=0,a=t[o];for(e||(e=Mc);++i<n;)(e(r=t[i],a)<0||0!==e(a,a))&&(a=r,o=i);return 0===e(a,a)?o:void 0}},ol=function(t,e,n){for(var r,i,o=(null==n?t.length:n)-(e=null==e?0:+e);o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},al=function(t,e){var n,r=0,i=t.length,o=-1;if(null==e)for(;++o<i;)(n=+t[o])&&(r+=n);else for(;++o<i;)(n=+e(t[o],o,t))&&(r+=n);return r},sl=function(t){if(!(o=t.length))return[];for(var e=-1,n=el(t,r),i=new Array(n);++e<n;)for(var o,a=-1,s=i[e]=new Array(o);++a<o;)s[a]=t[a][e];return i},ul=function(){return sl(arguments)},cl=Array.prototype.slice,ll=function(t){return t},fl={value:function(){}};d.prototype=p.prototype={constructor:d,on:function(t,e){var n,r=this._,i=v(t+"",r),o=-1,a=i.length;{if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(n=(t=i[o]).type)r[n]=y(r[n],t.name,e);else if(null==e)for(n in r)r[n]=y(r[n],t.name,null);return this}for(;++o<a;)if((n=(t=i[o]).type)&&(n=m(r[n],t.name)))return n}},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new d(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],o=0,n=r.length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var hl="http://www.w3.org/1999/xhtml",pl={svg:"http://www.w3.org/2000/svg",xhtml:hl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dl=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),pl.hasOwnProperty(e)?{space:pl[e],local:t}:t},vl=function(t){var e=dl(t);return(e.local?_:g)(e)},ml=0;w.prototype=b.prototype={constructor:w,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var yl=function(t){return function(){return this.matches(t)}};if("undefined"!=typeof document){var gl=document.documentElement;if(!gl.matches){var _l=gl.webkitMatchesSelector||gl.msMatchesSelector||gl.mozMatchesSelector||gl.oMatchesSelector;yl=function(t){return function(){return _l.call(this,t)}}}}var bl=yl,wl={};if(t.event=null,"undefined"!=typeof document){"onmouseenter"in document.documentElement||(wl={mouseenter:"mouseover",mouseleave:"mouseout"})}var xl=function(t,e,n){var r,i,o=T(t+""),a=o.length;{if(!(arguments.length<2)){for(s=e?M:S,null==n&&(n=!1),r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var u,c=0,l=s.length;c<l;++c)for(r=0,u=s[c];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value}},El=function(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n},Tl=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Sl=function(t){var e=El();return e.changedTouches&&(e=e.changedTouches[0]),Tl(t,e)},Ml=function(t){return null==t?A:function(){return this.querySelector(t)}},Ol=function(t){"function"!=typeof t&&(t=Ml(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],u=s.length,c=r[i]=new Array(u),l=0;l<u;++l)(o=s[l])&&(a=t.call(o,o.__data__,l,s))&&("__data__"in o&&(a.__data__=o.__data__),c[l]=a);return new pt(r,this._parents)},Al=function(t){return null==t?R:function(){return this.querySelectorAll(t)}},Rl=function(t){"function"!=typeof t&&(t=Al(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],u=s.length,c=0;c<u;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new pt(r,i)},Il=function(t){"function"!=typeof t&&(t=bl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new pt(r,this._parents)},kl=function(t){return new Array(t.length)},Pl=function(){return new pt(this._enter||this._groups.map(kl),this._parents)};I.prototype={constructor:I,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Nl=function(t){return function(){return t}},Cl=function(t,e){if(!t)return p=new Array(this.size()),c=-1,this.each(function(t){p[++c]=t}),p;var n=e?P:k,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Nl(t));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var l=r[c],f=i[c],h=f.length,p=t.call(l,l&&l.__data__,c,r),d=p.length,v=s[c]=new Array(d),m=a[c]=new Array(d);n(l,f,v,m,u[c]=new Array(h),p,e);for(var y,g,_=0,b=0;_<d;++_)if(y=v[_]){for(_>=b&&(b=_+1);!(g=m[b])&&++b<d;);y._next=g||null}}return a=new pt(a,r),a._enter=s,a._exit=u,a},Dl=function(){return new pt(this._exit||this._groups.map(kl),this._parents)},jl=function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new pt(a,this._parents)},Ll=function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&a!==r.nextSibling&&a.parentNode.insertBefore(r,a),a=r);return this},Fl=function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=N);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,c=i[o]=new Array(u),l=0;l<u;++l)(a=s[l])&&(c[l]=a);c.sort(e)}return new pt(i,this._parents).order()},Ul=function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},zl=function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},Bl=function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},Vl=function(){var t=0;return this.each(function(){++t}),t},Gl=function(){return!this.node()},Hl=function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},Wl=function(t,e){var n=dl(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?D:C:"function"==typeof e?n.local?U:F:n.local?L:j)(n,e))},ql=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView},Yl=function(t,e,n){var r;return arguments.length>1?this.each((null==e?z:"function"==typeof e?V:B)(t,e,null==n?"":n)):ql(r=this.node()).getComputedStyle(r,null).getPropertyValue(t)},Xl=function(t,e){return arguments.length>1?this.each((null==e?G:"function"==typeof e?W:H)(t,e)):this.node()[t]};X.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Zl=function(t,e){var n=q(t+"");if(arguments.length<2){for(var r=Y(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?$:e?Q:J)(n,e))},Kl=function(t){return arguments.length?this.each(null==t?tt:("function"==typeof t?nt:et)(t)):this.node().textContent},Ql=function(t){return arguments.length?this.each(null==t?rt:("function"==typeof t?ot:it)(t)):this.node().innerHTML},Jl=function(){return this.each(at)},$l=function(){return this.each(st)},tf=function(t){var e="function"==typeof t?t:vl(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},ef=function(t,e){var n="function"==typeof t?t:vl(t),r=null==e?ut:"function"==typeof e?e:Ml(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},nf=function(){return this.each(ct)},rf=function(t){return arguments.length?this.property("__data__",t):this.node().__data__},of=function(t,e){return this.each(("function"==typeof e?ht:ft)(t,e))},af=[null];pt.prototype=dt.prototype={constructor:pt,select:Ol,selectAll:Rl,filter:Il,data:Cl,enter:Pl,exit:Dl,merge:jl,order:Ll,sort:Fl,call:Ul,nodes:zl,node:Bl,size:Vl,empty:Gl,each:Hl,attr:Wl,style:Yl,property:Xl,classed:Zl,text:Kl,html:Ql,raise:Jl,lower:$l,append:tf,insert:ef,remove:nf,datum:rf,on:xl,dispatch:of};var sf=function(t){return"string"==typeof t?new pt([[document.querySelector(t)]],[document.documentElement]):new pt([[t]],af)},uf=function(t){return"string"==typeof t?new pt([document.querySelectorAll(t)],[document.documentElement]):new pt([null==t?[]:t],af)},cf=function(t,e,n){arguments.length<3&&(n=e,e=El().changedTouches);for(var r,i=0,o=e?e.length:0;i<o;++i)if((r=e[i]).identifier===n)return Tl(t,r);return null},lf=function(t,e){null==e&&(e=El().touches);for(var n=0,r=e?e.length:0,i=new Array(r);n<r;++n)i[n]=Tl(t,e[n]);return i},ff=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},hf=function(t){var e=t.document.documentElement,n=sf(t).on("dragstart.drag",ff,!0);"onselectstart"in e?n.on("selectstart.drag",ff,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")},pf=function(t){return function(){return t}};yt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var df=function(){function e(t){t.on("mousedown.drag",n).on("touchstart.drag",o).on("touchmove.drag",a).on("touchend.drag touchcancel.drag",s).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function n(){if(!l&&f.apply(this,arguments)){var e=u("mouse",h.apply(this,arguments),Sl,this,arguments)
;e&&(sf(t.event.view).on("mousemove.drag",r,!0).on("mouseup.drag",i,!0),hf(t.event.view),vt(),c=!1,e("start"))}}function r(){ff(),c=!0,v.mouse("drag")}function i(){sf(t.event.view).on("mousemove.drag mouseup.drag",null),mt(t.event.view,c),ff(),v.mouse("end")}function o(){if(f.apply(this,arguments)){var e,n,r=t.event.changedTouches,i=h.apply(this,arguments),o=r.length;for(e=0;e<o;++e)(n=u(r[e].identifier,i,cf,this,arguments))&&(vt(),n("start"))}}function a(){var e,n,r=t.event.changedTouches,i=r.length;for(e=0;e<i;++e)(n=v[r[e].identifier])&&(ff(),n("drag"))}function s(){var e,n,r=t.event.changedTouches,i=r.length;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),e=0;e<i;++e)(n=v[r[e].identifier])&&(vt(),n("end"))}function u(n,r,i,o,a){var s,u,c,l=i(r,n),f=m.copy();if(O(new yt(e,"beforestart",s,n,y,l[0],l[1],0,0,f),function(){return null!=(t.event.subject=s=d.apply(o,a))&&(u=s.x-l[0]||0,c=s.y-l[1]||0,!0)}))return function t(h){var p,d=l;switch(h){case"start":v[n]=t,p=y++;break;case"end":delete v[n],--y;case"drag":l=i(r,n),p=y}O(new yt(e,h,s,n,p,l[0]+u,l[1]+c,l[0]-d[0],l[1]-d[1],f),f.apply,f,[h,o,a])}}var c,l,f=gt,h=_t,d=bt,v={},m=p("start","drag","end"),y=0;return e.filter=function(t){return arguments.length?(f="function"==typeof t?t:pf(!!t),e):f},e.container=function(t){return arguments.length?(h="function"==typeof t?t:pf(t),e):h},e.subject=function(t){return arguments.length?(d="function"==typeof t?t:pf(t),e):d},e.on=function(){var t=m.on.apply(m,arguments);return t===m?e:t},e},vf=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t},mf="\\s*([+-]?\\d+)\\s*",yf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",gf="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_f=/^#([0-9a-f]{3})$/,bf=/^#([0-9a-f]{6})$/,wf=new RegExp("^rgb\\("+[mf,mf,mf]+"\\)$"),xf=new RegExp("^rgb\\("+[gf,gf,gf]+"\\)$"),Ef=new RegExp("^rgba\\("+[mf,mf,mf,yf]+"\\)$"),Tf=new RegExp("^rgba\\("+[gf,gf,gf,yf]+"\\)$"),Sf=new RegExp("^hsl\\("+[yf,gf,gf]+"\\)$"),Mf=new RegExp("^hsla\\("+[yf,gf,gf,yf]+"\\)$"),Of={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vf(xt,Et,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),vf(At,Ot,wt(xt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new At(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),vf(Pt,kt,wt(xt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Pt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Pt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new At(Nt(t>=240?t-240:t+120,i,r),Nt(t,i,r),Nt(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Af=Math.PI/180,Rf=180/Math.PI,If=6/29;vf(jt,Dt,wt(xt,{brighter:function(t){return new jt(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new jt(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=1*Ft(t),e=.95047*Ft(e),n=1.08883*Ft(n),new At(Ut(3.2404542*e-1.5371385*t-.4985314*n),Ut(-.969266*e+1.8760108*t+.041556*n),Ut(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),vf(Gt,Vt,wt(xt,{brighter:function(t){return new Gt(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Gt(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Ct(this).rgb()}}));var kf=-.14861,Pf=1.78277,Nf=-.29227,Cf=-.90649,Df=1.97294;vf(qt,Wt,wt(xt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new qt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Af,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new At(255*(e+n*(kf*r+Pf*i)),255*(e+n*(Nf*r+Cf*i)),255*(e+n*(Df*r)),this.opacity)}}));var jf,Lf,Ff,Uf,zf,Bf,Vf=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1];return Yt((n-r/e)*e,r>0?t[r-1]:2*i-o,i,o,r<e-1?t[r+2]:2*o-i)}},Gf=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e);return Yt((n-r/e)*e,t[(r+e-1)%e],t[r%e],t[(r+1)%e],t[(r+2)%e])}},Hf=function(t){return function(){return t}},Wf=function t(e){function n(t,e){var n=r((t=Ot(t)).r,(e=Ot(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=Jt(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}var r=Qt(1);return n.gamma=t,n}(1),qf=$t(Vf),Yf=$t(Gf),Xf=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(r),a=new Array(r);for(n=0;n<i;++n)o[n]=eh(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}},Zf=function(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}},Kf=function(t,e){return t=+t,e-=t,function(n){return t+e*n}},Qf=function(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=eh(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},Jf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$f=new RegExp(Jf.source,"g"),th=function(t,e){var n,r,i,o=Jf.lastIndex=$f.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(n=Jf.exec(t))&&(r=$f.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:Kf(n,r)})),o=$f.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?ee(u[0].x):te(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},eh=function(t,e){var n,r=typeof e;return null==e||"boolean"===r?Hf(e):("number"===r?Kf:"string"===r?(n=Et(e))?(e=n,Wf):th:e instanceof Et?Wf:e instanceof Date?Zf:Array.isArray(e)?Xf:isNaN(e)?Qf:Kf)(t,e)},nh=function(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}},rh=180/Math.PI,ih={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},oh=function(t,e,n,r,i,o){var a,s,u;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*rh,skewX:Math.atan(u)*rh,scaleX:a,scaleY:s}},ah=ie(ne,"px, ","px)","deg)"),sh=ie(re,", ",")",")"),uh=Math.SQRT2,ch=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],u=e[1],c=e[2],l=s-i,f=u-o,h=l*l+f*f;if(h<1e-12)r=Math.log(c/a)/uh,n=function(t){return[i+t*l,o+t*f,a*Math.exp(uh*t*r)]};else{var p=Math.sqrt(h),d=(c*c-a*a+4*h)/(2*a*2*p),v=(c*c-a*a-4*h)/(2*c*2*p),m=Math.log(Math.sqrt(d*d+1)-d);r=(Math.log(Math.sqrt(v*v+1)-v)-m)/uh,n=function(t){var e=t*r,n=oe(m),s=a/(2*p)*(n*se(uh*e+m)-ae(m));return[i+s*l,o+s*f,a*n/oe(uh*e+m)]}}return n.duration=1e3*r,n},lh=ue(Kt),fh=ue(Jt),hh=le(Kt),ph=le(Jt),dh=fe(Kt),vh=fe(Jt),mh=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n},yh=0,gh=0,_h=0,bh=0,wh=0,xh=0,Eh="object"==typeof performance&&performance.now?performance:Date,Th="function"==typeof requestAnimationFrame?requestAnimationFrame:function(t){setTimeout(t,17)};de.prototype=ve.prototype={constructor:de,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?he():+n)+(null==e?0:+e),this._next||Bf===this||(Bf?Bf._next=this:zf=this,Bf=this),this._call=t,this._time=n,be()},stop:function(){this._call&&(this._call=null,this._time=1/0,be())}};var Sh=function(t,e,n){var r=new de;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},Mh=function(t,e,n){var r=new de,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?he():+n,r.restart(function o(a){a+=i,r.restart(o,i+=e,n),t(a)},e,n),r)},Oh=p("start","end","interrupt"),Ah=[],Rh=function(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};Te(t,n,{name:e,index:r,group:i,on:Oh,tween:Ah,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})},Ih=function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){e=null==e?null:e+"";for(i in o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),r&&n.on.call("interrupt",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}},kh=function(t){return this.each(function(){Ih(this,t)})},Ph=function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Ee(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?Se:Me)(n,t,e))},Nh=function(t,e){var n;return("number"==typeof e?Kf:e instanceof Et?Wf:(n=Et(e))?(e=n,Wf):th)(t,e)},Ch=function(t,e){var n=dl(t),r="transform"===n?sh:Nh;return this.attrTween(t,"function"==typeof e?(n.local?Ne:Pe)(n,r,Oe(this,"attr."+t,e)):null==e?(n.local?Re:Ae)(n):(n.local?ke:Ie)(n,r,e))},Dh=function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=dl(t);return this.tween(n,(r.local?Ce:De)(r,e))},jh=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?je:Le)(e,t)):Ee(this.node(),e).delay},Lh=function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Fe:Ue)(e,t)):Ee(this.node(),e).duration},Fh=function(t){var e=this._id;return arguments.length?this.each(ze(e,t)):Ee(this.node(),e).ease},Uh=function(t){"function"!=typeof t&&(t=bl(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,u=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new Qe(r,this._parents,this._name,this._id)},zh=function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,c=e[s],l=n[s],f=c.length,h=a[s]=new Array(f),p=0;p<f;++p)(u=c[p]||l[p])&&(h[p]=u);for(;s<r;++s)a[s]=e[s];return new Qe(a,this._parents,this._name,this._id)},Bh=function(t,e){var n=this._id;return arguments.length<2?Ee(this.node(),n).on.on(t):this.each(Ve(n,t,e))},Vh=function(){return this.on("end.remove",Ge(this._id))},Gh=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Ml(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,c=r[a],l=c.length,f=o[a]=new Array(l),h=0;h<l;++h)(s=c[h])&&(u=t.call(s,s.__data__,h,c))&&("__data__"in s&&(u.__data__=s.__data__),f[h]=u,Rh(f[h],e,n,h,f,Ee(s,n)));return new Qe(o,this._parents,e,n)},Hh=function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Al(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,c=r[s],l=c.length,f=0;f<l;++f)if(u=c[f]){for(var h,p=t.call(u,u.__data__,f,c),d=Ee(u,n),v=0,m=p.length;v<m;++v)(h=p[v])&&Rh(h,e,n,v,p,d);o.push(p),a.push(u)}return new Qe(o,a,e,n)},Wh=dt.prototype.constructor,qh=function(){return new Wh(this._groups,this._parents)},Yh=function(t,e,n){var r="transform"==(t+="")?ah:Nh;return null==e?this.styleTween(t,He(t,r)).on("end.style."+t,We(t)):this.styleTween(t,"function"==typeof e?Ye(t,r,Oe(this,"style."+t,e)):qe(t,r,e),n)},Xh=function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,Xe(t,e,null==n?"":n))},Zh=function(t){return this.tween("text","function"==typeof t?Ke(Oe(this,"text",t)):Ze(null==t?"":t+""))},Kh=function(){for(var t=this._name,e=this._id,n=$e(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)if(a=s[c]){var l=Ee(a,e);Rh(a,t,n,c,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Qe(r,this._parents,t,n)},Qh=0,Jh=dt.prototype;Qe.prototype=Je.prototype={constructor:Qe,select:Gh,selectAll:Hh,filter:Uh,merge:zh,selection:qh,transition:Kh,call:Jh.call,nodes:Jh.nodes,node:Jh.node,size:Jh.size,empty:Jh.empty,each:Jh.each,on:Bh,attr:Ch,attrTween:Dh,style:Yh,styleTween:Xh,text:Zh,remove:Vh,tween:Ph,delay:jh,duration:Lh,ease:Fh};var $h=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),tp=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),ep=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),np=Math.PI,rp=np/2,ip=7.5625,op=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),ap=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),sp=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),up=2*Math.PI,cp=function t(e,n){function r(t){return e*Math.pow(2,10*--t)*Math.sin((i-t)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=up);return r.amplitude=function(e){return t(e,n*up)},r.period=function(n){return t(e,n)},r}(1,.3),lp=function t(e,n){function r(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+i)/n)}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=up);return r.amplitude=function(e){return t(e,n*up)},r.period=function(n){return t(e,n)},r}(1,.3),fp=function t(e,n){function r(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((i-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((i+t)/n))/2}var i=Math.asin(1/(e=Math.max(1,e)))*(n/=up);return r.amplitude=function(e){return t(e,n*up)},r.period=function(n){return t(e,n)},r}(1,.3),hp={time:null,delay:0,duration:250,ease:sn},pp=function(t){var e,n;t instanceof Qe?(e=t._id,t=t._name):(e=$e(),(n=hp).time=he(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,c=0;c<u;++c)(a=s[c])&&Rh(a,t,e,c,s,n||bn(a,e));return new Qe(r,this._parents,t,e)};dt.prototype.interrupt=kh,dt.prototype.transition=pp;var dp=[null],vp=function(t,e){var n,r,i=t.__transition;if(i){e=null==e?null:e+"";for(r in i)if((n=i[r]).state>1&&n.name===e)return new Qe([[t]],dp,e,+r)}return null},mp=function(t){return function(){return t}},yp=function(t,e,n){this.target=t,this.type=e,this.selection=n},gp=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},_p={name:"drag"},bp={name:"space"},wp={name:"handle"},xp={name:"center"},Ep={name:"x",handles:["e","w"].map(xn),input:function(t,e){return t&&[[t[0],e[0][1]],[t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Tp={name:"y",handles:["n","s"].map(xn),input:function(t,e){return t&&[[e[0][0],t[0]],[e[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},Sp={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(xn),input:function(t){return t},output:function(t){return t}},Mp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Op={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Ap={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Rp={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ip={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1},kp=function(){return In(Sp)},Pp=Math.cos,Np=Math.sin,Cp=Math.PI,Dp=Cp/2,jp=2*Cp,Lp=Math.max,Fp=function(){function t(t){var o,a,s,u,c,l,f=t.length,h=[],p=Bc(f),d=[],v=[],m=v.groups=new Array(f),y=new Array(f*f);for(o=0,c=-1;++c<f;){for(a=0,l=-1;++l<f;)a+=t[c][l];h.push(a),d.push(Bc(f)),o+=a}for(n&&p.sort(function(t,e){return n(h[t],h[e])}),r&&d.forEach(function(e,n){e.sort(function(e,i){return r(t[n][e],t[n][i])})}),o=Lp(0,jp-e*f)/o,u=o?e:jp/f,a=0,c=-1;++c<f;){for(s=a,l=-1;++l<f;){var g=p[c],_=d[g][l],b=t[g][_],w=a,x=a+=b*o;y[_*f+g]={index:g,subindex:_,startAngle:w,endAngle:x,value:b}}m[g]={index:g,startAngle:s,endAngle:a,value:h[g]},a+=u}for(c=-1;++c<f;)for(l=c-1;++l<f;){var E=y[l*f+c],T=y[c*f+l];(E.value||T.value)&&v.push(E.value<T.value?{source:T,target:E}:{source:E,target:T})}return i?v.sort(i):v}var e=0,n=null,r=null,i=null;return t.padAngle=function(n){return arguments.length?(e=Lp(0,n),t):e},t.sortGroups=function(e){return arguments.length?(n=e,t):n},t.sortSubgroups=function(e){return arguments.length?(r=e,t):r},t.sortChords=function(e){return arguments.length?(null==e?i=null:(i=kn(e))._=e,t):i&&i._},t},Up=Array.prototype.slice,zp=function(t){return function(){return t}},Bp=Math.PI,Vp=2*Bp,Gp=Vp-1e-6;Pn.prototype=Nn.prototype={constructor:Pn,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-t,u=r-e,c=o-t,l=a-e,f=c*c+l*l;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*s-u*c)>1e-6&&i){var h=n-o,p=r-a,d=s*s+u*u,v=h*h+p*p,m=Math.sqrt(d),y=Math.sqrt(f),g=i*Math.tan((Bp-Math.acos((d+f-v)/(2*m*y)))/2),_=g/y,b=g/m;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*l)),this._+="A"+i+","+i+",0,0,"+ +(l*h>c*p)+","+(this._x1=t+b*s)+","+(this._y1=e+b*u)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,n,r,i,o){t=+t,e=+e,n=+n;var a=n*Math.cos(r),s=n*Math.sin(r),u=t+a,c=e+s,l=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+c:(Math.abs(this._x1-u)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+u+","+c),n&&(f>Gp?this._+="A"+n+","+n+",0,1,"+l+","+(t-a)+","+(e-s)+"A"+n+","+n+",0,1,"+l+","+(this._x1=u)+","+(this._y1=c):(f<0&&(f=f%Vp+Vp),this._+="A"+n+","+n+",0,"+ +(f>=Bp)+","+l+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Hp=function(){function t(){var t,s=Up.call(arguments),u=e.apply(this,s),c=n.apply(this,s),l=+r.apply(this,(s[0]=u,s)),f=i.apply(this,s)-Dp,h=o.apply(this,s)-Dp,p=l*Pp(f),d=l*Np(f),v=+r.apply(this,(s[0]=c,s)),m=i.apply(this,s)-Dp,y=o.apply(this,s)-Dp;if(a||(a=t=Nn()),a.moveTo(p,d),a.arc(0,0,l,f,h),f===m&&h===y||(a.quadraticCurveTo(0,0,v*Pp(m),v*Np(m)),a.arc(0,0,v,m,y)),a.quadraticCurveTo(0,0,p,d),a.closePath(),t)return a=null,t+""||null}var e=Cn,n=Dn,r=jn,i=Ln,o=Fn,a=null;return t.radius=function(e){return arguments.length?(r="function"==typeof e?e:zp(+e),t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:zp(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:zp(+e),t):o},t.source=function(n){return arguments.length?(e=n,t):e},t.target=function(e){return arguments.length?(n=e,t):n},t.context=function(e){return arguments.length?(a=null==e?null:e,t):a},t};Un.prototype=zn.prototype={constructor:Un,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Wp=function(){function t(e,i,a,s){if(i>=o.length)return null!=r?r(e):null!=n?e.sort(n):e;for(var u,c,l,f=-1,h=e.length,p=o[i++],d=zn(),v=a();++f<h;)(l=d.get(u=p(c=e[f])+""))?l.push(c):d.set(u,[c]);return d.each(function(e,n){s(v,n,t(e,i,a,s))}),v}function e(t,n){if(++n>o.length)return t;var i,s=a[n-1];return null!=r&&n>=o.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=s?i.sort(function(t,e){return s(t.key,e.key)}):i}var n,r,i,o=[],a=[];return i={object:function(e){return t(e,0,Bn,Vn)},map:function(e){return t(e,0,Gn,Hn)},entries:function(n){return e(t(n,0,Gn,Hn),0)},key:function(t){return o.push(t),i},sortKeys:function(t){return a[o.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}},qp=zn.prototype;Wn.prototype=qn.prototype={constructor:Wn,has:qp.has,add:function(t){return t+="",this["$"+t]=t,this},remove:qp.remove,clear:qp.clear,values:qp.keys,size:qp.size,empty:qp.empty,each:qp.each};var Yp=function(t){var e=[];for(var n in t)e.push(n);return e},Xp=function(t){var e=[];for(var n in t)e.push(t[n]);return e},Zp=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},Kp=function(t){function e(t,e){var r,i,o=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?Xn(t,e):Yn(t)});return o.columns=i,o}function n(t,e){function n(){if(l>=c)return a;if(i)return i=!1,o;var e,n=l;if(34===t.charCodeAt(n)){for(var r=n;r++<c;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return l=r+2,e=t.charCodeAt(r+1),13===e?(i=!0,10===t.charCodeAt(r+2)&&++l):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"')}for(;l<c;){var s=1;if(e=t.charCodeAt(l++),10===e)i=!0;else if(13===e)i=!0,10===t.charCodeAt(l)&&(++l,++s);else if(e!==u)continue;return t.slice(n,l-s)}return t.slice(n)}for(var r,i,o={},a={},s=[],c=t.length,l=0,f=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,f++))||s.push(h)}return s}function r(e,n){return null==n&&(n=Zn(e)),[n.map(a).join(t)].concat(e.map(function(e){return n.map(function(t){return a(e[t])}).join(t)})).join("\n")}function i(t){return t.map(o).join("\n")}function o(e){return e.map(a).join(t)}function a(t){return null==t?"":s.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),u=t.charCodeAt(0);return{parse:e,parseRows:n,format:r,formatRows:i}},Qp=Kp(","),Jp=Qp.parse,$p=Qp.parseRows,td=Qp.format,ed=Qp.formatRows,nd=Kp("\t"),rd=nd.parse,id=nd.parseRows,od=nd.format,ad=nd.formatRows,sd=function(t,e){function n(){var n,i,o=r.length,a=0,s=0;for(n=0;n<o;++n)i=r[n],a+=i.x,s+=i.y;for(a=a/o-t,s=s/o-e,n=0;n<o;++n)i=r[n],i.x-=a,i.y-=s}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n},ud=function(t){return function(){return t}},cd=function(){return 1e-6*(Math.random()-.5)},ld=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Kn(this.cover(e,n),e,n,t)},fd=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>o))return this;var a,s,u=i-n,c=this._root;switch(s=(e<(r+o)/2)<<1|t<(n+i)/2){case 0:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,o=r+u,t>i||e>o);break;case 1:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,o=r+u,n>t||e>o);break;case 2:do a=new Array(4),a[s]=c,c=a;while(u*=2,i=n+u,r=o-u,t>i||r>e);break;case 3:do a=new Array(4),a[s]=c,c=a;while(u*=2,n=i-u,r=o-u,n>t||r>e)}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},hd=function(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t},pd=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},dd=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i},vd=function(t,e,n){var r,i,o,a,s,u,c,l=this._x0,f=this._y0,h=this._x1,p=this._y1,d=[],v=this._root;for(v&&d.push(new dd(v,l,f,h,p)),null==n?n=1/0:(l=t-n,f=e-n,h=t+n,p=e+n,n*=n);u=d.pop();)if(!(!(v=u.node)||(i=u.x0)>h||(o=u.y0)>p||(a=u.x1)<l||(s=u.y1)<f))if(v.length){var m=(i+a)/2,y=(o+s)/2;d.push(new dd(v[3],m,y,a,s),new dd(v[2],i,y,m,s),new dd(v[1],m,o,a,y),new dd(v[0],i,o,m,y)),(c=(e>=y)<<1|t>=m)&&(u=d[d.length-1],d[d.length-1]=d[d.length-1-c],d[d.length-1-c]=u)}else{var g=t-+this._x.call(null,v.data),_=e-+this._y.call(null,v.data),b=g*g+_*_;if(b<n){var w=Math.sqrt(n=b);l=t-w,f=e-w,h=t+w,p=e+w,r=v.data}}return r},md=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,n,r,i,o,a,s,u,c,l,f,h,p=this._root,d=this._x0,v=this._y0,m=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((c=o>=(s=(d+m)/2))?d=s:m=s,(l=a>=(u=(v+y)/2))?v=u:y=u,e=p,!(p=p[f=l<<1|c]))return this;if(!p.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(n=e,h=f)}for(;p.data!==t;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):e?(i?e[f]=i:delete e[f],(p=e[0]||e[1]||e[2]||e[3])&&p===(e[3]||e[2]||e[1]||e[0])&&!p.length&&(n?n[h]=p:this._root=p),this):(this._root=i,this)},yd=function(){return this._root},gd=function(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t},_d=function(t){var e,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new dd(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,r=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(r+o)/2,l=(i+a)/2;(n=u[3])&&s.push(new dd(n,c,l,o,a)),(n=u[2])&&s.push(new dd(n,r,l,c,a)),(n=u[1])&&s.push(new dd(n,c,i,o,l)),(n=u[0])&&s.push(new dd(n,r,i,c,l))}return this},bd=function(t){var e,n=[],r=[];for(this._root&&n.push(new dd(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,l=(a+u)/2,f=(s+c)/2;(o=i[0])&&n.push(new dd(o,a,s,l,f)),(o=i[1])&&n.push(new dd(o,l,s,u,f)),(o=i[2])&&n.push(new dd(o,a,f,l,c)),(o=i[3])&&n.push(new dd(o,l,f,u,c))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},wd=function(t){return arguments.length?(this._x=t,this):this._x},xd=function(t){return arguments.length?(this._y=t,this):this._y},Ed=er.prototype=nr.prototype;Ed.copy=function(){var t,e,n=new nr(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=rr(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=rr(e));return n},Ed.add=ld,Ed.addAll=Qn,Ed.cover=fd,Ed.data=hd,Ed.extent=pd,Ed.find=vd,Ed.remove=md,Ed.removeAll=Jn,Ed.root=yd,Ed.size=gd,Ed.visit=_d,Ed.visitAfter=bd,Ed.x=wd,Ed.y=xd;var Td,Sd=function(t){function e(){function t(t,e,n,r,i){var o=t.data,s=t.r,p=f+s;{if(!o)return e>c+p||r<c-p||n>l+p||i<l-p;if(o.index>u.index){var d=c-o.x-o.vx,v=l-o.y-o.vy,m=d*d+v*v;m<p*p&&(0===d&&(d=cd(),m+=d*d),0===v&&(v=cd(),m+=v*v),m=(p-(m=Math.sqrt(m)))/m*a,u.vx+=(d*=m)*(p=(s*=s)/(h+s)),u.vy+=(v*=m)*p,o.vx-=d*(p=1-p),o.vy-=v*p)}}}for(var e,r,u,c,l,f,h,p=i.length,d=0;d<s;++d)for(r=er(i,ir,or).visitAfter(n),e=0;e<p;++e)u=i[e],f=o[u.index],h=f*f,c=u.x+u.vx,l=u.y+u.vy,r.visit(t)}function n(t){if(t.data)return t.r=o[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(i){var e,n,r=i.length;for(o=new Array(r),e=0;e<r;++e)n=i[e],o[n.index]=+t(n,e,i)}}var i,o,a=1,s=1;return"function"!=typeof t&&(t=ud(null==t?1:+t)),e.initialize=function(t){i=t,r()},e.iterations=function(t){return arguments.length?(s=+t,e):s},e.strength=function(t){return arguments.length?(a=+t,e):a},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:ud(+n),r(),e):t},e},Md=function(t){function e(t){return 1/Math.min(c[t.source.index],c[t.target.index])}function n(e){for(var n=0,r=t.length;n<d;++n)for(var i,o,u,c,f,h,p,v=0;v<r;++v)i=t[v],o=i.source,u=i.target,c=u.x+u.vx-o.x-o.vx||cd(),f=u.y+u.vy-o.y-o.vy||cd(),h=Math.sqrt(c*c+f*f),h=(h-s[v])/h*e*a[v],c*=h,f*=h,u.vx-=c*(p=l[v]),u.vy-=f*p,o.vx+=c*(p=1-p),o.vy+=f*p}function r(){if(u){var e,n,r=u.length,h=t.length,p=zn(u,f);for(e=0,c=new Array(r);e<h;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=sr(p,n.source)),"object"!=typeof n.target&&(n.target=sr(p,n.target)),c[n.source.index]=(c[n.source.index]||0)+1,c[n.target.index]=(c[n.target.index]||0)+1;for(e=0,l=new Array(h);e<h;++e)n=t[e],l[e]=c[n.source.index]/(c[n.source.index]+c[n.target.index]);a=new Array(h),i(),s=new Array(h),o()}}function i(){if(u)for(var e=0,n=t.length;e<n;++e)a[e]=+h(t[e],e,t)}function o(){if(u)for(var e=0,n=t.length;e<n;++e)s[e]=+p(t[e],e,t)}var a,s,u,c,l,f=ar,h=e,p=ud(30),d=1;return null==t&&(t=[]),n.initialize=function(t){u=t,r()},n.links=function(e){return arguments.length?(t=e,r(),n):t},n.id=function(t){return arguments.length?(f=t,n):f},n.iterations=function(t){return arguments.length?(d=+t,n):d},
n.strength=function(t){return arguments.length?(h="function"==typeof t?t:ud(+t),i(),n):h},n.distance=function(t){return arguments.length?(p="function"==typeof t?t:ud(+t),o(),n):p},n},Od=Math.PI*(3-Math.sqrt(5)),Ad=function(t){function e(){n(),d.call("tick",o),a<s&&(h.stop(),d.call("end",o))}function n(){var e,n,r=t.length;for(a+=(c-a)*u,f.each(function(t){t(a)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=l:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=l:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),o=n*Od;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var o,a=1,s=.001,u=1-Math.pow(s,1/300),c=0,l=.6,f=zn(),h=ve(e),d=p("tick","end");return null==t&&(t=[]),r(),o={tick:n,restart:function(){return h.restart(e),o},stop:function(){return h.stop(),o},nodes:function(e){return arguments.length?(t=e,r(),f.each(i),o):t},alpha:function(t){return arguments.length?(a=+t,o):a},alphaMin:function(t){return arguments.length?(s=+t,o):s},alphaDecay:function(t){return arguments.length?(u=+t,o):+u},alphaTarget:function(t){return arguments.length?(c=+t,o):c},velocityDecay:function(t){return arguments.length?(l=1-t,o):1-l},force:function(t,e){return arguments.length>1?(null==e?f.remove(t):f.set(t,i(e)),o):f.get(t)},find:function(e,n,r){var i,o,a,s,u,c=0,l=t.length;for(null==r?r=1/0:r*=r,c=0;c<l;++c)s=t[c],i=e-s.x,o=n-s.y,a=i*i+o*o,a<r&&(u=s,r=a);return u},on:function(t,e){return arguments.length>1?(d.on(t,e),o):d.on(t)}}},Rd=function(){function t(t){var e,s=i.length,u=er(i,ur,cr).visitAfter(n);for(a=t,e=0;e<s;++e)o=i[e],u.visit(r)}function e(){if(i){var t,e,n=i.length;for(s=new Array(n),t=0;t<n;++t)e=i[t],s[e.index]=+u(e,t,i)}}function n(t){var e,n,r,i,o,a=0;if(t.length){for(r=i=o=0;o<4;++o)(e=t[o])&&(n=e.value)&&(a+=n,r+=n*e.x,i+=n*e.y);t.x=r/a,t.y=i/a}else{e=t,e.x=e.data.x,e.y=e.data.y;do a+=s[e.data.index];while(e=e.next)}t.value=a}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-o.x,u=t.y-o.y,h=r-e,p=i*i+u*u;if(h*h/f<p)return p<l&&(0===i&&(i=cd(),p+=i*i),0===u&&(u=cd(),p+=u*u),p<c&&(p=Math.sqrt(c*p)),o.vx+=i*t.value*a/p,o.vy+=u*t.value*a/p),!0;if(!(t.length||p>=l)){(t.data!==o||t.next)&&(0===i&&(i=cd(),p+=i*i),0===u&&(u=cd(),p+=u*u),p<c&&(p=Math.sqrt(c*p)));do t.data!==o&&(h=s[t.data.index]*a/p,o.vx+=i*h,o.vy+=u*h);while(t=t.next)}}var i,o,a,s,u=ud(-30),c=1,l=1/0,f=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(u="function"==typeof n?n:ud(+n),e(),t):u},t.distanceMin=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.distanceMax=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t.theta=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t},Id=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vx+=(o[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=ud(.1);return"function"!=typeof t&&(t=ud(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:ud(+t),n(),e):a},e.x=function(r){return arguments.length?(t="function"==typeof r?r:ud(+r),n(),e):t},e},kd=function(t){function e(t){for(var e,n=0,a=r.length;n<a;++n)e=r[n],e.vy+=(o[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),o=new Array(n),e=0;e<n;++e)i[e]=isNaN(o[e]=+t(r[e],e,r))?0:+a(r[e],e,r)}}var r,i,o,a=ud(.1);return"function"!=typeof t&&(t=ud(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(a="function"==typeof t?t:ud(+t),n(),e):a},e.y=function(r){return arguments.length?(t="function"==typeof r?r:ud(+r),n(),e):t},e},Pd=function(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]},Nd=function(t){return t=Pd(Math.abs(t)),t?t[1]:NaN},Cd=function(t,e){return function(n,r){for(var i=n.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(n.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(e)}},Dd=function(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,o=-1;i<r;++i)switch(t[i]){case".":o=n=i;break;case"0":0===o&&(o=i),n=i;break;case"e":break t;default:o>0&&(o=0)}return o>0?t.slice(0,o)+t.slice(n+1):t},jd=function(t,e){var n=Pd(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Td=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Pd(t,Math.max(0,e+o-1))[0]},Ld=function(t,e){var n=Pd(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Fd={"":Dd,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return Ld(100*t,e)},r:Ld,s:jd,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},Ud=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i,zd=function(t){return new lr(t)};lr.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var Bd,Vd=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Gd=function(t){function e(t){function e(t){var e,i,u,g=d,_=v;if("c"===p)_=m(t)+_,t="";else{t=+t;var b=(t<0||1/t<0)&&(t*=-1,!0);if(t=m(t,h),b)for(e=-1,i=t.length,b=!1;++e<i;)if(u=t.charCodeAt(e),48<u&&u<58||"x"===p&&96<u&&u<103||"X"===p&&64<u&&u<71){b=!0;break}if(g=(b?"("===s?s:"-":"-"===s||"("===s?"":s)+g,_=_+("s"===p?Vd[8+Td/3]:"")+(b&&"("===s?")":""),y)for(e=-1,i=t.length;++e<i;)if(u=t.charCodeAt(e),48>u||u>57){_=(46===u?o+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}f&&!c&&(t=r(t,1/0));var w=g.length+t.length+_.length,x=w<l?new Array(l-w+1).join(n):"";switch(f&&c&&(t=r(x+t,x.length?l-_.length:1/0),x=""),a){case"<":return g+t+_+x;case"=":return g+x+t+_;case"^":return x.slice(0,w=x.length>>1)+g+t+_+x.slice(w)}return x+g+t+_}t=zd(t);var n=t.fill,a=t.align,s=t.sign,u=t.symbol,c=t.zero,l=t.width,f=t.comma,h=t.precision,p=t.type,d="$"===u?i[0]:"#"===u&&/[boxX]/.test(p)?"0"+p.toLowerCase():"",v="$"===u?i[1]:/[%p]/.test(p)?"%":"",m=Fd[p],y=!p||/[defgprs%]/.test(p);return h=null==h?p?6:12:/[gprs]/.test(p)?Math.max(1,Math.min(21,h)):Math.max(0,Math.min(20,h)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=zd(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(Nd(n)/3))),o=Math.pow(10,-i),a=Vd[8+i/3];return function(t){return r(o*t)+a}}var r=t.grouping&&t.thousands?Cd(t.grouping,t.thousands):fr,i=t.currency,o=t.decimal;return{format:e,formatPrefix:n}};hr({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Hd=function(t){return Math.max(0,-Nd(Math.abs(t)))},Wd=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Nd(e)/3)))-Nd(Math.abs(t)))},qd=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Nd(e)-Nd(t))+1},Yd=function(){return new pr};pr.prototype={constructor:pr,reset:function(){this.s=this.t=0},add:function(t){dr(Sv,t,this.t),dr(this,Sv.s,this.s),this.s?this.t+=Sv.t:this.s=Sv.t},valueOf:function(){return this.s}};var Xd,Zd,Kd,Qd,Jd,$d,tv,ev,nv,rv,iv,ov,av,sv,uv,cv,lv,fv,hv,pv,dv,vv,mv,yv,gv,_v,bv,wv,xv,Ev,Tv,Sv=new pr,Mv=Math.PI,Ov=Mv/2,Av=Mv/4,Rv=2*Mv,Iv=180/Mv,kv=Mv/180,Pv=Math.abs,Nv=Math.atan,Cv=Math.atan2,Dv=Math.cos,jv=Math.ceil,Lv=Math.exp,Fv=Math.log,Uv=Math.pow,zv=Math.sin,Bv=Math.sign||function(t){return t>0?1:t<0?-1:0},Vv=Math.sqrt,Gv=Math.tan,Hv={Feature:function(t,e){_r(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)_r(n[r].geometry,e)}},Wv={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){br(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)br(n[r],e,0)},Polygon:function(t,e){wr(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)wr(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)_r(n[r],e)}},qv=function(t,e){t&&Hv.hasOwnProperty(t.type)?Hv[t.type](t,e):_r(t,e)},Yv=Yd(),Xv=Yd(),Zv={point:gr,lineStart:gr,lineEnd:gr,polygonStart:function(){Yv.reset(),Zv.lineStart=xr,Zv.lineEnd=Er},polygonEnd:function(){var t=+Yv;Xv.add(t<0?Rv+t:t),this.lineStart=this.lineEnd=this.point=gr},sphere:function(){Xv.add(Rv)}},Kv=function(t){return Xv.reset(),qv(t,Zv),2*Xv},Qv=Yd(),Jv={point:Nr,lineStart:Dr,lineEnd:jr,polygonStart:function(){Jv.point=Lr,Jv.lineStart=Fr,Jv.lineEnd=Ur,Qv.reset(),Zv.polygonStart()},polygonEnd:function(){Zv.polygonEnd(),Jv.point=Nr,Jv.lineStart=Dr,Jv.lineEnd=jr,Yv<0?($d=-(ev=180),tv=-(nv=90)):Qv>1e-6?nv=90:Qv<-1e-6&&(tv=-90),uv[0]=$d,uv[1]=ev}},$v=function(t){var e,n,r,i,o,a,s;if(nv=ev=-($d=tv=1/0),sv=[],qv(t,Jv),n=sv.length){for(sv.sort(Br),e=1,r=sv[0],o=[r];e<n;++e)i=sv[e],Vr(r,i[0])||Vr(r,i[1])?(zr(r[0],i[1])>zr(r[0],r[1])&&(r[1]=i[1]),zr(i[0],r[1])>zr(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-(1/0),n=o.length-1,e=0,r=o[n];e<=n;r=i,++e)i=o[e],(s=zr(r[1],i[0]))>a&&(a=s,$d=i[0],ev=r[1])}return sv=uv=null,$d===1/0||tv===1/0?[[NaN,NaN],[NaN,NaN]]:[[$d,tv],[ev,nv]]},tm={sphere:gr,point:Gr,lineStart:Wr,lineEnd:Xr,polygonStart:function(){tm.lineStart=Zr,tm.lineEnd=Kr},polygonEnd:function(){tm.lineStart=Wr,tm.lineEnd=Xr}},em=function(t){cv=lv=fv=hv=pv=dv=vv=mv=yv=gv=_v=0,qv(t,tm);var e=yv,n=gv,r=_v,i=e*e+n*n+r*r;return i<1e-12&&(e=dv,n=vv,r=mv,lv<1e-6&&(e=fv,n=hv,r=pv),i=e*e+n*n+r*r,i<1e-12)?[NaN,NaN]:[Cv(n,e)*Iv,mr(r/Vv(i))*Iv]},nm=function(t){return function(){return t}},rm=function(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n};$r.invert=$r;var im,om,am,sm,um,cm,lm,fm,hm,pm,dm,vm=function(t){function e(e){return e=t(e[0]*kv,e[1]*kv),e[0]*=Iv,e[1]*=Iv,e}return t=ti(t[0]*kv,t[1]*kv,t.length>2?t[2]*kv:0),e.invert=function(e){return e=t.invert(e[0]*kv,e[1]*kv),e[0]*=Iv,e[1]*=Iv,e},e},mm=function(){function t(t,e){n.push(t=r(t,e)),t[0]*=Iv,t[1]*=Iv}function e(){var t=i.apply(this,arguments),e=o.apply(this,arguments)*kv,u=a.apply(this,arguments)*kv;return n=[],r=ti(-t[0]*kv,-t[1]*kv,0).invert,ii(s,e,u,1),t={type:"Polygon",coordinates:[n]},n=r=null,t}var n,r,i=nm([0,0]),o=nm(90),a=nm(6),s={point:t};return e.center=function(t){return arguments.length?(i="function"==typeof t?t:nm([+t[0],+t[1]]),e):i},e.radius=function(t){return arguments.length?(o="function"==typeof t?t:nm(+t),e):o},e.precision=function(t){return arguments.length?(a="function"==typeof t?t:nm(+t),e):a},e},ym=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:gr,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},gm=function(t,e,n,r,i,o){var a,s=t[0],u=t[1],c=e[0],l=e[1],f=0,h=1,p=c-s,d=l-u;if(a=n-s,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=i-s,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<f)return;a<h&&(h=a)}else if(d>0){if(a>h)return;a>f&&(f=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>h)return;a>f&&(f=a)}else if(d>0){if(a<f)return;a<h&&(h=a)}return f>0&&(t[0]=s+f*p,t[1]=u+f*d),h<1&&(e[0]=s+h*p,e[1]=u+h*d),!0}}}}},_m=function(t,e){return Pv(t[0]-e[0])<1e-6&&Pv(t[1]-e[1])<1e-6},bm=function(t,e,n,r,i){var o,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],a=t[e];if(_m(r,a)){for(i.lineStart(),o=0;o<e;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}s.push(n=new ai(r,t,null,!0)),u.push(n.o=new ai(r,null,n,!1)),s.push(n=new ai(a,t,null,!1)),u.push(n.o=new ai(a,null,n,!0))}}),s.length){for(u.sort(e),si(s),si(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var c,l,f=s[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(o=0,a=c.length;o<a;++o)i.point((l=c[o])[0],l[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p)for(c=h.p.z,o=c.length-1;o>=0;--o)i.point((l=c[o])[0],l[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}},wm=function(){var t,e,n,r=0,i=0,o=960,a=500;return n={stream:function(n){return t&&e===n?t:t=ui(r,i,o,a)(e=n)},extent:function(s){return arguments.length?(r=+s[0][0],i=+s[0][1],o=+s[1][0],a=+s[1][1],t=e=null,n):[[r,i],[o,a]]}}},xm=Yd(),Em={sphere:gr,point:gr,lineStart:ci,lineEnd:gr,polygonStart:gr,polygonEnd:gr},Tm=function(t){return xm.reset(),qv(t,Em),+xm},Sm=[null,null],Mm={type:"LineString",coordinates:Sm},Om=function(t,e){return Sm[0]=t,Sm[1]=e,Tm(Mm)},Am=function(t,e){var n=t[0]*kv,r=t[1]*kv,i=e[0]*kv,o=e[1]*kv,a=Dv(r),s=zv(r),u=Dv(o),c=zv(o),l=a*Dv(n),f=a*zv(n),h=u*Dv(i),p=u*zv(i),d=2*mr(Vv(yr(o-r)+a*u*yr(i-n))),v=zv(d),m=d?function(t){var e=zv(t*=d)/v,n=zv(d-t)/v,r=n*l+e*h,i=n*f+e*p,o=n*s+e*c;return[Cv(i,r)*Iv,Cv(o,Vv(r*r+i*i))*Iv]}:function(){return[n*Iv,r*Iv]};return m.distance=d,m},Rm=function(t){return t},Im=Yd(),km=Yd(),Pm={point:gr,lineStart:gr,lineEnd:gr,polygonStart:function(){Pm.lineStart=yi,Pm.lineEnd=bi},polygonEnd:function(){Pm.lineStart=Pm.lineEnd=Pm.point=gr,Im.add(Pv(km)),km.reset()},result:function(){var t=Im/2;return Im.reset(),t}},Nm=1/0,Cm=Nm,Dm=-Nm,jm=Dm,Lm={point:wi,lineStart:gr,lineEnd:gr,polygonStart:gr,polygonEnd:gr,result:function(){var t=[[Nm,Cm],[Dm,jm]];return Dm=jm=-(Cm=Nm=1/0),t}},Fm=0,Um=0,zm=0,Bm=0,Vm=0,Gm=0,Hm=0,Wm=0,qm=0,Ym={point:xi,lineStart:Ei,lineEnd:Mi,polygonStart:function(){Ym.lineStart=Oi,Ym.lineEnd=Ai},polygonEnd:function(){Ym.point=xi,Ym.lineStart=Ei,Ym.lineEnd=Mi},result:function(){var t=qm?[Hm/qm,Wm/qm]:Gm?[Bm/Gm,Vm/Gm]:zm?[Fm/zm,Um/zm]:[NaN,NaN];return Fm=Um=zm=Bm=Vm=Gm=Hm=Wm=qm=0,t}};ki.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Rv)}},result:gr};var Xm,Zm,Km,Qm,Jm,$m=Yd(),ty={point:gr,lineStart:function(){ty.point=Pi},lineEnd:function(){Xm&&Ni(Zm,Km),ty.point=gr},polygonStart:function(){Xm=!0},polygonEnd:function(){Xm=null},result:function(){var t=+$m;return $m.reset(),t}};Ci.prototype={_circle:Di(4.5),pointRadius:function(t){return this._circle=Di(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}}};var ey=function(t,e){function n(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),qv(t,r(i))),i.result()}var r,i,o=4.5;return n.area=function(t){return qv(t,r(Pm)),Pm.result()},n.measure=function(t){return qv(t,r(ty)),ty.result()},n.bounds=function(t){return qv(t,r(Lm)),Lm.result()},n.centroid=function(t){return qv(t,r(Ym)),Ym.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,Rm):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new Ci):new ki(e=t),"function"!=typeof o&&i.pointRadius(o),n):e},n.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),n):o},n.projection(t).context(e)},ny=Yd(),ry=function(t,e){var n=e[0],r=e[1],i=[zv(n),-Dv(n),0],o=0,a=0;ny.reset();for(var s=0,u=t.length;s<u;++s)if(l=(c=t[s]).length)for(var c,l,f=c[l-1],h=f[0],p=f[1]/2+Av,d=zv(p),v=Dv(p),m=0;m<l;++m,h=g,d=b,v=w,f=y){var y=c[m],g=y[0],_=y[1]/2+Av,b=zv(_),w=Dv(_),x=g-h,E=x>=0?1:-1,T=E*x,S=T>Mv,M=d*b;if(ny.add(Cv(M*E*zv(T),v*w+M*Dv(T))),o+=S?x+E*Rv:x,S^h>=n^g>=n){var O=Rr(Or(f),Or(y));Pr(O);var A=Rr(i,O);Pr(A);var R=(S^x>=0?-1:1)*mr(A[2]);(r>R||r===R&&(O[0]||O[1]))&&(a+=S^x>=0?1:-1)}}return(o<-1e-6||o<1e-6&&ny<-1e-6)^1&a},iy=function(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);m.point(n[0],n[1])}function u(){w.point=s,m.lineStart()}function c(){w.point=a,m.lineEnd()}function l(t,e){v.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function f(){_.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),a=g.result(),s=a.length;if(v.pop(),p.push(v),v=null,s)if(1&i){if(n=a[0],(e=n.length-1)>0){for(b||(o.polygonStart(),b=!0),o.lineStart(),t=0;t<e;++t)o.point((r=n[t])[0],r[1]);o.lineEnd()}}else s>1&&2&i&&a.push(a.pop().concat(a.shift())),d.push(a.filter(ji))}var p,d,v,m=e(o),y=i.invert(r[0],r[1]),g=ym(),_=e(g),b=!1,w={point:a,lineStart:u,lineEnd:c,polygonStart:function(){w.point=l,w.lineStart=f,w.lineEnd=h,d=[],p=[]},polygonEnd:function(){w.point=a,w.lineStart=u,w.lineEnd=c,d=tl(d);var t=ry(p,y);d.length?(b||(o.polygonStart(),b=!0),bm(d,Li,t,n,o)):t&&(b||(o.polygonStart(),b=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),b&&(o.polygonEnd(),b=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};return w}},oy=iy(function(){return!0},Fi,zi,[-Mv,-Ov]),ay=function(t,e){function n(n,r,i,o){ii(o,t,e,i,n,r)}function r(t,e){return Dv(t)*Dv(e)>s}function i(t){var e,n,i,s,l;return{lineStart:function(){s=i=!1,l=1},point:function(f,h){var p,d=[f,h],v=r(f,h),m=u?v?0:a(f,h):v?a(f+(f<0?Mv:-Mv),h):0;if(!e&&(s=i=v)&&t.lineStart(),v!==i&&(p=o(e,d),(_m(e,p)||_m(d,p))&&(d[0]+=1e-6,d[1]+=1e-6,v=r(d[0],d[1]))),v!==i)l=0,v?(t.lineStart(),p=o(d,e),t.point(p[0],p[1])):(p=o(e,d),t.point(p[0],p[1]),t.lineEnd()),e=p;else if(c&&e&&u^v){var y;m&n||!(y=o(d,e,!0))||(l=0,u?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||e&&_m(e,d)||t.point(d[0],d[1]),e=d,i=v,n=m},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return l|(s&&i)<<1}}}function o(t,e,n){var r=Or(t),i=Or(e),o=[1,0,0],a=Rr(r,i),u=Ar(a,a),c=a[0],l=u-c*c;if(!l)return!n&&t;var f=s*u/l,h=-s*c/l,p=Rr(o,a),d=kr(o,f);Ir(d,kr(a,h));var v=p,m=Ar(d,v),y=Ar(v,v),g=m*m-y*(Ar(d,d)-1);if(!(g<0)){var _=Vv(g),b=kr(v,(-m-_)/y);if(Ir(b,d),b=Mr(b),!n)return b;var w,x=t[0],E=e[0],T=t[1],S=e[1];E<x&&(w=x,x=E,E=w);var M=E-x,O=Pv(M-Mv)<1e-6,A=O||M<1e-6;if(!O&&S<T&&(w=T,T=S,S=w),A?O?T+S>0^b[1]<(Pv(b[0]-x)<1e-6?T:S):T<=b[1]&&b[1]<=S:M>Mv^(x<=b[0]&&b[0]<=E)){var R=kr(v,(-m+_)/y);return Ir(R,d),[b,Mr(R)]}}}function a(e,n){var r=u?t:Mv-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var s=Dv(t),u=s>0,c=Pv(s)>1e-6;return iy(r,i,n,u?[0,-t]:[-Mv,t-Mv])},sy=function(t){return{stream:Bi(t)}};Vi.prototype={constructor:Vi,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var uy=Dv(30*kv),cy=function(t,e){return+e?qi(t,e):Wi(t)},ly=Bi({point:function(t,e){this.stream.point(t*kv,e*kv)}}),fy=function(){return Zi(Qi).scale(155.424).center([0,33.6442])},hy=function(){return fy().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},py=function(){function t(t){var e=t[0],n=t[1];return s=null,i.point(e,n),s||(o.point(e,n),s)||(a.point(e,n),s)}function e(){return n=r=null,t}var n,r,i,o,a,s,u=hy(),c=fy().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=fy().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,e){s=[t,e]}};return t.invert=function(t){var e=u.scale(),n=u.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:u).invert(t)},t.stream=function(t){return n&&r===t?n:n=Ji([u.stream(r=t),c.stream(t),l.stream(t)])},t.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),l.precision(t),e()):u.precision()},t.scale=function(e){return arguments.length?(u.scale(e),c.scale(.35*e),l.scale(e),t.translate(u.translate())):u.scale()},t.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),r=+t[0],s=+t[1];return i=u.translate(t).clipExtent([[r-.455*n,s-.238*n],[r+.455*n,s+.238*n]]).stream(f),o=c.translate([r-.307*n,s+.201*n]).clipExtent([[r-.425*n+1e-6,s+.12*n+1e-6],[r-.214*n-1e-6,s+.234*n-1e-6]]).stream(f),a=l.translate([r-.205*n,s+.212*n]).clipExtent([[r-.214*n+1e-6,s+.166*n+1e-6],[r-.115*n-1e-6,s+.234*n-1e-6]]).stream(f),e()},t.fitExtent=function(e,n){return Gi(t,e,n)},t.fitSize=function(e,n){return Hi(t,e,n)},t.scale(1070)},dy=$i(function(t){return Vv(2/(1+t))});dy.invert=to(function(t){return 2*mr(t/2)});var vy=function(){return Yi(dy).scale(124.75).clipAngle(179.999)},my=$i(function(t){return(t=vr(t))&&t/zv(t)});my.invert=to(function(t){return t});var yy=function(){return Yi(my).scale(79.4188).clipAngle(179.999)};eo.invert=function(t,e){return[t,2*Nv(Lv(e))-Ov]};var gy=function(){return no(eo).scale(961/Rv)},_y=function(){return Zi(io).scale(109.5).parallels([30,30])};oo.invert=oo;var by=function(){return Yi(oo).scale(152.63)},wy=function(){return Zi(ao).scale(131.154).center([0,13.9389])};so.invert=to(Nv);var xy=function(){return Yi(so).scale(144.049).clipAngle(60)},Ey=function(){function t(){return i=o=null,a}var e,n,r,i,o,a,s=1,u=0,c=0,l=1,f=1,h=Rm,p=null,d=Rm;return a={stream:function(t){return i&&o===t?i:i=h(d(o=t))},clipExtent:function(i){return arguments.length?(d=null==i?(p=e=n=r=null,Rm):ui(p=+i[0][0],e=+i[0][1],n=+i[1][0],r=+i[1][1]),t()):null==p?null:[[p,e],[n,r]]},scale:function(e){return arguments.length?(h=uo((s=+e)*l,s*f,u,c),t()):s},translate:function(e){return arguments.length?(h=uo(s*l,s*f,u=+e[0],c=+e[1]),t()):[u,c]},reflectX:function(e){return arguments.length?(h=uo(s*(l=e?-1:1),s*f,u,c),t()):l<0},reflectY:function(e){return arguments.length?(h=uo(s*l,s*(f=e?-1:1),u,c),t()):f<0},fitExtent:function(t,e){return Gi(a,t,e)},fitSize:function(t,e){return Hi(a,t,e)}}};co.invert=to(mr);var Ty=function(){return Yi(co).scale(249.5).clipAngle(90+1e-6)};lo.invert=to(function(t){return 2*Nv(t)});var Sy=function(){return Yi(lo).scale(250).clipAngle(142)};fo.invert=function(t,e){return[-e,2*Nv(Lv(t))-Ov]};var My=function(){var t=no(fo),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)},Oy=function(){function t(t){var o,a=0;t.eachAfter(function(t){var n=t.children;n?(t.x=po(n),t.y=mo(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=go(t),u=_o(t),c=s.x-e(s,u)/2,l=u.x+e(u,s)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-c)/(l-c)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=ho,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t},Ay=function(){return this.eachAfter(bo)},Ry=function(t){var e,n,r,i,o=this,a=[o];do for(e=a.reverse(),a=[];o=e.pop();)if(t(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);while(a.length);return this},Iy=function(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this},ky=function(t){for(var e,n,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n]);for(;i=a.pop();)t(i);return this},Py=function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},Ny=function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},Cy=function(t){for(var e=this,n=wo(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},Dy=function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},jy=function(){var t=[];return this.each(function(e){t.push(e)}),t},Ly=function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},Fy=function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e};Oo.prototype=xo.prototype={constructor:Oo,count:Ay,each:Ry,eachAfter:ky,eachBefore:Iy,sum:Py,sort:Ny,path:Cy,ancestors:Dy,descendants:jy,leaves:Ly,links:Fy,copy:Eo};var Uy=function(t){for(var e,n=(t=t.slice()).length,r=null,i=r;n;){var o=new Ao(t[n-1]);i=i?i.next=o:r=o,t[e]=t[--n]}return{head:r,tail:i}},zy=function(t){return Io(Uy(t),[])},By=function(t){return Uo(t),t},Vy=function(t){return function(){return t}},Gy=function(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(Ho(e)).eachAfter(Wo(i,.5)).eachBefore(qo(1)):t.eachBefore(Ho(Go)).eachAfter(Wo(Vo,1)).eachAfter(Wo(i,t.r/Math.min(n,r))).eachBefore(qo(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=Vo;return t.radius=function(n){return arguments.length?(e=zo(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:Vy(+e),t):i},t},Hy=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},Wy=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(r-e)/t.value;++s<u;)o=a[s],o.y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c},qy=function(){function t(t){var a=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/a,t.eachBefore(e(r,a)),o&&t.eachBefore(Hy),t}function e(t,e){return function(n){n.children&&Wy(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,o=n.y0,a=n.x1-i,s=n.y1-i;a<r&&(r=a=(r+a)/2),s<o&&(o=s=(o+s)/2),n.x0=r,n.y0=o,n.x1=a,n.y1=s}}var n=1,r=1,i=0,o=!1;return t.round=function(e){return arguments.length?(o=!!e,t):o},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t},Yy={depth:-1},Xy={},Zy=function(){function t(t){var r,i,o,a,s,u,c,l=t.length,f=new Array(l),h={};for(i=0;i<l;++i)r=t[i],s=f[i]=new Oo(r),null!=(u=e(r,i,t))&&(u+="")&&(c="$"+(s.id=u),h[c]=c in h?Xy:s);for(i=0;i<l;++i)if(s=f[i],u=n(t[i],i,t),null!=u&&(u+="")){if(a=h["$"+u],!a)throw new Error("missing: "+u);if(a===Xy)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=Yy,o.eachBefore(function(t){t.depth=t.parent.depth+1,--l}).eachBefore(Mo),o.parent=null,l>0)throw new Error("cycle");return o}var e=Yo,n=Xo;return t.id=function(n){return arguments.length?(e=Bo(n),t):e},t.parentId=function(e){return arguments.length?(n=Bo(e),t):n},t};ea.prototype=Object.create(Oo.prototype);var Ky=function(){function t(t){var r=na(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),u)t.eachBefore(i);else{var c=t,l=t,f=t;t.eachBefore(function(t){t.x<c.x&&(c=t),t.x>l.x&&(l=t),t.depth>f.depth&&(f=t)});var h=c===l?1:o(c,l)/2,p=h-c.x,d=a/(l.x+h+p),v=s/(f.depth||1);t.eachBefore(function(t){t.x=(t.x+p)*d,t.y=t.depth*v})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){$o(t);var a=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+o(t._,i._),t.m=t.z-a):t.z=a}else i&&(t.z=i.z+o(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,a=t,s=e,u=i.parent.children[0],c=i.m,l=a.m,f=s.m,h=u.m;s=Qo(s),i=Ko(i),s&&i;)u=Ko(u),a=Qo(a),a.a=t,r=s.z+f-i.z-c+o(s._,i._),r>0&&(Jo(ta(s,t,n),t,r),c+=r,l+=r),f+=s.m,c+=i.m,h+=u.m,l+=a.m;s&&!Qo(a)&&(a.t=s,a.m+=f-l),i&&!Ko(u)&&(u.t=i,u.m+=c-h,n=t)}return n}function i(t){t.x*=a,t.y=t.depth*s}var o=Zo,a=1,s=1,u=null;return t.separation=function(e){return arguments.length?(o=e,t):o},t.size=function(e){return arguments.length?(u=!1,a=+e[0],s=+e[1],t):u?null:[a,s]},t.nodeSize=function(e){return arguments.length?(u=!0,a=+e[0],s=+e[1],t):u?[a,s]:null},t},Qy=function(t,e,n,r,i){for(var o,a=t.children,s=-1,u=a.length,c=t.value&&(i-n)/t.value;++s<u;)o=a[s],o.x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c},Jy=(1+Math.sqrt(5))/2,$y=function t(e){function n(t,n,r,i,o){ra(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jy),tg=function(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=o,t.eachBefore(e),a=[0],r&&t.eachBefore(Hy),t}function e(t){var e=a[t.depth],r=t.x0+e,i=t.y0+e,o=t.x1-e,h=t.y1-e;o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=o,t.y1=h,t.children&&(e=a[t.depth+1]=s(t)/2,r+=f(t)-e,i+=u(t)-e,o-=c(t)-e,h-=l(t)-e,o<r&&(r=o=(r+o)/2),h<i&&(i=h=(i+h)/2),n(t,r,i,o,h))}var n=$y,r=!1,i=1,o=1,a=[0],s=Vo,u=Vo,c=Vo,l=Vo,f=Vo;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],o=+e[1],t):[i,o]},t.tile=function(e){return arguments.length?(n=Bo(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(s="function"==typeof e?e:Vy(+e),t):s},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(u="function"==typeof e?e:Vy(+e),t):u},t.paddingRight=function(e){return arguments.length?(c="function"==typeof e?e:Vy(+e),t):c},t.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:Vy(+e),t):l},t.paddingLeft=function(e){return arguments.length?(f="function"==typeof e?e:Vy(+e),t):f},t},eg=function(t,e,n,r,i){function o(t,e,n,r,i,a,s){if(t>=e-1){var c=u[t];return c.x0=r,c.y0=i,c.x1=a,c.y1=s,void 0}for(var f=l[t],h=n/2+f,p=t+1,d=e-1;p<d;){var v=p+d>>>1;l[v]<h?p=v+1:d=v}var m=l[p]-f,y=n-m;if(s-i>a-r){var g=(i*y+s*m)/n;o(t,p,m,r,i,a,g),o(p,e,y,r,g,a,s)}else{var _=(r*y+a*m)/n;o(t,p,m,r,i,_,s),o(p,e,y,_,i,a,s)}}var a,s,u=t.children,c=u.length,l=new Array(c+1);for(l[0]=s=a=0;a<c;++a)l[a+1]=s+=u[a].value;o(0,c,t.value,e,n,r,i)},ng=function(t,e,n,r,i){(1&t.depth?Qy:Wy)(t,e,n,r,i)},rg=function t(e){function n(t,n,r,i,o){if((a=t._squarify)&&a.ratio===e)for(var a,s,u,c,l,f=-1,h=a.length,p=t.value;++f<h;){for(s=a[f],u=s.children,c=s.value=0,l=u.length;c<l;++c)s.value+=u[c].value;s.dice?Wy(s,n,r,i,r+=(o-r)*s.value/p):Qy(s,n,r,n+=(i-n)*s.value/p,o),p-=s.value}else t._squarify=a=ra(e,t,n,r,i,o),a.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Jy),ig=function(t){for(var e,n=-1,r=t.length,i=t[r-1],o=0;++n<r;)e=i,i=t[n],o+=e[1]*i[0]-e[0]*i[1];return o/2},og=function(t){for(var e,n,r=-1,i=t.length,o=0,a=0,s=t[i-1],u=0;++r<i;)e=s,s=t[r],u+=n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return u*=3,[o/u,a/u]},ag=function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])},sg=function(t){if((n=t.length)<3)return null;var e,n,r=new Array(n),i=new Array(n);for(e=0;e<n;++e)r[e]=[+t[e][0],+t[e][1],e];for(r.sort(ia),e=0;e<n;++e)i[e]=[r[e][0],-r[e][1]]
;var o=oa(r),a=oa(i),s=a[0]===o[0],u=a[a.length-1]===o[o.length-1],c=[];for(e=o.length-1;e>=0;--e)c.push(t[r[o[e]][2]]);for(e=+s;e<a.length-u;++e)c.push(t[r[a[e]][2]]);return c},ug=function(t,e){for(var n,r,i=t.length,o=t[i-1],a=e[0],s=e[1],u=o[0],c=o[1],l=!1,f=0;f<i;++f)o=t[f],n=o[0],r=o[1],r>s!=c>s&&a<(u-n)*(s-r)/(c-r)+n&&(l=!l),u=n,c=r;return l},cg=function(t){for(var e,n,r=-1,i=t.length,o=t[i-1],a=o[0],s=o[1],u=0;++r<i;)e=a,n=s,o=t[r],a=o[0],s=o[1],e-=a,n-=s,u+=Math.sqrt(e*e+n*n);return u},lg=[].slice,fg={};aa.prototype=ha.prototype={constructor:aa,defer:function(t){if("function"!=typeof t||this._call)throw new Error;if(null!=this._error)return this;var e=lg.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),sa(this),this},abort:function(){return null==this._error&&la(this,new Error("abort")),this},await:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=function(e,n){t.apply(null,[e].concat(n))},fa(this),this},awaitAll:function(t){if("function"!=typeof t||this._call)throw new Error;return this._call=t,fa(this),this}};var hg=function(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return Math.random()*e+t}},pg=function(t,e){var n,r;return t=null==t?0:+t,e=null==e?1:+e,function(){var i;if(null!=n)i=n,n=null;else do n=2*Math.random()-1,i=2*Math.random()-1,r=n*n+i*i;while(!r||r>1);return t+e*i*Math.sqrt(-2*Math.log(r)/r)}},dg=function(){var t=pg.apply(this,arguments);return function(){return Math.exp(t())}},vg=function(t){return function(){for(var e=0,n=0;n<t;++n)e+=Math.random();return e}},mg=function(t){var e=vg(t);return function(){return e()/t}},yg=function(t){return function(){return-Math.log(1-Math.random())/t}},gg=function(t,e){function n(t){var e,n=c.status;if(!n&&da(c)||n>=200&&n<300||304===n){if(o)try{e=o.call(r,c)}catch(t){return void s.call("error",r,t)}else e=c;s.call("load",r,e)}else s.call("error",r,t)}var r,i,o,a,s=p("beforesend","progress","load","error"),u=zn(),c=new XMLHttpRequest,l=null,f=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=n:c.onreadystatechange=function(t){c.readyState>3&&n(t)},c.onprogress=function(t){s.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==e?u.remove(t):u.set(t,e+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(a=t,r):a},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?l:(l=null==t?null:t+"",r)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",r)},response:function(t){return o=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,n,o){return c.open(e,t,!0,l,f),null==i||u.has("accept")||u.set("accept",i+",*/*"),c.setRequestHeader&&u.each(function(t,e){c.setRequestHeader(e,t)}),null!=i&&c.overrideMimeType&&c.overrideMimeType(i),null!=a&&(c.responseType=a),h>0&&(c.timeout=h),null==o&&"function"==typeof n&&(o=n,n=null),null!=o&&1===o.length&&(o=pa(o)),null!=o&&r.on("error",o).on("load",function(t){o(null,t)}),s.call("beforesend",r,c),c.send(null==n?null:n),r},abort:function(){return c.abort(),r},on:function(){var t=s.on.apply(s,arguments);return t===s?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r},_g=function(t,e){return function(n,r){var i=gg(n).mimeType(t).response(e);if(null!=r){if("function"!=typeof r)throw new Error("invalid callback: "+r);return i.get(r)}return i}},bg=_g("text/html",function(t){return document.createRange().createContextualFragment(t.responseText)}),wg=_g("application/json",function(t){return JSON.parse(t.responseText)}),xg=_g("text/plain",function(t){return t.responseText}),Eg=_g("application/xml",function(t){var e=t.responseXML;if(!e)throw new Error("parse error");return e}),Tg=function(t,e){return function(n,r,i){arguments.length<3&&(i=r,r=null);var o=gg(n).mimeType(t);return o.row=function(t){return arguments.length?o.response(va(e,r=t)):r},o.row(r),i?o.get(i):o}},Sg=Tg("text/csv",Jp),Mg=Tg("text/tab-separated-values",rd),Og=Array.prototype,Ag=Og.map,Rg=Og.slice,Ig={name:"implicit"},kg=function(t){return function(){return t}},Pg=function(t){return+t},Ng=[0,1],Cg=function(e,r,i){var o,a=e[0],s=e[e.length-1],u=n(a,s,null==r?10:r);switch(i=zd(null==i?",f":i),i.type){case"s":var c=Math.max(Math.abs(a),Math.abs(s));return null!=i.precision||isNaN(o=Wd(u,c))||(i.precision=o),t.formatPrefix(i,c);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=qd(u,Math.max(Math.abs(a),Math.abs(s))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Hd(u))||(i.precision=o-2*("%"===i.type))}return t.format(i)},Dg=function(t,e){t=t.slice();var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t},jg=new Date,Lg=new Date,Fg=Ga(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Fg.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Ga(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Fg:null};var Ug=Fg.range,zg=Ga(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Bg=zg.range,Vg=Ga(function(t){t.setTime(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getMinutes()}),Gg=Vg.range,Hg=Ga(function(t){var e=6e4*t.getTimezoneOffset()%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Wg=Hg.range,qg=Ga(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5},function(t){return t.getDate()-1}),Yg=qg.range,Xg=Ha(0),Zg=Ha(1),Kg=Ha(2),Qg=Ha(3),Jg=Ha(4),$g=Ha(5),t_=Ha(6),e_=Xg.range,n_=Zg.range,r_=Kg.range,i_=Qg.range,o_=Jg.range,a_=$g.range,s_=t_.range,u_=Ga(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),c_=u_.range,l_=Ga(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});l_.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ga(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var f_=l_.range,h_=Ga(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+6e4*e)},function(t,e){return(e-t)/6e4},function(t){return t.getUTCMinutes()}),p_=h_.range,d_=Ga(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),v_=d_.range,m_=Ga(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),y_=m_.range,g_=Wa(0),__=Wa(1),b_=Wa(2),w_=Wa(3),x_=Wa(4),E_=Wa(5),T_=Wa(6),S_=g_.range,M_=__.range,O_=b_.range,A_=w_.range,R_=x_.range,I_=E_.range,k_=T_.range,P_=Ga(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),N_=P_.range,C_=Ga(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});C_.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Ga(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var D_,j_=C_.range,L_={"-":"",_:" ",0:"0"},F_=/^\s*\d+/,U_=/^%/;Gs({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var z_=Date.prototype.toISOString?Hs:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),B_=+new Date("2000-01-01T00:00:00.000Z")?Ws:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),V_=function(){return Xs(l_,u_,Xg,qg,Hg,Vg,zg,Fg,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},G_=function(){return Xs(C_,P_,g_,m_,d_,h_,zg,Fg,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])},H_=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})},W_=H_("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),q_=H_("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Y_=H_("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),X_=H_("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Z_=vh(Wt(300,.5,0),Wt(-240,.5,1)),K_=vh(Wt(-100,.75,.35),Wt(80,1.5,.8)),Q_=vh(Wt(260,.75,.35),Wt(80,1.5,.8)),J_=Wt(),$_=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return J_.h=360*t-100,J_.s=1.5-1.5*e,J_.l=.8-.9*e,J_+""},tb=Zs(H_("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),eb=Zs(H_("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),nb=Zs(H_("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),rb=Zs(H_("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ib=function(t){return function(){return t}},ob=Math.PI,ab=ob/2,sb=2*ob,ub=function(){function t(){var t,c,l=+e.apply(this,arguments),f=+n.apply(this,arguments),h=o.apply(this,arguments)-ab,p=a.apply(this,arguments)-ab,d=Math.abs(p-h),v=p>h;if(u||(u=t=Nn()),f<l&&(c=f,f=l,l=c),f>1e-12)if(d>sb-1e-12)u.moveTo(f*Math.cos(h),f*Math.sin(h)),u.arc(0,0,f,h,p,!v),l>1e-12&&(u.moveTo(l*Math.cos(p),l*Math.sin(p)),u.arc(0,0,l,p,h,v));else{var m,y,g=h,_=p,b=h,w=p,x=d,E=d,T=s.apply(this,arguments)/2,S=T>1e-12&&(i?+i.apply(this,arguments):Math.sqrt(l*l+f*f)),M=Math.min(Math.abs(f-l)/2,+r.apply(this,arguments)),O=M,A=M;if(S>1e-12){var R=nu(S/l*Math.sin(T)),I=nu(S/f*Math.sin(T));(x-=2*R)>1e-12?(R*=v?1:-1,b+=R,w-=R):(x=0,b=w=(h+p)/2),(E-=2*I)>1e-12?(I*=v?1:-1,g+=I,_-=I):(E=0,g=_=(h+p)/2)}var k=f*Math.cos(g),P=f*Math.sin(g),N=l*Math.cos(w),C=l*Math.sin(w);if(M>1e-12){var D=f*Math.cos(_),j=f*Math.sin(_),L=l*Math.cos(b),F=l*Math.sin(b);if(d<ob){var U=x>1e-12?ru(k,P,L,F,D,j,N,C):[N,C],z=k-U[0],B=P-U[1],V=D-U[0],G=j-U[1],H=1/Math.sin(Math.acos((z*V+B*G)/(Math.sqrt(z*z+B*B)*Math.sqrt(V*V+G*G)))/2),W=Math.sqrt(U[0]*U[0]+U[1]*U[1]);O=Math.min(M,(l-W)/(H-1)),A=Math.min(M,(f-W)/(H+1))}}E>1e-12?A>1e-12?(m=iu(L,F,k,P,f,A,v),y=iu(D,j,N,C,f,A,v),u.moveTo(m.cx+m.x01,m.cy+m.y01),A<M?u.arc(m.cx,m.cy,A,Math.atan2(m.y01,m.x01),Math.atan2(y.y01,y.x01),!v):(u.arc(m.cx,m.cy,A,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!v),u.arc(0,0,f,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),!v),u.arc(y.cx,y.cy,A,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!v))):(u.moveTo(k,P),u.arc(0,0,f,g,_,!v)):u.moveTo(k,P),l>1e-12&&x>1e-12?O>1e-12?(m=iu(N,C,D,j,l,-O,v),y=iu(k,P,L,F,l,-O,v),u.lineTo(m.cx+m.x01,m.cy+m.y01),O<M?u.arc(m.cx,m.cy,O,Math.atan2(m.y01,m.x01),Math.atan2(y.y01,y.x01),!v):(u.arc(m.cx,m.cy,O,Math.atan2(m.y01,m.x01),Math.atan2(m.y11,m.x11),!v),u.arc(0,0,l,Math.atan2(m.cy+m.y11,m.cx+m.x11),Math.atan2(y.cy+y.y11,y.cx+y.x11),v),u.arc(y.cx,y.cy,O,Math.atan2(y.y11,y.x11),Math.atan2(y.y01,y.x01),!v))):u.arc(0,0,l,w,b,v):u.lineTo(N,C)}else u.moveTo(0,0);if(u.closePath(),t)return u=null,t+""||null}var e=Qs,n=Js,r=ib(0),i=null,o=$s,a=tu,s=eu,u=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-ob/2;return[Math.cos(r)*t,Math.sin(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:ib(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:ib(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:ib(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:ib(+e),t):i},t.startAngle=function(e){return arguments.length?(o="function"==typeof e?e:ib(+e),t):o},t.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:ib(+e),t):a},t.padAngle=function(e){return arguments.length?(s="function"==typeof e?e:ib(+e),t):s},t.context=function(e){return arguments.length?(u=null==e?null:e,t):u},t};ou.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var cb=function(t){return new ou(t)},lb=function(){function t(t){var s,u,c,l=t.length,f=!1;for(null==i&&(a=o(c=Nn())),s=0;s<=l;++s)!(s<l&&r(u=t[s],s,t))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(u,s,t),+n(u,s,t));if(c)return a=null,c+""||null}var e=au,n=su,r=ib(!0),i=null,o=cb,a=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:ib(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:ib(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:ib(!!e),t):r},t.curve=function(e){return arguments.length?(o=e,null!=i&&(a=o(i)),t):o},t.context=function(e){return arguments.length?(null==e?i=a=null:a=o(i=e),t):i},t},fb=function(){function t(t){var e,l,f,h,p,d=t.length,v=!1,m=new Array(d),y=new Array(d);for(null==s&&(c=u(p=Nn())),e=0;e<=d;++e){if(!(e<d&&a(h=t[e],e,t))===v)if(v=!v)l=e,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),f=e-1;f>=l;--f)c.point(m[f],y[f]);c.lineEnd(),c.areaEnd()}v&&(m[e]=+n(h,e,t),y[e]=+i(h,e,t),c.point(r?+r(h,e,t):m[e],o?+o(h,e,t):y[e]))}if(p)return c=null,p+""||null}function e(){return lb().defined(a).curve(u).context(s)}var n=au,r=null,i=ib(0),o=su,a=ib(!0),s=null,u=cb,c=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:ib(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:ib(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:ib(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:ib(+e),o=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:ib(+e),t):i},t.y1=function(e){return arguments.length?(o=null==e?null:"function"==typeof e?e:ib(+e),t):o},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(o)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(a="function"==typeof e?e:ib(!!e),t):a},t.curve=function(e){return arguments.length?(u=e,null!=s&&(c=u(s)),t):u},t.context=function(e){return arguments.length?(null==e?s=c=null:c=u(s=e),t):s},t},hb=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},pb=function(t){return t},db=function(){function t(t){var s,u,c,l,f,h=t.length,p=0,d=new Array(h),v=new Array(h),m=+i.apply(this,arguments),y=Math.min(sb,Math.max(-sb,o.apply(this,arguments)-m)),g=Math.min(Math.abs(y)/h,a.apply(this,arguments)),_=g*(y<0?-1:1);for(s=0;s<h;++s)(f=v[d[s]=s]=+e(t[s],s,t))>0&&(p+=f);for(null!=n?d.sort(function(t,e){return n(v[t],v[e])}):null!=r&&d.sort(function(e,n){return r(t[e],t[n])}),s=0,c=p?(y-h*_)/p:0;s<h;++s,m=l)u=d[s],f=v[u],l=m+(f>0?f*c:0)+_,v[u]={data:t[u],index:s,value:f,startAngle:m,endAngle:l,padAngle:g};return v}var e=pb,n=hb,r=null,i=ib(0),o=ib(sb),a=ib(0);return t.value=function(n){return arguments.length?(e="function"==typeof n?n:ib(+n),t):e},t.sortValues=function(e){return arguments.length?(n=e,r=null,t):n},t.sort=function(e){return arguments.length?(r=e,n=null,t):r},t.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:ib(+e),t):i},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:ib(+e),t):o},t.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:ib(+e),t):a},t},vb=cu(cb);uu.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var mb=function(){return lu(lb().curve(vb))},yb=function(){var t=fb().curve(vb),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return lu(n())},delete t.lineX0,t.lineEndAngle=function(){return lu(r())},delete t.lineX1,t.lineInnerRadius=function(){return lu(i())},delete t.lineY0,t.lineOuterRadius=function(){return lu(o())},delete t.lineY1,t.curve=function(t){return arguments.length?e(cu(t)):e()._curve},t},gb={draw:function(t,e){var n=Math.sqrt(e/ob);t.moveTo(n,0),t.arc(0,0,n,0,sb)}},_b={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},bb=Math.sqrt(1/3),wb=2*bb,xb={draw:function(t,e){var n=Math.sqrt(e/wb),r=n*bb;t.moveTo(0,-n),t.lineTo(r,0),t.lineTo(0,n),t.lineTo(-r,0),t.closePath()}},Eb=Math.sin(ob/10)/Math.sin(7*ob/10),Tb=Math.sin(sb/10)*Eb,Sb=-Math.cos(sb/10)*Eb,Mb={draw:function(t,e){var n=Math.sqrt(.8908130915292852*e),r=Tb*n,i=Sb*n;t.moveTo(0,-n),t.lineTo(r,i);for(var o=1;o<5;++o){var a=sb*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*n,-s*n),t.lineTo(s*r-u*i,u*r+s*i)}t.closePath()}},Ob={draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},Ab=Math.sqrt(3),Rb={draw:function(t,e){var n=-Math.sqrt(e/(3*Ab));t.moveTo(0,2*n),t.lineTo(-Ab*n,-n),t.lineTo(Ab*n,-n),t.closePath()}},Ib=-.5,kb=Math.sqrt(3)/2,Pb=1/Math.sqrt(12),Nb=3*(Pb/2+1),Cb={draw:function(t,e){var n=Math.sqrt(e/Nb),r=n/2,i=n*Pb,o=r,a=n*Pb+n,s=-o,u=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(Ib*r-kb*i,kb*r+Ib*i),t.lineTo(Ib*o-kb*a,kb*o+Ib*a),t.lineTo(Ib*s-kb*u,kb*s+Ib*u),t.lineTo(Ib*r+kb*i,Ib*i-kb*r),t.lineTo(Ib*o+kb*a,Ib*a-kb*o),t.lineTo(Ib*s+kb*u,Ib*u-kb*s),t.closePath()}},Db=[gb,_b,xb,Ob,Mb,Rb,Cb],jb=function(){function t(){var t;if(r||(r=t=Nn()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=ib(gb),n=ib(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:ib(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:ib(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t},Lb=function(){};hu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:fu(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:fu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Fb=function(t){return new hu(t)};pu.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:fu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var Ub=function(t){return new pu(t)};du.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:fu(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var zb=function(t){return new du(t)};vu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*t[u]+(1-this._beta)*(i+r*a),this._beta*e[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Bb=function t(e){function n(t){return new vu(t,.85)}return n.beta=function(e){return t(+e)},n}(.85);yu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:mu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:mu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Vb=function t(e){function n(t){return new yu(t,0)}return n.tension=function(e){return t(+e)},n}(0);gu.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:mu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Gb=function t(e){function n(t){return new gu(t,0)}return n.tension=function(e){return t(+e)},n}(0);_u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:mu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Hb=function t(e){function n(t){return new _u(t,0)}return n.tension=function(e){return t(+e)},n}(0);wu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:bu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Wb=function t(e){function n(t){return new wu(t,.5)}
return n.alpha=function(e){return t(+e)},n}(.5);xu.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:bu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var qb=function t(e){function n(t){return new xu(t,.5)}return n.alpha=function(e){return t(+e)},n}(.5);Eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bu(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Yb=function t(e){function n(t){return new Eu(t,.5)}return n.alpha=function(e){return t(+e)},n}(.5);Tu.prototype={areaStart:Lb,areaEnd:Lb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Xb=function(t){return new Tu(t)};Ru.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Au(this,this._t0,Ou(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Au(this,Ou(this,n=Mu(this,t,e)),n);break;default:Au(this,this._t0,n=Mu(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Iu.prototype=Object.create(Ru.prototype)).point=function(t,e){Ru.prototype.point.call(this,e,t)},ku.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Cu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Du(t),i=Du(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Zb=function(t){return new Cu(t)};ju.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var Kb=function(t){return new ju(t,.5)},Qb=Array.prototype.slice,Jb=function(t,e){if((r=t.length)>1)for(var n,r,i=1,o=t[e[0]],a=o.length;i<r;++i){n=o,o=t[e[i]];for(var s=0;s<a;++s)o[s][1]+=o[s][0]=isNaN(n[s][1])?n[s][0]:n[s][1]}},$b=function(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n},tw=function(){function t(t){var o,a,s=e.apply(this,arguments),u=t.length,c=s.length,l=new Array(c);for(o=0;o<c;++o){for(var f,h=s[o],p=l[o]=new Array(u),d=0;d<u;++d)p[d]=f=[0,+i(t[d],h,d,t)],f.data=t[d];p.key=h}for(o=0,a=n(l);o<c;++o)l[a[o]].index=o;return r(l,a),l}var e=ib([]),n=$b,r=Jb,i=Uu;return t.keys=function(n){return arguments.length?(e="function"==typeof n?n:ib(Qb.call(n)),t):e},t.value=function(e){return arguments.length?(i="function"==typeof e?e:ib(+e),t):i},t.order=function(e){return arguments.length?(n=null==e?$b:"function"==typeof e?e:ib(Qb.call(e)),t):n},t.offset=function(e){return arguments.length?(r=null==e?Jb:e,t):r},t},ew=function(t,e){if((r=t.length)>0){for(var n,r,i,o=0,a=t[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=t[n][o][1]||0;if(i)for(n=0;n<r;++n)t[n][o][1]/=i}Jb(t,e)}},nw=function(t,e){if((n=t.length)>0){for(var n,r=0,i=t[e[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=t[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}Jb(t,e)}},rw=function(t,e){if((i=t.length)>0&&(r=(n=t[e[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,u=0,c=0;s<i;++s){for(var l=t[e[s]],f=l[a][1]||0,h=l[a-1][1]||0,p=(f-h)/2,d=0;d<s;++d){var v=t[e[d]];p+=(v[a][1]||0)-(v[a-1][1]||0)}u+=f,c+=p*f}n[a-1][1]+=n[a-1][0]=o,u&&(o-=c/u)}n[a-1][1]+=n[a-1][0]=o,Jb(t,e)}},iw=function(t){var e=t.map(zu);return $b(t).sort(function(t,n){return e[t]-e[n]})},ow=function(t){return iw(t).reverse()},aw=function(t){var e,n,r=t.length,i=t.map(zu),o=$b(t).sort(function(t,e){return i[e]-i[t]}),a=0,s=0,u=[],c=[];for(e=0;e<r;++e)n=o[e],a<s?(a+=i[n],u.push(n)):(s+=i[n],c.push(n));return c.reverse().concat(u)},sw=function(t){return $b(t).reverse()},uw=function(t){return function(){return t}};Gu.prototype={constructor:Gu,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Yu(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Wu(this,n),t=n,n=t.U),n.C=!1,r.C=!0,qu(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(qu(this,n),t=n,n=t.U),n.C=!1,r.C=!0,Wu(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Yu(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,Wu(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,qu(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Wu(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,qu(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Wu(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,qu(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var cw,lw,fw,hw,pw,dw=[],vw=[];gc.prototype={constructor:gc,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return nc(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(o=(i=n.halfedges).length)for(var i,o,a,s=n.site,u=-1,c=e[i[o-1]],l=c.left===s?c.right:c.left;++u<o;)a=l,c=e[i[u]],l=c.left===s?c.right:c.left,a&&l&&r<a.index&&r<l.index&&mc(s,a,l)<0&&t.push([s.data,a.data,l.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,o=this,a=o._found||0,s=o.cells.length;!(i=o.cells[a]);)if(++a>=s)return null;var u=t-i.site[0],c=e-i.site[1],l=u*u+c*c;do i=o.cells[r=a],a=null,i.halfedges.forEach(function(n){var r=o.edges[n],s=r.left;if(s!==i.site&&s||(s=r.right)){var u=t-s[0],c=e-s[1],f=u*u+c*c;f<l&&(l=f,a=s.index)}});while(null!==a);return o._found=r,null==n||l<=n*n?i.site:null}};var mw=function(){function t(t){return new gc(t.map(function(r,i){var o=[1e-6*Math.round(e(r,i,t)/1e-6),1e-6*Math.round(n(r,i,t)/1e-6)];return o.index=i,o.data=r,o}),r)}var e=Bu,n=Vu,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:uw(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:uw(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t},yw=function(t){return function(){return t}};bc.prototype={constructor:bc,scale:function(t){return 1===t?this:new bc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new bc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var gw=new bc(1,0,0);wc.prototype=bc.prototype;var _w=function(){t.event.preventDefault(),t.event.stopImmediatePropagation()},bw=function(){function e(t){t.on("wheel.zoom",c).on("mousedown.zoom",l).on("dblclick.zoom",f).on("touchstart.zoom",h).on("touchmove.zoom",d).on("touchend.zoom touchcancel.zoom",v).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",Sc)}function n(t,e){return e=Math.max(b,Math.min(w,e)),e===t.k?t:new bc(e,t.x,t.y)}function r(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new bc(t.k,r,i)}function i(t,e){var n=t.invertX(e[0][0])-x,r=t.invertX(e[1][0])-E,i=t.invertY(e[0][1])-T,o=t.invertY(e[1][1])-S;return t.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function o(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function a(t,e,n){t.on("start.zoom",function(){s(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){s(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,i=s(t,r),a=_.apply(t,r),u=n||o(a),c=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),l=t.__zoom,f="function"==typeof e?e.apply(t,r):e,h=A(l.invert(u).concat(c/l.k),f.invert(u).concat(c/f.k));return function(t){if(1===t)t=f;else{var e=h(t),n=c/e[2];t=new bc(n,u[0]-e[0]*n,u[1]-e[1]*n)}i.zoom(null,t)}})}function s(t,e){for(var n,r=0,i=R.length;r<i;++r)if((n=R[r]).that===t)return n;return new u(t,e)}function u(t,e){this.that=t,this.args=e,this.index=-1,this.active=0,this.extent=_.apply(t,e)}function c(){function e(){o.wheel=null,o.end()}if(g.apply(this,arguments)){var o=s(this,arguments),a=this.__zoom,u=Math.max(b,Math.min(w,a.k*Math.pow(2,-t.event.deltaY*(t.event.deltaMode?120:1)/500))),c=Sl(this);if(o.wheel)o.mouse[0][0]===c[0]&&o.mouse[0][1]===c[1]||(o.mouse[1]=a.invert(o.mouse[0]=c)),clearTimeout(o.wheel);else{if(a.k===u)return;o.mouse=[c,a.invert(c)],Ih(this),o.start()}_w(),o.wheel=setTimeout(e,150),o.zoom("mouse",i(r(n(a,u),o.mouse[0],o.mouse[1]),o.extent))}}function l(){function e(){_w(),o.moved=!0,o.zoom("mouse",i(r(o.that.__zoom,o.mouse[0]=Sl(o.that),o.mouse[1]),o.extent))}function n(){a.on("mousemove.zoom mouseup.zoom",null),mt(t.event.view,o.moved),_w(),o.end()}if(!y&&g.apply(this,arguments)){var o=s(this,arguments),a=sf(t.event.view).on("mousemove.zoom",e,!0).on("mouseup.zoom",n,!0),u=Sl(this);hf(t.event.view),xc(),o.mouse=[u,this.__zoom.invert(u)],Ih(this),o.start()}}function f(){if(g.apply(this,arguments)){var o=this.__zoom,s=Sl(this),u=o.invert(s),c=o.k*(t.event.shiftKey?.5:2),l=i(r(n(o,c),s,u),_.apply(this,arguments));_w(),M>0?sf(this).transition().duration(M).call(a,l,s):sf(this).call(e.transform,l)}}function h(){if(g.apply(this,arguments)){var e,n,r,i,o=s(this,arguments),a=t.event.changedTouches,u=a.length;for(xc(),n=0;n<u;++n)r=a[n],i=cf(this,a,r.identifier),i=[i,this.__zoom.invert(i),r.identifier],o.touch0?o.touch1||(o.touch1=i):(o.touch0=i,e=!0);if(m&&(m=clearTimeout(m),!o.touch1))return o.end(),i=sf(this).on("dblclick.zoom"),void(i&&i.apply(this,arguments));e&&(m=setTimeout(function(){m=null},500),Ih(this),o.start())}}function d(){var e,o,a,u,c=s(this,arguments),l=t.event.changedTouches,f=l.length;for(_w(),m&&(m=clearTimeout(m)),e=0;e<f;++e)o=l[e],a=cf(this,l,o.identifier),c.touch0&&c.touch0[2]===o.identifier?c.touch0[0]=a:c.touch1&&c.touch1[2]===o.identifier&&(c.touch1[0]=a);if(o=c.that.__zoom,c.touch1){var h=c.touch0[0],p=c.touch0[1],d=c.touch1[0],v=c.touch1[1],y=(y=d[0]-h[0])*y+(y=d[1]-h[1])*y,g=(g=v[0]-p[0])*g+(g=v[1]-p[1])*g;o=n(o,Math.sqrt(y/g)),a=[(h[0]+d[0])/2,(h[1]+d[1])/2],u=[(p[0]+v[0])/2,(p[1]+v[1])/2]}else{if(!c.touch0)return;a=c.touch0[0],u=c.touch0[1]}c.zoom("touch",i(r(o,a,u),c.extent))}function v(){var e,n,r=s(this,arguments),i=t.event.changedTouches,o=i.length;for(xc(),y&&clearTimeout(y),y=setTimeout(function(){y=null},500),e=0;e<o;++e)n=i[e],r.touch0&&r.touch0[2]===n.identifier?delete r.touch0:r.touch1&&r.touch1[2]===n.identifier&&delete r.touch1;r.touch1&&!r.touch0&&(r.touch0=r.touch1,delete r.touch1),r.touch0||r.end()}var m,y,g=Ec,_=Tc,b=0,w=1/0,x=-w,E=w,T=x,S=E,M=250,A=ch,R=[],I=p("start","zoom","end");return e.transform=function(t,e){var n=t.selection?t.selection():t;n.property("__zoom",Sc),t!==n?a(t,e):n.interrupt().each(function(){s(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},e.scaleBy=function(t,n){e.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},e.scaleTo=function(t,a){e.transform(t,function(){var t=_.apply(this,arguments),e=this.__zoom,s=o(t),u=e.invert(s);return i(r(n(e,"function"==typeof a?a.apply(this,arguments):a),s,u),t)})},e.translateBy=function(t,n,r){e.transform(t,function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),_.apply(this,arguments))})},u.prototype={start:function(){return 1===++this.active&&(this.index=R.push(this)-1,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(R.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){O(new _c(e,t,this.that.__zoom),I.apply,I,[t,this.that,this.args])}},e.filter=function(t){return arguments.length?(g="function"==typeof t?t:yw(!!t),e):g},e.extent=function(t){return arguments.length?(_="function"==typeof t?t:yw([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),e):_},e.scaleExtent=function(t){return arguments.length?(b=+t[0],w=+t[1],e):[b,w]},e.translateExtent=function(t){return arguments.length?(x=+t[0][0],E=+t[1][0],T=+t[0][1],S=+t[1][1],e):[[x,T],[E,S]]},e.duration=function(t){return arguments.length?(M=+t,e):M},e.interpolate=function(t){return arguments.length?(A=t,e):A},e.on=function(){var t=I.on.apply(I,arguments);return t===I?e:t},e};t.version="4.6.0",t.bisect=Rc,t.bisectRight=Rc,t.bisectLeft=Ic,t.ascending=Mc,t.bisector=Oc,t.descending=kc,t.deviation=Cc,t.extent=Dc,t.histogram=Yc,t.thresholdFreedmanDiaconis=Zc,t.thresholdScott=Kc,t.thresholdSturges=qc,t.max=Qc,t.mean=Jc,t.median=$c,t.merge=tl,t.min=el,t.pairs=nl,t.permute=rl,t.quantile=Xc,t.range=Bc,t.scan=il,t.shuffle=ol,t.sum=al,t.ticks=Wc,t.tickStep=n,t.transpose=sl,t.variance=Nc,t.zip=ul,t.axisTop=c,t.axisRight=l,t.axisBottom=f,t.axisLeft=h,t.brush=kp,t.brushX=An,t.brushY=Rn,t.brushSelection=On,t.chord=Fp,t.ribbon=Hp,t.nest=Wp,t.set=qn,t.map=zn,t.keys=Yp,t.values=Xp,t.entries=Zp,t.color=Et,t.rgb=Ot,t.hsl=kt,t.lab=Dt,t.hcl=Vt,t.cubehelix=Wt,t.dispatch=p,t.drag=df,t.dragDisable=hf,t.dragEnable=mt,t.dsvFormat=Kp,t.csvParse=Jp,t.csvParseRows=$p,t.csvFormat=td,t.csvFormatRows=ed,t.tsvParse=rd,t.tsvParseRows=id,t.tsvFormat=od,t.tsvFormatRows=ad,t.easeLinear=tn,t.easeQuad=rn,t.easeQuadIn=en,t.easeQuadOut=nn,t.easeQuadInOut=rn,t.easeCubic=sn,t.easeCubicIn=on,t.easeCubicOut=an,t.easeCubicInOut=sn,t.easePoly=ep,t.easePolyIn=$h,t.easePolyOut=tp,t.easePolyInOut=ep,t.easeSin=ln,t.easeSinIn=un,t.easeSinOut=cn,t.easeSinInOut=ln,t.easeExp=pn,t.easeExpIn=fn,t.easeExpOut=hn,t.easeExpInOut=pn,t.easeCircle=mn,t.easeCircleIn=dn,t.easeCircleOut=vn,t.easeCircleInOut=mn,t.easeBounce=gn,t.easeBounceIn=yn,t.easeBounceOut=gn,t.easeBounceInOut=_n,t.easeBack=sp,t.easeBackIn=op,t.easeBackOut=ap,t.easeBackInOut=sp,t.easeElastic=lp,t.easeElasticIn=cp,t.easeElasticOut=lp,t.easeElasticInOut=fp,t.forceCenter=sd,t.forceCollide=Sd,t.forceLink=Md,t.forceManyBody=Rd,t.forceSimulation=Ad,t.forceX=Id,t.forceY=kd,t.formatDefaultLocale=hr,t.formatLocale=Gd,t.formatSpecifier=zd,t.precisionFixed=Hd,t.precisionPrefix=Wd,t.precisionRound=qd,t.geoArea=Kv,t.geoBounds=$v,t.geoCentroid=em,t.geoCircle=mm,t.geoClipExtent=wm,t.geoDistance=Om,t.geoGraticule=vi,t.geoGraticule10=mi,t.geoInterpolate=Am,t.geoLength=Tm,t.geoPath=ey,t.geoAlbers=hy,t.geoAlbersUsa=py,t.geoAzimuthalEqualArea=vy,t.geoAzimuthalEqualAreaRaw=dy,t.geoAzimuthalEquidistant=yy,t.geoAzimuthalEquidistantRaw=my,t.geoConicConformal=_y,t.geoConicConformalRaw=io,t.geoConicEqualArea=fy,t.geoConicEqualAreaRaw=Qi,t.geoConicEquidistant=wy,t.geoConicEquidistantRaw=ao,t.geoEquirectangular=by,t.geoEquirectangularRaw=oo,t.geoGnomonic=xy,t.geoGnomonicRaw=so,t.geoIdentity=Ey,t.geoProjection=Yi,t.geoProjectionMutator=Xi,t.geoMercator=gy,t.geoMercatorRaw=eo,t.geoOrthographic=Ty,t.geoOrthographicRaw=co,t.geoStereographic=Sy,t.geoStereographicRaw=lo,t.geoTransverseMercator=My,t.geoTransverseMercatorRaw=fo,t.geoRotation=vm,t.geoStream=qv,t.geoTransform=sy,t.cluster=Oy,t.hierarchy=xo,t.pack=Gy,t.packSiblings=By,t.packEnclose=zy,t.partition=qy,t.stratify=Zy,t.tree=Ky,t.treemap=tg,t.treemapBinary=eg,t.treemapDice=Wy,t.treemapSlice=Qy,t.treemapSliceDice=ng,t.treemapSquarify=$y,t.treemapResquarify=rg,t.interpolate=eh,t.interpolateArray=Xf,t.interpolateBasis=Vf,t.interpolateBasisClosed=Gf,t.interpolateDate=Zf,t.interpolateNumber=Kf,t.interpolateObject=Qf,t.interpolateRound=nh,t.interpolateString=th,t.interpolateTransformCss=ah,t.interpolateTransformSvg=sh,t.interpolateZoom=ch,t.interpolateRgb=Wf,t.interpolateRgbBasis=qf,t.interpolateRgbBasisClosed=Yf,t.interpolateHsl=lh,t.interpolateHslLong=fh,t.interpolateLab=ce,t.interpolateHcl=hh,t.interpolateHclLong=ph,t.interpolateCubehelix=dh,t.interpolateCubehelixLong=vh,t.quantize=mh,t.path=Nn,t.polygonArea=ig,t.polygonCentroid=og,t.polygonHull=sg,t.polygonContains=ug,t.polygonLength=cg;t.quadtree=er,t.queue=ha,t.randomUniform=hg,t.randomNormal=pg,t.randomLogNormal=dg,t.randomBates=mg,t.randomIrwinHall=vg,t.randomExponential=yg,t.request=gg,t.html=bg,t.json=wg,t.text=xg,t.xml=Eg,t.csv=Sg,t.tsv=Mg,t.scaleBand=ya,t.scalePoint=_a,t.scaleIdentity=Ra,t.scaleLinear=Aa,t.scaleLog=ja,t.scaleOrdinal=ma,t.scaleImplicit=Ig,t.scalePow=Fa,t.scaleSqrt=Ua,t.scaleQuantile=za,t.scaleQuantize=Ba,t.scaleThreshold=Va,t.scaleTime=V_,t.scaleUtc=G_,t.schemeCategory10=W_,t.schemeCategory20b=q_,t.schemeCategory20c=Y_,t.schemeCategory20=X_,t.interpolateCubehelixDefault=Z_,t.interpolateRainbow=$_,t.interpolateWarm=K_,t.interpolateCool=Q_,t.interpolateViridis=tb,t.interpolateMagma=eb,t.interpolateInferno=nb,t.interpolatePlasma=rb,t.scaleSequential=Ks,t.creator=vl,t.local=b,t.matcher=bl,t.mouse=Sl,t.namespace=dl,t.namespaces=pl,t.select=sf,t.selectAll=uf,t.selection=dt,t.selector=Ml,t.selectorAll=Al,t.touch=cf,t.touches=lf,t.window=ql,t.customEvent=O,t.arc=ub,t.area=fb,t.line=lb,t.pie=db,t.radialArea=yb,t.radialLine=mb,t.symbol=jb,t.symbols=Db,t.symbolCircle=gb,t.symbolCross=_b,t.symbolDiamond=xb,t.symbolSquare=Ob,t.symbolStar=Mb,t.symbolTriangle=Rb,t.symbolWye=Cb,t.curveBasisClosed=Ub,t.curveBasisOpen=zb,t.curveBasis=Fb,t.curveBundle=Bb,t.curveCardinalClosed=Gb,t.curveCardinalOpen=Hb,t.curveCardinal=Vb,t.curveCatmullRomClosed=qb,t.curveCatmullRomOpen=Yb,t.curveCatmullRom=Wb,t.curveLinearClosed=Xb,t.curveLinear=cb,t.curveMonotoneX=Pu,t.curveMonotoneY=Nu,t.curveNatural=Zb,t.curveStep=Kb,t.curveStepAfter=Fu,t.curveStepBefore=Lu,t.stack=tw,t.stackOffsetExpand=ew,t.stackOffsetNone=Jb,t.stackOffsetSilhouette=nw,t.stackOffsetWiggle=rw,t.stackOrderAscending=iw,t.stackOrderDescending=ow,t.stackOrderInsideOut=aw,t.stackOrderNone=$b,t.stackOrderReverse=sw,t.timeInterval=Ga,t.timeMillisecond=Fg,t.timeMilliseconds=Ug,t.utcMillisecond=Fg,t.utcMilliseconds=Ug,t.timeSecond=zg,t.timeSeconds=Bg,t.utcSecond=zg,t.utcSeconds=Bg,t.timeMinute=Vg,t.timeMinutes=Gg,t.timeHour=Hg,t.timeHours=Wg,t.timeDay=qg,t.timeDays=Yg,t.timeWeek=Xg,t.timeWeeks=e_,t.timeSunday=Xg,t.timeSundays=e_,t.timeMonday=Zg,t.timeMondays=n_,t.timeTuesday=Kg,t.timeTuesdays=r_,t.timeWednesday=Qg,t.timeWednesdays=i_,t.timeThursday=Jg,t.timeThursdays=o_,t.timeFriday=$g,t.timeFridays=a_,t.timeSaturday=t_,t.timeSaturdays=s_,t.timeMonth=u_,t.timeMonths=c_,t.timeYear=l_,t.timeYears=f_,t.utcMinute=h_,t.utcMinutes=p_,t.utcHour=d_,t.utcHours=v_,t.utcDay=m_,t.utcDays=y_,t.utcWeek=g_,t.utcWeeks=S_,t.utcSunday=g_,t.utcSundays=S_,t.utcMonday=__,t.utcMondays=M_,t.utcTuesday=b_,t.utcTuesdays=O_,t.utcWednesday=w_,t.utcWednesdays=A_,t.utcThursday=x_,t.utcThursdays=R_,t.utcFriday=E_,t.utcFridays=I_,t.utcSaturday=T_,t.utcSaturdays=k_,t.utcMonth=P_,t.utcMonths=N_,t.utcYear=C_,t.utcYears=j_,t.timeFormatDefaultLocale=Gs,t.timeFormatLocale=Za,t.isoFormat=z_,t.isoParse=B_,t.now=he,t.timer=ve,t.timerFlush=me,t.timeout=Sh,t.interval=Mh,t.transition=Je,t.active=vp,t.interrupt=Ih,t.voronoi=mw,t.zoom=bw,t.zoomTransform=wc,t.zoomIdentity=gw,Object.defineProperty(t,"__esModule",{value:!0})})},{}],365:[function(t,e,n){(function(t){function n(e){if(!/^data\:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');e=e.replace(/\r?\n/g,"");var n=e.indexOf(",");if(-1===n||n<=4)throw new TypeError("malformed data: URI");for(var r=e.substring(5,n).split(";"),i=!1,o="US-ASCII",a=0;a<r.length;a++)"base64"==r[a]?i=!0:0==r[a].indexOf("charset=")&&(o=r[a].substring(8));var s=unescape(e.substring(n+1)),u=i?"base64":"ascii",c=new t(s,u);return c.type=r[0]||"text/plain",c.charset=o,c}e.exports=n}).call(this,t("buffer").Buffer)},{buffer:8}],366:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./reflection-effect");Object.defineProperty(n,"ReflectionEffect",{enumerable:!0,get:function(){return r(i).default}})},{"./reflection-effect":367}],367:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./reflection-effect");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./reflection-effect":368}],368:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("luma.gl"),c=t("../../../shader-utils"),l=t("../../lib"),f=(t("path"),function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.2;r(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.reflectivity=t,n.framebuffer=null,n.setNeedsRedraw(),n}return o(e,t),s(e,[{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME reflection-effect-vs\n\nattribute vec3 vertices;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  uv = vertices.xy;\n  gl_Position = vec4(2. * vertices.xy - vec2(1., 1.), 1., 1.);\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME reflection-effect-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D reflectionTexture;\nuniform float reflectivity;\n\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_FragColor = texture2D(reflectionTexture, vec2(uv.x, 1. - uv.y));\n  gl_FragColor.a *= reflectivity;\n}\n'}}},{key:"initialize",value:function(t){var e=t.gl;t.layerManager;this.model=new u.Model(a({gl:e},(0,c.assembleShaders)(e,this.getShaders()),{geometry:new u.Geometry({drawMode:u.GL.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])})})),this.framebuffer=new u.Framebuffer(e)}},{key:"preDraw",value:function(t){var e=t.gl,n=t.layerManager,r=n.context.viewport,i="undefined"!=typeof window&&window.devicePixelRatio||1;this.framebuffer.resize({width:i*r.width,height:i*r.height});var o=r.pitch;this.framebuffer.bind(),n.setContext(a({},r,{pitch:-180-o})),e.clear(u.GL.COLOR_BUFFER_BIT|u.GL.DEPTH_BUFFER_BIT),n.drawLayers(),n.setContext(a({},r,{pitch:o})),e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"draw",value:function(t){t.gl,t.layerManager;this.model.render({reflectionTexture:this.framebuffer.texture,reflectivity:this.reflectivity})}},{key:"finalize",value:function(t){t.gl,t.layerManager}}]),e}(l.Effect));n.default=f},{"../../../shader-utils":410,"../../lib":372,"luma.gl":530,path:26}],369:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./effects");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})});var i=t("./lib");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})})},{"./effects":366,"./lib":372}],370:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){var n=e.gl,i=e.layerManager;r(this,t),this.gl=n,this.layerManager=i,this._effects=[]}return i(t,[{key:"addEffect",value:function(t){this._effects.push(t),this._sortEffects(),t.initialize({gl:this.gl,layerManager:this.layerManager})}},{key:"removeEffect",value:function(t){var e=this._effects.indexOf(t);return e>=0&&(t.finalize({gl:this.gl,layerManager:this.layerManager}),this._effects.splice(e,1),!0)}},{key:"preDraw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.preDraw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"draw",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._effects[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;o.needsRedraw&&o.draw({gl:this.gl,layerManager:this.layerManager})}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}},{key:"_sortEffects",value:function(){this._effects.sort(function(t,e){return t.priority>e.priority?-1:t.priority<e.priority?1:t.count-e.count})}}]),t}();n.default=o},{}],371:[function(t,e,n){"use strict";function r(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=0,a=function(){function t(){r(this,t),this.count=o++,this.visible=!0,this.priority=0,this.needsRedraw=!1}return i(t,[{key:"initialize",value:function(t){t.gl,t.layerManager}},{key:"finalize",value:function(t){t.gl,t.layerManager}},{key:"preDraw",value:function(t){t.gl,t.layerManager}},{key:"draw",value:function(t){t.gl,t.layerManager}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.needsRedraw=t}}]),t}();n.default=a},{}],372:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./effect");Object.defineProperty(n,"Effect",{enumerable:!0,get:function(){return r(i).default}});var o=t("./effect-manager");Object.defineProperty(n,"EffectManager",{enumerable:!0,get:function(){return r(o).default}})},{"./effect":371,"./effect-manager":370}],373:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./lib");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})});var i=t("./experimental/lib");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./viewport");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./shader-utils");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("./layers/core");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var u=t("./layers/fp64");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})});var c=t("./experimental/effects");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return c[t]}})})},{"./experimental/effects":366,"./experimental/lib":372,"./layers/core":378,"./layers/fp64":391,"./lib":397,"./shader-utils":410,"./viewport":415}],374:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c,l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=t("../../.."),p=t("luma.gl"),d=(t("path"),[0,0,255,255]),v=function(t){return t.sourcePosition},m=function(t){return t.targetPosition},y=function(t){return t.color},g=(c=u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.strokeWidth,r=void 0===n?1:n,s=t.getSourcePosition,u=void 0===s?v:s,c=t.getTargetPosition,f=void 0===c?m:c,h=t.getSourceColor,p=void 0===h?y:h,d=t.getTargetColor,g=void 0===d?y:d,_=i(t,["strokeWidth","getSourcePosition","getTargetPosition","getSourceColor","getTargetColor"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l({strokeWidth:r,getSourcePosition:u,getTargetPosition:f,getSourceColor:p,getTargetColor:g},_)))}return s(e,t),f(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.setState({model:this._createModel(t)}),this.state.attributeManager.addInstanced({instancePositions:{size:4,update:this.calculateInstancePositions},instanceSourceColors:{type:p.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceSourceColors},instanceTargetColors:{type:p.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceTargetColors}})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-vertex-shader\n\nconst float N = 49.0;\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec4 instancePositions;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nfloat paraboloid(vec2 source, vec2 target, float ratio) {\n\n  vec2 x = mix(source, target, ratio);\n  vec2 center = mix(source, target, 0.5);\n\n  float dSourceCenter = distance(source, center);\n  float dXCenter = distance(x, center);\n  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);\n}\n\nvoid main(void) {\n  vec2 source = preproject(instancePositions.xy);\n  vec2 target = preproject(instancePositions.zw);\n\n  float segmentRatio = smoothstep(0.0, 1.0, positions.x / N);\n\n  float vertex_height = paraboloid(source, target, segmentRatio);\n  if (vertex_height < 0.0) vertex_height = 0.0;\n  vec3 p = vec3(\n    // xy: linear interpolation of source & target\n    mix(source, target, segmentRatio),\n    // z: paraboloid interpolate of source & target\n    sqrt(vertex_height)\n  );\n\n  gl_Position = project(vec4(p, 1.0));\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"_createModel",value:function(t){for(var e=[],n=0;n<50;n++)e=[].concat(r(e),[n,n,n]);return new p.Model(l({gl:t},(0,h.assembleShaders)(t,this.getShaders()),{geometry:new p.Geometry({drawMode:p.GL.LINE_STRIP,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=e.getTargetPosition,o=t.value,a=t.size,s=0,u=!0,c=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=r(p),v=i(p);o[s+0]=d[0],o[s+1]=d[1],o[s+2]=v[0],o[s+3]=v[1],s+=a}}catch(t){c=!0,l=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}},{key:"calculateInstanceSourceColors",value:function(t){var e=this.props,n=e.data,r=e.getSourceColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h)||d;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?d[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetColors",value:function(t){var e=this.props,n=e.data,r=e.getTargetColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h)||d;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?d[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),e}(h.Layer),u.layerName="ArcLayer",c);n.default=g},{"../../..":373,"luma.gl":530,path:26}],375:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./arc-layer");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./arc-layer":374}],376:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=(0,x.default)(t),n=[];return e.features.map(function(t,e){var r=c(t);r.forEach(function(t){t.featureIndex=e}),n.push.apply(n,i(r))}),n}function c(t){var e=t.geometry,n=e.coordinates,r=e.type,i=void 0;switch(r){case"MultiPolygon":i=n;break;case"Polygon":i=[n];break;case"LineString":i=[[n]];break;case"MultiLineString":i=n.map(function(t){return[t]});break;default:i=[]}return i.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0],t[1],t[2]||0]})})})}function l(t){var e=0;return t.reduce(function(t,n){for(var r=n.length,o=[].concat(i(t),[e]),a=1;a<r-1;a++)o.push(a+e,a+e);return o.push(e+r-1),e+=r,o},[])}function f(t){var e=null;return t.length>1&&(e=t.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+e.length])},[0]).slice(1,t.length)),(0,T.default)((0,b.default)(t),e,3)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h,p,d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},y=t("../../.."),g=t("luma.gl"),_=t("lodash.flattendeep"),b=r(_),w=t("geojson-normalize"),x=r(w),E=t("earcut"),T=r(E),S=(t("path"),[0,0,255,255]),M=function(t){return t.properties.color},O=(p=h=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,d({getColor:M,drawCountour:!1,strokeWidth:1},t)))}return s(e,t),v(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.state.attributeManager.addDynamic({indices:{size:1,update:this.calculateIndices,isIndexed:!0},positions:{size:3,update:this.calculatePositions},colors:{type:g.GL.UNSIGNED_BYTE,size:4,update:this.calculateColors},pickingColors:{type:g.GL.UNSIGNED_BYTE,size:3,update:this.calculatePickingColors,noAlloc:!0}});var e=t.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array;this.setState({model:this.getModel(t),numInstances:0,IndexType:e})}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=t.changeFlags,i=this.state.attributeManager;r.dataChanged&&(this.state.choropleths=u(n.data),i.invalidateAll()),e.opacity!==n.opacity&&this.setUniforms({opacity:n.opacity})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"pick",value:function(t){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pick",this).call(this,t);var n=t.info,r=this.decodePickingColor(n.color),i=r>=0?this.props.data.features[r]:null;n.feature=i,n.object=i}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\nuniform vec3 selectedPickingColor;\n\n// PICKING\nuniform float pickingEnabled;\nvarying vec4 vPickingColor;\nvoid picking_setPickColor(vec3 pickingColor) {\n  vPickingColor = vec4(pickingColor,  1.);\n}\nvec4 picking_setNormalAndPickColors(vec4 color, vec3 pickingColor) {\n  vec4 pickingColor4 = vec4(pickingColor.rgb, 1.);\n  vPickingColor = mix(color, pickingColor4, pickingEnabled);\n  return vPickingColor;\n}\n\n// PICKING\n// vec4 getColor(vec4 color, float opacity, vec3 pickingColor, float renderPickingBuffer) {\n//   vec4 color4 = vec4(color.xyz / 255., color.w / 255. * opacity);\n//   vec4 pickingColor4 = vec4(pickingColor / 255., 1.);\n//   return mix(color4, pickingColor4, renderPickingBuffer);\n// }\n\nvoid main(void) {\n\n  vec4 color = vec4(colors.rgb, colors.a * opacity) / 255.;\n\n  picking_setNormalAndPickColors(\n    color,\n    pickingColors / 255.\n  );\n\n  vec3 p = project_position(positions);\n  gl_Position = project_to_clipspace(vec4(p, 1.));\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// PICKING\n// uniform bool pickingEnabled;\nvarying vec4 vPickingColor;\nvec4 picking_getColor() {\n  return vPickingColor;\n}\n// PICKING\n\nvoid main(void) {\n  gl_FragColor = picking_getColor();\n}\n'}}},{key:"getModel",value:function(t){return new g.Model(d({gl:t,id:this.props.id},(0,y.assembleShaders)(t,this.getShaders()),{geometry:new g.Geometry({drawMode:this.props.drawContour?g.GL.LINES:g.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculateIndices",value:function(t){var e=this,n=this.state.choropleths.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+e.reduce(function(t,e){return t+e.length},0)])},[0]),r=this.state.IndexType;if(r===Uint16Array&&n[n.length-1]>65535)throw new Error("Vertex count exceeds browser's limit");var o=this.state.choropleths.map(function(t,r){return e.props.drawContour?l(t).map(function(t){return t+n[r]}):f(t).map(function(t){return t+n[r]})});t.value=new r((0,b.default)(o)),t.target=g.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(t.value.length/t.size)}},{key:"calculatePositions",value:function(t){var e=(0,b.default)(this.state.choropleths);t.value=new Float32Array(e)}},{key:"calculateColors",value:function(t){var e=this.props,n=e.data.features,r=e.getColor,i=this.state.choropleths.map(function(t,e){var i=n[t.featureIndex],o=r(i)||S;return isNaN(o[3])&&(o[3]=S[3]),t.map(function(t){return t.map(function(t){return o})})});t.value=new Uint8Array((0,b.default)(i))}},{key:"calculatePickingColors",value:function(t){var e=this,n=this.state.choropleths.map(function(t,n){var r=t.featureIndex,i=e.props.drawContour?[0,0,0]:[(r+1)%256,Math.floor((r+1)/256)%256,Math.floor((r+1)/256/256)%256];return t.map(function(t){return t.map(function(t){return i})})});t.value=new Uint8Array((0,b.default)(n))}}]),e}(y.Layer),h.layerName="ChoroplethLayer",p);n.default=O},{"../../..":373,earcut:422,"geojson-normalize":450,"lodash.flattendeep":501,"luma.gl":530,path:26}],377:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./choropleth-layer");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./choropleth-layer":376}],378:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./arc-layer");Object.defineProperty(n,"ArcLayer",{enumerable:!0,get:function(){return r(i).default}});var o=t("./choropleth-layer");Object.defineProperty(n,"ChoroplethLayer",{enumerable:!0,get:function(){return r(o).default}});var a=t("./line-layer");Object.defineProperty(n,"LineLayer",{enumerable:!0,get:function(){return r(a).default}});var s=t("./scatterplot-layer");Object.defineProperty(n,"ScatterplotLayer",{enumerable:!0,get:function(){return r(s).default}});var u=t("./screen-grid-layer");Object.defineProperty(n,"ScreenGridLayer",{enumerable:!0,get:function(){return r(u).default}})},{"./arc-layer":375,"./choropleth-layer":377,"./line-layer":379,"./scatterplot-layer":381,"./screen-grid-layer":383}],379:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./line-layer");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./line-layer":380}],380:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("../../.."),h=t("luma.gl"),p=(t("path"),[0,255,0,255]),d=function(t){return t.sourcePosition},v=function(t){return t.targetPosition},m=function(t){return t.color||p},y=(u=s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getSourcePosition,a=void 0===n?d:n,s=t.getTargetPosition,u=void 0===s?v:s,l=t.getColor,f=void 0===l?m:l,h=t.strokeWidth,p=void 0===h?1:h,y=r(t,["getSourcePosition","getTargetPosition","getColor","strokeWidth"]);return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c({getSourcePosition:a,getTargetPosition:u,getColor:f,strokeWidth:p},y)))}return a(e,t),l(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.setState({model:this.createModel(t)}),this.state.attributeManager.addInstanced({instanceSourcePositions:{size:3,update:this.calculateInstanceSourcePositions},instanceTargetPositions:{size:3,update:this.calculateInstanceTargetPositions},instanceColors:{type:h.GL.UNSIGNED_BYTE,size:4,update:this.calculateInstanceColors}})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME line-layer-vertex-shader\n\nattribute vec3 positions;\nattribute vec3 instanceSourcePositions;\nattribute vec3 instanceTargetPositions;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // Position\n  vec3 source = project_position(instanceSourcePositions);\n  vec3 target = project_position(instanceTargetPositions);\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec3 p = mix(source, target, segmentIndex);\n\n  gl_Position = project_to_clipspace(vec4(p, 1.));\n\n  // Color\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"createModel",value:function(t){var e=[0,0,0,1,1,1];return new h.Model(c({gl:t,id:this.props.id},(0,f.assembleShaders)(t,this.getShaders()),{geometry:new h.Geometry({drawMode:h.GL.LINE_STRIP,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2]||0,a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetPositions",value:function(t){var e=this.props,n=e.data,r=e.getTargetPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2]||0,a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,n=e.data,r=e.getColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=r(h);i[a+0]=d[0],i[a+1]=d[1],i[a+2]=d[2],i[a+3]=isNaN(d[3])?p[3]:d[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),e}(f.Layer),s.layerName="LineLayer",u);n.default=y},{"../../..":373,"luma.gl":530,path:26}],381:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./scatterplot-layer");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./scatterplot-layer":382}],382:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},h=t("../../.."),p=t("luma.gl"),d=(t("path"),[255,0,255,255]),v=function(t){return t.position},m=function(t){return t.radius},y=function(t){return t.color||d},g=(u=s=function(t){function e(t){var n=t.getPosition,a=void 0===n?v:n,s=t.getRadius,u=void 0===s?m:s,l=t.getColor,f=void 0===l?y:l,h=t.radius,p=void 0===h?30:h,d=t.radiusMinPixels,g=void 0===d?0:d,_=t.radiusMaxPixels,b=void 0===_?Number.MAX_SAFE_INTEGER:_,w=t.drawOutline,x=void 0!==w&&w,E=t.strokeWidth,T=void 0===E?1:E,S=r(t,["getPosition","getRadius","getColor","radius","radiusMinPixels","radiusMaxPixels","drawOutline","strokeWidth"]);return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c({getPosition:a,getRadius:u,getColor:f,drawOutline:x,strokeWidth:T,radius:p,radiusMinPixels:g,radiusMaxPixels:b},S)))}return a(e,t),l(e,[{key:"initializeState",value:function(){var t=this.context.gl,e=this._getModel(t);this.setState({model:e}),this.state.attributeManager.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceRadius:{size:1,update:this.calculateInstanceRadius},instanceColors:{type:p.GL.UNSIGNED_BYTE,size:4,
update:this.calculateInstanceColors}})}},{key:"updateState",value:function(t){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateState",this).call(this,t);var n=t.props,r=t.oldProps;n.drawOutline!==r.drawOutline&&(this.state.model.geometry.drawMode=n.drawOutline?p.GL.LINE_LOOP:p.GL.TRIANGLE_FAN)}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(c({},e,{radius:this.props.radius,radiusMinPixels:this.props.radiusMinPixels,radiusMaxPixels:this.props.radiusMaxPixels})),n.lineWidth(1)}},{key:"getShaders",value:function(t){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-vertex-shader\n\nattribute vec3 positions;\n\nattribute vec3 instancePositions;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float radius;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec3 center = project_position(instancePositions);\n  float radiusPixels = clamp(\n    project_scale(radius * instanceRadius),\n    radiusMinPixels, radiusMaxPixels\n  );\n  vec3 vertex = positions * radiusPixels;\n  gl_Position = project_to_clipspace(vec4(center + vertex, 1.0));\n\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"_getModel",value:function(t){for(var e=[],n=0;n<16;n++)e.push(Math.cos(2*Math.PI*n/16),Math.sin(2*Math.PI*n/16),0);var r=(0,h.assembleShaders)(t,this.getShaders());return new p.Model(c({gl:t,id:"scatterplot"},r,{geometry:new p.Geometry({drawMode:p.GL.TRIANGLE_FAN,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,n=e.data,r=e.getPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0]||0,i[a+1]=p[1]||0,i[a+2]=p[2]||0,a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceRadius",value:function(t){var e=this.props,n=e.data,r=e.getRadius,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=isNaN(p)?1:p,a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,n=e.data,r=e.getColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0]||0,i[a+1]=p[1]||0,i[a+2]=p[2]||0,i[a+3]=isNaN(p[3])?d[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),e}(h.Layer),s.layerName="ScatterplotLayer",u);n.default=g},{"../../..":373,"luma.gl":530,path:26}],383:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./screen-grid-layer");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./screen-grid-layer":384}],384:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a,s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("../../.."),f=t("luma.gl"),h=(t("path"),s=a=function(t){function e(t){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({unitWidth:100,unitHeight:100,minColor:[0,0,0,255],maxColor:[0,255,0,255],getPosition:function(t){return t.position},getWeight:function(t){return 1}},t)))}return o(e,t),c(e,[{key:"initializeState",value:function(){this.state.attributeManager.addInstanced({instancePositions:{size:3,update:this.calculateInstancePositions},instanceCount:{size:1,update:this.calculateInstanceCount}});var t=this.context.gl;this.setState({model:this.getModel(t)})}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=t.changeFlags;(n.unitWidth!==e.unitWidth||n.unitHeight!==e.unitHeight||r.viewportChanged)&&this.updateCell()}},{key:"draw",value:function(t){var e=t.uniforms,n=this.props,r=n.minColor,i=n.maxColor,o=this.state,a=o.model,s=o.cellScale,c=o.maxCount;this.context.gl.depthMask(!0),a.render(u({},e,{minColor:r,maxColor:i,cellScale:s,maxCount:c}))}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME grid-layer-vs\n\nattribute vec3 vertices;\nattribute vec3 instancePositions;\nattribute float instanceCount;\nattribute vec3 instancePickingColors;\n\nuniform float maxCount;\nuniform float opacity;\nuniform vec4 minColor;\nuniform vec4 maxColor;\nuniform float renderPickingBuffer;\nuniform vec3 cellScale;\nuniform vec3 selectedPickingColor;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 color = mix(minColor, maxColor, instanceCount / maxCount) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n\n  gl_Position = vec4(instancePositions + vertices * cellScale, 1.);\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* fragment shader for the grid-layer */\n#define SHADER_NAME grid-layer-fs\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n'}}},{key:"getModel",value:function(t){return new f.Model(u({gl:t,id:this.props.id},(0,l.assembleShaders)(t,this.getShaders()),{geometry:new f.Geometry({drawMode:f.GL.TRIANGLE_FAN,vertices:new Float32Array([0,0,0,1,0,0,1,1,0,0,1,0])}),isInstanced:!0}))}},{key:"updateCell",value:function(){var t=this.context.viewport,e=t.width,n=t.height,r=this.props,i=r.unitWidth,o=r.unitHeight,a=new Float32Array([(i-2)/e*2,-(o-2)/n*2,1]),s=Math.ceil(e/i),u=Math.ceil(n/o);this.setState({cellScale:a,numCol:s,numRow:u,numInstances:s*u}),this.state.attributeManager.invalidateAll()}},{key:"calculateInstancePositions",value:function(t,e){for(var n=e.numInstances,r=this.context.viewport,i=r.width,o=r.height,a=this.props,s=a.unitWidth,u=a.unitHeight,c=this.state.numCol,l=t.value,f=t.size,h=0;h<n;h++){var p=h%c,d=Math.floor(h/c);l[h*f+0]=p*s/i*2-1,l[h*f+1]=1-d*u/o*2,l[h*f+2]=0}}},{key:"calculateInstanceCount",value:function(t){var e=this.props,n=e.data,r=e.unitWidth,i=e.unitHeight,o=e.getPosition,a=e.getWeight,s=this.state,u=s.numCol,c=s.numRow,l=t.value,f=0;l.fill(0);var h=!0,p=!1,d=void 0;try{for(var v,m=n[Symbol.iterator]();!(h=(v=m.next()).done);h=!0){var y=v.value,g=this.project(o(y)),_=Math.floor(g[0]/r),b=Math.floor(g[1]/i);if(_>=0&&_<u&&b>=0&&b<c){var w=_+b*u;l[w]+=a(y),l[w]>f&&(f=l[w])}}}catch(t){p=!0,d=t}finally{try{!h&&m.return&&m.return()}finally{if(p)throw d}}this.setState({maxCount:f})}}]),e}(l.Layer),a.layerName="ScreenGridLayer",s);n.default=h},{"../../..":373,"luma.gl":530,path:26}],385:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c,l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=t("../../.."),d=t("../../../lib/utils/fp64"),v=t("luma.gl"),m=(t("path"),[0,0,255,255]),y=function(t){return t.sourcePosition},g=function(t){return t.targetPosition},_=function(t){return t.color},b=(c=u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getSourcePosition,r=void 0===n?y:n,s=t.getTargetPosition,u=void 0===s?g:s,c=t.getSourceColor,l=void 0===c?_:c,h=t.getTargetColor,p=void 0===h?_:h,d=t.strokeWidth,v=void 0===d?1:d,m=i(t,["getSourcePosition","getTargetPosition","getSourceColor","getTargetColor","strokeWidth"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,f({getSourcePosition:r,getTargetPosition:u,getSourceColor:l,getTargetColor:p,strokeWidth:v},m)))}return s(e,t),h(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.state.attributeManager.addInstanced({instanceSourcePositionsFP64:{size:4,update:this.calculateInstanceSourcePositions},instanceTargetPositionsFP64:{size:4,update:this.calculateInstanceTargetPositions},instanceSourceColors:{size:4,type:v.GL.UNSIGNED_BYTE,update:this.calculateInstanceSourceColors},instanceTargetColors:{size:4,type:v.GL.UNSIGNED_BYTE,update:this.calculateInstanceTargetColors}}),this.setState({model:this.createModel(t)})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-64-vertex-shader\n\nconst float N = 49.0;\n\nattribute vec3 positions;\nattribute vec4 instanceSourceColors;\nattribute vec4 instanceTargetColors;\nattribute vec3 instancePickingColors;\nattribute vec4 instanceSourcePositionsFP64;\nattribute vec4 instanceTargetPositionsFP64;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvec2 paraboloid_fp64(vec2 source[2], vec2 target[2], float ratio) {\n\n  vec2 x[2];\n  vec2_mix_fp64(source, target, ratio, x);\n  vec2 center[2];\n  vec2_mix_fp64(source, target, 0.5, center);\n\n  vec2 dSourceCenter = vec2_distance_fp64(source, center);\n  vec2 dXCenter = vec2_distance_fp64(x, center);\n  return mul_fp64(sum_fp64(dSourceCenter, dXCenter), sub_fp64(dSourceCenter, dXCenter));\n}\n\nvoid main(void) {\n  vec2 projectedSourceCoord[2];\n  project_position_fp64(instanceSourcePositionsFP64, projectedSourceCoord);\n  vec2 projectedTargetCoord[2];\n  project_position_fp64(instanceTargetPositionsFP64, projectedTargetCoord);\n\n  float segmentRatio = smoothstep(0.0, 1.0, positions.x / N);\n\n  vec2 mixed_temp[2];\n\n  vec2_mix_fp64(projectedSourceCoord, projectedTargetCoord, segmentRatio, mixed_temp);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = mixed_temp[0];\n  vertex_pos_modelspace[1] = mixed_temp[1];\n\n  vec2 vertex_height = paraboloid_fp64(projectedSourceCoord, projectedTargetCoord, segmentRatio);\n  if (vertex_height.x < 0.0 || (vertex_height.x == 0.0 && vertex_height.y <= 0.0)) vertex_height = vec2(0.0, 0.0);\n\n  vertex_pos_modelspace[2] = sqrt_fp64(vertex_height);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = mix(instanceSourceColors, instanceTargetColors, segmentRatio) / 255.;\n\n  vColor = mix(\n    vec4(color.rgb, color.a * opacity),\n    vec4(instancePickingColors / 255., 1.),\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME arc-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',fp64:!0,project64:!0}}},{key:"createModel",value:function(t){for(var e=[],n=0;n<50;n++)e=[].concat(r(e),[n,n,n]);return new v.Model(f({gl:t,id:this.props.id},(0,p.assembleShaders)(t,this.getShaders()),{geometry:new v.Geometry({drawMode:v.GL.LINE_STRIP,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=r(p),m=(0,d.fp64ify)(v[0]),y=l(m,2);i[a+0]=y[0],i[a+1]=y[1];var g=(0,d.fp64ify)(v[1]),_=l(g,2);i[a+2]=_[0],i[a+3]=_[1],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetPositions",value:function(t){var e=this.props,n=e.data,r=e.getTargetPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,v=r(p),m=(0,d.fp64ify)(v[0]),y=l(m,2);i[a+0]=y[0],i[a+1]=y[1];var g=(0,d.fp64ify)(v[1]),_=l(g,2);i[a+2]=_[0],i[a+3]=_[1],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw c}}}},{key:"calculateInstanceSourceColors",value:function(t){var e=this.props,n=e.data,r=e.getSourceColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h)||m;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?m[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceTargetColors",value:function(t){var e=this.props,n=e.data,r=e.getTargetColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h)||m;i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?m[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),e}(p.Layer),u.layerName="ArcLayer64",c);n.default=b},{"../../..":373,"../../../lib/utils/fp64":403,"luma.gl":530,path:26}],386:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./arc-layer-64");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./arc-layer-64":385}],387:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){var e=(0,T.default)(t),n=[];return e.features.map(function(t,e){var r=c(t);r.forEach(function(t){t.featureIndex=e}),n.push.apply(n,i(r))}),n}function c(t){var e=t.geometry,n=e.coordinates,r=e.type,i=void 0;switch(r){case"MultiPolygon":i=n;break;case"Polygon":i=[n];break;case"LineString":i=[[n]];break;case"MultiLineString":i=n.map(function(t){return[t]});break;default:i=[]}return i.map(function(t){return t.map(function(t){return t.map(function(t){return[t[0],t[1],t[2]||0]})})})}function l(t){var e=0;return t.reduce(function(t,n){for(var r=n.length,o=[].concat(i(t),[e]),a=1;a<r-1;a++)o.push(a+e,a+e);return o.push(e+r-1),e+=r,o},[])}function f(t){var e=null;return t.length>1&&(e=t.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+e.length])},[0]).slice(1,t.length)),(0,M.default)((0,x.default)(t),e,3)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h,p,d=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},g=t("../../.."),_=t("../../../lib/utils/fp64"),b=t("luma.gl"),w=t("lodash.flattendeep"),x=r(w),E=t("geojson-normalize"),T=r(E),S=t("earcut"),M=r(S),O=(t("path"),[0,0,255,255]),A=function(t){return t.properties.color},R=(p=h=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,v({getColor:A,drawCountour:!1,strokeWidth:1},t)))}return s(e,t),m(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.state.attributeManager.addDynamic({indices:{size:1,update:this.calculateIndices,isIndexed:!0},positionsFP64:{size:4,update:this.calculatePositionsFP64},heightsFP64:{size:2,update:this.calculateHeightsFP64},colors:{size:4,type:b.GL.UNSIGNED_BYTE,update:this.calculateColors},pickingColors:{size:3,update:this.calculatePickingColors,noAlloc:!0}});var e=t.getExtension("OES_element_index_uint")?Uint32Array:Uint16Array;this.setState({model:this.getModel(t),numInstances:0,IndexType:e})}},{key:"updateState",value:function(t){var e=t.oldProps,n=t.props,r=t.changeFlags,i=this.state.attributeManager;r.dataChanged&&(this.state.choropleths=u(n.data),i.invalidateAll()),e.opacity!==n.opacity&&this.setUniforms({opacity:n.opacity})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"pick",value:function(t){y(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pick",this).call(this,t);var n=t.info,r=this.decodePickingColor(n.color),i=r>=0?this.props.data.features[r]:null;n.feature=i,n.object=i}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-64-vertex-shader\n\nattribute vec4 positionsFP64;\nattribute vec2 heightsFP64;\n\nattribute vec3 positions;\nattribute vec4 colors;\nattribute vec3 pickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\nuniform vec3 selectedPickingColor;\n\nvarying vec4 vColor;\n\nvec4 getColor(vec4 color, float opacity, vec3 pickingColor, float renderPickingBuffer) {\n  vec4 color4 = vec4(color.xyz / 255., color.w / 255. * opacity);\n  vec4 pickingColor4 = vec4(pickingColor / 255., 1.);\n  return mix(color4, pickingColor4, renderPickingBuffer);\n}\n\nvoid main(void) {\n  // For some reason, need to add one to elevation to show up in untilted mode\n  vec2 projectedCoord[2];\n  project_position_fp64(positionsFP64, projectedCoord);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = projectedCoord[0];\n  vertex_pos_modelspace[1] = projectedCoord[1];\n  vertex_pos_modelspace[2] = heightsFP64;\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = vec4(colors.rgb, colors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(pickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME choropleth-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',fp64:!0,project64:!0}}},{key:"getModel",value:function(t){return new b.Model(v({gl:t,id:this.props.id},(0,g.assembleShaders)(t,this.getShaders()),{geometry:new b.Geometry({drawMode:this.props.drawContour?b.GL.LINES:b.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculateIndices",value:function(t){var e=this,n=this.state.choropleths.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+e.reduce(function(t,e){return t+e.length},0)])},[0]),r=this.state.IndexType;if(r===Uint16Array&&n[n.length-1]>65535)throw new Error("Vertex count exceeds browser's limit");var o=this.state.choropleths.map(function(t,r){return e.props.drawContour?l(t).map(function(t){return t+n[r]}):f(t).map(function(t){return t+n[r]})});t.value=new r((0,x.default)(o)),t.target=b.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(t.value.length/t.size)}},{key:"calculatePositionsFP64",value:function(t){var e=(0,x.default)(this.state.choropleths);t.value=new Float32Array(e.length/3*4);for(var n=0;n<e.length/3;n++){var r=(0,_.fp64ify)(e[3*n]),i=d(r,2);t.value[4*n]=i[0],t.value[4*n+1]=i[1];var o=(0,_.fp64ify)(e[3*n+1]),a=d(o,2);t.value[4*n+2]=a[0],t.value[4*n+3]=a[1]}}},{key:"calculateHeightsFP64",value:function(t){
var e=(0,x.default)(this.state.choropleths);t.value=new Float32Array(e.length/3*2);for(var n=0;n<e.length/3;n++){var r=(0,_.fp64ify)(e[3*n+2]),i=d(r,2);t.value[2*n]=i[0],t.value[2*n+1]=i[1]}}},{key:"calculateColors",value:function(t){var e=this.props,n=e.data.features,r=e.getColor,i=this.state.choropleths.map(function(t,e){var i=n[t.featureIndex],o=r(i)||O;return isNaN(o[3])&&(o[3]=O[3]),t.map(function(t){return t.map(function(t){return o})})});t.value=new Uint8Array((0,x.default)(i))}},{key:"calculatePickingColors",value:function(t){var e=this,n=this.state.choropleths.map(function(t,n){var r=t.featureIndex,i=e.props.drawContour?e.nullPickingColor():e.encodePickingColor(r);return t.map(function(t){return t.map(function(t){return i})})});t.value=new Uint8Array((0,x.default)(n))}}]),e}(g.Layer),h.layerName="ChoroplethLayer64",p);n.default=R},{"../../..":373,"../../../lib/utils/fp64":403,earcut:422,"geojson-normalize":450,"lodash.flattendeep":501,"luma.gl":530,path:26}],388:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./choropleth-layer-64");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./choropleth-layer-64":387}],389:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e){if(t[0]===e[0]&&t[1]===e[1])return[1,0,0];var n=Math.PI/180,r=n*t[0],i=n*e[0],o=n*t[1],a=n*e[1],s=Math.sin(i-r)*Math.cos(a),u=Math.cos(o)*Math.sin(a)-Math.sin(o)*Math.cos(a)*Math.cos(i-r);return T.vec3.normalize([],[u,0,-s])}function l(t){return t.reduce(function(t,e){return t+e.length},0)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f,h,p=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),m=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},y=t("../../.."),g=t("../../../lib/utils/fp64"),_=t("luma.gl"),b=t("lodash.flattendeep"),w=r(b),x=t("earcut"),E=r(x),T=t("gl-matrix"),S=(t("path"),[180,180,200]),M=[255,255,255],O=[40.4406,-79.9959,100],A=[255,255,255],R=[255,255,255],I=(h=f=function(t){function e(t){var n=t.opacity,r=void 0===n?1:n,i=t.elevation,u=void 0===i?1:i,c=o(t,["opacity","elevation"]);return a(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,d({opacity:r,elevation:u},c)))}return u(e,t),v(e,[{key:"initializeState",value:function(){this.state.attributeManager.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices},positions:{size:4,update:this.calculatePositions},heights:{size:2,update:this.calculateHeights},normals:{size:3,update:this.calculateNormals},colors:{size:3,update:this.calculateColors}});var t=this.context.gl;this.setState({numInstances:0,model:this.getModel(t)})}},{key:"updateState",value:function(t){var e=t.changeFlags,n=this.state.attributeManager;e.dataChanged&&(this.extractExtrudedChoropleth(),n.invalidateAll());var r=this.props,i=r.elevation,o=r.color,a=r.ambientColor,s=r.pointLightColor,u=r.pointLightLocation,c=r.pointLightAmbientCoefficient,l=r.pointLightAttenuation,f=r.materialSpecularColor,h=r.materialShininess;this.setUniforms({elevation:Number.isFinite(i)?i:1,colors:o||S,uAmbientColor:a||M,uPointLightAmbientCoefficient:c||.1,uPointLightLocation:u||O,uPointLightColor:s||A,uPointLightAttenuation:l||1,uMaterialSpecularColor:f||R,uMaterialShininess:h||1})}},{key:"draw",value:function(t){var e=t.uniforms;this.state.model.render(d({},e))}},{key:"pick",value:function(t){m(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"pick",this).call(this,t);var n=t.info,r=this.decodePickingColor(n.color),i=r>=0?this.props.data.features[r]:null;n.feature=i,n.object=i}},{key:"getShaders",value:function(){return{vs:"// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME extruded-choropleths-layer-vertex-shader\n\n// import MATH_FP64 from '../shaderlib/fp64/math-fp64';\n// import PROJECT from '../shaderlib/project';\n// import LIGHTING from '../shaderlib/lighting';\n\nuniform float opacity;\nuniform vec3 colors;\nuniform float elevation;\n\nuniform vec3 uAmbientColor;\nuniform float uPointLightAmbientCoefficient;\nuniform vec3 uPointLightLocation;\nuniform vec3 uPointLightColor;\nuniform float uPointLightAttenuation;\n\nuniform vec3 uMaterialSpecularColor;\nuniform float uMaterialShininess;\n\nattribute vec4 positions;\nattribute vec2 heights;\nattribute vec3 normals;\n\nvarying vec4 vColor;\n\nvec3 applyLighting(vec3 position_modelspace, vec3 normal_modelspace, vec3 color) {\n\n  vec3 pointLightLocation_modelspace = vec3(project_position(uPointLightLocation));\n  vec3 lightDirection = normalize(pointLightLocation_modelspace - position_modelspace);\n\n  vec3 ambient = uPointLightAmbientCoefficient * color / 255.0 * uAmbientColor / 255.0;\n\n  float diffuseCoefficient = max(dot(normal_modelspace, lightDirection), 0.0);\n  vec3 diffuse = diffuseCoefficient * uPointLightColor / 255. * color / 255.;\n\n  return ambient + uPointLightAttenuation * diffuse;\n}\n\nvoid main(void) {\n  vec2 projected_xy[2];\n  project_position_fp64(positions, projected_xy);\n  vec2 scaled_height = mul_fp64(heights, vec2(projectionPixelsPerUnit.x * elevation, 0.0));\n\n  vec2 vertex_pos_modelspace[4];\n  vertex_pos_modelspace[0] = projected_xy[0];\n  vertex_pos_modelspace[1] = projected_xy[1];\n  vertex_pos_modelspace[2] = sum_fp64(scaled_height, vec2(1.0, 0.0));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec3 color = applyLighting(\n  \tvec3(\n  \t  vertex_pos_modelspace[0].x,\n  \t  vertex_pos_modelspace[1].x,\n  \t  vertex_pos_modelspace[2].x),\n  \tnormals,\n  \tcolors\n  );\n  vColor = vec4(color, opacity);\n}\n// `;\n",fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/* fragment shader for the building-layer */\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n// `;\n',fp64:!0,project64:!0}}},{key:"getModel",value:function(t){if(!t.getExtension("OES_element_index_uint"))throw new Error("Extruded choropleth layer needs 32 bit indices");return t.enable(_.GL.DEPTH_TEST),t.depthFunc(_.GL.LEQUAL),new _.Model(d({gl:t,id:this.props.id},(0,y.assembleShaders)(t,this.getShaders()),{geometry:new _.Geometry({drawMode:this.props.drawWireframe?_.GL.LINES:_.GL.TRIANGLES}),vertexCount:0,isIndexed:!0}))}},{key:"calculatePositions",value:function(t){var e=this,n=this.state.positions;n||(n=(0,w.default)(this.state.groupedVertices.map(function(t){var n=Array.prototype.concat.apply([],t),r=n.map(function(t){return[t[0],t[1],0]});return e.props.drawWireframe?[n,r]:[n,n,n,r,r]}))),t.value=new Float32Array(n.length/3*4);for(var r=0;r<n.length/3;r++){var i=(0,g.fp64ify)(n[3*r+0]),o=p(i,2);t.value[4*r+0]=o[0],t.value[4*r+1]=o[1];var a=(0,g.fp64ify)(n[3*r+1]),s=p(a,2);t.value[4*r+2]=s[0],t.value[4*r+3]=s[1]}}},{key:"calculateHeights",value:function(t){var e=this,n=this.state.positions;n||(n=(0,w.default)(this.state.groupedVertices.map(function(t){var n=Array.prototype.concat.apply([],t),r=n.map(function(t){return[t[0],t[1],0]});return e.props.drawWireframe?[n,r]:[n,n,n,r,r]}))),t.value=new Float32Array(n.length/3*2);for(var r=0;r<n.length/3;r++){var i=(0,g.fp64ify)(n[3*r+2]+.1),o=p(i,2);t.value[2*r+0]=o[0],t.value[2*r+1]=o[1]}}},{key:"calculateNormals",value:function(t){var e=this,n=[0,1,0],r=this.state.groupedVertices.map(function(t,r){var i=new Array(l(t)).fill(n),o=t.map(function(t){return e.calculateSideNormals(t)}),a=o.map(function(t){return t[0]}),s=o.map(function(t){return t[1]});return e.props.drawWireframe?[i,i]:[i,a,s,a,s]});t.value=new Float32Array((0,w.default)(r))}},{key:"calculateSideNormals",value:function(t){for(var e=t.length,n=[],r=0;r<e-1;r++){var i=c(t[r],t[r+1]);n.push(i)}return[[].concat(n,[n[0]]),[n[0]].concat(n)]}},{key:"calculateIndices",value:function(t){var e=this,n=this.props.drawWireframe?2:5,r=this.state.groupedVertices.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+l(e)*n])},[0]),o=this.state.groupedVertices.map(function(t,n){return e.props.drawWireframe?e.calculateContourIndices(t,r[n]):e.calculateSurfaceIndices(t,r[n])});t.value=new Uint32Array((0,w.default)(o)),t.target=_.GL.ELEMENT_ARRAY_BUFFER,this.state.model.setVertexCount(t.value.length/t.size)}},{key:"calculateColors",value:function(t){var e=this,n=this.state.groupedVertices.map(function(t,n){var r=e.props.color,i=Array.isArray(r)?r[0]:r,o=Array.isArray(r)?r[r.length-1]:r,a=l(t),s=new Array(a).fill(o),u=new Array(a).fill(i);return e.props.drawWireframe?[s,u]:[s,s,s,u,u]});t.value=new Float32Array((0,w.default)(n))}},{key:"extractExtrudedChoropleth",value:function(){var t=this,e=this.props.data;this.state.buildings=[];var n=!0,r=!1,o=void 0;try{for(var a,s=function(){var e,n=a.value,r=n.properties,o=n.geometry,s=o.coordinates,u=o.type;switch(r.height||(r.height=1e3*Math.random()),u){case"MultiPolygon":var c=s.map(function(t){return{coordinates:t,properties:r}});(e=t.state.buildings).push.apply(e,i(c));break;case"Polygon":t.state.buildings.push({coordinates:s,properties:r})}},u=e.features[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)s()}catch(t){r=!0,o=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}this.state.groupedVertices=this.state.buildings.map(function(t){return t.coordinates.map(function(e){return e.map(function(e){return[e[0],e[1],t.properties.height||10]})})})}},{key:"calculateContourIndices",value:function(t,e){var n=l(t);return t.map(function(t){for(var r=[e],i=t.length,o=1;o<i-1;o++)r.push(o+e,o+e);r.push(e);for(var a=0;a<i-1;a++)r.push(a+e,a+n+e);return e+=i,r})}},{key:"calculateSurfaceIndices",value:function(t,e){function n(t){return a.map(function(n){return t+n[0]+r*n[1]+e})}var r=l(t),o=null,a=[[0,1],[0,3],[1,2],[1,2],[0,3],[1,4]];return t.length>1&&(o=t.reduce(function(t,e){return[].concat(i(t),[t[t.length-1]+e.length])},[0]).slice(1,t.length)),[(0,E.default)((0,w.default)(t),o,3).map(function(t){return t+e}),t.map(function(t){for(var r=t.length,o=[],a=0;a<r-1;a++)o.push.apply(o,i(n(a)));return e+=r,o})]}}]),e}(y.Layer),f.layerName="ExtrudedChoroplethLayer64",h);n.default=I},{"../../..":373,"../../../lib/utils/fp64":403,earcut:422,"gl-matrix":471,"lodash.flattendeep":501,"luma.gl":530,path:26}],390:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./extruded-choropleth-layer-64");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./extruded-choropleth-layer-64":389}],391:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=t("./scatterplot-layer"),o=r(i),a=t("./arc-layer"),s=r(a),u=t("./choropleth-layer"),c=r(u),l=t("./extruded-choropleth-layer"),f=r(l),h=t("./line-layer"),p=r(h);e.exports={ScatterplotLayer64:o.default,ArcLayer64:s.default,ChoroplethLayer64:c.default,ExtrudedChoroplethLayer64:f.default,LineLayer64:p.default}},{"./arc-layer":386,"./choropleth-layer":388,"./extruded-choropleth-layer":390,"./line-layer":392,"./scatterplot-layer":394}],392:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./line-layer-64");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./line-layer-64":393}],393:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=t("../../.."),p=t("../../../lib/utils/fp64"),d=t("luma.gl"),v=(t("path"),[0,255,0,255]),m=function(t){return t.sourcePosition},y=function(t){return t.targetPosition},g=function(t){return t.color||v},_=(u=s=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.getSourcePosition,a=void 0===n?m:n,s=t.getTargetPosition,u=void 0===s?y:s,c=t.getColor,f=void 0===c?g:c,h=t.strokeWidth,p=void 0===h?1:h,d=r(t,["getSourcePosition","getTargetPosition","getColor","strokeWidth"]);return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l({strokeWidth:p,getSourcePosition:a,getTargetPosition:u,getColor:f},d)))}return a(e,t),f(e,[{key:"initializeState",value:function(){var t=this.context.gl;this.setState({model:this.createModel(t)}),this.state.attributeManager.addInstanced({instanceSourcePositionsFP64:{size:4,update:this.calculateInstanceSourcePositions},instanceTargetPositionsFP64:{size:4,update:this.calculateInstanceTargetPositions},instanceElevations:{size:2,update:this.calculateInstanceElevations},instanceColors:{size:4,type:d.GL.UNSIGNED_BYTE,update:this.calculateInstanceColors}})}},{key:"draw",value:function(t){var e=t.uniforms,n=this.context.gl,r=this.screenToDevicePixels(this.props.strokeWidth);n.lineWidth(r),this.state.model.render(e),n.lineWidth(1)}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME line-layer-64-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instanceSourcePositionsFP64;\nattribute vec4 instanceTargetPositionsFP64;\nattribute vec2 instanceElevations;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\nuniform float opacity;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // Position\n  vec2 projectedSourceCoord[2];\n  project_position_fp64(instanceSourcePositionsFP64, projectedSourceCoord);\n  vec2 projectedTargetCoord[2];\n  project_position_fp64(instanceTargetPositionsFP64, projectedTargetCoord);\n\n  // linear interpolation of source & target to pick right coord\n  float segmentIndex = positions.x;\n  vec2 mixed_temp[2];\n\n  vec2_mix_fp64(projectedSourceCoord, projectedTargetCoord, segmentIndex, mixed_temp);\n\n  float mixedElevation =\n    mix(instanceElevations.x, instanceElevations.y, segmentIndex);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = mixed_temp[0];\n  vertex_pos_modelspace[1] = mixed_temp[1];\n  vertex_pos_modelspace[2] = vec2(project_scale(mixedElevation), 0.0);\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  // Color\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2015 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n#define SHADER_NAME line-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n',fp64:!0,project64:!0}}},{key:"createModel",value:function(t){var e=[0,0,0,1,1,1];return new d.Model(l({gl:t,id:this.props.id},(0,h.assembleShaders)(t,this.getShaders()),{geometry:new d.Geometry({drawMode:d.GL.LINE_STRIP,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstanceSourcePositions",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=t.value,o=t.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=r(d),m=(0,p.fp64ify)(v[0]),y=c(m,2);i[a+0]=y[0],i[a+1]=y[1];var g=(0,p.fp64ify)(v[1]),_=c(g,2);i[a+2]=_[0],i[a+3]=_[1],a+=o}}catch(t){u=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceTargetPositions",value:function(t){var e=this.props,n=e.data,r=e.getTargetPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=r(d),m=(0,p.fp64ify)(v[0]),y=c(m,2);i[a+0]=y[0],i[a+1]=y[1];var g=(0,p.fp64ify)(v[1]),_=c(g,2);i[a+2]=_[0],i[a+3]=_[1],a+=o}}catch(t){u=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceElevations",value:function(t){var e=this.props,n=e.data,r=e.getSourcePosition,i=e.getTargetPosition,o=t.value,a=t.size,s=0,u=!0,c=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=r(p),v=i(p);o[s+0]=d[2]||0,o[s+1]=v[2]||0,s+=a}}catch(t){c=!0,l=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,n=e.data,r=e.getColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?v[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}}]),e}(h.Layer),s.layerName="LineLayer64",u);n.default=_},{"../../..":373,"../../../lib/utils/fp64":403,"luma.gl":530,path:26}],394:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./scatterplot-layer-64");Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./scatterplot-layer-64":395}],395:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=t("../../.."),p=t("../../../lib/utils/fp64"),d=t("luma.gl"),v=(t("path"),[255,0,255,255]),m=function(t){return t.position},y=function(t){return t.radius},g=function(t){return t.color||v},_=(u=s=function(t){function e(t){var n=t.getPosition,a=void 0===n?m:n,s=t.getRadius,u=void 0===s?y:s,c=t.getColor,f=void 0===c?g:c,h=t.radius,p=void 0===h?30:h,d=t.radiusMinPixels,v=void 0===d?0:d,_=t.radiusMaxPixels,b=void 0===_?Number.MAX_SAFE_INTEGER:_,w=t.drawOutline,x=void 0!==w&&w,E=t.strokeWidth,T=void 0===E?1:E,S=r(t,["getPosition","getRadius","getColor","radius","radiusMinPixels","radiusMaxPixels","drawOutline","strokeWidth"]);return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,l({getPosition:a,getRadius:u,getColor:f,radius:p,drawOutline:x,strokeWidth:T,radiusMinPixels:v,radiusMaxPixels:b},S)))}return a(e,t),f(e,[{key:"initializeState",value:function(){var t=this.context.gl,e=this.state.attributeManager;this.setState({model:this.getModel(t)}),e.addInstanced({instancePositionsFP64:{size:4,update:this.calculateInstancePositions},instanceRadius:{size:1,update:this.calculateInstanceRadius},layerHeight:{size:2,update:this.calculateLayerHeight},instanceColors:{size:4,type:d.GL.UNSIGNED_BYTE,update:this.calculateInstanceColors}})}},{key:"draw",value:function(t){var e=t.uniforms;this.calculateZoomRadius(),this.state.model.render(l({},e,{radiusMinPixels:this.props.radiusMinPixels,radiusMaxPixels:this.props.radiusMaxPixels,zoomRadiusFP64:this.state.zoomRadiusFP64}))}},{key:"getShaders",value:function(){return{vs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-64-vertex-shader\n\nattribute vec3 positions;\nattribute vec4 instancePositionsFP64;\nattribute vec2 layerHeight;\nattribute float instanceRadius;\nattribute vec4 instanceColors;\nattribute vec3 instancePickingColors;\n\n// Only one-dimensional arrays may be declared in GLSL ES 1.0. specs p.24\nuniform float opacity;\nuniform vec2 zoomRadiusFP64;\nuniform float radiusMinPixels;\nuniform float radiusMaxPixels;\nuniform float renderPickingBuffer;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  // For some reason, need to add one to elevation to show up in untilted mode\n\n  vec2 projected_coord_xy[2];\n  project_position_fp64(instancePositionsFP64, projected_coord_xy);\n\n  vec2 pos_mul_radius[4];\n  vec4_fp64(vec4(positions * instanceRadius, 0.0), pos_mul_radius);\n\n  vec2 vertex_pos_localspace[4];\n  vec4_scalar_mul_fp64(pos_mul_radius, zoomRadiusFP64, vertex_pos_localspace);\n\n  vec2 vertex_pos_modelspace[4];\n\n  vertex_pos_modelspace[0] = sum_fp64(vertex_pos_localspace[0], projected_coord_xy[0]);\n  vertex_pos_modelspace[1] = sum_fp64(vertex_pos_localspace[1], projected_coord_xy[1]);\n  vertex_pos_modelspace[2] = sum_fp64(vertex_pos_localspace[2], vec2(layerHeight.x + 1.0, layerHeight.y));\n  vertex_pos_modelspace[3] = vec2(1.0, 0.0);\n\n  gl_Position = project_to_clipspace_fp64(vertex_pos_modelspace);\n\n  vec4 color = vec4(instanceColors.rgb, instanceColors.a * opacity) / 255.;\n  vec4 pickingColor = vec4(instancePickingColors / 255., 1.);\n\n  vColor = mix(\n    color,\n    pickingColor,\n    renderPickingBuffer\n  );\n}\n',fs:'// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the "Software"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n#define SHADER_NAME scatterplot-layer-fragment-shader\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  gl_FragColor = vColor;\n}\n\n',fp64:!0,project64:!0}}},{key:"getModel",value:function(t){for(var e=[],n=0;n<16;n++)e.push(Math.cos(2*Math.PI*n/16),Math.sin(2*Math.PI*n/16),0);return new d.Model(l({gl:t,id:this.props.id
},(0,h.assembleShaders)(t,this.getShaders()),{geometry:new d.Geometry({drawMode:d.GL.TRIANGLE_FAN,positions:new Float32Array(e)}),isInstanced:!0}))}},{key:"calculateInstancePositions",value:function(t){var e=this.props,n=e.data,r=e.getPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=r(d),m=(0,p.fp64ify)(v[0]),y=c(m,2);i[a+0]=y[0],i[a+1]=y[1];var g=(0,p.fp64ify)(v[1]),_=c(g,2);i[a+2]=_[0],i[a+3]=_[1],a+=o}}catch(t){u=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateLayerHeight",value:function(t){var e=this.props,n=e.data,r=e.getPosition,i=t.value,o=t.size,a=0,s=!0,u=!1,l=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value,v=r(d),m=(0,p.fp64ify)(v[2]||0),y=c(m,2);i[a+0]=y[0],i[a+1]=y[1],a+=o}}catch(t){u=!0,l=t}finally{try{!s&&h.return&&h.return()}finally{if(u)throw l}}}},{key:"calculateInstanceRadius",value:function(t){var e=this.props,n=e.data,r=e.getRadius,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h)||1;i[a+0]=p,a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateInstanceColors",value:function(t){var e=this.props,n=e.data,r=e.getColor,i=t.value,o=t.size,a=0,s=!0,u=!1,c=void 0;try{for(var l,f=n[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=r(h);i[a+0]=p[0],i[a+1]=p[1],i[a+2]=p[2],i[a+3]=isNaN(p[3])?v[3]:p[3],a+=o}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}}},{key:"calculateZoomRadius",value:function(){var t=this.projectFlat([-122,37.5]),e=this.projectFlat([-122,37.5002]),n=t[0]-e[0],r=t[1]-e[1],i=Math.max(Math.sqrt(n*n+r*r),2);this.state.zoomRadiusFP64=(0,p.fp64ify)(i)}}]),e}(h.Layer),s.layerName="ScatterplotLayer64",u);n.default=_},{"../../..":373,"../../../lib/utils/fp64":403,"luma.gl":530,path:26}],396:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("luma.gl"),l=t("./utils"),f=t("assert"),h=r(f),p=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,r=void 0===n?"attribute-manager":n;i(e,["id"]);o(this,t),this.id=r,this.attributes={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.onUpdateStart=a,this.onUpdateEnd=a,this.onLog=this._defaultLog,Object.seal(this)}return u(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e)}},{key:"invalidate",value:function(t){var e=this.attributes,n=e[t];if(!n){var r="invalidating non-existent attribute "+t+" for "+this.id+"\n";r+="Valid attributes: "+Object.keys(e).join(", "),(0,h.default)(n,r)}n.needsUpdate=!0,this.onLog(1,"invalidated attribute "+t+" for "+this.id)}},{key:"invalidateAll",value:function(){var t=this.attributes;for(var e in t)this.invalidate(e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.buffers,o=void 0===r?{}:r,a=t.props,s=void 0===a?{}:a,u=t.context,c=void 0===u?{}:u,l=i(t,["data","numInstances","buffers","props","context"]);this._checkExternalBuffers(o,l),this._setExternalBuffers(o),this._analyzeBuffers({numInstances:n})&&(this.onUpdateStart(this.id),this._updateBuffers({numInstances:n,data:e,props:s,context:c}),this.onUpdateEnd(this.id))}},{key:"setLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,n=t.onUpdateStart,r=t.onUpdateEnd;this.onLog=void 0!==e?e:this.onLog,this.onUpdateStart=void 0!==n?n:this.onUpdateStart,this.onUpdateEnd=void 0!==r?r:this.onUpdateEnd}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(t){var e=t.clearChangedFlags,n=void 0!==e&&e,r=this.attributes,i={};for(var o in r){var a=r[o];a.changed&&(a.changed=a.changed&&!n,i[o]=a)}return i}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,r=this.needsRedraw;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addDynamic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e)}},{key:"addInstanced",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e,{instanced:1})}},{key:"_defaultLog",value:function(t,e){l.log.log(t,e)}},{key:"_add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(var i in t){i in e&&(t[i]=s({},t[i],e[i]));var o=t[i];this._validate(i,o);var a=s({target:void 0,isIndexed:!1,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,size:o.size,value:o.value||null},n);Object.seal(a),this.attributes[i]=a}Object.assign(this.attributes,r)}},{key:"_validate",value:function(t,e){(0,h.default)("number"==typeof e.size,"Attribute definition for "+t+" missing size"),(0,h.default)("function"==typeof e.update||e.noAlloc,"Attribute updater for "+t+" missing update method")}},{key:"_checkExternalBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.attributes;for(var r in t){if(!n[r]&&!e.ignoreUnknownAttributes)throw new Error("Unknown attribute prop "+r)}}},{key:"_setExternalBuffers",value:function(t){var e=this.attributes,n=this.numInstances;for(var r in e){var i=e[r],o=t[r];if(i.isExternalBuffer=!1,o){if(!(o instanceof Float32Array))throw new Error("Attribute properties must be of type Float32Array");if(i.auto&&o.length<=n*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==o&&(i.value=o,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(t){var e=t.numInstances,n=this.attributes;(0,h.default)(void 0!==e,"numInstances not defined");var r=!1;for(var i in n){var o=n[i];if(!o.isExternalBuffer){(null===o.value||o.value.length/o.size<e)&&o.update&&(o.needsAlloc=!0,r=!0),o.needsUpdate&&(r=!0)}}return r}},{key:"_updateBuffers",value:function(t){var e=t.numInstances,n=t.data,r=t.props,i=t.context,o=this.attributes,a=Math.max(e,1);for(var s in o){var u=o[s];if(u.needsAlloc){var l=(0,c.glArrayFromType)(u.type||c.GL.FLOAT);u.value=new l(u.size*a),this.onLog(2,this.id+":"+s+" allocated "+a),u.needsAlloc=!1,u.needsUpdate=!0}if(u.needsUpdate){var f=u.update;f?(this.onLog(2,this.id+":"+s+" updating "+e),f.call(i,u,{data:n,props:r,numInstances:e})):this.onLog(2,this.id+":"+s+" missing update function"),u.needsUpdate=!1,u.changed=!0,this.needsRedraw=!0}}this.allocedInstances=a}}]),t}();n.default=p},{"./utils":404,assert:1,"luma.gl":530}],397:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.LayerManager=n.AttributeManager=n.Layer=void 0;var i=t("./layer");Object.defineProperty(n,"Layer",{enumerable:!0,get:function(){return r(i).default}});var o=t("./attribute-manager");Object.defineProperty(n,"AttributeManager",{enumerable:!0,get:function(){return r(o).default}});var a=t("./layer-manager");Object.defineProperty(n,"LayerManager",{enumerable:!0,get:function(){return r(a).default}});var s=t("./utils/object-iterator");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})}),t("./init")},{"./attribute-manager":396,"./init":398,"./layer":400,"./layer-manager":399,"./utils/object-iterator":406}],398:[function(t,e,n){"use strict";var r=t("../../package.json");console.log("deck.gl "+r.version+" - set deck.log.priority=2 to trace attribute updates")},{"../../package.json":420}],399:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){return t instanceof u.default?""+t:t?"invalid layer":"null layer"}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./layer"),u=r(s),c=t("../viewport"),l=t("./utils"),f=t("assert"),h=r(f),p=t("./pick-layers"),d=t("luma.gl"),v=function(){function t(e){var n=e.gl;i(this,t),this.prevLayers=[],this.layers=[],this.drewLayers=!1,this.oldContext={},this.context={gl:n,uniforms:{},viewport:null,viewportChanged:!0,pickingFBO:null},this.redrawNeeded=!0,Object.seal(this.context)}return a(t,[{key:"setContext",value:function(t){var e=t.width,n=t.height,r=t.latitude,i=t.longitude,o=t.zoom,a=t.pitch,s=t.bearing,u=t.altitude,f=this.context.viewport,h=!f||e!==f.width||n!==f.height||r!==f.latitude||i!==f.longitude||o!==f.zoom||s!==f.bearing||a!==f.pitch||u!==f.altitude;if(h||!this.context.viewport){Object.assign(this.oldContext,this.context);var p=new c.Viewport({width:e,height:n,latitude:r,longitude:i,zoom:o,pitch:a,bearing:s,altitude:u,tileSize:512});this.context.viewport=p,this.context.viewportChanged=h,this.context.uniforms={},(0,l.log)(4,p,r,i,o)}return this}},{key:"updateLayers",value:function(t){var e=t.newLayers;(0,h.default)(this.context.viewport,"LayerManager.updateLayers: viewport not set"),e=e.filter(function(t){return null!==t});var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value.context=this.context}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.prevLayers=this.layers;var s=this._updateLayers({oldLayers:this.prevLayers,newLayers:e}),u=s.error,c=s.generatedLayers;if(this.layers=c,u)throw u;return this}},{key:"drawLayers",value:function(){(0,h.default)(this.context.viewport,"LayerManager.drawLayers: viewport not set");var t=this.context.uniforms,e=0,n=!0,r=!1,i=void 0;try{for(var o,a=this.layers[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.props.visible&&(s.drawLayer({uniforms:t,layerIndex:e}),e++)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return this}},{key:"pickLayer",value:function(t){var e=t.x,n=t.y,r=t.mode,i=this.context,o=i.gl,a=i.uniforms;return null!==this.context.pickingFBO&&o.canvas.width===this.context.pickingFBO.width&&o.canvas.height===this.context.pickingFBO.height||(this.context.pickingFBO=new d.FramebufferObject(o,{width:o.canvas.width,height:o.canvas.height})),(0,p.pickLayers)(o,{x:e,y:n,uniforms:a,layers:this.layers,mode:r,pickingFBO:this.context.pickingFBO})}},{key:"needsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e;if(!this.context.viewport)return!1;var r=!1;if(0===this.layers.length&&this.drewLayers)return r=!0,!0;this.redrawNeeded&&(this.redrawNeeded=!1,r=!0);var i=!0,o=!1,a=void 0;try{for(var s,u=this.layers[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r||c.getNeedsRedraw({clearRedrawFlags:n}),this.drewLayers=!0}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}},{key:"_updateLayers",value:function(t){var e=t.oldLayers,n=t.newLayers,r={},i=!0,a=!1,s=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=u.value;r[f.id]?l.log.once(0,"Multipe old layers with same id "+o(f)):r[f.id]=f}}catch(t){a=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(a)throw s}}var h=[],p=this._matchSublayers({newLayers:n,oldLayerMap:r,generatedLayers:h}),d=this._finalizeOldLayers(e);return{error:p||d,generatedLayers:h}}},{key:"_matchSublayers",value:function(t){var e=t.newLayers,n=t.oldLayerMap,r=t.generatedLayers;e=e.filter(function(t){return null!==t});var i=null,a=!0,s=!1,u=void 0;try{for(var c,f=e[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var h=c.value;h.context=this.context;try{var p=n[h.id];n[h.id]=null,null===p&&l.log.once(0,"Multipe new layers with same id "+o(h)),p?((0,l.log)(3,"matched "+o(h),p,"=>",h),this._transferLayerState(p,h),this._updateLayer(h)):this._initializeNewLayer(h),r.push(h);var d=h.renderLayers();d&&(d=Array.isArray(d)?d:[d],this._matchSublayers({newLayers:d,oldLayerMap:n,generatedLayers:r}))}catch(t){l.log.once(0,"deck.gl error during matching of "+o(h)+" "+t,t),i=i||t}}}catch(t){s=!0,u=t}finally{try{!a&&f.return&&f.return()}finally{if(s)throw u}}return i}},{key:"_transferLayerState",value:function(t,e){var n=t.state,r=t.props;(0,h.default)(n,"deck.gl sanity check - Matching layer has no state"),(0,h.default)(t!==e,"deck.gl sanity check - Matching layer is same"),e.state=n,n.layer=e,n.model&&(n.model.userData.layer=e),e.oldProps=r,t.state=null}},{key:"_finalizeOldLayers",value:function(t){var e=null,n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.state&&(e=e||this._finalizeLayer(s))}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return e}},{key:"_initializeNewLayer",value:function(t){var e=null;if(!t.state){(0,l.log)(1,"initializing "+o(t));try{t.initializeLayer({oldProps:{},props:t.props,oldContext:this.oldContext,context:this.context,changeFlags:t.diffProps({},t.props,this.context)})}catch(n){l.log.once(0,"deck.gl error during initialization of "+o(t)+" "+n,n),e=e||n}t.state&&(t.state.layer=t),t.state&&t.state.model&&(t.state.model.userData.layer=t)}return e}},{key:"_updateLayer",value:function(t){var e=t.oldProps,n=t.props,r=null;if(e){try{t.updateLayer({oldProps:e,props:n,context:this.context,oldContext:this.oldContext,changeFlags:t.diffProps(e,t.props,this.context)})}catch(e){l.log.once(0,"deck.gl error during update of "+o(t),e),r=e}(0,l.log)(2,"updating "+o(t))}return r}},{key:"_finalizeLayer",value:function(t){var e=null;if(t.state){try{t.finalizeLayer()}catch(n){l.log.once(0,"deck.gl error during finalization of "+o(t),n),e=n}t.state=null,(0,l.log)(1,"finalizing "+o(t))}return e}}]),t}();n.default=v},{"../viewport":415,"./layer":400,"./pick-layers":401,"./utils":404,assert:1,"luma.gl":530}],400:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./attribute-manager"),l=r(c),f=t("luma.gl"),h=t("./utils"),p=t("assert"),d=r(p),v={data:[],dataIterator:null,dataComparator:null,numInstances:void 0,visible:!0,pickable:!1,opacity:.8,onHover:function(){},onClick:function(){},getValue:function(t){return t},updateTriggers:{}},m=0,y=function(){function t(e){o(this,t),e=s({},v,e,{data:e.data||[],id:e.id||this.constructor.layerName}),this.id=e.id,this.count=m++,this.props=e,this.oldProps=null,this.state=null,this.context=null,Object.seal(this),this.validateRequiredProp("id",function(t){return"string"==typeof t}),this.validateRequiredProp("data"),e.data&&((0,h.addIterator)(e.data),e.data[Symbol.iterator]||h.log.once(0,"data prop must have iterator")),this._validateDeprecatedProps()}return u(t,[{key:"toString",value:function(){var t=this.constructor.name;return t!==this.props.id?"<"+t+":'"+this.props.id+"'>":"<"+t+">"}},{key:"initializeState",value:function(){throw new Error("Layer "+this+" has not defined initializeState")}},{key:"finalizeState",value:function(){}},{key:"shouldUpdateState",value:function(t){t.oldProps,t.props,t.oldContext,t.context;return t.changeFlags.somethingChanged}},{key:"updateState",value:function(t){t.oldProps,t.props,t.oldContext,t.context;t.changeFlags.dataChanged&&this.state.attributeManager&&this.state.attributeManager.invalidateAll()}},{key:"renderLayers",value:function(){return null}},{key:"draw",value:function(t){var e=t.uniforms,n=void 0===e?{}:e;this.state.model&&this.state.model.render(n)}},{key:"pick",value:function(t){var e=t.info,n=t.uniforms,r=t.pickEnableUniforms,i=t.pickDisableUniforms,o=t.mode,s=this.context.gl,u=this.state.model;if(u){u.setUniforms(r),u.render(n),u.setUniforms(i);var c=a(e.devicePixel,2),l=c[0],h=c[1],p=new Uint8Array(4);if(s.readPixels(l,h,1,1,f.GL.RGBA,f.GL.UNSIGNED_BYTE,p),e.index=this.decodePickingColor(p),e.color=p,"hover"===o){var d=new Float32Array(3);d[0]=p[0],d[1]=p[1],d[2]=p[2],this.setUniforms({selectedPickingColor:d})}}}},{key:"setState",value:function(t){Object.assign(this.state,t),this.state.needsRedraw=!0}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.state&&(this.state.needsRedraw=t)}},{key:"project",value:function(t){var e=this.context.viewport;return(0,d.default)(Array.isArray(t),"Layer.project needs [lng,lat]"),e.project(t)}},{key:"unproject",value:function(t){var e=this.context.viewport;return(0,d.default)(Array.isArray(t),"Layer.unproject needs [x,y]"),e.unproject(t)}},{key:"projectFlat",value:function(t){var e=this.context.viewport;return(0,d.default)(Array.isArray(t),"Layer.project needs [lng,lat]"),e.projectFlat(t)}},{key:"unprojectFlat",value:function(t){var e=this.context.viewport;return(0,d.default)(Array.isArray(t),"Layer.unproject needs [x,y]"),e.unprojectFlat(t)}},{key:"screenToDevicePixels",value:function(t){return t*("undefined"!=typeof window?window.devicePixelRatio:1)}},{key:"nullPickingColor",value:function(){return[0,0,0]}},{key:"encodePickingColor",value:function(t){return[(t+1)%256,Math.floor((t+1)/256)%256,Math.floor((t+1)/256/256)%256]}},{key:"decodePickingColor",value:function(t){(0,d.default)(t instanceof Uint8Array);var e=a(t,3);return e[0]+256*e[1]+65536*e[2]-1}},{key:"calculateInstancePickingColors",value:function(t,e){for(var n=e.numInstances,r=t.value,i=t.size,o=0;o<n;o++){var a=this.encodePickingColor(o);r[o*i+0]=a[0],r[o*i+1]=a[1],r[o*i+2]=a[2]}}},{key:"getFirstObject",value:function(){var t=this.props.data,e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){return i.value}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"getNumInstances",value:function(t){if(t=t||this.props,this.state&&void 0!==this.state.numInstances)return this.state.numInstances;if(void 0!==t.numInstances)return t.numInstances;var e=t,n=e.data;if(n&&"function"==typeof n.count)return n.count();if(n&&void 0!==n.size)return n.size;if(n&&void 0!==n.length)return n.length;throw new Error("Could not deduce numInstances")}},{key:"initializeLayer",value:function(t){(0,d.default)(this.context.gl,"Layer context missing gl"),(0,d.default)(!this.state,"Layer missing state"),this.state={},this.setState({attributeManager:new l.default({id:this.props.id}),model:null,needsRedraw:!0,dataChanged:!0}),this.state.attributeManager.setLogFunctions(this.props);var e=this.state.attributeManager;e.addInstanced({instancePickingColors:{type:f.GL.UNSIGNED_BYTE,size:3,update:this.calculateInstancePickingColors}}),this.initializeState(),this.updateState(t),this._updateAttributes(this.props),this._updateBaseUniforms();var n=this.state.model;n&&(n.setInstanceCount(this.getNumInstances()),n.id=this.props.id,n.program.id=this.props.id+"-program",n.geometry.id=this.props.id+"-geometry",n.setAttributes(e.getAttributes()))}},{key:"updateLayer",value:function(e){if(this.shouldUpdate&&h.log.once(0,"deck.gl v3 shouldUpdate deprecated. Use shouldUpdateState in "+this),this.shouldUpdateState(e)){if(this.willReceiveProps&&this.willReceiveProps!==t.prototype.willReceiveProps){h.log.once(0,"deck.gl v3 willReceiveProps deprecated. Use updateState in "+this);var n=e.oldProps,r=e.props,i=e.changeFlags;this.setState(i),this.willReceiveProps(n,r,i),this.setState({dataChanged:!1,viewportChanged:!1})}this.updateState(e),this._updateAttributes(e.newProps),this._updateBaseUniforms(),this.state.model&&this.state.model.setInstanceCount(this.getNumInstances())}}},{key:"finalizeLayer",value:function(){this.finalizeState()}},{key:"drawLayer",value:function(t){var e=t.uniforms,n=void 0===e?{}:e,r=t.layerIndex,i=void 0===r?0:r;(0,d.default)(this.context.viewport,"Layer missing context.viewport"),n=s({},n,this.context.viewport.getUniforms(this.props),{layerIndex:i}),this.draw({uniforms:n})}},{key:"pickLayer",value:function(t){var e=t.uniforms,n=void 0===e?{}:e,r=i(t,["uniforms"]);return n=s({},n,this.context.viewport.getUniforms(this.props),{renderPickingBuffer:!0}),this.pick(s({uniforms:n},r))}},{key:"diffProps",value:function(t,e,n){var r=(0,h.compareProps)({newProps:e,oldProps:t,ignoreProps:{data:null,updateTriggers:null}}),i=this._diffDataProps(t,e),o=Boolean(r),a=Boolean(i),s=n.viewportChanged,u=o||a||s;return a?h.log.log(1,"dataChanged: "+a):this._diffUpdateTriggers(t,e),{propsChanged:o,dataChanged:a,viewportChanged:s,somethingChanged:u,reason:i||r}}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e;if(!this.state)return!1;var r=!1;r=r||this.state.needsRedraw,this.state.needsRedraw=this.state.needsRedraw&&!n;var i=this.state,o=i.attributeManager,a=i.model;return r=r||o&&o.getNeedsRedraw({clearRedrawFlags:n}),r=r||a&&a.getNeedsRedraw({clearRedrawFlags:n})}},{key:"_diffDataProps",value:function(t,e){var n=e.dataComparator;if(n){if(!n(e.data,t.data))return"Data comparator detected a change"}else if(e.data!==t.data)return"A new data container was supplied";return null}},{key:"_diffUpdateTriggers",value:function(t,e){var n=this.state.attributeManager;if(!n)return!1;var r=!1;for(var i in e.updateTriggers){var o=t.updateTriggers[i],a=e.updateTriggers[i],s=(0,h.compareProps)({oldProps:o,newProps:a});s&&("all"===i?(h.log.log(1,"updateTriggers invalidating all attributes: "+s),n.invalidateAll(),r=!0):(h.log.log(1,"updateTriggers invalidating attribute "+i+": "+s),n.invalidate(i),r=!0))}return r}},{key:"validateRequiredProp",value:function(t,e){var n=this.props[t];if(void 0===n)throw new Error("Property "+t+" undefined in layer "+this);if(e&&!e(n))throw new Error("Bad property "+t+" in layer "+this)}},{key:"_updateAttributes",value:function(t){var e=this.state,n=e.attributeManager,r=e.model;if(n){var i=this.getNumInstances(t);if(n.update({numInstances:i,bufferMap:t,context:this,ignoreUnknownAttributes:!0}),r){var o=n.getChangedAttributes({clearChangedFlags:!0});r.setAttributes(o)}}}},{key:"_updateBaseUniforms",value:function(){this.setUniforms({opacity:Math.pow(this.props.opacity,1/2.2),ONE:1})}},{key:"willReceiveProps",value:function(){}},{key:"setUniforms",value:function(t){this.state.model&&this.state.model.setUniforms(t),this.state.needsRedraw=!0,(0,h.log)(3,"layer.setUniforms",t)}},{key:"_validateDeprecatedProps",value:function(){void 0!==this.props.isPickable&&h.log.once(0,"No isPickable prop in deckgl v3 - use pickable instead"),(void 0!==this.props.latitude||void 0!==this.props.longitude||void 0!==this.props.zoom||void 0!==this.props.pitch||void 0!==this.props.bearing)&&h.log.once(0,"deck.gl v3 no longer needs viewport props in Layer "+this)}}]),t}();n.default=y},{"./attribute-manager":396,"./utils":404,assert:1,"luma.gl":530}],401:[function(t,e,n){"use strict";function r(t,e){var n=e.layers,r=e.pickingFBO,a=e.uniforms,s=void 0===a?{}:a,u=e.x,c=e.y,l=e.mode,f="undefined"!=typeof window?window.devicePixelRatio:1,h=u*f,p=t.canvas.height-c*f,d=[];(0,o.glContextWithState)(t,{frameBuffer:r,framebuffer:r,scissorTest:{x:h,y:p,w:1,h:1}},function(){var e=0,r=t.isEnabled(o.GL.BLEND);t.disable(o.GL.BLEND);for(var a=n.length-1;a>=0;--a){var v=n[a];if(v.props.visible&&v.props.pickable){t.clear(o.GL.COLOR_BUFFER_BIT|o.GL.DEPTH_BUFFER_BIT);var m=i({layer:v,pixel:[u,c],devicePixel:[h,p],pixelRatio:f});v.pickLayer({info:m,uniforms:s,pickEnableUniforms:{renderPickingBuffer:1,pickingEnabled:1},pickDisableUniforms:{renderPickingBuffer:0,pickingEnabled:0},deviceX:h,deviceY:p,mode:l}),m.index>=0&&(m.picked=!0,m.zOrder=e++,Array.isArray(v.props.data)&&(m.object=v.props.data[m.index])),d.push(m)}}r&&t.enable(o.GL.BLEND)});var v=[],m=!0,y=!1,g=void 0;try{for(var _,b=d[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var w=_.value,x=null;switch(l){case"click":x=w.layer.props.onClick(w);break;case"hover":x=w.layer.props.onHover(w);break;default:throw new Error("unknown pick type")}x||v.push(w)}}catch(t){y=!0,g=t}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return v}function i(t){var e=(t.info,t.layer),n=t.pixel,r=t.devicePixel,i=t.pixelRatio;return{layer:e,index:-1,picked:!1,x:n[0],y:n[1],pixel:n,devicePixel:r,pixelRatio:i,lngLat:e.unproject(n)}}Object.defineProperty(n,"__esModule",{value:!0}),n.pickLayers=r;var o=t("luma.gl")},{"luma.gl":530}],402:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.oldProps,n=t.newProps,r=t.ignoreProps,i=void 0===r?{}:r;if((0,u.default)(void 0!==e&&void 0!==n,"compareProps args"),e===n)return null;if("object"!==(void 0===e?"undefined":a(e))||null===e)return"old props is not an object";if("object"!==(void 0===n?"undefined":a(n))||null===n)return"new props is not an object";for(var o in e)if(!(o in i)){if(!n.hasOwnProperty(o))return"prop "+o+" dropped: "+e[o]+" -> (undefined)";if(e[o]!==n[o])return"prop "+o+" changed: "+e[o]+" -> "+n[o]}for(var s in n)if(!(s in i||e.hasOwnProperty(s)))return"prop "+s+" added: (undefined) -> "+n[s];return null}function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.ignore,i=void 0===r?{}:r;if(t===e)return!0;if("object"!==(void 0===t?"undefined":a(t))||null===t||"object"!==(void 0===e?"undefined":a(e))||null===e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var o in t)if(!(o in i||o in e&&t[o]===e[o]))return!1;for(var s in e)if(!(s in i||s in t))return!1;return!0}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.compareProps=i,n.areEqualShallow=o;var s=t("assert"),u=r(s)},{assert:1}],403:[function(t,e,n){"use strict";function r(t){return[Math.fround(t),t-Math.fround(t)]}Object.defineProperty(n,"__esModule",{value:!0}),n.fp64ify=r},{}],404:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./object-iterator");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./compare-objects");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./log");Object.defineProperty(n,"log",{enumerable:!0,get:function(){return r(a).default}});var s=t("./fp64");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})})},{"./compare-objects":402,"./fp64":403,"./log":405,"./object-iterator":406}],405:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if((0,s.default)(Number.isFinite(t),"log priority must be a number"),t<=i.priority){for(var e,n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).debug.apply(e,r)}}function o(t,e){if(!u[e]){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];i.apply(void 0,[t,e].concat(r))}u[e]=!0}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var a=t("assert"),s=r(a),u={};i.priority=0,i.log=i,i.once=o,"undefined"!=typeof window&&(window.deck=window.deck||{log:i})},{assert:1}],406:[function(t,e,n){"use strict";function r(t){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=regeneratorRuntime.keys(t);case 1:if((n.t1=n.t0()).done){n.next=8;break}if(e=n.t1.value,!t.hasOwnProperty(e)){n.next=6;break}return n.next=6,t[e];case 6:n.next=1;break;case 8:case"end":return n.stop()}},s[0],this)}function i(t){o(t)&&!t[Symbol.iterator]&&(t[Symbol.iterator]=function(){return r(t)})}function o(t){return null!==t&&"object"===(void 0===t?"undefined":a(t))&&t.constructor===Object}Object.defineProperty(n,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n.makeObjectValueIterator=r,n.addIterator=i,n.isPlainObject=o;var s=[r].map(regeneratorRuntime.mark)},{}],407:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function c(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l,f,h,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d=function(){function t(t,e){
for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=t("react"),m=r(v),y=t("autobind-decorator"),g=r(y),_=t("./webgl-renderer"),b=r(_),w=t("../lib"),x=t("../experimental"),E=t("luma.gl"),T=t("../lib/utils"),S=(h=f=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n.needsRedraw=!0,n.layerManager=null,n.effectManager=null,n}return s(e,t),d(e,[{key:"componentWillReceiveProps",value:function(t){this._updateLayers(t)}},{key:"_updateLayers",value:function(t){var e=t.width,n=t.height,r=t.latitude,i=t.longitude,o=t.zoom,a=t.pitch,s=t.bearing,u=t.altitude;this.layerManager&&this.layerManager.setContext({width:e,height:n,latitude:r,longitude:i,zoom:o,pitch:a,bearing:s,altitude:u}).updateLayers({newLayers:t.layers})}},{key:"_onRendererInitialized",value:function(t){var e=t.gl,n=t.canvas;e.enable(E.GL.BLEND),e.blendFunc(E.GL.SRC_ALPHA,E.GL.ONE_MINUS_SRC_ALPHA),this.props.onWebGLInitialized(e),this.layerManager=new w.LayerManager({gl:e}),this.effectManager=new x.EffectManager({gl:e,layerManager:this.layerManager});var r=!0,i=!1,o=void 0;try{for(var a,s=this.props.effects[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this.effectManager.addEffect(u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this._updateLayers(this.props);var l=this.props.onLayerClick!==c||this.props.onLayerHover!==c,f=this.layerManager.layers.map(function(t){return t.props.pickable}).includes(!0);l&&!f&&T.log.once(0,"You have supplied a mouse event handler but none of your layers got the `pickable` flag."),this.events=(0,E.addEvents)(n,{cacheSize:!1,cachePosition:!1,centerOrigin:!1,onClick:this._onClick,onMouseMove:this._onMouseMove})}},{key:"_onClick",value:function(t){var e=t.x,n=t.y,r=this.layerManager.pickLayer({x:e,y:n,mode:"click"}),i=r.find(function(t){return t.index>=0});this.props.onLayerClick(i,r,t.event)}},{key:"_onMouseMove",value:function(t){var e=t.x,n=t.y,r=this.layerManager.pickLayer({x:e,y:n,mode:"hover"}),i=r.find(function(t){return t.index>=0});this.props.onLayerHover(i,r,t.event)}},{key:"_onRenderFrame",value:function(t){var e=t.gl;this.layerManager.needsRedraw({clearRedrawFlags:!0})&&(e.clear(E.GL.COLOR_BUFFER_BIT|E.GL.DEPTH_BUFFER_BIT),this.effectManager.preDraw(),this.layerManager.drawLayers(),this.effectManager.draw())}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.gl,o=t.debug,a=i(t,["width","height","gl","debug"]);return m.default.createElement(b.default,p({},a,{width:e,height:n,gl:r,debug:o,viewport:{x:0,y:0,width:e,height:n},onRendererInitialized:this._onRendererInitialized,onNeedRedraw:this._onNeedRedraw,onRenderFrame:this._onRenderFrame,onMouseMove:this._onMouseMove,onClick:this._onClick}))}}]),e}(m.default.Component),f.propTypes={id:v.PropTypes.string,width:v.PropTypes.number.isRequired,height:v.PropTypes.number.isRequired,layers:v.PropTypes.arrayOf(v.PropTypes.instanceOf(w.Layer)).isRequired,effects:v.PropTypes.arrayOf(v.PropTypes.instanceOf(x.Effect)),gl:v.PropTypes.object,debug:v.PropTypes.bool,onWebGLInitialized:c,onLayerClick:c,onLayerHover:c},f.defaultProps={id:"deckgl-overlay",debug:!1,gl:null,effects:[],onWebGLInitialized:c,onLayerClick:c,onLayerHover:c},l=h,u(l.prototype,"_onRendererInitialized",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onRendererInitialized"),l.prototype),u(l.prototype,"_onClick",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onClick"),l.prototype),u(l.prototype,"_onMouseMove",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onMouseMove"),l.prototype),u(l.prototype,"_onRenderFrame",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onRenderFrame"),l.prototype),l);n.default=S},{"../experimental":369,"../lib":397,"../lib/utils":404,"./webgl-renderer":408,"autobind-decorator":49,"luma.gl":530,react:956}],408:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c,l,f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},h=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),p=t("react"),d=r(p),v=t("autobind-decorator"),m=r(v),y=t("luma.gl"),g="undefined"!=typeof window&&window.devicePixelRatio||1,_=(l=c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={},n._animationFrame=null,n.gl=null,n}return a(e,t),h(e,[{key:"componentDidMount",value:function(){var t=this.refs.overlay;this._initWebGL(t),this._animationLoop()}},{key:"componentWillUnmount",value:function(){this._cancelAnimationLoop()}},{key:"_initWebGL",value:function(t){var e=this.props,n=e.debug,r=e.glOptions,i=this.props.gl;if(!i)try{i=(0,y.createGLContext)(f({canvas:t,debug:n},r))}catch(t){return void this.props.onInitializationFailed(t)}this.gl=i,this.props.onRendererInitialized({canvas:t,gl:i})}},{key:"_animationLoop",value:function(){this._renderFrame(),"undefined"!=typeof window&&(this._animationFrame=requestAnimationFrame(this._animationLoop))}},{key:"_cancelAnimationLoop",value:function(){this._animationFrame&&cancelAnimationFrame(this._animationFrame)}},{key:"_updateGLViewport",value:function(){var t=this.props.viewport,e=t.x,n=t.y,r=t.width,i=t.height,o=this.props.pixelRatio,a=this.gl;e*=o,n*=o,r*=o,i*=o,e===this.x&&n===this.y&&r===this.w&&i===this.h||(a.viewport(e,n,r,i),this.x=e,this.y=n,this.w=r,this.h=i)}},{key:"_renderFrame",value:function(){var t=this.props.viewport,e=t.width,n=t.height,r=this.gl;r&&e>0&&n>0&&(this._updateGLViewport(),this.props.onRenderFrame({gl:r}))}},{key:"render",value:function(){var t=this.props,e=t.id,n=t.width,r=t.height,i=t.pixelRatio,o=t.style;return d.default.createElement("canvas",{ref:"overlay",key:"overlay",id:e,width:n*i,height:r*i,style:f({},o,{width:n,height:r})})}}]),e}(d.default.Component),c.propTypes={id:p.PropTypes.string.isRequired,width:p.PropTypes.number.isRequired,height:p.PropTypes.number.isRequired,style:p.PropTypes.object,pixelRatio:p.PropTypes.number,viewport:p.PropTypes.object.isRequired,blending:p.PropTypes.object,events:p.PropTypes.object,gl:p.PropTypes.object,glOptions:p.PropTypes.object,debug:p.PropTypes.bool,onRendererInitialized:p.PropTypes.func.isRequired,onInitializationFailed:p.PropTypes.func,onError:p.PropTypes.func,onRenderFrame:p.PropTypes.func,onMouseMove:p.PropTypes.func,onClick:p.PropTypes.func},c.defaultProps={style:{},gl:null,glOptions:{preserveDrawingBuffer:!0},debug:!1,pixelRatio:g,onRendererInitialized:function(){},onInitializationFailed:function(t){throw t},onError:function(t){throw t},onRenderFrame:function(){}},u=l,s(u.prototype,"_animationLoop",[m.default],Object.getOwnPropertyDescriptor(u.prototype,"_animationLoop"),u.prototype),u);n.default=_},{"autobind-decorator":49,"luma.gl":530,react:956}],409:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){var n=t.vendor,r=t.renderer,i=void 0;switch(e){case"nvidia":i=n.match(/NVIDIA/i)||r.match(/NVIDIA/i);break;case"intel":i=n.match(/INTEL/i)||r.match(/INTEL/i);break;case"amd":i=n.match(/AMD/i)||r.match(/AMD/i)||n.match(/ATI/i)||r.match(/ATI/i);break;default:i=!1}return i}function a(t){var e="",n=(0,l.glGetDebugInfo)(t);return e+=o(n,"nvidia")?"#define NVIDIA_GPU\n#define NVIDIA_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n":o(n,"intel")?"#define INTEL_GPU\n#define INTEL_FP64_WORKAROUND 1\n#define NVIDIA_EQUATION_WORKAROUND 1\n #define INTEL_TAN_WORKAROUND 1\n":o(n,"amd")?"#define AMD_GPU\n":"#define DEFAULT_GPU\n"}function s(t,e){var n=e.vs,r=(e.fs,e.fp64),o=void 0!==r&&r,s=e.project,u=void 0===s||s,l=e.project64,f=void 0!==l&&l,p=i(e,["vs","fs","fp64","project","project64"]);f===!0&&(o=!0);var d=a(t)+"\n";p=c({},p,{project:u,project64:f,fp64:o});var v=!0,m=!1,y=void 0;try{for(var g,_=Object.keys(h.default)[Symbol.iterator]();!(v=(g=_.next()).done);v=!0){var b=g.value;p[b]&&(d+=h.default[b].source+"\n")}}catch(t){m=!0,y=t}finally{try{!v&&_.return&&_.return()}finally{if(m)throw y}}return d+=n}function u(t,e){var n=e.vs,r=e.fs;return{gl:t,vs:s(t,c({},i(e,["vs","fs"]),{vs:n})),fs:r}}Object.defineProperty(n,"__esModule",{value:!0});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.checkRendererVendor=o,n.getPlatformShaderDefines=a,n.assembleShaders=u;var l=t("luma.gl"),f=t("./shader-chunks"),h=r(f)},{"./shader-chunks":411,"luma.gl":530}],410:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./assemble-shaders");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})})},{"./assemble-shaders":409}],411:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=t("../../dist/shaderlib/fp64"),a=r(o),s=t("../../dist/shaderlib/project"),u=r(s),c=t("../../dist/shaderlib/project64"),l=r(c);e.exports=i({},a.default,u.default,l.default)},{"../../dist/shaderlib/fp64":412,"../../dist/shaderlib/project":413,"../../dist/shaderlib/project64":414}],412:[function(t,e,n){"use strict";e.exports={fp64:{interface:"fp64",
source:"// Copyright (c) 2016 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nuniform float ONE;\n\nconst vec2 E_FP64 = vec2(2.7182817459106445e+00, 8.254840366817007e-08);\nconst vec2 LOG2_FP64 = vec2(0.6931471824645996e+00, -1.9046542121259336e-09);\nconst vec2 PI_FP64 = vec2(3.1415927410125732, -8.742278012618954e-8);\nconst vec2 TWO_PI_FP64 = vec2(6.2831854820251465, -1.7484556025237907e-7);\nconst vec2 PI_2_FP64 = vec2(1.5707963705062866, -4.371139006309477e-8);\nconst vec2 PI_4_FP64 = vec2(0.7853981852531433, -2.1855695031547384e-8);\nconst vec2 PI_16_FP64 = vec2(0.19634954631328583, -5.463923757886846e-9);\nconst vec2 PI_16_2_FP64 = vec2(0.39269909262657166, -1.0927847515773692e-8);\nconst vec2 PI_16_3_FP64 = vec2(0.5890486240386963, -1.4906100798128818e-9);\nconst vec2 PI_180_FP64 = vec2(0.01745329238474369, 1.3519960498364902e-10);\n\nconst vec2 SIN_TABLE_0_FP64 = vec2(0.19509032368659973, -1.6704714833615242e-9);\nconst vec2 SIN_TABLE_1_FP64 = vec2(0.3826834261417389, 6.22335089017767e-9);\nconst vec2 SIN_TABLE_2_FP64 = vec2(0.5555702447891235, -1.1769521357507529e-8);\nconst vec2 SIN_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617041793133e-8);\n\nconst vec2 COS_TABLE_0_FP64 = vec2(0.9807852506637573, 2.9739473106360492e-8);\nconst vec2 COS_TABLE_1_FP64 = vec2(0.9238795042037964, 2.8307490351764386e-8);\nconst vec2 COS_TABLE_2_FP64 = vec2(0.8314695954322815, 1.6870263741530778e-8);\nconst vec2 COS_TABLE_3_FP64 = vec2(0.7071067690849304, 1.2101617152815436e-8);\n\nconst vec2 INVERSE_FACTORIAL_3_FP64 = vec2(1.666666716337204e-01, -4.967053879312289e-09); // 1/3!\nconst vec2 INVERSE_FACTORIAL_4_FP64 = vec2(4.16666679084301e-02, -1.2417634698280722e-09); // 1/4!\nconst vec2 INVERSE_FACTORIAL_5_FP64 = vec2(8.333333767950535e-03, -4.34617203337595e-10); // 1/5!\nconst vec2 INVERSE_FACTORIAL_6_FP64 = vec2(1.3888889225199819e-03, -3.3631094437103215e-11); // 1/6!\nconst vec2 INVERSE_FACTORIAL_7_FP64 = vec2(1.9841270113829523e-04,  -2.725596874933456e-12); // 1/7!\nconst vec2 INVERSE_FACTORIAL_8_FP64 = vec2(2.4801587642286904e-05, -3.406996025904184e-13); // 1/8!\nconst vec2 INVERSE_FACTORIAL_9_FP64 = vec2(2.75573188446287533e-06, 3.7935713937038186e-14); // 1/9!\nconst vec2 INVERSE_FACTORIAL_10_FP64 = vec2(2.755731998149713e-07, -7.575112367869873e-15); // 1/10!\n\nfloat nint(float d) {\n    if (d == floor(d)) return d;\n    return floor(d + 0.5);\n}\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t * ONE - (t - a);\n  float a_lo = a * ONE - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#else\nvec2 split(float a) {\n  const float SPLIT = 4097.0;\n  float t = a * SPLIT;\n  float a_hi = t - (t - a);\n  float a_lo = a - a_hi;\n  return vec2(a_hi, a_lo);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 quickTwoSum(float a, float b) {\n  float sum = (a + b) * ONE;\n  float err = b - (sum - a) * ONE;\n  return vec2(sum, err);\n}\n#else\nvec2 quickTwoSum(float a, float b) {\n  float sum = a + b;\n  float err = b - (sum - a);\n  return vec2(sum, err);\n}\n#endif\n\nvec2 nint_fp64(vec2 a) {\n    float hi = nint(a.x);\n    float lo;\n    vec2 tmp;\n    if (hi == a.x) {\n        lo = nint(a.y);\n        tmp = quickTwoSum(hi, lo);\n    } else {\n        lo = 0.0;\n        if (abs(hi - a.x) == 0.5 && a.y < 0.0) {\n            hi -= 1.0;\n        }\n        tmp = vec2(hi, lo);\n    }\n    return tmp;\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n\n/* The purpose of this workaround is to prevent compilers from\noptimizing away necessary arithmetic operations by swapping their sequences\nor transform the equation to some 'equivalent' from.\n\nThe method is to multiply an artifical variable, ONE, which will be known to\nthe compiler to be one only at the runtime. The whole expression is then represented\nas a polynomial with respective to ONE. In the coefficients of all terms, only one a\nand one b should appear\n\nerr = (a + b) * ONE^6 - a * ONE^5 - (a + b) * ONE^4 + a * ONE^3 - b - (a + b) * ONE^2 + a * ONE\n*/\n\nvec2 twoSum(float a, float b) {\n  float s = (a + b);\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE + (b - v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSum(float a, float b) {\n  float s = a + b;\n  float v = s - a;\n  float err = (a - (s - v)) + (b - v);\n  return vec2(s, err);\n}\n#endif\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n/* Same thing as in twoSum() */\nvec2 twoSub(float a, float b) {\n  float s = (a - b);\n  float v = (s * ONE - a) * ONE;\n  float err = (a - (s - v) * ONE) * ONE * ONE * ONE - (b + v);\n  return vec2(s, err);\n}\n#else\nvec2 twoSub(float a, float b) {\n  float s = a - b;\n  float v = s - a;\n  float err = (a - (s - v)) - (b + v);\n  return vec2(s, err);\n}\n#endif\n\nvec2 twoProd(float a, float b) {\n  float prod = a * b;\n  vec2 a_fp64 = split(a);\n  vec2 b_fp64 = split(b);\n  float err = ((a_fp64.x * b_fp64.x - prod) + a_fp64.x * b_fp64.y +\n    a_fp64.y * b_fp64.x) + a_fp64.y * b_fp64.y;\n  return vec2(prod, err);\n}\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) * ONE + 2.0 * a_fp64.x * a_fp64.y * ONE * ONE) + a_fp64.y * a_fp64.y * ONE * ONE * ONE;\n  return vec2(prod, err);\n}\n#else\nvec2 twoSqr(float a) {\n  float prod = a * a;\n  vec2 a_fp64 = split(a);\n\n  float err = ((a_fp64.x * a_fp64.x - prod) + 2.0 * a_fp64.x * a_fp64.y) + a_fp64.y * a_fp64.y;\n  return vec2(prod, err);\n}\n#endif\n\nvec2 sum_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSum(a.x, b.x);\n  t = twoSum(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 sub_fp64(vec2 a, vec2 b) {\n  vec2 s, t;\n  s = twoSub(a.x, b.x);\n  t = twoSub(a.y, b.y);\n  s.y += t.x;\n  s = quickTwoSum(s.x, s.y);\n  s.y += t.y;\n  s = quickTwoSum(s.x, s.y);\n  return s;\n}\n\nvec2 mul_fp64(vec2 a, vec2 b) {\n  vec2 prod = twoProd(a.x, b.x);\n  // y component is for the error\n  prod.y += a.x * b.y;\n  prod.y += a.y * b.x;\n  prod = quickTwoSum(prod.x, prod.y);\n  return prod;\n}\n\nvec2 div_fp64(vec2 a, vec2 b) {\n  float xn = 1.0 / b.x;\n  vec2 yn = a * xn;\n  float diff = (sub_fp64(a, mul_fp64(b, yn))).x;\n  vec2 prod = twoProd(xn, diff);\n  return sum_fp64(yn, prod);\n}\n\nvec2 sqrt_fp64(vec2 a) {\n\n  if (a.x == 0.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x < 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n\n  float x = 1.0 / sqrt(a.x);\n  float yn = a.x * x;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  vec2 yn_sqr = twoSqr(yn) * ONE;\n#else\n  vec2 yn_sqr = twoSqr(yn);\n#endif\n  float diff = sub_fp64(a, yn_sqr).x;\n  vec2 prod = twoProd(x * 0.5, diff);\n  return sum_fp64(vec2(yn, 0.0), prod);\n}\n\n/* k_power controls how much range reduction we would like to have\nRange reduction uses the following method:\nassume a = k_power * r + m * log(2), k and m being integers.\nSet k_power = 4 (we can choose other k to trade accuracy with performance.\nwe only need to calculate exp(r) and using exp(a) = 2^m * exp(r)^k_power;\n*/\n\nvec2 exp_fp64(vec2 a) {\n  // We need to make sure these two numbers match\n  // as bit-wise shift is not available in GLSL 1.0\n  const int k_power = 4;\n  const float k = 16.0;\n\n  const float inv_k = 1.0 / k;\n\n  if (a.x <= -88.0) return vec2(0.0, 0.0);\n  if (a.x >= 88.0) return vec2(1.0 / 0.0, 1.0 / 0.0);\n  if (a.x == 0.0 && a.y == 0.0) return vec2(1.0, 0.0);\n  if (a.x == 1.0 && a.y == 0.0) return E_FP64;\n\n  float m = floor(a.x / LOG2_FP64.x + 0.5);\n  vec2 r = sub_fp64(a, mul_fp64(LOG2_FP64, vec2(m, 0.0))) * inv_k;\n  vec2 s, t, p;\n\n  p = mul_fp64(r, r);\n  s = sum_fp64(r, p * 0.5);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_3_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_4_FP64);\n\n  s = sum_fp64(s, t);\n  p = mul_fp64(p, r);\n  t = mul_fp64(p, INVERSE_FACTORIAL_5_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_6_FP64);\n\n  // s = sum_fp64(s, t);\n  // p = mul_fp64(p, r);\n  // t = mul_fp64(p, INVERSE_FACTORIAL_7_FP64);\n\n  s = sum_fp64(s, t);\n\n\n  // At this point, s = exp(r) - 1; but after following 4 recursions, we will get exp(r) ^ 512 - 1.\n  for (int i = 0; i < k_power; i++) {\n    s = sum_fp64(s * 2.0, mul_fp64(s, s));\n  }\n\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = sum_fp64(s, vec2(ONE, 0.0));\n#else\n  s = sum_fp64(s, vec2(1.0, 0.0));\n#endif\n\n  return s * pow(2.0, m);\n//   return r;\n}\n\nvec2 log_fp64(vec2 a)\n{\n  if (a.x == 1.0 && a.y == 0.0) return vec2(0.0, 0.0);\n  if (a.x <= 0.0) return vec2(0.0 / 0.0, 0.0 / 0.0);\n  vec2 x = vec2(log(a.x), 0.0);\n  vec2 s;\n#if defined(NVIDIA_FP64_WORKAROUND) || defined(INTEL_FP64_WORKAROUND)\n  s = vec2(ONE, 0.0);\n#else\n  s = vec2(1.0, 0.0);\n#endif\n\n  x = sub_fp64(sum_fp64(x, mul_fp64(a, exp_fp64(-x))), s);\n  return x;\n}\n\nvec2 sin_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(0.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  s = a;\n  r = a;\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_3_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_5_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_7_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_9_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvec2 cos_taylor_fp64(vec2 a) {\n  vec2 r, s, t, x;\n\n  if (a.x == 0.0 && a.y == 0.0) {\n    return vec2(1.0, 0.0);\n  }\n\n  x = -mul_fp64(a, a);\n  r = x;\n  s = sum_fp64(vec2(1.0, 0.0), r * 0.5);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_4_FP64);\n  s = sum_fp64(s, t);\n\n  r = mul_fp64(r, x);\n  t = mul_fp64(r, INVERSE_FACTORIAL_6_FP64);\n  s = sum_fp64(s, t);\n\n  /* keep the following commented code in case we need them\n  for extra accuracy from the Taylor expansion*/\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_8_FP64);\n  // s = sum_fp64(s, t);\n\n  // r = mul_fp64(r, x);\n  // t = mul_fp64(r, INVERSE_FACTORIAL_10_FP64);\n  // s = sum_fp64(s, t);\n\n  return s;\n}\n\nvoid sincos_taylor_fp64(vec2 a, out vec2 sin_t, out vec2 cos_t) {\n  if (a.x == 0.0 && a.y == 0.0) {\n    sin_t = vec2(0.0, 0.0);\n    cos_t = vec2(1.0, 0.0);\n  }\n\n  sin_t = sin_taylor_fp64(a);\n  cos_t = sqrt_fp64(sub_fp64(vec2(1.0, 0.0), mul_fp64(sin_t, sin_t)));\n}\n\nvec2 sin_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return sin_taylor_fp64(t);\n        } else if (j == 1) {\n            return cos_taylor_fp64(t);\n        } else if (j == -1) {\n            return -cos_taylor_fp64(t);\n        } else {\n            return -sin_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 cos_fp64(vec2 a) {\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(1.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n\n    if (k == 0) {\n        if (j == 0) {\n            return cos_taylor_fp64(t);\n        } else if (j == 1) {\n            return -sin_taylor_fp64(t);\n        } else if (j == -1) {\n            return sin_taylor_fp64(t);\n        } else {\n            return -cos_taylor_fp64(t);\n        }\n    }\n\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n    if (abs(float(abs_k) - 1.0) < 0.5) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs(float(abs_k) - 2.0) < 0.5) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs(float(abs_k) - 3.0) < 0.5) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs(float(abs_k) - 4.0) < 0.5) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#else\n    if (abs_k == 1) {\n        u = COS_TABLE_0_FP64;\n        v = SIN_TABLE_0_FP64;\n    } else if (abs_k == 2) {\n        u = COS_TABLE_1_FP64;\n        v = SIN_TABLE_1_FP64;\n    } else if (abs_k == 3) {\n        u = COS_TABLE_2_FP64;\n        v = SIN_TABLE_2_FP64;\n    } else if (abs_k == 4) {\n        u = COS_TABLE_3_FP64;\n        v = SIN_TABLE_3_FP64;\n    }\n#endif\n\n    vec2 sin_t, cos_t;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    vec2 result = vec2(0.0, 0.0);\n    if (j == 0) {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            result = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    } else if (j == 1) {\n        if (k > 0) {\n            result = -sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(v, cos_t), mul_fp64(u, sin_t));\n        }\n    } else if (j == -1) {\n        if (k > 0) {\n            result = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        } else {\n            result = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n        }\n    } else {\n        if (k > 0) {\n            result = sub_fp64(mul_fp64(v, sin_t), mul_fp64(u, cos_t));\n        } else {\n            result = -sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    return result;\n}\n\nvec2 tan_fp64(vec2 a) {\n    vec2 sin_a;\n    vec2 cos_a;\n\n    if (a.x == 0.0 && a.y == 0.0) {\n        return vec2(0.0, 0.0);\n    }\n\n    // 2pi range reduction\n    vec2 z = nint_fp64(div_fp64(a, TWO_PI_FP64));\n    vec2 r = sub_fp64(a, mul_fp64(TWO_PI_FP64, z));\n\n    vec2 t;\n    float q = floor(r.x / PI_2_FP64.x + 0.5);\n    int j = int(q);\n\n\n    if (j < -2 || j > 2) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    }\n\n    t = sub_fp64(r, mul_fp64(PI_2_FP64, vec2(q, 0.0)));\n\n    q = floor(t.x / PI_16_FP64.x + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    // We just can't get PI/16 * 3.0 very accurately.\n    // so let's just store it\n    if (abs_k > 4) {\n        return vec2(0.0 / 0.0, 0.0 / 0.0);\n    } else {\n        t = sub_fp64(t, mul_fp64(PI_16_FP64, vec2(q, 0.0)));\n    }\n\n\n    vec2 u = vec2(0.0, 0.0);\n    vec2 v = vec2(0.0, 0.0);\n\n    vec2 sin_t, cos_t;\n    vec2 s, c;\n    sincos_taylor_fp64(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n#if defined(NVIDIA_EQUATION_WORKAROUND) || defined(INTEL_EQUATION_WORKAROUND)\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#else\n        if (abs_k == 1) {\n            u = COS_TABLE_0_FP64;\n            v = SIN_TABLE_0_FP64;\n        } else if (abs_k == 2) {\n            u = COS_TABLE_1_FP64;\n            v = SIN_TABLE_1_FP64;\n        } else if (abs_k == 3) {\n            u = COS_TABLE_2_FP64;\n            v = SIN_TABLE_2_FP64;\n        } else if (abs_k == 4) {\n            u = COS_TABLE_3_FP64;\n            v = SIN_TABLE_3_FP64;\n        }\n#endif\n        if (k > 0) {\n            s = sum_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sub_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        } else {\n            s = sub_fp64(mul_fp64(u, sin_t), mul_fp64(v, cos_t));\n            c = sum_fp64(mul_fp64(u, cos_t), mul_fp64(v, sin_t));\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return div_fp64(sin_a, cos_a);\n}\n\nvec2 radians_fp64(vec2 degree) {\n  return mul_fp64(degree, PI_180_FP64);\n}\n\n// Vector functions\n// vec2 functions\nvoid vec2_sum_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sum_fp64(a[0], b[0]);\n    out_val[1] = sum_fp64(a[1], b[1]);\n}\n\nvoid vec2_sub_fp64(vec2 a[2], vec2 b[2], out vec2 out_val[2]) {\n    out_val[0] = sub_fp64(a[0], b[0]);\n    out_val[1] = sub_fp64(a[1], b[1]);\n}\n\nvoid vec2_mix_fp64(vec2 x[2], vec2 y[2], float a, out vec2 out_val[2]) {\n  vec2 range[2];\n  vec2_sub_fp64(y, x, range);\n  vec2 portion[2];\n  portion[0] = range[0] * a;\n  portion[1] = range[1] * a;\n  vec2_sum_fp64(x, portion, out_val);\n}\n\nvec2 vec2_length_fp64(vec2 x[2]) {\n  return sqrt_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])));\n}\n\nvec2 vec2_distance_fp64(vec2 x[2], vec2 y[2]) {\n  vec2 diff[2];\n  vec2_sub_fp64(x, y, diff);\n  return vec2_length_fp64(diff);\n}\n\n// vec3 functions\nvoid vec3_sub_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec3_sum_fp64(vec2 a[3], vec2 b[3], out vec2 out_val[3]) {\n  for (int i = 0; i < 3; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvec2 vec3_length_fp64(vec2 x[3]) {\n  return sqrt_fp64(sum_fp64(sum_fp64(mul_fp64(x[0], x[0]), mul_fp64(x[1], x[1])), mul_fp64(x[2], x[2])));\n}\n\nvec2 vec3_distance_fp64(vec2 x[3], vec2 y[3]) {\n  vec2 diff[3];\n  vec3_sub_fp64(x, y, diff);\n  return vec3_length_fp64(diff);\n}\n\n// vec4 functions\nvoid vec4_fp64(vec4 a, out vec2 out_val[4]) {\n  out_val[0].x = a[0];\n  out_val[0].y = 0.0;\n\n  out_val[1].x = a[1];\n  out_val[1].y = 0.0;\n\n  out_val[2].x = a[2];\n  out_val[2].y = 0.0;\n\n  out_val[3].x = a[3];\n  out_val[3].y = 0.0;\n}\n\nvoid vec4_scalar_mul_fp64(vec2 a[4], vec2 b, out vec2 out_val[4]) {\n  out_val[0] = mul_fp64(a[0], b);\n  out_val[1] = mul_fp64(a[1], b);\n  out_val[2] = mul_fp64(a[2], b);\n  out_val[3] = mul_fp64(a[3], b);\n}\n\nvoid vec4_sum_fp64(vec2 a[4], vec2 b[4], out vec2 out_val[4]) {\n  for (int i = 0; i < 4; i++) {\n    out_val[i] = sum_fp64(a[i], b[i]);\n  }\n}\n\nvoid vec4_dot_fp64(vec2 a[4], vec2 b[4], out vec2 out_val) {\n  vec2 v[4];\n\n  v[0] = mul_fp64(a[0], b[0]);\n  v[1] = mul_fp64(a[1], b[1]);\n  v[2] = mul_fp64(a[2], b[2]);\n  v[3] = mul_fp64(a[3], b[3]);\n\n  out_val = sum_fp64(sum_fp64(v[0], v[1]), sum_fp64(v[2], v[3]));\n}\n\nvoid mat4_vec4_mul_fp64(vec2 b[16], vec2 a[4], out vec2 out_val[4]) {\n  vec2 tmp[4];\n\n  for (int i = 0; i < 4; i++)\n  {\n    for (int j = 0; j < 4; j++)\n    {\n      tmp[j] = b[j + i * 4];\n    }\n    vec4_dot_fp64(a, tmp, out_val[i]);\n  }\n}\n"}}},{}],413:[function(t,e,n){"use strict";e.exports={project:{interface:"project",source:"const float TILE_SIZE = 512.0;\nconst float PI = 3.1415926536;\nconst float WORLD_SCALE = TILE_SIZE / (PI * 2.0);\n\nconst float PROJECT_LINEAR = 0.;\nconst float PROJECT_MERCATOR = 1.;\nconst float PROJECT_MERCATOR_OFFSETS = 2.;\n\nuniform float projectionMode;\nuniform float projectionScale;\nuniform vec4 projectionCenter;\nuniform vec3 projectionPixelsPerUnit;\nuniform mat4 projectionMatrix;\nuniform mat4 projectionMatrixUncentered;\n\n#ifdef INTEL_TAN_WORKAROUND\n\n// All these functions are for substituting tan() function from Intel GPU only\nconst float TWO_PI = 6.2831854820251465;\nconst float PI_2 = 1.5707963705062866;\nconst float PI_16 = 0.1963495463132858;\n\nconst float SIN_TABLE_0 = 0.19509032368659973;\nconst float SIN_TABLE_1 = 0.3826834261417389;\nconst float SIN_TABLE_2 = 0.5555702447891235;\nconst float SIN_TABLE_3 = 0.7071067690849304;\n\nconst float COS_TABLE_0 = 0.9807852506637573;\nconst float COS_TABLE_1 = 0.9238795042037964;\nconst float COS_TABLE_2 = 0.8314695954322815;\nconst float COS_TABLE_3 = 0.7071067690849304;\n\nconst float INVERSE_FACTORIAL_3 = 1.666666716337204e-01; // 1/3!\nconst float INVERSE_FACTORIAL_5 = 8.333333767950535e-03; // 1/5!\nconst float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04; // 1/7!\nconst float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06; // 1/9!\n\nfloat sin_taylor_fp32(float a) {\n  float r, s, t, x;\n\n  if (a == 0.0) {\n    return 0.0;\n  }\n\n  x = -a * a;\n  s = a;\n  r = a;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_3;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_5;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_7;\n  s = s + t;\n\n  r = r * x;\n  t = r * INVERSE_FACTORIAL_9;\n  s = s + t;\n\n  return s;\n}\n\nvoid sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {\n  if (a == 0.0) {\n    sin_t = 0.0;\n    cos_t = 1.0;\n  }\n  sin_t = sin_taylor_fp32(a);\n  cos_t = sqrt(1.0 - sin_t * sin_t);\n}\n\nfloat tan_fp32(float a) {\n    float sin_a;\n    float cos_a;\n\n    if (a == 0.0) {\n        return 0.0;\n    }\n\n    // 2pi range reduction\n    float z = floor(a / TWO_PI);\n    float r = a - TWO_PI * z;\n\n    float t;\n    float q = floor(r / PI_2 + 0.5);\n    int j = int(q);\n\n    if (j < -2 || j > 2) {\n        return 0.0 / 0.0;\n    }\n\n    t = r - PI_2 * q;\n\n    q = floor(t / PI_16 + 0.5);\n    int k = int(q);\n    int abs_k = int(abs(float(k)));\n\n    if (abs_k > 4) {\n        return 0.0 / 0.0;\n    } else {\n        t = t - PI_16 * q;\n    }\n\n    float u = 0.0;\n    float v = 0.0;\n\n    float sin_t, cos_t;\n    float s, c;\n    sincos_taylor_fp32(t, sin_t, cos_t);\n\n    if (k == 0) {\n        s = sin_t;\n        c = cos_t;\n    } else {\n        if (abs(float(abs_k) - 1.0) < 0.5) {\n            u = COS_TABLE_0;\n            v = SIN_TABLE_0;\n        } else if (abs(float(abs_k) - 2.0) < 0.5) {\n            u = COS_TABLE_1;\n            v = SIN_TABLE_1;\n        } else if (abs(float(abs_k) - 3.0) < 0.5) {\n            u = COS_TABLE_2;\n            v = SIN_TABLE_2;\n        } else if (abs(float(abs_k) - 4.0) < 0.5) {\n            u = COS_TABLE_3;\n            v = SIN_TABLE_3;\n        }\n        if (k > 0) {\n            s = u * sin_t + v * cos_t;\n            c = u * cos_t - v * sin_t;\n        } else {\n            s = u * sin_t - v * cos_t;\n            c = u * cos_t + v * sin_t;\n        }\n    }\n\n    if (j == 0) {\n        sin_a = s;\n        cos_a = c;\n    } else if (j == 1) {\n        sin_a = c;\n        cos_a = -s;\n    } else if (j == -1) {\n        sin_a = -c;\n        cos_a = s;\n    } else {\n        sin_a = -s;\n        cos_a = -c;\n    }\n    return sin_a / cos_a;\n}\n#endif\n\n//\n// Scaling offsets\n//\n\nfloat project_scale(float meters) {\n  return meters * projectionPixelsPerUnit.x;\n}\n\nvec2 project_scale(vec2 meters) {\n  return vec2(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x\n  );\n}\n\nvec3 project_scale(vec3 meters) {\n  return vec3(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x,\n    meters.z * projectionPixelsPerUnit.x\n  );\n}\n\nvec4 project_scale(vec4 meters) {\n  return vec4(\n    meters.x * projectionPixelsPerUnit.x,\n    meters.y * projectionPixelsPerUnit.x,\n    meters.z * projectionPixelsPerUnit.x,\n    meters.w\n  );\n}\n\n//\n// Projecting positions\n//\n\n// non-linear projection: lnglats => unit tile [0-1, 0-1]\nvec2 project_mercator_(vec2 lnglat) {\n  return vec2(\n    radians(lnglat.x) + PI,\n#ifdef INTEL_TAN_WORKAROUND\n        PI - log(tan_fp32(PI * 0.25 + radians(lnglat.y) * 0.5))\n#else\n        PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n#endif\n  );\n}\n\nvec2 project_position(vec2 position) {\n  if (projectionMode == PROJECT_LINEAR) {\n    return (position + vec2(TILE_SIZE / 2.0)) * projectionScale;\n  }\n  if (projectionMode == PROJECT_MERCATOR_OFFSETS) {\n    return project_scale(position);\n  }\n  // Covers projectionMode == PROJECT_MERCATOR\n  return project_mercator_(position) * WORLD_SCALE * projectionScale;\n}\n\nvec3 project_position(vec3 position) {\n  return vec3(project_position(position.xy), project_scale(position.z) + .1);\n}\n\nvec4 project_position(vec4 position) {\n  return vec4(project_position(position.xyz), position.w);\n}\n\n//\n\nvec4 project_to_clipspace(vec4 position) {\n  if (projectionMode == PROJECT_MERCATOR_OFFSETS) {\n    return projectionMatrix * vec4(position.xyz, 0.0) + projectionCenter;\n  }\n  return projectionMatrix * position;\n}\n\n// Backwards compatibility\n\nfloat scale(float position) {\n  return project_scale(position);\n}\n\nvec2 scale(vec2 position) {\n  return project_scale(position);\n}\n\nvec3 scale(vec3 position) {\n  return project_scale(position);\n}\n\nvec4 scale(vec4 position) {\n  return project_scale(position);\n}\n\nvec2 preproject(vec2 position) {\n  return project_position(position);\n}\n\nvec3 preproject(vec3 position) {\n  return project_position(position);\n}\n\nvec4 preproject(vec4 position) {\n  return project_position(position);\n}\n\nvec4 project(vec4 position) {\n  return project_to_clipspace(position);\n}\n"}}},{}],414:[function(t,e,n){"use strict";e.exports={project64:{interface:"project64",source:"const vec2 WORLD_SCALE_FP64 = vec2(81.4873275756836, 0.0000032873668232014097);\n\nuniform vec2 projectionScaleFP64;\nuniform vec2 projectionFP64[16];\n\nvoid mercatorProject_fp64(vec4 lnglat_fp64, out vec2 out_val[2]) { //longitude: lnglat_fp64.xy; latitude: lnglat_fp64.zw\n\n#if defined(NVIDIA_FP64_WORKAROUND)\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64 * ONE);\n#else\n  out_val[0] = sum_fp64(radians_fp64(lnglat_fp64.xy), PI_FP64);\n#endif\n  out_val[1] = sub_fp64(PI_FP64, log_fp64(tan_fp64(sum_fp64(PI_4_FP64, radians_fp64(lnglat_fp64.zw) / 2.0))));\n  return;\n}\n\nvoid project_position_fp64(vec4 position_fp64, out vec2 out_val[2]) {\n\n  vec2 pos_fp64[2];\n  mercatorProject_fp64(position_fp64, pos_fp64);\n  vec2 x_fp64 = mul_fp64(pos_fp64[0], projectionScaleFP64);\n  vec2 y_fp64 = mul_fp64(pos_fp64[1], projectionScaleFP64);\n  out_val[0] = mul_fp64(x_fp64, WORLD_SCALE_FP64);\n  out_val[1] = mul_fp64(y_fp64, WORLD_SCALE_FP64);\n\n  return;\n}\n\nvec4 project_to_clipspace_fp64(vec2 vertex_pos_modelspace[4]) {\n  vec2 vertex_pos_clipspace[4];\n  mat4_vec4_mul_fp64(projectionFP64, vertex_pos_modelspace, vertex_pos_clipspace);\n  return vec4(\n    vertex_pos_clipspace[0].x,\n    vertex_pos_clipspace[1].x,\n    vertex_pos_clipspace[2].x,\n    vertex_pos_clipspace[3].x\n    );\n}\n"}}},{}],415:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./viewport");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})}),Object.defineProperty(n,"Viewport",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(i).default}})},{"./viewport":416}],416:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function u(t){return[Math.fround(t),t-Math.fround(t)]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.COORDINATE_SYSTEM=void 0;var c,l=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),h=t("viewport-mercator-project/perspective");Object.defineProperty(n,"COORDINATE_SYSTEM",{enumerable:!0,get:function(){return h.COORDINATE_SYSTEM}});var p=r(h),d=t("autobind-decorator"),v=r(d),m=t("gl-matrix"),y=(c=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n._calculateWebGLMatrices(),n}return a(e,t),f(e,[{key:"getProjectionMatrix",value:function(){return this.glProjectionMatrix}},{key:"getProjectionMatrixFP64",value:function(){return this.glProjectionMatrixFP64}},{key:"getProjectionMatrixUncentered",value:function(){return this.glProjectionMatrixUncentered}},{key:"getWebGLMatrices",value:function(){return{projectionMatrix:this.glProjectionMatrix,projectionFP64:this.glProjectionMatrixFP64}}},{key:"getUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.projectionMode,n=void 0===e?h.COORDINATE_SYSTEM.LNGLAT:e,r=t.positionOrigin,i=void 0===r?[0,0]:r,o=t.modelMatrix,a=void 0===o?null:o,s=this.projectFlat(i),c=[s[0],s[1],0,1],l=this.getProjections(),f=l.viewProjectionMatrix,p=m.vec4.transformMat4([],c,f);return a&&m.mat4.multiply(f,f,a),{projectionMode:n,projectionCenter:p,projectionMatrix:this.glProjectionMatrix,projectionFP64:this.glProjectionMatrixFP64,projectionPixelsPerUnit:this.pixelsPerMeter,projectionScale:this.scale,projectionScaleFP64:u(this.scale),mercatorScale:Math.pow(2,this.zoom),mercatorCenter:this.center}}},{key:"_calculateWebGLMatrices",value:function(){this.glProjectionMatrix=new Float32Array(this.viewProjectionMatrix),this.glProjectionMatrixFP64=new Float32Array(32),this._dy64ifyProjectionMatrix()}},{key:"_dy64ifyProjectionMatrix",value:function(){for(var t=0;t<4;++t)for(var e=0;e<4;++e){var n=u(this.viewProjectionMatrix[4*e+t]),r=l(n,2);this.glProjectionMatrixFP64[2*(4*t+e)]=r[0],this.glProjectionMatrixFP64[2*(4*t+e)+1]=r[1]}}}]),e}(p.default),s(c.prototype,"getProjectionMatrix",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrix"),c.prototype),s(c.prototype,"getProjectionMatrixFP64",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrixFP64"),c.prototype),s(c.prototype,"getProjectionMatrixUncentered",[v.default],Object.getOwnPropertyDescriptor(c.prototype,"getProjectionMatrixUncentered"),c.prototype),c);n.default=y},{"autobind-decorator":49,"gl-matrix":471,"viewport-mercator-project/perspective":419}],417:[function(t,e,n){e.exports=t("./dist/index")},{"./dist/index":373}],418:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.COORDINATE_SYSTEM=void 0;var a,s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("gl-matrix"),l=t("autobind-decorator"),f=r(l),h=Math.PI,p=h/4,d=h/180,v=180/h,m=512/(2*h),y={latitude:37,longitude:-122,zoom:11,pitch:0,bearing:0,altitude:1.5},g=(n.COORDINATE_SYSTEM={LNGLAT:1,METERS:2,IDENTITY:0},a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.width,r=e.height,o=e.latitude,a=e.longitude,s=e.zoom,u=e.pitch,c=e.bearing,l=e.altitude,f=e.mercatorEnabled;i(this,t),this.width=void 0!==n?n:y.width,this.height=void 0!==r?r:y.height,this.zoom=void 0!==s?s:y.zoom,this.latitude=void 0!==o?o:y.latitude,this.longitude=void 0!==a?a:y.longitude,this.bearing=void 0!==c?c:y.bearing,this.pitch=void 0!==u?u:y.pitch,this.altitude=void 0!==l?l:y.altitude,this.mercatorEnabled=void 0===f||f,this.width=this.width||1,this.height=this.height||1,this._initialize()}return u(t,[{key:"project",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=this.mercatorEnabled||this.mercator?this.projectFlat(t):t,o=s(i,2),a=o[0],u=o[1],l=[a,u,t[2]||0,1];c.vec4.transformMat4(l,l,this.pixelProjectionMatrix);var f=1/l[3];c.vec4.multiply(l,l,[f,f,f,f]);var h=l[0],p=l[1],d=l[2],v=r?this.height-p:p;return 2===t.length?[h,v]:[h,v,d]}},{key:"unproject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n;return 3===t.length?this.unproject3d(t,{topLeft:r}):this.unproject2d(t,{topLeft:r})}},{key:"unproject3d",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=s(t,3),o=i[0],a=void 0===o?0:o,u=i[1],l=void 0===u?0:u,f=i[2],h=void 0===f?0:f,p=r?this.height-l:l,d=[a,p,h,1];c.vec4.transformMat4(d,d,this.pixelUnprojectionMatrix);var v=1/d[3];c.vec4.multiply(d,d,[v,v,v,v]);var m=this.unprojectFlat(d),y=s(m,2);return[y[0],y[1],d[2]]}},{key:"unproject2d",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.topLeft,r=void 0===n||n,i=s(t,2),o=i[0],a=void 0===o?0:o,u=i[1],l=void 0===u?0:u,f=r?this.height-l:l,h=[a,f,0,1],p=[a,f,1,1];c.vec4.transformMat4(h,h,this.pixelUnprojectionMatrix),c.vec4.transformMat4(p,p,this.pixelUnprojectionMatrix);var d=[h[3],p[3]],v=d[0],m=d[1],y=h[0]/v,g=p[0]/m,_=h[1]/v,b=p[1]/m,w=h[2]/v,x=p[2]/m,E=w===x?0:(0-w)/(x-w),T=y*(1-E)+g*E,S=_*(1-E)+b*E;return this.unprojectFlat([T,S])}},{key:"projectFlat",value:function(t){var e=s(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;i*=m;var o=n*d,a=r*d;return[i*(o+h),i*(h-Math.log(Math.tan(p+.5*a)))]}},{key:"unprojectFlat",value:function(t){var e=s(t,2),n=e[0],r=e[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scale;return i*=m,[(n/i-h)*v,2*(Math.atan(Math.exp(h-r/i))-p)*v]}},{key:"getProjections",value:function(){return{pixelProjectionMatrix:this.pixelProjectionMatrix,pixelUnprojectionMatrix:this.pixelUnprojectionMatrix,viewProjectionMatrix:this.viewProjectionMatrix,viewMatrix:this.viewMatrix,projectionMatrix:this.projectionMatrix}}},{key:"getDistanceScales",value:function(){return{pixelsPerMeter:this.pixelsPerMeter,metersPerPixel:this.metersPerPixel}}},{key:"_initialize",value:function(){this.scale=Math.pow(2,this.zoom),this.worldSize=512*this.scale,this.tileZoom=Math.floor(this.zoom),this.zoomFraction=this.zoom-Math.floor(this.zoom),this.bearingRadians=this.bearing/180*Math.PI,this.bearingRotationMatrix=c.mat2.create(),c.mat2.rotate(this.bearingRotationMatrix,this.bearingRotationMatrix,this.bearing),this.originalPitch=this.pitch,this.pitch=Math.min(60,this.pitch),this.pitchRadians=this.pitch/180*Math.PI,this.originalAltitude=this.altitude,this.altitude=Math.max(.75,this.altitude),this.center=this.projectFlat([this.longitude,this.latitude]),this.centerX=this.center[0],this.centerY=this.center[1],this.halfFov=Math.atan(.5/this.altitude),this.topHalfSurfaceDistance=Math.sin(this.halfFov)*this.altitude/Math.sin(Math.PI/2-this.pitchRadians-this.halfFov),this.farZ=Math.cos(Math.PI/2-this.pitchRadians)*this.topHalfSurfaceDistance+this.altitude,this._calculateDistanceScales(),this._calculateTransformationMatrices()}},{key:"_calculateDistanceScales",value:function(){var t=this.latitude,e=this.longitude,n=Math.cos(t*Math.PI/180),r=111e3*n,i=c.vec2.distance(this.projectFlat([e+.5,t]),this.projectFlat([e-.5,t])),o=c.vec2.distance(this.projectFlat([e,t+.5]),this.projectFlat([e,t-.5])),a=i/r,s=o/r,u=(a+s)/2,l=this.worldSize/(4e7*n),f=[l,l,l],h=[1/a,1/s,1/u];this.pixelsPerMeter=f,this.metersPerPixel=h}},{key:"_calculateTransformationMatrices",value:function(){this.projectionMatrix=c.mat4.perspective(this._createMat4(),2*Math.atan(this.height/2/this.altitude),this.width/this.height,.1,10*this.farZ);var t=this._createMat4();c.mat4.translate(t,t,[0,0,-this.altitude]),c.mat4.scale(t,t,[1,-1,1/this.height]),c.mat4.rotateX(t,t,this.pitchRadians),c.mat4.rotateZ(t,t,-this.bearingRadians),this.viewMatrix=this._createMat4(),c.mat4.translate(this.viewMatrix,t,[-this.centerX,-this.centerY,0]);var e=this._createMat4();c.mat4.multiply(e,e,this.projectionMatrix),c.mat4.multiply(e,e,this.viewMatrix),this.viewProjectionMatrix=e;var n=this._createMat4();c.mat4.scale(n,n,[this.width,this.height,1]),c.mat4.translate(n,n,[.5,.5,0]),c.mat4.scale(n,n,[.5,.5,1]),c.mat4.multiply(n,n,this.viewProjectionMatrix),this.pixelProjectionMatrix=n;var r=this._createMat4();c.mat4.invert(r,n),this.pixelUnprojectionMatrix=r}},{key:"_calculatePixelProjectionMatrices",value:function(){var t=this._createMat4();c.mat4.scale(t,t,[this.width,this.height,1]),c.mat4.translate(t,t,[.5,.5,0]),c.mat4.scale(t,t,[.5,.5,0]),c.mat4.multiply(t,t,this.viewProjectionMatrix),this.pixelProjectionMatrix=t;var e=this._createMat4();c.mat4.invert(e,t),this.pixelUnprojectionMatrix=e}},{key:"_createMat4",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}}]),t}(),o(a.prototype,"project",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"project"),a.prototype),o(a.prototype,"unproject",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject"),a.prototype),o(a.prototype,"unproject3d",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject3d"),a.prototype),o(a.prototype,"unproject2d",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unproject2d"),a.prototype),o(a.prototype,"projectFlat",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"projectFlat"),a.prototype),o(a.prototype,"unprojectFlat",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"unprojectFlat"),a.prototype),o(a.prototype,"getProjections",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"getProjections"),a.prototype),o(a.prototype,"getDistanceScales",[f.default],Object.getOwnPropertyDescriptor(a.prototype,"getDistanceScales"),a.prototype),a);n.default=g},{"autobind-decorator":49,"gl-matrix":471}],419:[function(t,e,n){e.exports=t("./dist/perspective-viewport")},{"./dist/perspective-viewport":418}],420:[function(t,e,n){e.exports={name:"deck.gl",description:"A suite of 3D-enabled data visualization overlays, suitable for react-map-gl",license:"MIT",version:"3.1.3",keywords:["webgl","visualization","overlay","layer"],repository:{type:"git",url:"https://github.com/uber/deck.gl.git"},main:"index.js",files:["dist","shaderlib","src","index.js","react.js","viewport.js","samples.js","experimental.js"],dependencies:{"autobind-decorator":"^1.3.3","babel-polyfill":"^6.1.19",earcut:"^2.0.6","extrude-polyline":"^1.0.6","geojson-normalize":"0.0.1","get-pixels":"^3.3.0","gl-matrix":"^2.3.2","lodash.flattendeep":"^4.4.0","save-pixels":"^2.3.0","viewport-mercator-project":"3.0.0-beta3"},devDependencies:{"babel-cli":"^6.3.15","babel-core":"^6.7.7","babel-eslint":"^6.0.0","babel-plugin-static-fs":"^1.1.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-preset-es2015":"^6.3.13","babel-preset-react":"^6.3.13","babel-preset-stage-2":"^6.3.13","babel-runtime":"^6.11.6",babelify:"^7.2.0","brfs-babel":"^1.0.0",browserify:"^13.0.0",budo:"^9.0.0","d3-color":"^1.0.1","d3-request":"^1.0.2","d3-scale":"^1.0.3",discify:"^1.2.0",electron:"^1.4.7",envify:"^3.4.0",eslint:"^2.0.0","eslint-config-uber-es2015":"^2.0.0","eslint-config-uber-jsx":"^2.0.0","eslint-plugin-react":"^6.0.0",faucet:"0.0.1",gl:"^4.0.1","highlight.js":"^9.7.0",immutable:"^3.7.5","luma.gl":"^2.10.3",marked:"^0.3.6",react:"^15.3.2","react-addons-test-utils":"^15.0.2","react-dom":"^15.3.2","react-map-gl":"^1.7.2","react-redux":"^4.4.5","react-router":"^2.8.1","react-stats":"0.0.5",redux:"^3.6.0","redux-thunk":"^2.1.0",sassify:"^2.0.0","stats.js":"^0.17.0","tap-browser-color":"^0.1.2",tape:"^4.6.0","tape-catch":"^1.0.4",testron:"^1.2.0","tween.js":"^16.3.5","uglify-js":"^2.6.1"},peerDependencies:{react:"0.14.x - 15.x","react-dom":"0.14.x - 15.x","luma.gl":"^2.10.3"},scripts:{build:"npm run build-dist && npm run build-script","build-clean":"rm -fr dist/*","build-dist":"npm run build-clean && npm run build-src && npm run build-shaderlib","build-src":"babel src -d dist --source-maps inline --copy-files","build-shaderlib":"babel shaderlib -d dist/shaderlib --source-maps inline --copy-files","build-script":"browserify src/bundle.js -t babelify -t brfs-babel | uglifyjs > dist/deckgl.min.js","build-watch":"npm run build-clean && npm run build-src-watch && npm run build-shaderlib-watch","build-src-watch":"babel src -d dist --source-maps inline --copy-files --watch &","build-shaderlib-watch":"babel shaderlib -d dist/shaderlib --source-maps inline --copy-files --watch &","demo-start":"npm run demo-build-copy && budo demo/src/javascripts/main.js:main.min.js --dir dist-demo/ --open -- -t babelify -t sassify -t brfs-babel","demo-build":"npm run demo-build-clean && npm run demo-build-copy && npm run demo-build-script","demo-build-clean":"rm -fr dist-demo && mkdir -p dist-demo","demo-build-copy":" mkdir -p dist-demo/docs && cp -R demo/src/static/* dist-demo/ && cp -R docs dist-demo","demo-build-script":"NODE_ENV=production browserify demo/src/javascripts/main.js -o -t babelify -t sassify -t brfs-babel | uglifyjs > dist-demo/main.min.js","demo-gh-pages":"git subtree push --prefix dist-demo origin gh-pages","demo-gh-pages-force":"git push origin `git subtree split --prefix dist-demo master`:gh-pages --force","demo-publish":"npm run build && npm run demo-build && git add dist-demo -f && git commit -m 'UPDATE DOCS' --no-verify && npm run demo-gh-pages","demo-publish-force":"npm run build && npm run demo-build && git add dist-demo -f && git commit -m 'UPDATE DOCS' --no-verify && npm run demo-gh-pages-force",lint:"eslint src exhibits/app.js",precommit:"npm test",mypublish:"npm run build && npm run test-fast && npm publish",test:"npm run lint && npm run build-dist && npm run test-headless","test-fast":"npm run lint && npm run test-headless","test-headless":"node dist/test/headless.js","test-headless-src":"babel-node --only=deck.gl/test,deck.gl/src,deck.gl/shaderlib src/test/headless.js","test-browser":"budo src/test/browser.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,scss,js,glsl}' -- -t babelify -t brfs-babel","test-electron":"browserify dist/test/electron.js | testron | faucet","test-shader":"npm run build-dist && budo src/test/shader.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,scss,js,glsl}' -- -t babelify -t brfs-babel","profile-disc":"browserify src/bundle.js --full-paths -t babelify -t brfs-babel | uglifyjs | discify --open",start:"npm run build-watch && budo example/main.js:example/bundle.js --live --open --port 3000 --css example/main.css --title 'deck.gl' --watch-glob '**/*.{html,css,js,glsl}' -- -t brfs-babel -t babelify -t envify"}}},{}],421:[function(t,e,n){e.exports=t("./dist/react/deckgl")},{"./dist/react/deckgl":407}],422:[function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r=e&&e.length,o=r?e[0]*n:t.length,s=i(t,0,o,n,!0),u=[];if(!s)return u;var c,l,h,p,d,v,m;if(r&&(s=f(t,e,s,n)),t.length>80*n){c=h=t[0],l=p=t[1];for(var y=n;y<o;y+=n)d=t[y],v=t[y+1],d<c&&(c=d),v<l&&(l=v),d>h&&(h=d),v>p&&(p=v);m=Math.max(h-c,p-l)}return a(s,u,n,c,l,m),u}function i(t,e,n,r,i){var o,a;if(i===k(t,e,n,r)>0)for(o=e;o<n;o+=r)a=A(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=A(o,t[o],t[o+1],a);return a&&x(a,a.next)&&(R(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!x(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(R(r),r=e=r.prev,r===r.next)return null;n=!0}while(n||r!==e);return e}function a(t,e,n,r,i,f,h){if(t){!h&&f&&v(t,r,i,f);for(var p,d,m=t;t.prev!==t.next;)if(p=t.prev,d=t.next,f?u(t,r,i,f):s(t))e.push(p.i/n),e.push(t.i/n),e.push(d.i/n),R(t),t=d.next,m=d.next;else if(t=d,t===m){h?1===h?(t=c(t,e,n),a(t,e,n,r,i,f,2)):2===h&&l(t,e,n,r,i,f):a(o(t),e,n,r,i,f,1);break}}}function s(t){var e=t.prev,n=t,r=t.next;if(w(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&w(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,a=t.next;if(w(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,f=y(s,u,e,n,r),h=y(c,l,e,n,r),p=t.nextZ;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&_(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&w(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!x(i,o)&&E(i,r,r.next,o)&&S(i,o)&&S(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),R(r),R(r.next),r=t=o),r=r.next}while(r!==t);return r}function l(t,e,n,r,i,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&b(u,c)){var l=O(u,c);return u=o(u,u.next),l=o(l,l.next),a(u,e,n,r,i,s),void a(l,e,n,r,i,s)}c=c.next}u=u.next}while(u!==t)}function f(t,e,n,r){var a,s,u,c,l,f=[];for(a=0,s=e.length;a<s;a++)u=e[a]*r,c=a<s-1?e[a+1]*r:t.length,l=i(t,u,c,r,!1),l===l.next&&(l.steiner=!0),f.push(g(l));for(f.sort(h),a=0;a<f.length;a++)p(f[a],n),n=o(n,n.next);return n}function h(t,e){return t.x-e.x}function p(t,e){if(e=d(t,e)){var n=O(e,t);o(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,f=n.y,h=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&_(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(u<h||u===h&&r.x>n.x)&&S(r,t)&&(n=r,h=u)),r=r.next;return n}function v(t,e,n,r){var i=t;do null===i.z&&(i.z=y(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,m(i)}function m(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<c&&(s++,r=r.nextZ,r);e++);for(u=c;s>0||u>0&&r;)0===s?(i=r,r=r.nextZ,u--):0!==u&&r?n.z<=r.z?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--):(i=n,n=n.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function y(t,e,n,r,i){return t=32767*(t-n)/i,e=32767*(e-r)/i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function g(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function _(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function b(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&S(t,e)&&S(e,t)&&M(t,e)}function w(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,r){return!!(x(t,e)&&x(n,r)||x(t,r)&&x(n,e))||w(t,e,n)>0!=w(t,e,r)>0&&w(n,r,t)>0!=w(n,r,e)>0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function S(t,e){return w(t.prev,t,t.next)<0?w(t,e,t.next)>=0&&w(t,t.prev,e)>=0:w(t,e,t.prev)<0||w(t,t.next,e)<0}function M(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function O(t,e){var n=new I(t.i,t.x,t.y),r=new I(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function A(t,e,n,r){var i=new I(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function R(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function I(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}e.exports=r,r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(k(t,0,o,n));if(i)for(var s=0,u=e.length;s<u;s++){var c=e[s]*n,l=s<u-1?e[s+1]*n:t.length;a-=Math.abs(k(t,c,l,n))}var f=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,p=r[s+1]*n,d=r[s+2]*n;f+=Math.abs((t[h]-t[d])*(t[p+1]-t[h+1])-(t[h]-t[p])*(t[d+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},{}],423:[function(t,e,n){function r(t){var e,n,i,c,l,f;switch(typeof t){case"object":if(null===t)return null;if(o(t)){for(i="[",n=t.length-1,e=0;e<n;e++)i+=r(t[e])+",";return n>-1&&(i+=r(t[e])),i+"]"}for(c=a(t).sort(),n=c.length,i="{",l=c[e=0],f=n>0&&void 0!==t[l];e<n;)f?(i+='"'+l.replace(s,u)+'":'+r(t[l]),l=c[++e],f=e<n&&void 0!==t[l],f&&(i+=",")):(l=c[++e],f=e<n&&void 0!==t[l]);return i+"}";case"undefined":return null;case"string":return'"'+t.replace(s,u)+'"';default:return t}}var i={}.toString,o=Array.isArray||function(t){return"[object Array]"===i.call(t)},a=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},s=/[\u0000-\u001f"\\]/g,u=function(t){var e=t.charCodeAt(0);switch(e){case 34:return'\\"';case 92:return"\\\\";case 12:return"\\f";case 10:return"\\n";case 13:return"\\r";case 9:return"\\t";case 8:return"\\b";default:return e>15?"\\u00"+e.toString(16):"\\u000"+e.toString(16)}};e.exports=function(t){if(void 0!==t)return""+r(t)},e.exports.stringSearch=s,e.exports.stringReplace=u},{}],424:[function(t,e,n){(function(n){"use strict";var r=t("./emptyFunction"),i={listen:function(t,e,n){return t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):void 0},capture:function(t,e,i){return t.addEventListener?(t.addEventListener(e,i,!0),{remove:function(){t.removeEventListener(e,i,!0)}}):("production"!==n.env.NODE_ENV&&console.error("Attempted to listen to events during the capture phase on a browser that does not support the capture phase. Your application will not receive some events."),{remove:r})},registerDefault:function(){}};e.exports=i}).call(this,t("_process"))},{"./emptyFunction":431,_process:28}],425:[function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},{}],426:[function(t,e,n){"use strict";function r(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})}e.exports=r},{}],427:[function(t,e,n){"use strict";function r(t){return i(t.replace(/^-ms-/,"ms-"))}var i=t("./camelize");e.exports=r},{"./camelize":426}],428:[function(t,e,n){"use strict";function r(t,e){return!(!t||!e)&&(t===e||!i(t)&&(i(e)?r(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}var i=t("./isTextNode");e.exports=r},{"./isTextNode":441}],429:[function(t,e,n){(function(n){"use strict";function r(t){var e=t.length;if((Array.isArray(t)||"object"!=typeof t&&"function"!=typeof t)&&("production"!==n.env.NODE_ENV?a(!1,"toArray: Array-like object expected"):a(!1)),"number"!=typeof e&&("production"!==n.env.NODE_ENV?a(!1,"toArray: Object needs a length property"):a(!1)),0===e||e-1 in t||("production"!==n.env.NODE_ENV?a(!1,"toArray: Object should have keys for indices"):a(!1)),"function"==typeof t.callee&&("production"!==n.env.NODE_ENV?a(!1,"toArray: Object can't be `arguments`. Use rest params (function(...args) {}) or Array.from() instead."):a(!1)),t.hasOwnProperty)try{return Array.prototype.slice.call(t)}catch(t){}for(var r=Array(e),i=0;i<e;i++)r[i]=t[i];return r}function i(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"length"in t&&!("setInterval"in t)&&"number"!=typeof t.nodeType&&(Array.isArray(t)||"callee"in t||"item"in t)}function o(t){return i(t)?Array.isArray(t)?t.slice():r(t):[t]}var a=t("./invariant");e.exports=o}).call(this,t("_process"))},{"./invariant":439,_process:28}],430:[function(t,e,n){(function(n){"use strict";function r(t){var e=t.match(/^\s*<(\w+)/);return e&&e[1].toLowerCase()}function i(t,e){var i=c;c||("production"!==n.env.NODE_ENV?u(!1,"createNodesFromMarkup dummy not initialized"):u(!1));var o=r(t),l=o&&s(o);if(l){i.innerHTML=l[1]+t+l[2];for(var f=l[0];f--;)i=i.lastChild}else i.innerHTML=t;var h=i.getElementsByTagName("script");h.length&&(e||("production"!==n.env.NODE_ENV?u(!1,"createNodesFromMarkup(...): Unexpected <script> element rendered."):u(!1)),a(h).forEach(e));for(var p=Array.from(i.childNodes);i.lastChild;)i.removeChild(i.lastChild);return p}var o=t("./ExecutionEnvironment"),a=t("./createArrayFromMixed"),s=t("./getMarkupWrap"),u=t("./invariant"),c=o.canUseDOM?document.createElement("div"):null;e.exports=i}).call(this,t("_process"))},{"./ExecutionEnvironment":425,"./createArrayFromMixed":429,"./getMarkupWrap":435,"./invariant":439,_process:28}],431:[function(t,e,n){"use strict";function r(t){return function(){return t}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(t){return t},e.exports=i},{}],432:[function(t,e,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&Object.freeze(n),e.exports=n}).call(this,t("_process"))},{_process:28}],433:[function(t,e,n){"use strict";function r(t){try{t.focus()}catch(t){}}e.exports=r},{}],434:[function(t,e,n){"use strict";function r(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(t){return document.body}}e.exports=r},{}],435:[function(t,e,n){(function(n){"use strict";function r(t){return a||("production"!==n.env.NODE_ENV?o(!1,"Markup wrapping node not initialized"):o(!1)),h.hasOwnProperty(t)||(t="*"),s.hasOwnProperty(t)||("*"===t?a.innerHTML="<link />":a.innerHTML="<"+t+"></"+t+">",s[t]=!a.firstChild),s[t]?h[t]:null}var i=t("./ExecutionEnvironment"),o=t("./invariant"),a=i.canUseDOM?document.createElement("div"):null,s={},u=[1,'<select multiple="true">',"</select>"],c=[1,"<table>","</table>"],l=[3,"<table><tbody><tr>","</tr></tbody></table>"],f=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],h={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:u,option:u,caption:c,colgroup:c,tbody:c,tfoot:c,thead:c,td:l,th:l};["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"].forEach(function(t){h[t]=f,s[t]=!0}),e.exports=r}).call(this,t("_process"))},{"./ExecutionEnvironment":425,"./invariant":439,_process:28}],436:[function(t,e,n){"use strict";function r(t){return t===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:t.scrollLeft,y:t.scrollTop}}e.exports=r},{}],437:[function(t,e,n){"use strict";function r(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}e.exports=r},{}],438:[function(t,e,n){"use strict";function r(t){return i(t).replace(/^ms-/,"-ms-")}var i=t("./hyphenate");e.exports=r},{"./hyphenate":437}],439:[function(t,e,n){(function(t){"use strict";function n(t,e,n,i,o,a,s,u){if(r(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,i,o,a,s,u],f=0;c=new Error(e.replace(/%s/g,function(){return l[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var r=function(t){};"production"!==t.env.NODE_ENV&&(r=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")}),e.exports=n}).call(this,t("_process"))},{_process:28}],440:[function(t,e,n){"use strict";function r(t){return!(!t||!("function"==typeof Node?t instanceof Node:"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName))}e.exports=r},{}],441:[function(t,e,n){"use strict";function r(t){return i(t)&&3==t.nodeType}var i=t("./isNode");e.exports=r},{"./isNode":440}],442:[function(t,e,n){"use strict";function r(t){var e={};return function(n){return e.hasOwnProperty(n)||(e[n]=t.call(this,n)),e[n]}}e.exports=r},{}],443:[function(t,e,n){"use strict";var r,i=t("./ExecutionEnvironment");i.canUseDOM&&(r=window.performance||window.msPerformance||window.webkitPerformance),e.exports=r||{}},{"./ExecutionEnvironment":425}],444:[function(t,e,n){"use strict";var r,i=t("./performance");r=i.now?function(){return i.now()}:function(){return Date.now()},e.exports=r},{"./performance":443}],445:[function(t,e,n){"use strict";function r(t,e){return t===e?0!==t||0!==e||1/t===1/e:t!==t&&e!==e}function i(t,e){if(r(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(e,n[a])||!r(t[n[a]],e[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;e.exports=i},{}],446:[function(t,e,n){(function(n){"use strict";var r=t("./emptyFunction"),i=r;"production"!==n.env.NODE_ENV&&function(){var t=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r]
;var i=0,o="Warning: "+t.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(o);try{throw new Error(o)}catch(t){}};i=function(e,n){if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(0!==n.indexOf("Failed Composite propType: ")&&!e){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t.apply(void 0,[n].concat(i))}}}(),e.exports=i}).call(this,t("_process"))},{"./emptyFunction":431,_process:28}],447:[function(t,e,n){"use strict";function r(t){return new Function("f","var p = (f && f.properties || {}); return "+i(t))}function i(t){if(!t)return"true";var e=t[0];return t.length<=1?"any"===e?"false":"true":"("+("=="===e?a(t[1],t[2],"===",!1):"!="===e?a(t[1],t[2],"!==",!1):"<"===e||">"===e||"<="===e||">="===e?a(t[1],t[2],e,!0):"any"===e?s(t.slice(1),"||"):"all"===e?s(t.slice(1),"&&"):"none"===e?l(s(t.slice(1),"||")):"in"===e?u(t[1],t.slice(2)):"!in"===e?l(u(t[1],t.slice(2))):"has"===e?c(t[1]):"!has"===e?l(c([t[1]])):"true")+")"}function o(t){return"$type"===t?"f.type":"$id"===t?"f.id":"p["+JSON.stringify(t)+"]"}function a(t,e,n,r){var i=o(t),a="$type"===t?h.indexOf(e):JSON.stringify(e);return(r?"typeof "+i+"=== typeof "+a+"&&":"")+i+n+a}function s(t,e){return t.map(i).join(e)}function u(t,e){"$type"===t&&(e=e.map(function(t){return h.indexOf(t)}));var n=JSON.stringify(e.sort(f)),r=o(t);return e.length<=200?n+".indexOf("+r+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+r+", "+n+",0,"+(e.length-1)+")"}function c(t){return JSON.stringify(t)+" in p"}function l(t){return"!("+t+")"}function f(t,e){return t<e?-1:t>e?1:0}e.exports=r;var h=["Unknown","Point","LineString","Polygon"]},{}],448:[function(t,e,n){var r=r||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},a=t.webkitRequestFileSystem,s=t.requestFileSystem||a||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c=0,l=function(e){var r=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,500)},f=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){u(t)}}},h=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t},p=function(e,u,p){p||(e=h(e));var d,v,m,y=this,g=e.type,_=!1,b=function(){f(y,"writestart progress write writeend".split(" "))},w=function(){if(!_&&d||(d=n().createObjectURL(e)),v)v.location.href=d;else{void 0==t.open(d,"_blank")&&"undefined"!=typeof safari&&(t.location.href=d)}y.readyState=y.DONE,b(),l(d)},x=function(t){return function(){if(y.readyState!==y.DONE)return t.apply(this,arguments)}},E={create:!0,exclusive:!1};return y.readyState=y.INIT,u||(u="download"),i?(d=n().createObjectURL(e),r.href=d,r.download=u,void setTimeout(function(){o(r),b(),l(d),y.readyState=y.DONE})):(t.chrome&&g&&"application/octet-stream"!==g&&(m=e.slice||e.webkitSlice,e=m.call(e,0,e.size,"application/octet-stream"),_=!0),a&&"download"!==u&&(u+=".download"),("application/octet-stream"===g||a)&&(v=t),s?(c+=e.size,void s(t.TEMPORARY,c,x(function(t){t.root.getDirectory("saved",E,x(function(t){var n=function(){t.getFile(u,E,x(function(t){t.createWriter(x(function(n){n.onwriteend=function(e){v.location.href=t.toURL(),y.readyState=y.DONE,f(y,"writeend",e),l(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=y["on"+t]}),n.write(e),y.abort=function(){n.abort(),y.readyState=y.DONE},y.readyState=y.WRITING}),w)}),w)};t.getFile(u,{create:!1},x(function(t){t.remove(),n()}),x(function(t){t.code===t.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},d=p.prototype,v=function(t,e,n){return new p(t,e,n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return n||(t=h(t)),navigator.msSaveOrOpenBlob(t,e||"download")}:(d.abort=function(){var t=this;t.readyState=t.DONE,f(t,"abort")},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,v)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==e&&e.exports?e.exports.saveAs=r:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return r})},{}],449:[function(t,e,n){function r(t){if("Polygon"===t.type)return i(t.coordinates);if("MultiPolygon"===t.type){for(var e=0,n=0;n<t.coordinates.length;n++)e+=i(t.coordinates[n]);return e}return null}function i(t){var e=0;if(t&&t.length>0){e+=Math.abs(o(t[0]));for(var n=1;n<t.length;n++)e-=Math.abs(o(t[n]))}return e}function o(t){var e=0;if(t.length>2){for(var n,r,i=0;i<t.length-1;i++)n=t[i],r=t[i+1],e+=a(r[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));e=e*s.RADIUS*s.RADIUS/2}return e}function a(t){return t*Math.PI/180}var s=t("wgs84");e.exports.geometry=r,e.exports.ring=o},{wgs84:990}],450:[function(t,e,n){function r(t){if(!t||!t.type)return null;var e=i[t.type];return e?"geometry"===e?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]}:"feature"===e?{type:"FeatureCollection",features:[t]}:"featurecollection"===e?t:void 0:null}e.exports=r;var i={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},{}],451:[function(t,e,n){function r(t,e){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(i(r,e)),t;case"Feature":return t.geometry=r(t.geometry,e),t;case"Polygon":case"MultiPolygon":return o(t,e);default:return t}}function i(t,e){return function(n){return t(n,e)}}function o(t,e){return"Polygon"===t.type?t.coordinates=a(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(i(a,e))),t}function a(t,e){e=!!e,t[0]=s(t[0],!e);for(var n=1;n<t.length;n++)t[n]=s(t[n],e);return t}function s(t,e){return u(t)===e?t:t.reverse()}function u(t){return c.ring(t)>=0}var c=t("geojson-area");e.exports=r},{"geojson-area":449}],452:[function(t,e,n){"use strict";function r(t,e,n,r,a,u,c,l){if(n/=e,r/=e,c>=n&&l<=r)return t;if(c>r||l<n)return null;for(var f=[],h=0;h<t.length;h++){var p,d,v=t[h],m=v.geometry,y=v.type;if(p=v.min[a],d=v.max[a],p>=n&&d<=r)f.push(v);else if(!(p>r||d<n)){var g=1===y?i(m,n,r,a):o(m,n,r,a,u,3===y);g.length&&f.push(s(v.tags,y,g,v.id))}}return f.length?f:null}function i(t,e,n,r){for(var i=[],o=0;o<t.length;o++){var a=t[o],s=a[r];s>=e&&s<=n&&i.push(a)}return i}function o(t,e,n,r,i,o){for(var s=[],u=0;u<t.length;u++){var c,l,f,h=0,p=0,d=null,v=t[u],m=v.area,y=v.dist,g=v.outer,_=v.length,b=[];for(l=0;l<_-1;l++)c=d||v[l],d=v[l+1],h=p||c[r],p=d[r],h<e?p>n?(b.push(i(c,d,e),i(c,d,n)),o||(b=a(s,b,m,y,g))):p>=e&&b.push(i(c,d,e)):h>n?p<e?(b.push(i(c,d,n),i(c,d,e)),o||(b=a(s,b,m,y,g))):p<=n&&b.push(i(c,d,n)):(b.push(c),p<e?(b.push(i(c,d,e)),o||(b=a(s,b,m,y,g))):p>n&&(b.push(i(c,d,n)),o||(b=a(s,b,m,y,g))));c=v[_-1],h=c[r],h>=e&&h<=n&&b.push(c),f=b[b.length-1],o&&f&&(b[0][0]!==f[0]||b[0][1]!==f[1])&&b.push(b[0]),a(s,b,m,y,g)}return s}function a(t,e,n,r,i){return e.length&&(e.area=n,e.dist=r,void 0!==i&&(e.outer=i),t.push(e)),[]}e.exports=r;var s=t("./feature")},{"./feature":454}],453:[function(t,e,n){"use strict";function r(t,e){var n=[];if("FeatureCollection"===t.type)for(var r=0;r<t.features.length;r++)i(n,t.features[r],e);else"Feature"===t.type?i(n,t,e):i(n,{geometry:t},e);return n}function i(t,e,n){if(null!==e.geometry){var r,s,u,l,f=e.geometry,h=f.type,p=f.coordinates,d=e.properties,v=e.id;if("Point"===h)t.push(c(d,1,[a(p)],v));else if("MultiPoint"===h)t.push(c(d,1,o(p),v));else if("LineString"===h)t.push(c(d,2,[o(p,n)],v));else if("MultiLineString"===h||"Polygon"===h){for(u=[],r=0;r<p.length;r++)l=o(p[r],n),"Polygon"===h&&(l.outer=0===r),u.push(l);t.push(c(d,"Polygon"===h?3:2,u,v))}else if("MultiPolygon"===h){for(u=[],r=0;r<p.length;r++)for(s=0;s<p[r].length;s++)l=o(p[r][s],n),l.outer=0===s,u.push(l);t.push(c(d,3,u,v))}else{if("GeometryCollection"!==h)throw new Error("Input data is not a valid GeoJSON object.");for(r=0;r<f.geometries.length;r++)i(t,{geometry:f.geometries[r],properties:d},n)}}}function o(t,e){for(var n=[],r=0;r<t.length;r++)n.push(a(t[r]));return e&&(u(n,e),s(n)),n}function a(t){var e=Math.sin(t[1]*Math.PI/180),n=t[0]/360+.5,r=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return r=r<0?0:r>1?1:r,[n,r,0]}function s(t){for(var e,n,r=0,i=0,o=0;o<t.length-1;o++)e=n||t[o],n=t[o+1],r+=e[0]*n[1]-n[0]*e[1],i+=Math.abs(n[0]-e[0])+Math.abs(n[1]-e[1]);t.area=Math.abs(r/2),t.dist=i}e.exports=r;var u=t("./simplify"),c=t("./feature")},{"./feature":454,"./simplify":456}],454:[function(t,e,n){"use strict";function r(t,e,n,r){var o={id:r||null,type:e,geometry:n,tags:t||null,min:[1/0,1/0],max:[-(1/0),-(1/0)]};return i(o),o}function i(t){var e=t.geometry,n=t.min,r=t.max;if(1===t.type)o(n,r,e);else for(var i=0;i<e.length;i++)o(n,r,e[i]);return t}function o(t,e,n){for(var r,i=0;i<n.length;i++)r=n[i],t[0]=Math.min(r[0],t[0]),e[0]=Math.max(r[0],e[0]),t[1]=Math.min(r[1],t[1]),e[1]=Math.max(r[1],e[1])}e.exports=r},{}],455:[function(t,e,n){"use strict";function r(t,e){return new i(t,e)}function i(t,e){e=this.options=u(Object.create(this.options),e);var n=e.debug;n&&console.time("preprocess data");var r=1<<e.maxZoom,i=l(t,e.tolerance/(r*e.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=p(i,e.buffer/e.extent,a),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function o(t,e,n){return 32*((1<<t)*n+e)+t}function a(t,e,n){return[n,(n-t[0])*(e[1]-t[1])/(e[0]-t[0])+t[1],1]}function s(t,e,n){return[(n-t[1])*(e[0]-t[0])/(e[1]-t[1])+t[0],n,1]}function u(t,e){for(var n in e)t[n]=e[n];return t}function c(t,e,n){var r=t.source;if(1!==r.length)return!1;var i=r[0];if(3!==i.type||i.geometry.length>1)return!1;var o=i.geometry[0].length;if(5!==o)return!1;for(var a=0;a<o;a++){var s=f.point(i.geometry[0][a],e,t.z2,t.x,t.y);if(s[0]!==-n&&s[0]!==e+n||s[1]!==-n&&s[1]!==e+n)return!1}return!0}e.exports=r;var l=t("./convert"),f=t("./transform"),h=t("./clip"),p=t("./wrap"),d=t("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(t,e,n,r,i,u,l){for(var f=[t,e,n,r],p=this.options,v=p.debug,m=null;f.length;){r=f.pop(),n=f.pop(),e=f.pop(),t=f.pop();var y=1<<e,g=o(e,n,r),_=this.tiles[g],b=e===p.maxZoom?0:p.tolerance/(y*p.extent);if(!_&&(v>1&&console.time("creation"),_=this.tiles[g]=d(t,y,n,r,b,e===p.maxZoom),this.tileCoords.push({z:e,x:n,y:r}),v)){v>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var w="z"+e;this.stats[w]=(this.stats[w]||0)+1,this.total++}if(_.source=t,i){if(e===p.maxZoom||e===i)continue;var x=1<<i-e;if(n!==Math.floor(u/x)||r!==Math.floor(l/x))continue}else if(e===p.indexMaxZoom||_.numPoints<=p.indexMaxPoints)continue;if(p.solidChildren||!c(_,p.extent,p.buffer)){_.source=null,v>1&&console.time("clipping");var E,T,S,M,O,A,R=.5*p.buffer/p.extent,I=.5-R,k=.5+R,P=1+R;E=T=S=M=null,O=h(t,y,n-R,n+k,0,a,_.min[0],_.max[0]),A=h(t,y,n+I,n+P,0,a,_.min[0],_.max[0]),O&&(E=h(O,y,r-R,r+k,1,s,_.min[1],_.max[1]),T=h(O,y,r+I,r+P,1,s,_.min[1],_.max[1])),A&&(S=h(A,y,r-R,r+k,1,s,_.min[1],_.max[1]),M=h(A,y,r+I,r+P,1,s,_.min[1],_.max[1])),v>1&&console.timeEnd("clipping"),t.length&&(f.push(E||[],e+1,2*n,2*r),f.push(T||[],e+1,2*n,2*r+1),f.push(S||[],e+1,2*n+1,2*r),f.push(M||[],e+1,2*n+1,2*r+1))}else i&&(m=e)}return m},i.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug,s=1<<t;e=(e%s+s)%s;var u=o(t,e,n);if(this.tiles[u])return f.tile(this.tiles[u],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l,h=t,p=e,d=n;!l&&h>0;)h--,p=Math.floor(p/2),d=Math.floor(d/2),l=this.tiles[o(h,p,d)];if(!l||!l.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",h,p,d),c(l,i,r.buffer))return f.tile(l,i);a>1&&console.time("drilling down");var v=this.splitTile(l.source,h,p,d,t,e,n);if(a>1&&console.timeEnd("drilling down"),null!==v){var m=1<<t-v;u=o(v,Math.floor(e/m),Math.floor(n/m))}return this.tiles[u]?f.tile(this.tiles[u],i):null}},{"./clip":452,"./convert":453,"./tile":457,"./transform":458,"./wrap":459}],456:[function(t,e,n){"use strict";function r(t,e){var n,r,o,a,s=e*e,u=t.length,c=0,l=u-1,f=[];for(t[c][2]=1,t[l][2]=1;l;){for(r=0,n=c+1;n<l;n++)o=i(t[n],t[c],t[l]),o>r&&(a=n,r=o);r>s?(t[a][2]=r,f.push(c),f.push(a),c=a):(l=f.pop(),c=f.pop())}}function i(t,e,n){var r=e[0],i=e[1],o=n[0],a=n[1],s=t[0],u=t[1],c=o-r,l=a-i;if(0!==c||0!==l){var f=((s-r)*c+(u-i)*l)/(c*c+l*l);f>1?(r=o,i=a):f>0&&(r+=c*f,i+=l*f)}return c=s-r,l=u-i,c*c+l*l}e.exports=r},{}],457:[function(t,e,n){"use strict";function r(t,e,n,r,o,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:e,transformed:!1,min:[2,1],max:[-1,0]},u=0;u<t.length;u++){s.numFeatures++,i(s,t[u],o,a);var c=t[u].min,l=t[u].max;c[0]<s.min[0]&&(s.min[0]=c[0]),c[1]<s.min[1]&&(s.min[1]=c[1]),l[0]>s.max[0]&&(s.max[0]=l[0]),l[1]>s.max[1]&&(s.max[1]=l[1])}return s}function i(t,e,n,r){var i,a,s,u,c=e.geometry,l=e.type,f=[],h=n*n;if(1===l)for(i=0;i<c.length;i++)f.push(c[i]),t.numPoints++,t.numSimplified++;else for(i=0;i<c.length;i++)if(s=c[i],r||!(2===l&&s.dist<n||3===l&&s.area<h)){var p=[];for(a=0;a<s.length;a++)u=s[a],(r||u[2]>h)&&(p.push(u),t.numSimplified++),t.numPoints++;3===l&&o(p,s.outer),f.push(p)}else t.numPoints+=s.length;if(f.length){var d={geometry:f,type:l,tags:e.tags||null};null!==e.id&&(d.id=e.id),t.features.push(d)}}function o(t,e){a(t)<0===e&&t.reverse()}function a(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n[0]-e[0])*(e[1]+n[1]);return r}e.exports=r},{}],458:[function(t,e,n){"use strict";function r(t,e){if(t.transformed)return t;var n,r,o,a=t.z2,s=t.x,u=t.y;for(n=0;n<t.features.length;n++){var c=t.features[n],l=c.geometry;if(1===c.type)for(r=0;r<l.length;r++)l[r]=i(l[r],e,a,s,u);else for(r=0;r<l.length;r++){var f=l[r];for(o=0;o<f.length;o++)f[o]=i(f[o],e,a,s,u)}}return t.transformed=!0,t}function i(t,e,n,r,i){return[Math.round(e*(t[0]*n-r)),Math.round(e*(t[1]*n-i))]}n.tile=r,n.point=i},{}],459:[function(t,e,n){"use strict";function r(t,e,n){var r=t,o=a(t,1,-1-e,e,0,n,-1,2),s=a(t,1,1-e,2+e,0,n,-1,2);return(o||s)&&(r=a(t,1,-e,1+e,0,n,-1,2)||[],o&&(r=i(o,1).concat(r)),s&&(r=r.concat(i(s,-1)))),r}function i(t,e){for(var n=[],r=0;r<t.length;r++){var i,a=t[r],u=a.type;if(1===u)i=o(a.geometry,e);else{i=[];for(var c=0;c<a.geometry.length;c++)i.push(o(a.geometry[c],e))}n.push(s(a.tags,u,i,a.id))}return n}function o(t,e){var n=[];n.area=t.area,n.dist=t.dist;for(var r=0;r<t.length;r++)n.push([t[r][0]+e,t[r][1],t[r][2]]);return n}var a=t("./clip"),s=t("./feature");e.exports=r},{"./clip":452,"./feature":454}],460:[function(t,e,n){(function(n,r){"use strict";function i(t,e){var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height;var r=t.getContext("2d");r.drawImage(n,0,0);var i=r.getImageData(0,0,n.width,n.height);e(null,l(new Uint8Array(i.data),[n.width,n.height,4],[4,4*n.width,1],0))},n.onerror=function(t){e(t)},n.src=t}function o(t,e){var n;try{n=new f(t)}catch(t){return void e(t)}if(n.numFrames()>0){var r=[n.numFrames(),n.height,n.width,4],i=new Uint8Array(r[0]*r[1]*r[2]*r[3]),o=l(i,r);try{for(var a=0;a<n.numFrames();++a)n.decodeAndBlitFrameRGBA(a,i.subarray(o.index(a,0,0,0),o.index(a+1,0,0,0)))}catch(t){return void e(t)}e(null,o.transpose(0,2,1))}else{var r=[n.height,n.width,4],i=new Uint8Array(r[0]*r[1]*r[2]),o=l(i,r);try{n.decodeAndBlitFrameRGBA(0,i)}catch(t){return void e(t)}e(null,o.transpose(1,0))}}function a(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.overrideMimeType&&n.overrideMimeType("application/binary"),n.onerror=function(t){e(t)},n.onload=function(){if(4===n.readyState){o(new Uint8Array(n.response),e)}},n.send()}function s(t){if(void 0===t[0]){for(var e=t.length,n=new Uint8Array(e),r=0;r<e;++r)n[r]=t.get(r);return n}return new Uint8Array(t)}function u(t,e){r.nextTick(function(){try{var n=h(t);n?o(s(n),e):e(new Error("Error parsing data URI"))}catch(t){e(t)}})}var c=t("path"),l=t("ndarray"),f=t("omggif").GifReader,h=(t("ndarray-pack"),t("through"),t("data-uri-to-buffer"));e.exports=function(t,e,r){r||(r=e,e="");var o=c.extname(t);switch(e||o.toUpperCase()){case".GIF":a(t,r);break;default:n.isBuffer(t)&&(t="data:"+e+";base64,"+t.toString("base64")),0===t.indexOf("data:image/gif;")?u(t,r):i(t,r)}}}).call(this,{isBuffer:t("../../../.nvm/versions/node/v6.9.2/lib/node_modules/watchify/node_modules/is-buffer/index.js")},t("_process"))},{"../../../.nvm/versions/node/v6.9.2/lib/node_modules/watchify/node_modules/is-buffer/index.js":13,_process:28,"data-uri-to-buffer":365,ndarray:758,"ndarray-pack":756,omggif:760,path:26,through:970}],461:[function(t,e,n){(function(n){function r(t){o.call(this,t),this.okayToPush=!0,this.resetData()}function i(t,e,n){function i(){a.flushData()}n=n||{};var o=n.highWaterMark;r.call(this,{highWaterMark:o||0===o?o:65536}),this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=[],this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10;var a=this;this.on("writeHeader#stop",i),this.on("frame#stop",i),this.on("finish#stop",function(){i(),a.push(null)})}var o=(t("assert"),t("events").EventEmitter,t("readable-stream")),a=t("util"),s=t("./TypedNeuQuant.js"),u=t("./LZWEncoder.js");a.inherits(r,o),r.prototype._read=function(){this.okayToPush=!0},r.prototype.resetData=function(){this.data=[]},r.prototype.flushData=function(){if(!this.okayToPush){var t=new Error("GIF memory limit exceeded. Please `read` from GIF before writing additional frames/information.");return this.emit("error",t)}var e=new n(this.data);this.resetData(),this.okayToPush=this.push(e)},r.prototype.writeByte=function(t){this.data.push(t)},r.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},r.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,i=e||0;i<r;i++)this.writeByte(t[i])},a.inherits(i,r),i.prototype.setDelay=function(t){this.delay=Math.round(t/10)},i.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},i.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},i.prototype.setRepeat=function(t){this.repeat=t},i.prototype.setTransparent=function(t){this.transparent=t},i.prototype.analyzeImage=function(t){this.setImagePixels(this.removeAlphaChannel(t)),this.analyzePixels()},i.prototype.writeImageInfo=function(){this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.firstFrame=!1},i.prototype.outputImage=function(){this.writePixels()},i.prototype.addFrame=function(t){this.emit("frame#start"),this.analyzeImage(t),this.writeImageInfo(),this.outputImage(),this.emit("frame#stop")},i.prototype.finish=function(){this.emit("finish#start"),this.writeByte(59),this.emit("finish#stop")},i.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},i.prototype.writeHeader=function(){this.emit("writeHeader#start"),this.writeUTFBytes("GIF89a"),this.emit("writeHeader#stop")},i.prototype.analyzePixels=function(){var t=this.pixels.length,e=t/3;this.indexedPixels=new Uint8Array(e);var n=new s(this.pixels,this.sample);n.buildColormap(),this.colorTab=n.getColormap();for(var r=0,i=0;i<e;i++){var o=n.lookupRGB(255&this.pixels[r++],255&this.pixels[r++],255&this.pixels[r++]);this.usedEntry[o]=!0,this.indexedPixels[i]=o}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent))},i.prototype.findClosest=function(t){if(null===this.colorTab)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,r=255&t,i=0,o=16777216,a=this.colorTab.length,s=0;s<a;){var u=e-(255&this.colorTab[s++]),c=n-(255&this.colorTab[s++]),l=r-(255&this.colorTab[s]),f=u*u+c*c+l*l,h=s/3;this.usedEntry[h]&&f<o&&(o=f,i=h),s++}return i},i.prototype.removeAlphaChannel=function(t){for(var e=this.width,n=this.height,r=new Uint8Array(e*n*3),i=0,o=0;o<n;o++)for(var a=0;a<e;a++){var s=o*e*4+4*a;r[i++]=t[s],r[i++]=t[s+1],r[i++]=t[s+2]}return r},i.prototype.setImagePixels=function(t){this.pixels=t},i.prototype.writeGraphicCtrlExt=function(){this.writeByte(33),this.writeByte(249),this.writeByte(4);var t,e;null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.writeByte(0|e|0|t),this.writeShort(this.delay),this.writeByte(this.transIndex),this.writeByte(0)},i.prototype.writeImageDesc=function(){this.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.writeByte(0):this.writeByte(128|this.palSize)},i.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.writeByte(240|this.palSize),this.writeByte(0),this.writeByte(0)},i.prototype.writeNetscapeExt=function(){this.writeByte(33),this.writeByte(255),this.writeByte(11),this.writeUTFBytes("NETSCAPE2.0"),this.writeByte(3),this.writeByte(1),this.writeShort(this.repeat),this.writeByte(0)},i.prototype.writePalette=function(){this.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.writeByte(0)},i.prototype.writeShort=function(t){this.writeByte(255&t),this.writeByte(t>>8&255)},i.prototype.writePixels=function(){new u(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this)},i.prototype.stream=function(){return this},i.ByteCapacitor=r,e.exports=i}).call(this,t("buffer").Buffer)},{"./LZWEncoder.js":462,"./TypedNeuQuant.js":463,assert:1,buffer:8,events:10,"readable-stream":469,util:45}],462:[function(t,e,n){function r(t,e,n,r){function o(t,e){T[v++]=t,v>=254&&l(e)}function a(t){s(5003),A=w+2,R=!0,p(w,t)}function s(t){for(var e=0;e<t;++e)S[e]=-1}function u(t,e){var n,r,i,o,u,c,l;for(b=t,R=!1,_=b,m=f(_),w=1<<t-1,x=w+1,A=w+2,v=0,o=h(),l=0,n=5003;n<65536;n*=2)++l;l=8-l,c=5003,s(c),p(w,e);t:for(;(r=h())!=-1;)if(n=(r<<12)+o,i=r<<l^o,S[i]!==n){if(S[i]>=0){u=c-i,0===i&&(u=1);do if((i-=u)<0&&(i+=c),S[i]===n){o=M[i];continue t}while(S[i]>=0)}p(o,e),o=r,A<4096?(M[i]=A++,S[i]=n):a(e)}else o=M[i];p(o,e),p(x,e)}function c(n){n.writeByte(E),y=t*e,g=0,u(E+1,n),n.writeByte(0)}function l(t){v>0&&(t.writeByte(v),t.writeBytes(T,0,v),v=0)}function f(t){return(1<<t)-1}function h(){return 0===y?-1:(--y,255&n[g++])}function p(t,e){for(d&=i[O],O>0?d|=t<<O:d=t,O+=_;O>=8;)o(255&d,e),d>>=8,O-=8;if((A>m||R)&&(R?(m=f(_=b),R=!1):(++_,m=12==_?4096:f(_))),t==x){for(;O>0;)o(255&d,e),d>>=8,O-=8;l(e)}}var d,v,m,y,g,_,b,w,x,E=Math.max(2,r),T=new Uint8Array(256),S=new Int32Array(5003),M=new Int32Array(5003),O=0,A=0,R=!1;this.encode=c}var i=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=r},{}],463:[function(t,e,n){function r(t,e){function n(){h=[],p=new Int32Array(256),d=new Int32Array(256),v=new Int32Array(256),m=new Int32Array(32);var t,e;for(t=0;t<256;t++)e=(t<<12)/256,h[t]=new Float64Array([e,e,e,0]),v[t]=256,d[t]=0}function r(){for(var t=0;t<256;t++)h[t][0]>>=4,h[t][1]>>=4,h[t][2]>>=4,h[t][3]=t}function i(t,e,n,r,i){h[e][0]-=t*(h[e][0]-n)/1024,h[e][1]-=t*(h[e][1]-r)/1024,h[e][2]-=t*(h[e][2]-i)/1024}function o(t,e,n,r,i){for(var o,a,s=Math.abs(e-t),u=Math.min(e+t,256),c=e+1,l=e-1,f=1;c<u||l>s;)a=m[f++],c<u&&(o=h[c++],o[0]-=a*(o[0]-n)/262144,o[1]-=a*(o[1]-r)/262144,o[2]-=a*(o[2]-i)/262144),l>s&&(o=h[l--],o[0]-=a*(o[0]-n)/262144,o[1]-=a*(o[1]-r)/262144,o[2]-=a*(o[2]-i)/262144)}function a(t,e,n){var r,i,o,a,s,u=~(1<<31),c=u,l=-1,f=l;for(r=0;r<256;r++)i=h[r],o=Math.abs(i[0]-t)+Math.abs(i[1]-e)+Math.abs(i[2]-n),o<u&&(u=o,l=r),a=o-(d[r]>>12),a<c&&(c=a,f=r),s=v[r]>>10,v[r]-=s,d[r]+=s<<10;return v[l]+=64,d[l]-=65536,f}function s(){var t,e,n,r,i,o,a=0,s=0;for(t=0;t<256;t++){for(n=h[t],i=t,o=n[1],e=t+1;e<256;e++)r=h[e],r[1]<o&&(i=e,o=r[1]);if(r=h[i],t!=i&&(e=r[0],r[0]=n[0],n[0]=e,e=r[1],r[1]=n[1],n[1]=e,e=r[2],r[2]=n[2],n[2]=e,e=r[3],r[3]=n[3],n[3]=e),o!=a){for(p[a]=s+t>>1,e=a+1;e<o;e++)p[e]=t;a=o,s=t}}for(p[a]=s+255>>1,e=a+1;e<256;e++)p[e]=255}function u(t,e,n){for(var r,i,o,a=1e3,s=-1,u=p[e],c=u-1;u<256||c>=0;)u<256&&(i=h[u],o=i[1]-e,o>=a?u=256:(u++,o<0&&(o=-o),r=i[0]-t,r<0&&(r=-r),o+=r,o<a&&(r=i[2]-n,r<0&&(r=-r),o+=r,o<a&&(a=o,s=i[3])))),c>=0&&(i=h[c],o=e-i[1],o>=a?c=-1:(c--,o<0&&(o=-o),r=i[0]-t,r<0&&(r=-r),o+=r,o<a&&(r=i[2]-n,r<0&&(r=-r),o+=r,o<a&&(a=o,s=i[3]))));return s}function c(){var n,r=t.length,s=30+(e-1)/3,u=r/(3*e),c=~~(u/100),l=1024,f=2048,h=f>>6;for(h<=1&&(h=0),n=0;n<h;n++)m[n]=l*(256*(h*h-n*n)/(h*h));var p;r<1509?(e=1,p=3):p=r%499!==0?1497:r%491!==0?1473:r%487!==0?1461:1509;var d,v,y,g,_=0;for(n=0;n<u;)if(d=(255&t[_])<<4,v=(255&t[_+1])<<4,y=(255&t[_+2])<<4,g=a(d,v,y),i(l,g,d,v,y),0!==h&&o(h,g,d,v,y),_+=p,_>=r&&(_-=r),n++,0===c&&(c=1),n%c===0)for(l-=l/s,f-=f/30,h=f>>6,h<=1&&(h=0),g=0;g<h;g++)m[g]=l*(256*(h*h-g*g)/(h*h))}function l(){n(),c(),r(),s()}function f(){for(var t=[],e=[],n=0;n<256;n++)e[h[n][3]]=n;for(var r=0,i=0;i<256;i++){var o=e[i];t[r++]=h[o][0],t[r++]=h[o][1],t[r++]=h[o][2]}return t}var h,p,d,v,m;this.buildColormap=l,this.getColormap=f,this.lookupRGB=u}e.exports=r},{}],464:[function(t,e,n){(function(n){function r(t){if(!(this instanceof r))return new r(t);u.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}e.exports=r;var a=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},s=t("core-util-is");s.inherits=t("inherits");var u=t("./_stream_readable"),c=t("./_stream_writable");s.inherits(r,u),o(a(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":466,"./_stream_writable":468,_process:28,"core-util-is":349,inherits:486}],465:[function(t,e,n){function r(t){if(!(this instanceof r))return new r(t);i.call(this,t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":467,"core-util-is":349,inherits:486}],466:[function(t,e,n){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(A||(A=t("string_decoder/").StringDecoder),this.decoder=new A(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");if(!(this instanceof i))return new i(e);this._readableState=new r(e,this),this.readable=!0,M.call(this)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(O.isNullOrUndefined(n))e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&f(t)),p(t,e);else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=8388608)t=8388608;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||O.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return O.isBuffer(e)||O.isString(e)||O.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,f(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(R("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){h(t)}):h(t))}function h(t){R("emit readable"),t.emit("readable"),g(t)}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(R("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;R("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&S.listenerCount(t,"data")&&(e.flowing=!0,g(t))}}function m(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){y(t,e)}))}function y(t,e){e.resumeScheduled=!1,t.emit("resume"),g(t),e.flowing&&!e.reading&&t.read(0)}function g(t){var e=t._readableState;if(R("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function _(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!t||t>=i)n=o?r.join(""):T.concat(r,i),r.length=0;else if(t<r[0].length){var s=r[0];n=s.slice(0,t),r[0]=s.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new T(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var s=r[0],f=Math.min(t-u,s.length);o?n+=s.slice(0,f):s.copy(n,u,0,f),f<s.length?r[0]=s.slice(f):r.shift(),u+=f}}return n}function b(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function x(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=i;var E=t("isarray"),T=t("buffer").Buffer;i.ReadableState=r;var S=t("events").EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var M=t("stream"),O=t("core-util-is");O.inherits=t("inherits");var A,R=t("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},O.inherits(i,M),i.prototype.push=function(t,e){var n=this._readableState;return O.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new T(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){return o(this,this._readableState,t,"",!0)},i.prototype.setEncoding=function(e){
return A||(A=t("string_decoder/").StringDecoder),this._readableState.decoder=new A(e),this._readableState.encoding=e,this};i.prototype.read=function(t){R("read",t);var e=this._readableState,n=t;if((!O.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return R("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?b(this):f(this),null;if(t=u(t,e),0===t&&e.ended)return 0===e.length&&b(this),null;var r=e.needReadable;R("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,R("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,R("reading or ended",r)),r&&(R("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=u(n,e));var i;return i=t>0?_(t,e):null,O.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&b(this),O.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){R("onunpipe"),t===f&&o()}function i(){R("onend"),t.end()}function o(){R("cleanup"),t.removeListener("close",u),t.removeListener("finish",c),t.removeListener("drain",m),t.removeListener("error",s),t.removeListener("unpipe",r),f.removeListener("end",i),f.removeListener("end",o),f.removeListener("data",a),!h.awaitDrain||t._writableState&&!t._writableState.needDrain||m()}function a(e){R("ondata"),!1===t.write(e)&&(R("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,f.pause())}function s(e){R("onerror",e),l(),t.removeListener("error",s),0===S.listenerCount(t,"error")&&t.emit("error",e)}function u(){t.removeListener("finish",c),l()}function c(){R("onfinish"),t.removeListener("close",u),l()}function l(){R("unpipe"),f.unpipe(t)}var f=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,e);var p=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,d=p?i:o;h.endEmitted?n.nextTick(d):f.once("end",d),t.on("unpipe",r);var m=v(f);return t.on("drain",m),f.on("data",a),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",u),t.once("finish",c),t.emit("pipe",f),h.flowing||(R("pipe resume"),f.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=x(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=M.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&f(this,i);else{var o=this;n.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(R("resume"),t.flowing=!0,t.reading||(R("resume read 0"),this.read(0)),m(this,t)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(R("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(R("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){r.push(i)||(n=!0,t.pause())}});for(var i in t)O.isFunction(t[i])&&O.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return w(["error","close","destroy","pause","resume"],function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){R("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=_}).call(this,t("_process"))},{"./_stream_duplex":464,_process:28,buffer:8,"core-util-is":349,events:10,inherits:486,isarray:489,stream:40,"string_decoder/":967,util:3}],467:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":464,"core-util-is":349,inherits:486}],468:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=e.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");if(!(this instanceof o||this instanceof n))return new o(e);this._writableState=new i(e,this),this.writable=!0,E.call(this)}function a(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function s(t,e,r,i){var o=!0;if(!(x.isBuffer(r)||x.isString(r)||x.isNullOrUndefined(r)||e.objectMode)){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),n.nextTick(function(){i(a)}),o=!1}return o}function u(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&x.isString(e)&&(e=new w(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),x.isBuffer(n)&&(i="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):l(t,e,!1,a,n,i,o),s}function l(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function f(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(h(r),e)f(t,r,i,e,o);else{var a=y(t,r);a||r.corked||r.bufferProcessing||!r.buffer.length||m(t,r),i?n.nextTick(function(){d(t,r,a,o)}):d(t,r,a,o)}}function d(t,e,n,r){n||v(t,e),e.pendingcb--,r(),_(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,l(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,a=i.encoding,s=i.callback;if(l(t,e,!1,e.objectMode?1:o.length,o,a,s),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function g(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function _(t,e){var n=y(t,e);return n&&(0===e.pendingcb?(g(t,e),e.finished=!0,t.emit("finish")):g(t,e)),n}function b(t,e,r){e.ending=!0,_(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var x=t("core-util-is");x.inherits=t("inherits");var E=t("stream");x.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return x.isFunction(e)&&(n=e,e=null),x.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),x.isFunction(n)||(n=function(){}),r.ended?a(this,r,n):s(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){this._writableState.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||m(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;x.isFunction(t)?(n=t,t=null,e=null):x.isFunction(e)&&(n=e,e=null),x.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||b(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":464,_process:28,buffer:8,"core-util-is":349,inherits:486,stream:40}],469:[function(t,e,n){(function(r){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=t("stream"),n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),r.browser||"disable"!==r.env.READABLE_STREAM||(e.exports=t("stream"))}).call(this,t("_process"))},{"./lib/_stream_duplex.js":464,"./lib/_stream_passthrough.js":465,"./lib/_stream_readable.js":466,"./lib/_stream_transform.js":467,"./lib/_stream_writable.js":468,_process:28,stream:40}],470:[function(t,e,n){e.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0}},{}],471:[function(t,e,n){n.glMatrix=t("./gl-matrix/common.js"),n.mat2=t("./gl-matrix/mat2.js"),n.mat2d=t("./gl-matrix/mat2d.js"),n.mat3=t("./gl-matrix/mat3.js"),n.mat4=t("./gl-matrix/mat4.js"),n.quat=t("./gl-matrix/quat.js"),n.vec2=t("./gl-matrix/vec2.js"),n.vec3=t("./gl-matrix/vec3.js"),n.vec4=t("./gl-matrix/vec4.js")},{"./gl-matrix/common.js":472,"./gl-matrix/mat2.js":473,"./gl-matrix/mat2d.js":474,"./gl-matrix/mat3.js":475,"./gl-matrix/mat4.js":476,"./gl-matrix/quat.js":477,"./gl-matrix/vec2.js":478,"./gl-matrix/vec3.js":479,"./gl-matrix/vec4.js":480}],472:[function(t,e,n){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.ENABLE_SIMD=!1,r.SIMD_AVAILABLE=r.ARRAY_TYPE===Float32Array&&"SIMD"in this,r.USE_SIMD=r.ENABLE_SIMD&&r.SIMD_AVAILABLE,r.setMatrixArrayType=function(t){r.ARRAY_TYPE=t};var i=Math.PI/180;r.toRadian=function(t){return t*i},r.equals=function(t,e){return Math.abs(t-e)<=r.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},e.exports=r},{}],473:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},i.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},i.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},i.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null},i.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},i.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*c+o*l,t[3]=i*c+a*l,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*-s+o*u,t[3]=i*-s+a*u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1];return t[0]=r*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},i.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},i.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.exports=i},{"./common.js":472}],474:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},i.fromValues=function(t,e,n,i,o,a){var s=new r.ARRAY_TYPE(6);return s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=o,s[5]=a,s},i.set=function(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=n*o-r*i;return u?(u=1/u,t[0]=o*u,t[1]=-r*u,t[2]=-i*u,t[3]=n*u,t[4]=(i*s-o*a)*u,t[5]=(r*a-n*s)*u,t):null},i.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1],f=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*c+o*l,t[1]=i*c+a*l,t[2]=r*f+o*h,t[3]=i*f+a*h,t[4]=r*p+o*d+s,t[5]=i*p+a*d+u,t},i.mul=i.multiply,i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*c,t[1]=i*l+a*c,t[2]=r*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t},i.scale=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t},i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=n[0],l=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*l+s,t[5]=i*c+a*l+u,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},i.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},i.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=e[0],l=e[1],f=e[2],h=e[3],p=e[4],d=e[5];return Math.abs(n-c)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-f)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))},e.exports=i},{"./common.js":472}],475:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},i.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromValues=function(t,e,n,i,o,a,s,u,c){var l=new r.ARRAY_TYPE(9);return l[0]=t,l[1]=e,l[2]=n,l[3]=i,l[4]=o,l[5]=a,l[6]=s,l[7]=u,l[8]=c,l},i.set=function(t,e,n,r,i,o,a,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},i.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=n*f+r*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*r+i*c)*d,t[2]=(s*r-i*a)*d,t[3]=h*d,t[4]=(l*n-i*u)*d,t[5]=(-s*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(a*n-r*o)*d,t):null},i.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-r*l,t[2]=r*s-i*a,t[3]=s*u-o*l,t[4]=n*l-i*u,t[5]=i*o-n*s,t[6]=o*c-a*u,t[7]=r*u-n*c,t[8]=n*a-r*o,t},i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+n*(-c*i+a*s)+r*(u*i-o*s)},i.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1],d=n[2],v=n[3],m=n[4],y=n[5],g=n[6],_=n[7],b=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*r+m*a+y*c,t[4]=v*i+m*s+y*l,t[5]=v*o+m*u+y*f,t[6]=g*r+_*a+b*c,t[7]=g*i+_*s+b*l,t[8]=g*o+_*u+b*f,t},i.mul=i.multiply,i.translate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*r+p*a+c,t[7]=h*i+p*s+l,t[8]=h*o+p*u+f,t},i.rotate=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*r,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=l,t[8]=f,t},i.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},i.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},i.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,m=o*s,y=o*u;return t[0]=1-f-d,t[3]=l-y,t[6]=h+m,t[1]=l+y,t[4]=1-c-d,t[7]=p-v,t[2]=h-m,t[5]=p+v,t[8]=1-c-f,t},i.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],y=e[15],g=n*s-r*a,_=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,E=i*c-o*u,T=l*v-f*d,S=l*m-h*d,M=l*y-p*d,O=f*m-h*v,A=f*y-p*v,R=h*y-p*m,I=g*R-_*A+b*O+w*M-x*S+E*T;return I?(I=1/I,t[0]=(s*R-u*A+c*O)*I,t[1]=(u*M-a*R-c*S)*I,t[2]=(a*A-s*M+c*T)*I,t[3]=(i*A-r*R-o*O)*I,t[4]=(n*R-i*M+o*S)*I,t[5]=(r*M-n*A-o*T)*I,t[6]=(v*E-m*x+y*w)*I,t[7]=(m*b-d*E-y*_)*I,t[8]=(d*x-v*b+y*g)*I,t):null},i.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},i.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=e[0],p=e[1],d=e[2],v=e[3],m=e[4],y=e[5],g=t[6],_=e[7],b=e[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-v)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(s-m)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-y)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-_)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-b)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))},e.exports=i},{"./common.js":472}],476:[function(t,e,n){var r=t("./common.js"),i={scalar:{},SIMD:{}};i.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.fromValues=function(t,e,n,i,o,a,s,u,c,l,f,h,p,d,v,m){var y=new r.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=i,y[4]=o,y[5]=a,y[6]=s,y[7]=u,y[8]=c,y[9]=l,y[10]=f,y[11]=h,y[12]=p,y[13]=d,y[14]=v,y[15]=m,y},i.set=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=f,t[11]=h,t[12]=p,t[13]=d,t[14]=v,t[15]=m,t},i.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},i.SIMD.transpose=function(t,e){
var n,r,i,o,a,s,u,c,l,f;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),a=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(i,o,0,1,4,5),u=SIMD.Float32x4.shuffle(a,s,0,2,4,6),c=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,c),a=SIMD.Float32x4.shuffle(n,r,2,3,6,7),s=SIMD.Float32x4.shuffle(i,o,2,3,6,7),l=SIMD.Float32x4.shuffle(a,s,0,2,4,6),f=SIMD.Float32x4.shuffle(a,s,1,3,5,7),SIMD.Float32x4.store(t,8,l),SIMD.Float32x4.store(t,12,f),t},i.transpose=r.USE_SIMD?i.SIMD.transpose:i.scalar.transpose,i.scalar.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],y=e[15],g=n*s-r*a,_=n*u-i*a,b=n*c-o*a,w=r*u-i*s,x=r*c-o*s,E=i*c-o*u,T=l*v-f*d,S=l*m-h*d,M=l*y-p*d,O=f*m-h*v,A=f*y-p*v,R=h*y-p*m,I=g*R-_*A+b*O+w*M-x*S+E*T;return I?(I=1/I,t[0]=(s*R-u*A+c*O)*I,t[1]=(i*A-r*R-o*O)*I,t[2]=(v*E-m*x+y*w)*I,t[3]=(h*x-f*E-p*w)*I,t[4]=(u*M-a*R-c*S)*I,t[5]=(n*R-i*M+o*S)*I,t[6]=(m*b-d*E-y*_)*I,t[7]=(l*E-h*b+p*_)*I,t[8]=(a*A-s*M+c*T)*I,t[9]=(r*M-n*A-o*T)*I,t[10]=(d*x-v*b+y*g)*I,t[11]=(f*b-l*x-p*g)*I,t[12]=(s*S-a*O-u*T)*I,t[13]=(n*O-r*S+i*T)*I,t[14]=(v*_-d*w-m*g)*I,t[15]=(l*w-f*_+h*g)*I,t):null},i.SIMD.invert=function(t,e){var n,r,i,o,a,s,u,c,l,f,h=SIMD.Float32x4.load(e,0),p=SIMD.Float32x4.load(e,4),d=SIMD.Float32x4.load(e,8),v=SIMD.Float32x4.load(e,12);return a=SIMD.Float32x4.shuffle(h,p,0,1,4,5),r=SIMD.Float32x4.shuffle(d,v,0,1,4,5),n=SIMD.Float32x4.shuffle(a,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,a,1,3,5,7),a=SIMD.Float32x4.shuffle(h,p,2,3,6,7),o=SIMD.Float32x4.shuffle(d,v,2,3,6,7),i=SIMD.Float32x4.shuffle(a,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,a,1,3,5,7),a=SIMD.Float32x4.mul(i,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.mul(r,a),u=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,a),s),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),a=SIMD.Float32x4.mul(r,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),s),l=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),a=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),s),c=SIMD.Float32x4.mul(n,a),a=SIMD.Float32x4.swizzle(a,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,a),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),a=SIMD.Float32x4.mul(n,r),a=SIMD.Float32x4.swizzle(a,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),c),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),l),a=SIMD.Float32x4.swizzle(a,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),c),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(i,a)),a=SIMD.Float32x4.mul(n,o),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(i,a)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),c),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,a),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.mul(n,i),a=SIMD.Float32x4.swizzle(a,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),u),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,a)),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,a)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,a),l),f=SIMD.Float32x4.mul(n,s),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),a=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(a,a),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(a,a))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(f,c)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(f,l)),t):null},i.invert=r.USE_SIMD?i.SIMD.invert:i.scalar.invert,i.scalar.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],m=e[14],y=e[15];return t[0]=s*(h*y-p*m)-f*(u*y-c*m)+v*(u*p-c*h),t[1]=-(r*(h*y-p*m)-f*(i*y-o*m)+v*(i*p-o*h)),t[2]=r*(u*y-c*m)-s*(i*y-o*m)+v*(i*c-o*u),t[3]=-(r*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*y-p*m)-l*(u*y-c*m)+d*(u*p-c*h)),t[5]=n*(h*y-p*m)-l*(i*y-o*m)+d*(i*p-o*h),t[6]=-(n*(u*y-c*m)-a*(i*y-o*m)+d*(i*c-o*u)),t[7]=n*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*y-p*v)-l*(s*y-c*v)+d*(s*p-c*f),t[9]=-(n*(f*y-p*v)-l*(r*y-o*v)+d*(r*p-o*f)),t[10]=n*(s*y-c*v)-a*(r*y-o*v)+d*(r*c-o*s),t[11]=-(n*(s*p-c*f)-a*(r*p-o*f)+l*(r*c-o*s)),t[12]=-(a*(f*m-h*v)-l*(s*m-u*v)+d*(s*h-u*f)),t[13]=n*(f*m-h*v)-l*(r*m-i*v)+d*(r*h-i*f),t[14]=-(n*(s*m-u*v)-a*(r*m-i*v)+d*(r*u-i*s)),t[15]=n*(s*h-u*f)-a*(r*h-i*f)+l*(r*u-i*s),t},i.SIMD.adjoint=function(t,e){var n,r,i,o,a,s,u,c,l,f,h,p,d,n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12);return l=SIMD.Float32x4.shuffle(n,r,0,1,4,5),s=SIMD.Float32x4.shuffle(i,o,0,1,4,5),a=SIMD.Float32x4.shuffle(l,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,l,1,3,5,7),l=SIMD.Float32x4.shuffle(n,r,2,3,6,7),c=SIMD.Float32x4.shuffle(i,o,2,3,6,7),u=SIMD.Float32x4.shuffle(l,c,0,2,4,6),c=SIMD.Float32x4.shuffle(c,l,1,3,5,7),l=SIMD.Float32x4.mul(u,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.mul(s,l),h=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,l),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),l=SIMD.Float32x4.mul(s,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),f),d=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(c,l)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,3,0,1),c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),f),p=SIMD.Float32x4.mul(a,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,l)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,l),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),l=SIMD.Float32x4.mul(a,s),l=SIMD.Float32x4.swizzle(l,1,0,3,2),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),p),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,l),d),l=SIMD.Float32x4.swizzle(l,2,3,0,1),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(c,l),p),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,l)),l=SIMD.Float32x4.mul(a,c),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,l)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),p),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,l),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.mul(a,u),l=SIMD.Float32x4.swizzle(l,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(c,l),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(c,l)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,l),d),SIMD.Float32x4.store(t,0,f),SIMD.Float32x4.store(t,4,h),SIMD.Float32x4.store(t,8,p),SIMD.Float32x4.store(t,12,d),t},i.adjoint=r.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint,i.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15];return(e*a-n*o)*(f*m-h*v)-(e*s-r*o)*(l*m-h*d)+(e*u-i*o)*(l*v-f*d)+(n*s-r*a)*(c*m-h*p)-(n*u-i*a)*(c*v-f*p)+(r*u-i*s)*(c*d-l*p)},i.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4.load(n,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),a))));SIMD.Float32x4.store(t,0,u);var c=SIMD.Float32x4.load(n,4),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),a))));SIMD.Float32x4.store(t,4,l);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),a))));SIMD.Float32x4.store(t,8,h);var p=SIMD.Float32x4.load(n,12),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,1,1,1,1),i),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(p,3,3,3,3),a))));return SIMD.Float32x4.store(t,12,d),t},i.scalar.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],y=e[14],g=e[15],_=n[0],b=n[1],w=n[2],x=n[3];return t[0]=_*r+b*s+w*f+x*v,t[1]=_*i+b*u+w*h+x*m,t[2]=_*o+b*c+w*p+x*y,t[3]=_*a+b*l+w*d+x*g,_=n[4],b=n[5],w=n[6],x=n[7],t[4]=_*r+b*s+w*f+x*v,t[5]=_*i+b*u+w*h+x*m,t[6]=_*o+b*c+w*p+x*y,t[7]=_*a+b*l+w*d+x*g,_=n[8],b=n[9],w=n[10],x=n[11],t[8]=_*r+b*s+w*f+x*v,t[9]=_*i+b*u+w*h+x*m,t[10]=_*o+b*c+w*p+x*y,t[11]=_*a+b*l+w*d+x*g,_=n[12],b=n[13],w=n[14],x=n[15],t[12]=_*r+b*s+w*f+x*v,t[13]=_*i+b*u+w*h+x*m,t[14]=_*o+b*c+w*p+x*y,t[15]=_*a+b*l+w*d+x*g,t},i.multiply=r.USE_SIMD?i.SIMD.multiply:i.scalar.multiply,i.mul=i.multiply,i.scalar.translate=function(t,e,n){var r,i,o,a,s,u,c,l,f,h,p,d,v=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*v+e[4]*m+e[8]*y+e[12],t[13]=e[1]*v+e[5]*m+e[9]*y+e[13],t[14]=e[2]*v+e[6]*m+e[10]*y+e[14],t[15]=e[3]*v+e[7]*m+e[11]*y+e[15]):(r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=r*v+s*m+f*y+e[12],t[13]=i*v+u*m+h*y+e[13],t[14]=o*v+c*m+p*y+e[14],t[15]=a*v+l*m+d*y+e[15]),t},i.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),a=SIMD.Float32x4.load(e,12),s=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(s,0,0,0,0)),i=SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(s,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(s,2,2,2,2));var u=SIMD.Float32x4.add(r,SIMD.Float32x4.add(i,SIMD.Float32x4.add(o,a)));return SIMD.Float32x4.store(t,12,u),t},i.translate=r.USE_SIMD?i.SIMD.translate:i.scalar.translate,i.scalar.scale=function(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.SIMD.scale=function(t,e,n){var r,i,o,a=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(a,0,0,0,0))),i=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(i,SIMD.Float32x4.swizzle(a,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(a,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},i.scale=r.USE_SIMD?i.SIMD.scale:i.scalar.scale,i.rotate=function(t,e,n,i){var o,a,s,u,c,l,f,h,p,d,v,m,y,g,_,b,w,x,E,T,S,M,O,A,R=i[0],I=i[1],k=i[2],P=Math.sqrt(R*R+I*I+k*k);return Math.abs(P)<r.EPSILON?null:(P=1/P,R*=P,I*=P,k*=P,o=Math.sin(n),a=Math.cos(n),s=1-a,u=e[0],c=e[1],l=e[2],f=e[3],h=e[4],p=e[5],d=e[6],v=e[7],m=e[8],y=e[9],g=e[10],_=e[11],b=R*R*s+a,w=I*R*s+k*o,x=k*R*s-I*o,E=R*I*s-k*o,T=I*I*s+a,S=k*I*s+R*o,M=R*k*s+I*o,O=I*k*s-R*o,A=k*k*s+a,t[0]=u*b+h*w+m*x,t[1]=c*b+p*w+y*x,t[2]=l*b+d*w+g*x,t[3]=f*b+v*w+_*x,t[4]=u*E+h*T+m*S,t[5]=c*E+p*T+y*S,t[6]=l*E+d*T+g*S,t[7]=f*E+v*T+_*S,t[8]=u*M+h*O+m*A,t[9]=c*M+p*O+y*A,t[10]=l*M+d*O+g*A,t[11]=f*M+v*O+_*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},i.scalar.rotateX=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+l*r,t[6]=s*i+f*r,t[7]=u*i+h*r,t[8]=c*i-o*r,t[9]=l*i-a*r,t[10]=f*i-s*r,t[11]=h*i-u*r,t},i.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,r))),t},i.rotateX=r.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX,i.scalar.rotateY=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-l*r,t[2]=s*i-f*r,t[3]=u*i-h*r,t[8]=o*r+c*i,t[9]=a*r+l*i,t[10]=s*r+f*i,t[11]=u*r+h*i,t},i.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(a,i))),t},i.rotateY=r.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY,i.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+l*r,t[2]=s*i+f*r,t[3]=u*i+h*r,t[4]=c*i-o*r,t[5]=l*i-a*r,t[6]=f*i-s*r,t[7]=h*i-u*r,t},i.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),i=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),SIMD.Float32x4.mul(a,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),SIMD.Float32x4.mul(o,r))),t},i.rotateZ=r.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ,i.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},i.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotation=function(t,e,n){var i,o,a,s=n[0],u=n[1],c=n[2],l=Math.sqrt(s*s+u*u+c*c);return Math.abs(l)<r.EPSILON?null:(l=1/l,s*=l,u*=l,c*=l,i=Math.sin(e),o=Math.cos(e),a=1-o,t[0]=s*s*a+o,t[1]=u*s*a+c*i,t[2]=c*s*a-u*i,t[3]=0,t[4]=s*u*a-c*i,t[5]=u*u*a+o,t[6]=c*u*a+s*i,t[7]=0,t[8]=s*c*a+u*i,t[9]=u*c*a-s*i,t[10]=c*c*a+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},i.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.fromRotationTranslation=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=r+r,u=i+i,c=o+o,l=r*s,f=r*u,h=r*c,p=i*u,d=i*c,v=o*c,m=a*s,y=a*u,g=a*c;return t[0]=1-(p+v),t[1]=f+g,t[2]=h-y,t[3]=0,t[4]=f-g,t[5]=1-(l+v),t[6]=d+m,t[7]=0,t[8]=h+y,t[9]=d-m,t[10]=1-(l+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},i.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},i.fromRotationTranslationScale=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3],u=i+i,c=o+o,l=a+a,f=i*u,h=i*c,p=i*l,d=o*c,v=o*l,m=a*l,y=s*u,g=s*c,_=s*l,b=r[0],w=r[1],x=r[2];return t[0]=(1-(d+m))*b,t[1]=(h+_)*b,t[2]=(p-g)*b,t[3]=0,t[4]=(h-_)*w,t[5]=(1-(f+m))*w,t[6]=(v+y)*w,t[7]=0,t[8]=(p+g)*x,t[9]=(v-y)*x,t[10]=(1-(f+d))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},i.fromRotationTranslationScaleOrigin=function(t,e,n,r,i){var o=e[0],a=e[1],s=e[2],u=e[3],c=o+o,l=a+a,f=s+s,h=o*c,p=o*l,d=o*f,v=a*l,m=a*f,y=s*f,g=u*c,_=u*l,b=u*f,w=r[0],x=r[1],E=r[2],T=i[0],S=i[1],M=i[2];return t[0]=(1-(v+y))*w,t[1]=(p+b)*w,t[2]=(d-_)*w,t[3]=0,t[4]=(p-b)*x,t[5]=(1-(h+y))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(d+_)*E,t[9]=(m-g)*E,t[10]=(1-(h+v))*E,t[11]=0,t[12]=n[0]+T-(t[0]*T+t[4]*S+t[8]*M),t[13]=n[1]+S-(t[1]*T+t[5]*S+t[9]*M),t[14]=n[2]+M-(t[2]*T+t[6]*S+t[10]*M),t[15]=1,t},i.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,p=i*s,d=i*u,v=o*a,m=o*s,y=o*u;return t[0]=1-f-d,t[1]=l+y,t[2]=h-m,t[3]=0,t[4]=l-y,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+m,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},i.frustum=function(t,e,n,r,i,o,a){var s=1/(n-e),u=1/(i-r),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},i.perspective=function(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t},i.perspectiveFromFieldOfView=function(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-s)*u*.5),t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},i.ortho=function(t,e,n,r,i,o,a){var s=1/(e-n),u=1/(r-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*u,t[14]=(a+o)*c,t[15]=1,t},i.lookAt=function(t,e,n,o){var a,s,u,c,l,f,h,p,d,v,m=e[0],y=e[1],g=e[2],_=o[0],b=o[1],w=o[2],x=n[0],E=n[1],T=n[2];return Math.abs(m-x)<r.EPSILON&&Math.abs(y-E)<r.EPSILON&&Math.abs(g-T)<r.EPSILON?i.identity(t):(h=m-x,p=y-E,d=g-T,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,a=b*d-w*p,s=w*h-_*d,u=_*p-b*h,v=Math.sqrt(a*a+s*s+u*u),v?(v=1/v,a*=v,s*=v,u*=v):(a=0,s=0,u=0),c=p*u-d*s,l=d*a-h*u,f=h*s-p*a,v=Math.sqrt(c*c+l*l+f*f),v?(v=1/v,c*=v,l*=v,f*=v):(c=0,l=0,f=0),t[0]=a,t[1]=c,t[2]=h,t[3]=0,t[4]=s,t[5]=l,t[6]=p,t[7]=0,t[8]=u,t[9]=f,t[10]=d,t[11]=0,t[12]=-(a*m+s*y+u*g),t[13]=-(c*m+l*y+f*g),t[14]=-(h*m+p*y+d*g),t[15]=1,t)},i.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},i.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},i.sub=i.subtract,i.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},i.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],p=t[10],d=t[11],v=t[12],m=t[13],y=t[14],g=t[15],_=e[0],b=e[1],w=e[2],x=e[3],E=e[4],T=e[5],S=e[6],M=e[7],O=e[8],A=e[9],R=e[10],I=e[11],k=e[12],P=e[13],N=e[14],C=e[15];return Math.abs(n-_)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-b)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(s-E)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(E))&&Math.abs(u-T)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-S)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(l-M)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(f-O)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(O))&&Math.abs(h-A)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(p-R)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(d-I)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(I))&&Math.abs(v-k)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-N)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(N))&&Math.abs(g-C)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(C))},e.exports=i},{"./common.js":472}],477:[function(t,e,n){var r=t("./common.js"),i=t("./mat3.js"),o=t("./vec3.js"),a=t("./vec4.js"),s={};s.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,i,a){var u=o.dot(i,a);return u<-.999999?(o.cross(t,e,i),o.length(t)<1e-6&&o.cross(t,n,i),o.normalize(t,t),s.setAxisAngle(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,s.normalize(r,r))}}(),s.setAxes=function(){var t=i.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],s.normalize(e,s.fromMat3(e,t))}}(),s.clone=a.clone,s.fromValues=a.fromValues,s.copy=a.copy,s.set=a.set,s.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},s.setAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},s.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},s.add=a.add,s.multiply=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=n[0],u=n[1],c=n[2],l=n[3];return t[0]=r*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-r*c,t[2]=o*l+a*c+r*u-i*s,t[3]=a*l-r*s-i*u-o*c,t},s.mul=s.multiply,s.scale=a.scale,s.rotateX=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-r*s,t},s.rotateY=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u-o*s,t[1]=i*u+a*s,t[2]=o*u+r*s,t[3]=a*u-i*s,t},s.rotateZ=function(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(n),u=Math.cos(n);return t[0]=r*u+i*s,t[1]=i*u-r*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},s.calculateW=function(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t},s.dot=a.dot,s.lerp=a.lerp,s.slerp=function(t,e,n,r){var i,o,a,s,u,c=e[0],l=e[1],f=e[2],h=e[3],p=n[0],d=n[1],v=n[2],m=n[3];return o=c*p+l*d+f*v+h*m,o<0&&(o=-o,p=-p,d=-d,v=-v,m=-m),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,u=Math.sin(r*i)/a):(s=1-r,u=r),t[0]=s*c+u*p,t[1]=s*l+u*d,t[2]=s*f+u*v,t[3]=s*h+u*m,t},s.sqlerp=function(){var t=s.create(),e=s.create();return function(n,r,i,o,a,u){return s.slerp(t,r,a,u),s.slerp(e,i,o,u),s.slerp(n,t,e,2*u*(1-u)),n}}(),s.invert=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=o*s,t},s.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},s.length=a.length,s.len=s.length,s.squaredLength=a.squaredLength,s.sqrLen=s.squaredLength,s.normalize=a.normalize,s.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+i]+e[3*i+o])*n,t[a]=(e[3*a+i]+e[3*i+a])*n}return t},s.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},s.exactEquals=a.exactEquals,s.equals=a.equals,e.exports=s},{"./common.js":472,"./mat3.js":475,"./vec3.js":479,"./vec4.js":480}],478:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,n){return t[0]=e,t[1]=n,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},i.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},i.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},i.equals=function(t,e){var n=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-a)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))},e.exports=i},{"./common.js":472}],479:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,n){
var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2];return t[0]=i*u-o*s,t[1]=o*a-r*u,t[2]=r*s-i*a,t},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t},i.hermite=function(t,e,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),l=a*(3-2*o);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*l,t},i.bezier=function(t,e,n,r,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,l=3*o*s,f=3*u*a,h=u*o;return t[0]=e[0]*c+n[0]*l+r[0]*f+i[0]*h,t[1]=e[1]*c+n[1]*l+r[1]*f+i[1]*h,t[2]=e[2]*c+n[2]*l+r[2]*f+i[2]*h,t},i.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t},i.transformMat3=function(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},i.rotateX=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateY=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.rotateZ=function(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),i.angle=function(t,e){var n=i.fromValues(t[0],t[1],t[2]),r=i.fromValues(e[0],e[1],e[2]);i.normalize(n,n),i.normalize(r,r);var o=i.dot(n,r);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},e.exports=i},{"./common.js":472}],480:[function(t,e,n){var r=t("./common.js"),i={};i.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,n,i){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t},i.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},i.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},i.sub=i.subtract,i.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},i.mul=i.multiply,i.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},i.div=i.divide,i.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},i.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},i.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},i.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},i.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},i.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},i.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},i.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,n,r){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=s+r*(n[3]-s),t},i.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t},i.transformQuat=function(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],s=n[1],u=n[2],c=n[3],l=c*r+s*o-u*i,f=c*i+u*r-a*o,h=c*o+a*i-s*r,p=-a*r-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,n,r,i,o,a){var s,u;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},i.equals=function(t,e){var n=t[0],i=t[1],o=t[2],a=t[3],s=e[0],u=e[1],c=e[2],l=e[3];return Math.abs(n-s)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))},e.exports=i},{"./common.js":472}],481:[function(t,e,n){(function(n){var r=void 0!==n?n:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":3}],482:[function(t,e,n){(function(t){"undefined"!=typeof window?e.exports=window:void 0!==t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],483:[function(t,e,n){"use strict";function r(t,e,n){var r=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var i=new Int32Array(this.arrayBuffer);t=i[0],e=i[1],n=i[2],this.d=e+2*n;for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length],c=i[3+r.length+1];this.keys=i.subarray(u,c),this.bboxes=i.subarray(c),this.insert=this._insertReadonly}else{this.d=e+2*n;for(var l=0;l<this.d*this.d;l++)r.push([]);this.keys=[],this.bboxes=[]}this.n=e,this.extent=t,this.padding=n,this.scale=e/t,this.uid=0;var f=n/e*t;this.min=-f,this.max=t+f}e.exports=r;r.prototype.insert=function(t,e,n,r,i){this._forEachCell(e,n,r,i,this._insertCell,this.uid++),this.keys.push(t),this.bboxes.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(t,e,n,r,i,o){this.cells[i].push(o)},r.prototype.query=function(t,e,n,r){var i=this.min,o=this.max;if(t<=i&&e<=i&&o<=n&&o<=r)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(t,e,n,r,this._queryCell,a,s),a},r.prototype._queryCell=function(t,e,n,r,i,o,a){var s=this.cells[i];if(null!==s)for(var u=this.keys,c=this.bboxes,l=0;l<s.length;l++){var f=s[l];if(void 0===a[f]){var h=4*f;t<=c[h+2]&&e<=c[h+3]&&n>=c[h+0]&&r>=c[h+1]?(a[f]=!0,o.push(u[f])):a[f]=!1}}},r.prototype._forEachCell=function(t,e,n,r,i,o,a){for(var s=this._convertToCellCoord(t),u=this._convertToCellCoord(e),c=this._convertToCellCoord(n),l=this._convertToCellCoord(r),f=s;f<=c;f++)for(var h=u;h<=l;h++){var p=this.d*h+f;if(i.call(this,t,e,n,r,p,o,a))return}},r.prototype._convertToCellCoord=function(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,e=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(e+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=e,a=0;a<t.length;a++){var s=t[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+t.length]=o,i.set(this.keys,o),o+=this.keys.length,i[3+t.length+1]=o,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer}},{}],484:[function(t,e,n){arguments[4][11][0].apply(n,arguments)},{dup:11}],485:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.Immutable=r()}(this,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:R(t)}function n(t){return a(t)?t:I(t)}function r(t){return s(t)?t:k(t)}function i(t){return o(t)&&!u(t)?t:P(t)}function o(t){return!(!t||!t["@@__IMMUTABLE_ITERABLE__@@"])}function a(t){return!(!t||!t["@@__IMMUTABLE_KEYED__@@"])}function s(t){return!(!t||!t["@@__IMMUTABLE_INDEXED__@@"])}function u(t){return a(t)||s(t)}function c(t){return!(!t||!t["@@__IMMUTABLE_ORDERED__@@"])}function l(t){return t.value=!1,t}function f(t){t&&(t.value=!0)}function h(){}function p(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(m)),t.size}function v(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?d(t)+e:e}function m(){return!0}function y(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function g(t,e){return b(t,e,0)}function _(t,e){return b(t,e,e)}function b(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function w(t){this.next=t}function x(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function E(){return{value:void 0,done:!0}}function T(t){return!!O(t)}function S(t){return t&&"function"==typeof t.next}function M(t){var e=O(t);return e&&e.call(t)}function O(t){var e=t&&(hn&&t[hn]||t["@@iterator"]);if("function"==typeof e)return e}function A(t){return t&&"number"==typeof t.length}function R(t){return null===t||void 0===t?F():o(t)?t.toSeq():B(t)}function I(t){return null===t||void 0===t?F().toKeyedSeq():o(t)?a(t)?t.toSeq():t.fromEntrySeq():U(t)}function k(t){return null===t||void 0===t?F():o(t)?a(t)?t.entrySeq():t.toIndexedSeq():z(t)}function P(t){return(null===t||void 0===t?F():o(t)?a(t)?t.entrySeq():t:z(t)).toSetSeq()}function N(t){this._array=t,this.size=t.length}function C(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function D(t){this._iterable=t,this.size=t.length||t.size}function j(t){this._iterator=t,this._iteratorCache=[]}function L(t){return!(!t||!t["@@__IMMUTABLE_SEQ__@@"])}function F(){return dn||(dn=new N([]))}function U(t){var e=Array.isArray(t)?new N(t).fromEntrySeq():S(t)?new j(t).fromEntrySeq():T(t)?new D(t).fromEntrySeq():"object"==typeof t?new C(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function z(t){var e=V(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function B(t){var e=V(t)||"object"==typeof t&&new C(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function V(t){return A(t)?new N(t):S(t)?new j(t):T(t)?new D(t):void 0}function G(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(e(s[1],r?s[0]:a,t)===!1)return a+1}return a}return t.__iterateUncached(e,n)}function H(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,a=0;return new w(function(){var t=i[n?o-a:a];return a++>o?E():x(e,r?t[0]:a-1,t[1])})}return t.__iteratorUncached(e,n)}function W(t,e){return e?q(e,t,"",{"":t}):Y(t)}function q(t,e,n,r){return Array.isArray(e)?t.call(r,n,k(e).map(function(n,r){return q(t,n,r,e)})):X(e)?t.call(r,n,I(e).map(function(n,r){return q(t,n,r,e)})):e}function Y(t){return Array.isArray(t)?k(t).map(Y).toList():X(t)?I(t).map(Y).toMap():t}function X(t){return t&&(t.constructor===Object||void 0===t.constructor)}function Z(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function K(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||a(t)!==a(e)||s(t)!==s(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(c(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&Z(i[1],t)&&(n||Z(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var l=t;t=e,e=l}var f=!0,h=e.__iterate(function(e,r){if(n?!t.has(e):i?!Z(e,t.get(r,cn)):!Z(t.get(r,cn),e))return f=!1,!1});return f&&t.size===h}function Q(t,e){if(!(this instanceof Q))return new Q(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(vn)return vn;vn=this}}function J(t,e){if(!t)throw new Error(e)}function $(t,e,n){if(!(this instanceof $))return new $(t,e,n);if(J(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(mn)return mn;mn=this}}function tt(){throw TypeError("Abstract")}function et(){}function nt(){}function rt(){}function it(t){return t>>>1&1073741824|3221225471&t}function ot(t){if(t===!1||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(t=t.valueOf(),t===!1||null===t||void 0===t))return 0;if(t===!0)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return it(n)}if("string"===e)return t.length>16?at(t):st(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return ut(t);if("function"==typeof t.toString)return st(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function at(t){var e=Sn[t];return void 0===e&&(e=st(t),255===Tn&&(Tn=0,Sn={}),Tn++,Sn[t]=e),e}function st(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return it(e)}function ut(t){var e;if(wn&&(e=yn.get(t),void 0!==e))return e;if(e=t[En],void 0!==e)return e;if(!bn){if(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[En],void 0!==e)return e;if(e=ct(t),void 0!==e)return e}if(e=++xn,1073741824&xn&&(xn=0),wn)yn.set(t,e);else{if(void 0!==_n&&_n(t)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(bn)Object.defineProperty(t,En,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[En]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[En]=e}}return e}function ct(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function lt(t){J(t!==1/0,"Cannot perform this action with an infinite size.")}function ft(t){return null===t||void 0===t?xt():ht(t)&&!c(t)?t:xt().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function ht(t){return!(!t||!t["@@__IMMUTABLE_MAP__@@"])}function pt(t,e){this.ownerID=t,this.entries=e}function dt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function vt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function mt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function yt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function gt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&bt(t._root)}function _t(t,e){return x(t,e[0],e[1])}function bt(t,e){return{node:t,index:0,__prev:e}}function wt(t,e,n,r){var i=Object.create(Mn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function xt(){return On||(On=wt(0))}function Et(t,e,n){var r,i;if(t._root){var o=l(ln),a=l(fn);if(r=Tt(t._root,t.__ownerID,0,void 0,e,n,o,a),!a.value)return t;i=t.size+(o.value?n===cn?-1:1:0)}else{if(n===cn)return t;i=1,r=new pt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?wt(i,r):xt()}function Tt(t,e,n,r,i,o,a,s){return t?t.update(e,n,r,i,o,a,s):o===cn?t:(f(s),f(a),new yt(e,r,[i,o]))}function St(t){return t.constructor===yt||t.constructor===mt}function Mt(t,e,n,r,i){if(t.keyHash===r)return new mt(e,r,[t.entry,i]);var o,a=31&(0===n?t.keyHash:t.keyHash>>>n),s=31&(0===n?r:r>>>n);return new dt(e,1<<a|1<<s,a===s?[Mt(t,e,n+5,r,i)]:(o=new yt(e,r,i),a<s?[t,o]:[o,t]))}function Ot(t,e,n,r){t||(t=new h);for(var i=new yt(t,ot(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}function At(t,e,n,r){for(var i=0,o=0,a=new Array(n),s=0,u=1,c=e.length;s<c;s++,u<<=1){var l=e[s];void 0!==l&&s!==r&&(i|=u,a[o++]=l)}return new dt(t,i,a)}function Rt(t,e,n,r,i){for(var o=0,a=new Array(32),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[o++]:void 0;return a[r]=i,new vt(t,o+1,a)}function It(t,e,r){for(var i=[],a=0;a<r.length;a++){var s=r[a],u=n(s);o(s)||(u=u.map(function(t){return W(t)})),i.push(u)}return Nt(t,e,i)}function kt(t,e,n){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):Z(t,e)?t:e}function Pt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return Z(e,i)?e:i}}function Nt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,cn,function(t){return t===cn?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Ct(t,e,n,r){var i=t===cn,o=e.next();if(o.done){var a=i?n:t,s=r(a);return s===a?t:s}J(i||t&&t.set,"invalid keyPath");var u=o.value,c=i?cn:t.get(u,cn),l=Ct(c,e,n,r);return l===c?t:l===cn?t.remove(u):(i?xt():t).set(u,l)}function Dt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,127&t}function jt(t,e,n,r){var i=r?t:p(t);return i[e]=n,i}function Lt(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}function Ft(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}function Ut(t){var e=Ht();if(null===t||void 0===t)return e;if(zt(t))return t;var n=r(t),i=n.size;return 0===i?e:(lt(i),i>0&&i<32?Gt(0,i,5,null,new Bt(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function zt(t){return!(!t||!t["@@__IMMUTABLE_LIST__@@"])}function Bt(t,e){this.array=t,this.ownerID=e}function Vt(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===s?u&&u.array:t&&t.array,i=n>o?0:o-n,c=a-n;return c>32&&(c=32),function(){if(i===c)return In;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var s,u=t&&t.array,c=i>o?0:o-i>>r,l=(a-i>>r)+1;return l>32&&(l=32),function(){for(;;){if(s){var t=s();if(t!==In)return t;s=null}if(c===l)return In;var o=e?--l:c++;s=n(u&&u[o],r-5,i+(o<<r))}}}var o=t._origin,a=t._capacity,s=Qt(a),u=t._tail;return n(t._root,t._level,0)}function Gt(t,e,n,r,i,o,a){var s=Object.create(An);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Ht(){return Rn||(Rn=Gt(0,0,5))}function Wt(t,e,n){if(e=v(t,e),e!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Zt(t,e).set(0,n):Zt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=l(fn);return e>=Qt(t._capacity)?r=qt(r,t.__ownerID,0,e,n,o):i=qt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Gt(t._origin,t._capacity,t._level,i,r):t}function qt(t,e,n,r,i,o){var a=r>>>n&31,s=t&&a<t.array.length;if(!s&&void 0===i)return t;var u;if(n>0){var c=t&&t.array[a],l=qt(c,e,n-5,r,i,o);return l===c?t:(u=Yt(t,e),u.array[a]=l,u)}return s&&t.array[a]===i?t:(f(o),u=Yt(t,e),void 0===i&&a===u.array.length-1?u.array.pop():u.array[a]=i,u)}function Yt(t,e){return e&&t&&e===t.ownerID?t:new Bt(t?t.array.slice():[],e)}function Xt(t,e){if(e>=Qt(t._capacity))return t._tail;if(e<1<<t._level+5){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&31],r-=5;return n}}function Zt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new h,i=t._origin,o=t._capacity,a=i+e,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return t;if(a>=s)return t.clear();for(var u=t._level,c=t._root,l=0;a+l<0;)c=new Bt(c&&c.array.length?[void 0,c]:[],r),u+=5,l+=1<<u;l&&(a+=l,i+=l,s+=l,o+=l);for(var f=Qt(o),p=Qt(s);p>=1<<u+5;)c=new Bt(c&&c.array.length?[c]:[],r),u+=5;var d=t._tail,v=p<f?Xt(t,s-1):p>f?new Bt([],r):d;if(d&&p>f&&a<o&&d.array.length){c=Yt(c,r);for(var m=c,y=u;y>5;y-=5){var g=f>>>y&31;m=m.array[g]=Yt(m.array[g],r)}m.array[f>>>5&31]=d}if(s<o&&(v=v&&v.removeAfter(r,0,s)),a>=p)a-=p,s-=p,u=5,c=null,v=v&&v.removeBefore(r,0,a);else if(a>i||p<f){for(l=0;c;){var _=a>>>u&31;if(_!==p>>>u&31)break;_&&(l+=(1<<u)*_),u-=5,c=c.array[_]}c&&a>i&&(c=c.removeBefore(r,u,a-l)),c&&p<f&&(c=c.removeAfter(r,u,p-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=u,t._root=c,t._tail=v,t.__hash=void 0,t.__altered=!0,t):Gt(a,s,u,c,v)}function Kt(t,e,n){for(var i=[],a=0,s=0;s<n.length;s++){var u=n[s],c=r(u);c.size>a&&(a=c.size),o(u)||(c=c.map(function(t){return W(t)})),i.push(c)}return a>t.size&&(t=t.setSize(a)),Nt(t,e,i)}function Qt(t){return t<32?0:t-1>>>5<<5}function Jt(t){return null===t||void 0===t?ee():$t(t)?t:ee().withMutations(function(e){var r=n(t);lt(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function $t(t){return ht(t)&&c(t)}function te(t,e,n,r){var i=Object.create(Jt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function ee(){return kn||(kn=te(xt(),Ht()))}function ne(t,e,n){var r,i,o=t._map,a=t._list,s=o.get(e),u=void 0!==s;if(n===cn){if(!u)return t;a.size>=32&&a.size>=2*o.size?(i=a.filter(function(t,e){return void 0!==t&&s!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(n===a.get(s)[1])return t;r=o,i=a.set(s,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):te(r,i)}function re(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ae(t){this._iter=t,this.size=t.size}function se(t){var e=Ae(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=Re,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return e(n,t,r)!==!1},n)},e.__iteratorUncached=function(e,n){if(2===e){var r=t.__iterator(e,n);return new w(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(1===e?0:1,n)},e}function ue(t,e,n){var r=Ae(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,cn);return o===cn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,a){return r(e.call(n,t,i,a),i,o)!==!1},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(2,i);return new w(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return x(r,s,e.call(n,a[1],s,t),i)})},r}function ce(t,e){var n=Ae(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=se(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=Re,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function le(t,e,n,r){var i=Ae(t);return r&&(i.has=function(r){var i=t.get(r,cn);return i!==cn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,cn);return o!==cn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate(function(t,o,u){if(e.call(n,t,o,u))return s++,i(t,r?o:s-1,a)},o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(2,o),s=0;return new w(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(e.call(n,l,c,t))return x(i,r?c:s++,l,o)}})},i}function fe(t,e,n){var r=ft().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function he(t,e,n){var r=a(t),i=(c(t)?Jt():ft()).asMutable();t.__iterate(function(o,a){i.update(e.call(n,o,a,t),function(t){return t=t||[],t.push(r?[a,o]:o),t})});var o=Oe(t);return i.map(function(e){return Te(t,o(e))})}function pe(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),y(e,n,i))return t;var o=g(e,i),a=_(n,i);if(o!==o||a!==a)return pe(t.toSeq().cacheResult(),e,n,r);var s,u=a-o;u===u&&(s=u<0?0:u);var c=Ae(t);return c.size=0===s?s:t.size&&s||void 0,!r&&L(t)&&s>=0&&(c.get=function(e,n){return e=v(this,e),e>=0&&e<s?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,u=!0,c=0;return t.__iterate(function(t,n){if(!u||!(u=a++<o))return c++,e(t,r?n:c-1,i)!==!1&&c!==s}),c},c.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var i=0!==s&&t.__iterator(e,n),a=0,u=0;return new w(function(){for(;a++<o;)i.next();if(++u>s)return E();var t=i.next();return r||1===e?t:0===e?x(e,u-1,void 0,t):x(e,u-1,t.value[1],t)})},c}function de(t,e,n){var r=Ae(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++a&&r(t,i,o)}),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(2,i),s=!0;return new w(function(){if(!s)return E();var t=a.next();if(t.done)return t;var i=t.value,u=i[0],c=i[1];return e.call(n,c,u,o)?2===r?t:x(r,u,c,t):(s=!1,E())})},r}function ve(t,e,n,r){var i=Ae(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(n,t,o,c)))return u++,i(t,r?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(2,o),u=!0,c=0;return new w(function(){var t,o,l;do{if(t=s.next(),t.done)return r||1===i?t:0===i?x(i,c++,void 0,t):x(i,c++,t.value[1],t);var f=t.value;o=f[0],l=f[1],u&&(u=e.call(n,l,o,a))}while(u);return 2===i?t:x(i,o,l,t)})},i}function me(t,e){var r=a(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?U(t):z(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var u=i[0];if(u===t||r&&a(u)||s(t)&&s(u))return u}var c=new N(i);return r?c=c.toKeyedSeq():s(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),c}function ye(t,e,n){var r=Ae(t);return r.__iterateUncached=function(r,i){function a(t,c){var l=this;t.__iterate(function(t,i){return(!e||c<e)&&o(t)?a(t,c+1):r(t,n?i:s++,l)===!1&&(u=!0),!u},i)}var s=0,u=!1;return a(t,0),s},r.__iteratorUncached=function(r,i){var a=t.__iterator(r,i),s=[],u=0;return new w(function(){for(;a;){var t=a.next();if(t.done===!1){var c=t.value;if(2===r&&(c=c[1]),e&&!(s.length<e)||!o(c))return n?t:x(r,u++,c,t);s.push(a),a=c.__iterator(r,i)}else a=s.pop()}return E()})},r}function ge(t,e,n){var r=Oe(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function _e(t,e){var n=Ae(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t,r){return(!o||n(e,o++,i)!==!1)&&n(t,o++,i)!==!1},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(1,r),a=0;return new w(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?x(n,a++,e):x(n,a++,i.value,i)})},n}function be(t,e,n){e||(e=Ie);var r=a(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?I(o):s(t)?k(o):P(o)}function we(t,e,n){if(e||(e=Ie),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return xe(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return xe(e,t,n)?n:t})}function xe(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Ee(t,n,r){var i=Ae(t);return i.size=new N(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(1,e),i=0;!(n=r.next()).done&&t(n.value,i++,this)!==!1;);return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),M(i?t.reverse():t)}),a=0,s=!1;return new w(function(){var e;return s||(e=o.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?E():x(t,a++,n.apply(null,e.map(function(t){return t.value})))})},i}function Te(t,e){return L(t)?e:t.constructor(e)}function Se(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Me(t){return lt(t.size),d(t)}function Oe(t){return a(t)?n:s(t)?r:i}function Ae(t){return Object.create((a(t)?I:s(t)?k:P).prototype)}function Re(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):R.prototype.cacheResult.call(this)}function Ie(t,e){return t>e?1:t<e?-1:0}function ke(t){var n=M(t);if(!n){if(!A(t))throw new TypeError("Expected iterable or array-like: "+t);n=M(e(t))}return n}function Pe(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0
;var a=Object.keys(t);De(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=ft(o)},i=r.prototype=Object.create(Pn);return i.constructor=r,r}function Ne(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function Ce(t){return t._name||t.constructor.name||"Record"}function De(t,e){try{e.forEach(je.bind(void 0,t))}catch(t){}}function je(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){J(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function Le(t){return null===t||void 0===t?Be():Fe(t)&&!c(t)?t:Be().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function Fe(t){return!(!t||!t["@@__IMMUTABLE_SET__@@"])}function Ue(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function ze(t,e){var n=Object.create(Nn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Be(){return Cn||(Cn=ze(xt()))}function Ve(t){return null===t||void 0===t?We():Ge(t)?t:We().withMutations(function(e){var n=i(t);lt(n.size),n.forEach(function(t){return e.add(t)})})}function Ge(t){return Fe(t)&&c(t)}function He(t,e){var n=Object.create(Dn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function We(){return jn||(jn=He(ee()))}function qe(t){return null===t||void 0===t?Ze():Ye(t)?t:Ze().unshiftAll(t)}function Ye(t){return!(!t||!t["@@__IMMUTABLE_STACK__@@"])}function Xe(t,e,n,r){var i=Object.create(Ln);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ze(){return Fn||(Fn=Xe(0))}function Ke(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Qe(t,e){return e}function Je(t,e){return[e,t]}function $e(t){return function(){return!t.apply(this,arguments)}}function tn(t){return function(){return-t.apply(this,arguments)}}function en(t){return"string"==typeof t?JSON.stringify(t):String(t)}function nn(){return p(arguments)}function rn(t,e){return t<e?1:t>e?-1:0}function on(t){if(t.size===1/0)return 0;var e=c(t),n=a(t),r=e?1:0;return an(t.__iterate(n?e?function(t,e){r=31*r+sn(ot(t),ot(e))|0}:function(t,e){r=r+sn(ot(t),ot(e))|0}:e?function(t){r=31*r+ot(t)|0}:function(t){r=r+ot(t)|0}),r)}function an(t,e){return e=gn(e,3432918353),e=gn(e<<15|e>>>-15,461845907),e=gn(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=gn(e^e>>>16,2246822507),e=gn(e^e>>>13,3266489909),e=it(e^e>>>16)}function sn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var un=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=a,e.isIndexed=s,e.isAssociative=u,e.isOrdered=c,e.Keyed=n,e.Indexed=r,e.Set=i;var cn={},ln={value:!1},fn={value:!1},hn="function"==typeof Symbol&&Symbol.iterator,pn=hn||"@@iterator";w.prototype.toString=function(){return"[Iterator]"},w.KEYS=0,w.VALUES=1,w.ENTRIES=2,w.prototype.inspect=w.prototype.toSource=function(){return this.toString()},w.prototype[pn]=function(){return this},t(R,e),R.of=function(){return R(arguments)},R.prototype.toSeq=function(){return this},R.prototype.toString=function(){return this.__toString("Seq {","}")},R.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},R.prototype.__iterate=function(t,e){return G(this,t,e,!0)},R.prototype.__iterator=function(t,e){return H(this,t,e,!0)},t(I,R),I.prototype.toKeyedSeq=function(){return this},t(k,R),k.of=function(){return k(arguments)},k.prototype.toIndexedSeq=function(){return this},k.prototype.toString=function(){return this.__toString("Seq [","]")},k.prototype.__iterate=function(t,e){return G(this,t,e,!1)},k.prototype.__iterator=function(t,e){return H(this,t,e,!1)},t(P,R),P.of=function(){return P(arguments)},P.prototype.toSetSeq=function(){return this},R.isSeq=L,R.Keyed=I,R.Set=P,R.Indexed=k;R.prototype["@@__IMMUTABLE_SEQ__@@"]=!0,t(N,k),N.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},N.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(t(n[e?r-i:i],i,this)===!1)return i+1;return i},N.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new w(function(){return i>r?E():x(t,i,n[e?r-i++:i++])})},t(C,I),C.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},C.prototype.has=function(t){return this._object.hasOwnProperty(t)},C.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[e?i-o:o];if(t(n[a],a,this)===!1)return o+1}return o},C.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new w(function(){var a=r[e?i-o:o];return o++>i?E():x(t,a,n[a])})},C.prototype["@@__IMMUTABLE_ORDERED__@@"]=!0,t(D,k),D.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=M(n),i=0;if(S(r))for(var o;!(o=r.next()).done&&t(o.value,i++,this)!==!1;);return i},D.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=M(n);if(!S(r))return new w(E);var i=0;return new w(function(){var e=r.next();return e.done?e:x(t,i++,e.value)})},t(j,k),j.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(t(r[i],i++,this)===!1)return i;for(var o;!(o=n.next()).done;){var a=o.value;if(r[i]=a,t(a,i++,this)===!1)break}return i},j.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new w(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return x(t,i,r[i++])})};var dn;t(Q,k),Q.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Q.prototype.get=function(t,e){return this.has(t)?this._value:e},Q.prototype.includes=function(t){return Z(this._value,t)},Q.prototype.slice=function(t,e){var n=this.size;return y(t,e,n)?this:new Q(this._value,_(e,n)-g(t,n))},Q.prototype.reverse=function(){return this},Q.prototype.indexOf=function(t){return Z(this._value,t)?0:-1},Q.prototype.lastIndexOf=function(t){return Z(this._value,t)?this.size:-1},Q.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(t(this._value,n,this)===!1)return n+1;return n},Q.prototype.__iterator=function(t,e){var n=this,r=0;return new w(function(){return r<n.size?x(t,r++,n._value):E()})},Q.prototype.equals=function(t){return t instanceof Q?Z(this._value,t._value):K(t)};var vn;t($,k),$.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},$.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},$.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},$.prototype.slice=function(t,e){return y(t,e,this.size)?this:(t=g(t,this.size),e=_(e,this.size),e<=t?new $(0,0):new $(this.get(t,this._end),this.get(e,this._end),this._step))},$.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step===0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},$.prototype.lastIndexOf=function(t){return this.indexOf(t)},$.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(t(i,o,this)===!1)return o+1;i+=e?-r:r}return o},$.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new w(function(){var a=i;return i+=e?-r:r,o>n?E():x(t,o++,a)})},$.prototype.equals=function(t){return t instanceof $?this._start===t._start&&this._end===t._end&&this._step===t._step:K(this,t)};var mn;t(tt,e),t(et,tt),t(nt,tt),t(rt,tt),tt.Keyed=et,tt.Indexed=nt,tt.Set=rt;var yn,gn="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},_n=Object.isExtensible,bn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),wn="function"==typeof WeakMap;wn&&(yn=new WeakMap);var xn=0,En="__immutablehash__";"function"==typeof Symbol&&(En=Symbol(En));var Tn=0,Sn={};t(ft,et),ft.of=function(){var t=un.call(arguments,0);return xt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},ft.prototype.toString=function(){return this.__toString("Map {","}")},ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ft.prototype.set=function(t,e){return Et(this,t,e)},ft.prototype.setIn=function(t,e){return this.updateIn(t,cn,function(){return e})},ft.prototype.remove=function(t){return Et(this,t,cn)},ft.prototype.deleteIn=function(t){return this.updateIn(t,function(){return cn})},ft.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ft.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=Ct(this,ke(t),e,n);return r===cn?void 0:r},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):xt()},ft.prototype.merge=function(){return It(this,void 0,arguments)},ft.prototype.mergeWith=function(t){return It(this,t,un.call(arguments,1))},ft.prototype.mergeIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,xt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ft.prototype.mergeDeep=function(){return It(this,kt,arguments)},ft.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return It(this,Pt(t),e)},ft.prototype.mergeDeepIn=function(t){var e=un.call(arguments,1);return this.updateIn(t,xt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ft.prototype.sort=function(t){return Jt(be(this,t))},ft.prototype.sortBy=function(t,e){return Jt(be(this,e,t))},ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new h)},ft.prototype.asImmutable=function(){return this.__ensureOwner()},ft.prototype.wasAltered=function(){return this.__altered},ft.prototype.__iterator=function(t,e){return new gt(this,t,e)},ft.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ft.isMap=ht;var Mn=ft.prototype;Mn["@@__IMMUTABLE_MAP__@@"]=!0,Mn.delete=Mn.remove,Mn.removeIn=Mn.deleteIn,pt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Z(n,i[o][0]))return i[o][1];return r},pt.prototype.update=function(t,e,n,r,i,o,a){for(var s=i===cn,u=this.entries,c=0,l=u.length;c<l&&!Z(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===i:s)return this;if(f(a),(s||!h)&&f(o),!s||1!==u.length){if(!h&&!s&&u.length>=8)return Ot(t,u,r,i);var d=t&&t===this.ownerID,v=d?u:p(u);return h?s?c===l-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new pt(t,v)}},dt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=1<<(31&(0===t?e:e>>>t)),o=this.bitmap;return 0===(o&i)?r:this.nodes[Dt(o&i-1)].get(t+5,e,n,r)},dt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=31&(0===e?n:n>>>e),u=1<<s,c=this.bitmap,l=0!==(c&u);if(!l&&i===cn)return this;var f=Dt(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=Tt(p,t,e+5,n,r,i,o,a);if(d===p)return this;if(!l&&d&&h.length>=16)return Rt(t,h,c,s,d);if(l&&!d&&2===h.length&&St(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&St(d))return d;var v=t&&t===this.ownerID,m=l?d?c:c^u:c|u,y=l?d?jt(h,f,d,v):Ft(h,f,v):Lt(h,f,d,v);return v?(this.bitmap=m,this.nodes=y,this):new dt(t,m,y)},vt.prototype.get=function(t,e,n,r){void 0===e&&(e=ot(n));var i=31&(0===t?e:e>>>t),o=this.nodes[i];return o?o.get(t+5,e,n,r):r},vt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=31&(0===e?n:n>>>e),u=i===cn,c=this.nodes,l=c[s];if(u&&!l)return this;var f=Tt(l,t,e+5,n,r,i,o,a);if(f===l)return this;var h=this.count;if(l){if(!f&&(h--,h<8))return At(t,c,h,s)}else h++;var p=t&&t===this.ownerID,d=jt(c,s,f,p);return p?(this.count=h,this.nodes=d,this):new vt(t,h,d)},mt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(Z(n,i[o][0]))return i[o][1];return r},mt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=ot(r));var s=i===cn;if(n!==this.keyHash)return s?this:(f(a),f(o),Mt(this,t,e,n,[r,i]));for(var u=this.entries,c=0,l=u.length;c<l&&!Z(r,u[c][0]);c++);var h=c<l;if(h?u[c][1]===i:s)return this;if(f(a),(s||!h)&&f(o),s&&2===l)return new yt(t,this.keyHash,u[1^c]);var d=t&&t===this.ownerID,v=d?u:p(u);return h?s?c===l-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new mt(t,this.keyHash,v)},yt.prototype.get=function(t,e,n,r){return Z(n,this.entry[0])?this.entry[1]:r},yt.prototype.update=function(t,e,n,r,i,o,a){var s=i===cn,u=Z(r,this.entry[0]);return(u?i===this.entry[1]:s)?this:(f(a),s?void f(o):u?t&&t===this.ownerID?(this.entry[1]=i,this):new yt(t,this.keyHash,[r,i]):(f(o),Mt(this,t,e,ot(r),[r,i])))},pt.prototype.iterate=mt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(t(n[e?i-r:r])===!1)return!1},dt.prototype.iterate=vt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&o.iterate(t,e)===!1)return!1}},yt.prototype.iterate=function(t,e){return t(this.entry)},t(gt,w),gt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return _t(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return _t(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return _t(t,o.entry);e=this._stack=bt(o,e)}continue}e=this._stack=this._stack.__prev}return E()};var On;t(Ut,nt),Ut.of=function(){return this(arguments)},Ut.prototype.toString=function(){return this.__toString("List [","]")},Ut.prototype.get=function(t,e){if(t=v(this,t),t>=0&&t<this.size){t+=this._origin;var n=Xt(this,t);return n&&n.array[31&t]}return e},Ut.prototype.set=function(t,e){return Wt(this,t,e)},Ut.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Ut.prototype.insert=function(t,e){return this.splice(t,0,e)},Ut.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=5,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ht()},Ut.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Zt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},Ut.prototype.pop=function(){return Zt(this,0,-1)},Ut.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Zt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},Ut.prototype.shift=function(){return Zt(this,1)},Ut.prototype.merge=function(){return Kt(this,void 0,arguments)},Ut.prototype.mergeWith=function(t){return Kt(this,t,un.call(arguments,1))},Ut.prototype.mergeDeep=function(){return Kt(this,kt,arguments)},Ut.prototype.mergeDeepWith=function(t){var e=un.call(arguments,1);return Kt(this,Pt(t),e)},Ut.prototype.setSize=function(t){return Zt(this,0,t)},Ut.prototype.slice=function(t,e){var n=this.size;return y(t,e,n)?this:Zt(this,g(t,n),_(e,n))},Ut.prototype.__iterator=function(t,e){var n=0,r=Vt(this,e);return new w(function(){var e=r();return e===In?E():x(t,n++,e)})},Ut.prototype.__iterate=function(t,e){for(var n,r=0,i=Vt(this,e);(n=i())!==In&&t(n,r++,this)!==!1;);return r},Ut.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Gt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Ut.isList=zt;var An=Ut.prototype;An["@@__IMMUTABLE_LIST__@@"]=!0,An.delete=An.remove,An.setIn=Mn.setIn,An.deleteIn=An.removeIn=Mn.removeIn,An.update=Mn.update,An.updateIn=Mn.updateIn,An.mergeIn=Mn.mergeIn,An.mergeDeepIn=Mn.mergeDeepIn,An.withMutations=Mn.withMutations,An.asMutable=Mn.asMutable,An.asImmutable=Mn.asImmutable,An.wasAltered=Mn.wasAltered,Bt.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&31;if(r>=this.array.length)return new Bt([],t);var i,o=0===r;if(e>0){var a=this.array[r];if(i=a&&a.removeBefore(t,e-5,n),i===a&&o)return this}if(o&&!i)return this;var s=Yt(this,t);if(!o)for(var u=0;u<r;u++)s.array[u]=void 0;return i&&(s.array[r]=i),s},Bt.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&31;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if(i=o&&o.removeAfter(t,e-5,n),i===o&&r===this.array.length-1)return this}var a=Yt(this,t);return a.array.splice(r+1),i&&(a.array[r]=i),a};var Rn,In={};t(Jt,ft),Jt.of=function(){return this(arguments)},Jt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Jt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):ee()},Jt.prototype.set=function(t,e){return ne(this,t,e)},Jt.prototype.remove=function(t){return ne(this,t,cn)},Jt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Jt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Jt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Jt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?te(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Jt.isOrderedMap=$t,Jt.prototype["@@__IMMUTABLE_ORDERED__@@"]=!0,Jt.prototype.delete=Jt.prototype.remove;var kn;t(re,I),re.prototype.get=function(t,e){return this._iter.get(t,e)},re.prototype.has=function(t){return this._iter.has(t)},re.prototype.valueSeq=function(){return this._iter.valueSeq()},re.prototype.reverse=function(){var t=this,e=ce(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},re.prototype.map=function(t,e){var n=this,r=ue(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},re.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Me(this):0,function(i){return t(i,e?--n:n++,r)}),e)},re.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(1,e),r=e?Me(this):0;return new w(function(){var i=n.next();return i.done?i:x(t,e?--r:r++,i.value,i)})},re.prototype["@@__IMMUTABLE_ORDERED__@@"]=!0,t(ie,k),ie.prototype.includes=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e),r=0;return new w(function(){var e=n.next();return e.done?e:x(t,r++,e.value,e)})},t(oe,P),oe.prototype.has=function(t){return this._iter.includes(t)},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new w(function(){var e=n.next();return e.done?e:x(t,e.value,e.value,e)})},t(ae,I),ae.prototype.entrySeq=function(){return this._iter.toSeq()},ae.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Se(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},ae.prototype.__iterator=function(t,e){var n=this._iter.__iterator(1,e);return new w(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Se(r);var i=o(r);return x(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},ie.prototype.cacheResult=re.prototype.cacheResult=oe.prototype.cacheResult=ae.prototype.cacheResult=Re,t(Pe,et),Pe.prototype.toString=function(){return this.__toString(Ce(this)+" {","}")},Pe.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Pe.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Pe.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=Ne(this,xt()))},Pe.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+Ce(this));if(this._map&&!this._map.has(t)){if(e===this._defaultValues[t])return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:Ne(this,n)},Pe.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:Ne(this,e)},Pe.prototype.wasAltered=function(){return this._map.wasAltered()},Pe.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},Pe.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},Pe.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?Ne(this,e,t):(this.__ownerID=t,this._map=e,this)};var Pn=Pe.prototype;Pn.delete=Pn.remove,Pn.deleteIn=Pn.removeIn=Mn.removeIn,Pn.merge=Mn.merge,Pn.mergeWith=Mn.mergeWith,Pn.mergeIn=Mn.mergeIn,Pn.mergeDeep=Mn.mergeDeep,Pn.mergeDeepWith=Mn.mergeDeepWith,Pn.mergeDeepIn=Mn.mergeDeepIn,Pn.setIn=Mn.setIn,Pn.update=Mn.update,Pn.updateIn=Mn.updateIn,Pn.withMutations=Mn.withMutations,Pn.asMutable=Mn.asMutable,Pn.asImmutable=Mn.asImmutable,t(Le,rt),Le.of=function(){return this(arguments)},Le.fromKeys=function(t){return this(n(t).keySeq())},Le.prototype.toString=function(){return this.__toString("Set {","}")},Le.prototype.has=function(t){return this._map.has(t)},Le.prototype.add=function(t){return Ue(this,this._map.set(t,!0))},Le.prototype.remove=function(t){return Ue(this,this._map.remove(t))},Le.prototype.clear=function(){return Ue(this,this._map.clear())},Le.prototype.union=function(){var t=un.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Le.prototype.intersect=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Le.prototype.subtract=function(){var t=un.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Le.prototype.merge=function(){return this.union.apply(this,arguments)},Le.prototype.mergeWith=function(t){var e=un.call(arguments,1);return this.union.apply(this,e)},Le.prototype.sort=function(t){return Ve(be(this,t))},Le.prototype.sortBy=function(t,e){return Ve(be(this,e,t))},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Le.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Le.isSet=Fe;var Nn=Le.prototype;Nn["@@__IMMUTABLE_SET__@@"]=!0,Nn.delete=Nn.remove,Nn.mergeDeep=Nn.merge,Nn.mergeDeepWith=Nn.mergeWith,Nn.withMutations=Mn.withMutations,Nn.asMutable=Mn.asMutable,Nn.asImmutable=Mn.asImmutable,Nn.__empty=Be,Nn.__make=ze;var Cn;t(Ve,Le),Ve.of=function(){return this(arguments)},Ve.fromKeys=function(t){return this(n(t).keySeq())},Ve.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ve.isOrderedSet=Ge;var Dn=Ve.prototype;Dn["@@__IMMUTABLE_ORDERED__@@"]=!0,Dn.__empty=We,Dn.__make=He;var jn;t(qe,nt),qe.of=function(){return this(arguments)},qe.prototype.toString=function(){return this.__toString("Stack [","]")},qe.prototype.get=function(t,e){var n=this._head;for(t=v(this,t);n&&t--;)n=n.next;return n?n.value:e},qe.prototype.peek=function(){return this._head&&this._head.value},qe.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):Xe(t,e)},qe.prototype.pushAll=function(t){if(t=r(t),0===t.size)return this;lt(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Xe(e,n)},qe.prototype.pop=function(){return this.slice(1)},qe.prototype.unshift=function(){return this.push.apply(this,arguments)},qe.prototype.unshiftAll=function(t){return this.pushAll(t)},qe.prototype.shift=function(){return this.pop.apply(this,arguments)},qe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ze()},qe.prototype.slice=function(t,e){if(y(t,e,this.size))return this;var n=g(t,this.size);if(_(e,this.size)!==this.size)return nt.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):Xe(r,i)},qe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Xe(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},qe.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&t(r.value,n++,this)!==!1;)r=r.next;return n},qe.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new w(function(){if(r){var e=r.value;return r=r.next,x(t,n++,e)}return E()})},qe.isStack=Ye;var Ln=qe.prototype;Ln["@@__IMMUTABLE_STACK__@@"]=!0,Ln.withMutations=Mn.withMutations,Ln.asMutable=Mn.asMutable,Ln.asImmutable=Mn.asImmutable,Ln.wasAltered=Mn.wasAltered;var Fn;e.Iterator=w,Ke(e,{toArray:function(){lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new ie(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new re(this,!0)},toMap:function(){return ft(this.toKeyedSeq())},toObject:function(){lt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Jt(this.toKeyedSeq())},toOrderedSet:function(){return Ve(a(this)?this.valueSeq():this)},toSet:function(){return Le(a(this)?this.valueSeq():this)},toSetSeq:function(){return new oe(this)},toSeq:function(){return s(this)?this.toIndexedSeq():a(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return qe(a(this)?this.valueSeq():this)},toList:function(){return Ut(a(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return Te(this,me(this,un.call(arguments,0)))},includes:function(t){return this.some(function(e){return Z(e,t)})},entries:function(){return this.__iterator(2)},every:function(t,e){lt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return Te(this,le(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){lt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(0)},map:function(t,e){return Te(this,ue(this,t,e))},reduce:function(t,e,n){lt(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)}),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Te(this,ce(this,!0))},slice:function(t,e){return Te(this,pe(this,t,e,!0))},some:function(t,e){return!this.every($e(t),e)},sort:function(t){return Te(this,be(this,t))},values:function(){return this.__iterator(1)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return fe(this,t,e)},equals:function(t){return K(this,t)},entrySeq:function(){var t=this;if(t._cache)return new N(t._cache);var e=t.toSeq().map(Je).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter($e(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(m)},flatMap:function(t,e){return Te(this,ge(this,t,e))},flatten:function(t){return Te(this,ye(this,t,!0))},fromEntrySeq:function(){return new ae(this)},get:function(t,e){return this.find(function(e,n){return Z(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=ke(t);!(n=i.next()).done;){var o=n.value;if(r=r&&r.get?r.get(o,cn):cn,r===cn)return e}return r},groupBy:function(t,e){return he(this,t,e)},has:function(t){return this.get(t,cn)!==cn},hasIn:function(t){return this.getIn(t,cn)!==cn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return Z(e,t)})},keySeq:function(){return this.toSeq().map(Qe).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return we(this,t)},maxBy:function(t,e){return we(this,e,t)},min:function(t){return we(this,t?tn(t):rn)},minBy:function(t,e){return we(this,e?tn(e):rn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Te(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Te(this,ve(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile($e(t),e)},sortBy:function(t,e){return Te(this,be(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Te(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Te(this,de(this,t,e))},takeUntil:function(t,e){return this.takeWhile($e(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){
return this.__hash||(this.__hash=on(this))}});var Un=e.prototype;Un["@@__IMMUTABLE_ITERABLE__@@"]=!0,Un[pn]=Un.values,Un.__toJS=Un.toArray,Un.__toStringMapper=en,Un.inspect=Un.toSource=function(){return this.toString()},Un.chain=Un.flatMap,Un.contains=Un.includes,Ke(n,{flip:function(){return Te(this,se(this))},mapEntries:function(t,e){var n=this,r=0;return Te(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Te(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var zn=n.prototype;return zn["@@__IMMUTABLE_KEYED__@@"]=!0,zn[pn]=Un.entries,zn.__toJS=Un.toObject,zn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+en(t)},Ke(r,{toKeyedSeq:function(){return new re(this,!1)},filter:function(t,e){return Te(this,le(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Te(this,ce(this,!1))},slice:function(t,e){return Te(this,pe(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=g(t,t<0?this.count():this.size);var r=this.slice(0,t);return Te(this,1===n?r:r.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Te(this,ye(this,t,!1))},get:function(t,e){return t=v(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return t=v(this,t),t>=0&&(void 0!==this.size?this.size===1/0||t<this.size:this.indexOf(t)!==-1)},interpose:function(t){return Te(this,_e(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=Ee(this.toSeq(),k.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Te(this,n)},keySeq:function(){return $(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Te(this,ve(this,t,e,!1))},zip:function(){return Te(this,Ee(this,nn,[this].concat(p(arguments))))},zipWith:function(t){var e=p(arguments);return e[0]=this,Te(this,Ee(this,t,e))}}),r.prototype["@@__IMMUTABLE_INDEXED__@@"]=!0,r.prototype["@@__IMMUTABLE_ORDERED__@@"]=!0,Ke(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=Un.includes,i.prototype.contains=i.prototype.includes,Ke(I,n.prototype),Ke(k,r.prototype),Ke(P,i.prototype),Ke(et,n.prototype),Ke(nt,r.prototype),Ke(rt,i.prototype),{Iterable:e,Seq:R,Collection:tt,Map:ft,OrderedMap:Jt,List:Ut,Stack:qe,Set:Le,OrderedSet:Ve,Record:Pe,Range:$,Repeat:Q,is:Z,fromJS:W}})},{}],486:[function(t,e,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],487:[function(t,e,n){"use strict";function r(t){for(var e=new Array(t),n=0;n<t;++n)e[n]=n;return e}e.exports=r},{}],488:[function(t,e,n){arguments[4][13][0].apply(n,arguments)},{dup:13}],489:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],490:[function(t,e,n){var r=t("./lib/encoder"),i=t("./lib/decoder");e.exports={encode:r,decode:i}},{"./lib/decoder":491,"./lib/encoder":492}],491:[function(t,e,n){(function(t){function n(e){var n=new Uint8Array(e),i=new r;i.parse(n);for(var o=i.getData(i.width,i.height),a=new t(i.width*i.height*4),s=0,u=0;u<a.length;u++)a[u+(u/3|0)]=o[s++],u%4==3&&(a[u]=255);return{data:a,width:i.width,height:i.height}}var r=function(){"use strict";function t(){}function e(t,e){for(var n,r,i=0,o=[],a=16;a>0&&!t[a-1];)a--;o.push({children:[],index:0});var s,u=o[0];for(n=0;n<a;n++){for(r=0;r<t[n];r++){for(u=o.pop(),u.children[u.index]=e[i];u.index>0;)u=o.pop();for(u.index++,o.push(u);o.length<=n;)o.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s;i++}n+1<a&&(o.push(s={children:[],index:0}),u.children[u.index]=s.children,u=s)}return o[0].children}function n(t,e,n,r,i,a,s,u,c){function l(){if(P>0)return P--,k>>P&1;if(k=t[e++],255==k){var n=t[e++];if(n)throw"unexpected marker: "+(k<<8|n).toString(16)}return P=7,k>>>7}function f(t){for(var e,n=t;null!==(e=l());){if(n=n[e],"number"==typeof n)return n;if("object"!=typeof n)throw"invalid huffman sequence"}return null}function h(t){for(var e=0;t>0;){var n=l();if(null===n)return;e=e<<1|n,t--}return e}function p(t){var e=h(t);return e>=1<<t-1?e:e+(-1<<t)+1}function d(t,e){var n=f(t.huffmanTableDC),r=0===n?0:p(n);e[0]=t.pred+=r;for(var i=1;i<64;){var a=f(t.huffmanTableAC),s=15&a,u=a>>4;if(0!==s){i+=u;e[o[i]]=p(s),i++}else{if(u<15)break;i+=16}}}function v(t,e){var n=f(t.huffmanTableDC),r=0===n?0:p(n)<<c;e[0]=t.pred+=r}function m(t,e){e[0]|=l()<<c}function y(t,e){if(N>0)return void N--;for(var n=a,r=s;n<=r;){var i=f(t.huffmanTableAC),u=15&i,l=i>>4;if(0!==u){n+=l;e[o[n]]=p(u)*(1<<c),n++}else{if(l<15){N=h(l)+(1<<l)-1;break}n+=16}}}function g(t,e){for(var n=a,r=s,i=0;n<=r;){var u=o[n];switch(C){case 0:var d=f(t.huffmanTableAC),v=15&d,i=d>>4;if(0===v)i<15?(N=h(i)+(1<<i),C=4):(i=16,C=1);else{if(1!==v)throw"invalid ACn encoding";w=p(v),C=i?2:3}continue;case 1:case 2:e[u]?e[u]+=l()<<c:(i--,0===i&&(C=2==C?3:0));break;case 3:e[u]?e[u]+=l()<<c:(e[u]=w<<c,C=0);break;case 4:e[u]&&(e[u]+=l()<<c)}n++}4===C&&(N--,0===N&&(C=0))}function _(t,e,n,r,i){var o=n/A|0,a=n%A,s=o*t.v+r,u=a*t.h+i;e(t,t.blocks[s][u])}function b(t,e,n){var r=n/t.blocksPerLine|0,i=n%t.blocksPerLine;e(t,t.blocks[r][i])}var w,x,E,T,S,M,O,A=(n.precision,n.samplesPerLine,n.scanLines,n.mcusPerLine),R=n.progressive,I=(n.maxH,n.maxV,e),k=0,P=0,N=0,C=0,D=r.length;O=R?0===a?0===u?v:m:0===u?y:g:d;var j,L,F=0;L=1==D?r[0].blocksPerLine*r[0].blocksPerColumn:A*n.mcusPerColumn,i||(i=L);for(var U,z;F<L;){for(E=0;E<D;E++)r[E].pred=0;if(N=0,1==D)for(x=r[0],M=0;M<i;M++)b(x,O,F),F++;else for(M=0;M<i;M++){for(E=0;E<D;E++)for(x=r[E],U=x.h,z=x.v,T=0;T<z;T++)for(S=0;S<U;S++)_(x,O,F,T,S);if(F++,F===L)break}if(P=0,j=t[e]<<8|t[e+1],j<65280)throw"marker was not found";if(!(j>=65488&&j<=65495))break;e+=2}return e-I}function r(t,e){function n(t,n,r){var i,o,a,s,u,c,l,f,h,p,d=e.quantizationTable,v=r;for(p=0;p<64;p++)v[p]=t[p]*d[p];for(p=0;p<8;++p){var m=8*p;0!=v[1+m]||0!=v[2+m]||0!=v[3+m]||0!=v[4+m]||0!=v[5+m]||0!=v[6+m]||0!=v[7+m]?(i=5793*v[0+m]+128>>8,o=5793*v[4+m]+128>>8,a=v[2+m],s=v[6+m],u=2896*(v[1+m]-v[7+m])+128>>8,f=2896*(v[1+m]+v[7+m])+128>>8,c=v[3+m]<<4,l=v[5+m]<<4,h=i-o+1>>1,i=i+o+1>>1,o=h,h=3784*a+1567*s+128>>8,a=1567*a-3784*s+128>>8,s=h,h=u-l+1>>1,u=u+l+1>>1,l=h,h=f+c+1>>1,c=f-c+1>>1,f=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=o-a+1>>1,o=o+a+1>>1,a=h,h=2276*u+3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=h,h=799*c+4017*l+2048>>12,c=4017*c-799*l+2048>>12,l=h,v[0+m]=i+f,v[7+m]=i-f,v[1+m]=o+l,v[6+m]=o-l,v[2+m]=a+c,v[5+m]=a-c,v[3+m]=s+u,v[4+m]=s-u):(h=5793*v[0+m]+512>>10,v[0+m]=h,v[1+m]=h,v[2+m]=h,v[3+m]=h,v[4+m]=h,v[5+m]=h,v[6+m]=h,v[7+m]=h)}for(p=0;p<8;++p){var y=p;0!=v[8+y]||0!=v[16+y]||0!=v[24+y]||0!=v[32+y]||0!=v[40+y]||0!=v[48+y]||0!=v[56+y]?(i=5793*v[0+y]+2048>>12,o=5793*v[32+y]+2048>>12,a=v[16+y],s=v[48+y],u=2896*(v[8+y]-v[56+y])+2048>>12,f=2896*(v[8+y]+v[56+y])+2048>>12,c=v[24+y],l=v[40+y],h=i-o+1>>1,i=i+o+1>>1,o=h,h=3784*a+1567*s+2048>>12,a=1567*a-3784*s+2048>>12,s=h,h=u-l+1>>1,u=u+l+1>>1,l=h,h=f+c+1>>1,c=f-c+1>>1,f=h,h=i-s+1>>1,i=i+s+1>>1,s=h,h=o-a+1>>1,o=o+a+1>>1,a=h,h=2276*u+3406*f+2048>>12,u=3406*u-2276*f+2048>>12,f=h,h=799*c+4017*l+2048>>12,c=4017*c-799*l+2048>>12,l=h,v[0+y]=i+f,v[56+y]=i-f,v[8+y]=o+l,v[48+y]=o-l,v[16+y]=a+c,v[40+y]=a-c,v[24+y]=s+u,v[32+y]=s-u):(h=5793*r[p+0]+8192>>14,v[0+y]=h,v[8+y]=h,v[16+y]=h,v[24+y]=h,v[32+y]=h,v[40+y]=h,v[48+y]=h,v[56+y]=h)}for(p=0;p<64;++p){var g=128+(v[p]+8>>4);n[p]=g<0?0:g>255?255:g}}for(var r,i,o=[],a=e.blocksPerLine,s=e.blocksPerColumn,u=a<<3,c=new Int32Array(64),l=new Uint8Array(64),f=0;f<s;f++){var h=f<<3;for(r=0;r<8;r++)o.push(new Uint8Array(u));for(var p=0;p<a;p++){n(e.blocks[f][p],l,c);var d=0,v=p<<3;for(i=0;i<8;i++){var m=o[h+i];for(r=0;r<8;r++)m[v+r]=l[d++]}}}return o}function i(t){return t<0?0:t>255?255:t}var o=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);return t.prototype={load:function(t){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){var t=new Uint8Array(e.response||e.mozResponseArrayBuffer);this.parse(t),this.onload&&this.onload()}.bind(this),e.send(null)},parse:function(t){function i(){var e=t[l]<<8|t[l+1];return l+=2,e}function a(){var e=i(),n=t.subarray(l,l+e-2);return l+=n.length,n}function s(t){var e,n,r=0,i=0;for(n in t.components)t.components.hasOwnProperty(n)&&(e=t.components[n],r<e.h&&(r=e.h),i<e.v&&(i=e.v));var o=Math.ceil(t.samplesPerLine/8/r),a=Math.ceil(t.scanLines/8/i);for(n in t.components)if(t.components.hasOwnProperty(n)){e=t.components[n];for(var s=Math.ceil(Math.ceil(t.samplesPerLine/8)*e.h/r),u=Math.ceil(Math.ceil(t.scanLines/8)*e.v/i),c=o*e.h,l=a*e.v,f=[],h=0;h<l;h++){for(var p=[],d=0;d<c;d++)p.push(new Int32Array(64));f.push(p)}e.blocksPerLine=s,e.blocksPerColumn=u,e.blocks=f}t.maxH=r,t.maxV=i,t.mcusPerLine=o,t.mcusPerColumn=a}var u,c,l=0,f=(t.length,null),h=null,p=[],d=[],v=[],m=[],y=i();if(65496!=y)throw"SOI not found";for(y=i();65497!=y;){var g,_;switch(y){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var b=a();65504===y&&74===b[0]&&70===b[1]&&73===b[2]&&70===b[3]&&0===b[4]&&(f={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),65518===y&&65===b[0]&&100===b[1]&&111===b[2]&&98===b[3]&&101===b[4]&&0===b[5]&&(h={version:b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break;case 65499:for(var w=i(),x=w+l-2;l<x;){var E=t[l++],T=new Int32Array(64);if(E>>4===0)for(_=0;_<64;_++){var S=o[_];T[S]=t[l++]}else{if(E>>4!==1)throw"DQT: invalid table spec";for(_=0;_<64;_++){var S=o[_];T[S]=i()}}p[15&E]=T}break;case 65472:case 65473:case 65474:i(),u={},u.extended=65473===y,u.progressive=65474===y,u.precision=t[l++],u.scanLines=i(),u.samplesPerLine=i(),u.components={},u.componentsOrder=[];var M,O=t[l++];for(g=0;g<O;g++){M=t[l];var A=t[l+1]>>4,R=15&t[l+1],I=t[l+2];u.componentsOrder.push(M),u.components[M]={h:A,v:R,quantizationTable:p[I]},l+=3}s(u),d.push(u);break;case 65476:var k=i();for(g=2;g<k;){var P=t[l++],N=new Uint8Array(16),C=0;for(_=0;_<16;_++,l++)C+=N[_]=t[l];var D=new Uint8Array(C);for(_=0;_<C;_++,l++)D[_]=t[l];g+=17+C,(P>>4===0?m:v)[15&P]=e(N,D)}break;case 65501:i(),c=i();break;case 65498:var j,L=(i(),t[l++]),F=[];for(g=0;g<L;g++){j=u.components[t[l++]];var U=t[l++];j.huffmanTableDC=m[U>>4],j.huffmanTableAC=v[15&U],F.push(j)}var z=t[l++],B=t[l++],V=t[l++];l+=n(t,l,u,F,c,z,B,V>>4,15&V);break;default:if(255==t[l-3]&&t[l-2]>=192&&t[l-2]<=254){l-=3;break}throw"unknown JPEG marker "+y.toString(16)}y=i()}if(1!=d.length)throw"only single frame JPEGs supported";this.width=u.samplesPerLine,this.height=u.scanLines,this.jfif=f,this.adobe=h,this.components=[];for(var g=0;g<u.componentsOrder.length;g++){var j=u.components[u.componentsOrder[g]];this.components.push({lines:r(u,j),scaleX:j.h/u.maxH,scaleY:j.v/u.maxV})}},getData:function(t,e){var n,r,o,a,s,u,c,l,f,h,p,d,v,m,y,g,_,b,w,x,E,T=this.width/t,S=this.height/e,M=0,O=t*e*this.components.length,A=new Uint8Array(O);switch(this.components.length){case 1:for(n=this.components[0],h=0;h<e;h++)for(s=n.lines[0|h*n.scaleY*S],f=0;f<t;f++)p=s[0|f*n.scaleX*T],A[M++]=p;break;case 2:for(n=this.components[0],r=this.components[1],h=0;h<e;h++)for(s=n.lines[0|h*n.scaleY*S],u=r.lines[0|h*r.scaleY*S],f=0;f<t;f++)p=s[0|f*n.scaleX*T],A[M++]=p,p=u[0|f*r.scaleX*T],A[M++]=p;break;case 3:for(E=!0,this.adobe&&this.adobe.transformCode?E=!0:void 0!==this.colorTransform&&(E=!!this.colorTransform),n=this.components[0],r=this.components[1],o=this.components[2],h=0;h<e;h++)for(s=n.lines[0|h*n.scaleY*S],u=r.lines[0|h*r.scaleY*S],c=o.lines[0|h*o.scaleY*S],f=0;f<t;f++)E?(p=s[0|f*n.scaleX*T],d=u[0|f*r.scaleX*T],v=c[0|f*o.scaleX*T],b=i(p+1.402*(v-128)),w=i(p-.3441363*(d-128)-.71413636*(v-128)),x=i(p+1.772*(d-128))):(b=s[0|f*n.scaleX*T],w=u[0|f*r.scaleX*T],x=c[0|f*o.scaleX*T]),A[M++]=b,A[M++]=w,A[M++]=x;break;case 4:if(!this.adobe)throw"Unsupported color mode (4 components)";for(E=!1,this.adobe&&this.adobe.transformCode?E=!0:void 0!==this.colorTransform&&(E=!!this.colorTransform),n=this.components[0],r=this.components[1],o=this.components[2],a=this.components[3],h=0;h<e;h++)for(s=n.lines[0|h*n.scaleY*S],u=r.lines[0|h*r.scaleY*S],c=o.lines[0|h*o.scaleY*S],l=a.lines[0|h*a.scaleY*S],f=0;f<t;f++)E?(p=s[0|f*n.scaleX*T],d=u[0|f*r.scaleX*T],v=c[0|f*o.scaleX*T],m=l[0|f*a.scaleX*T],y=255-i(p+1.402*(v-128)),g=255-i(p-.3441363*(d-128)-.71413636*(v-128)),_=255-i(p+1.772*(d-128))):(y=s[0|f*n.scaleX*T],g=u[0|f*r.scaleX*T],_=c[0|f*o.scaleX*T],m=l[0|f*a.scaleX*T]),A[M++]=y,A[M++]=g,A[M++]=_,A[M++]=m;break;default:throw"Unsupported color mode"}return A},copyToImageData:function(t){var e,n,r,o,a,s,u,c,l,f=t.width,h=t.height,p=t.data,d=this.getData(f,h),v=0,m=0;switch(this.components.length){case 1:for(n=0;n<h;n++)for(e=0;e<f;e++)r=d[v++],p[m++]=r,p[m++]=r,p[m++]=r,p[m++]=255;break;case 3:for(n=0;n<h;n++)for(e=0;e<f;e++)u=d[v++],c=d[v++],l=d[v++],p[m++]=u,p[m++]=c,p[m++]=l,p[m++]=255;break;case 4:for(n=0;n<h;n++)for(e=0;e<f;e++)a=d[v++],s=d[v++],r=d[v++],o=d[v++],u=255-i(a*(1-o/255)+o),c=255-i(s*(1-o/255)+o),l=255-i(r*(1-o/255)+o),p[m++]=u,p[m++]=c,p[m++]=l,p[m++]=255;break;default:throw"Unsupported color mode"}}},t}();e.exports=n}).call(this,t("buffer").Buffer)},{buffer:8}],492:[function(t,e,n){(function(t){function n(e){function n(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=S((e[n]*t+50)/100);r<1?r=1:r>255&&(r=255),M[V[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var a=S((i[o]*t+50)/100);a<1?a=1:a>255&&(a=255),O[V[o]]=a}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],u=0,c=0;c<8;c++)for(var l=0;l<8;l++)A[u]=1/(M[V[u]]*s[c]*s[l]*8),R[u]=1/(O[V[u]]*s[c]*s[l]*8),u++}function r(t,e){for(var n=0,r=0,i=new Array,o=1;o<=16;o++){for(var a=1;a<=t[o];a++)i[e[r]]=[],i[e[r]][0]=n,i[e[r]][1]=o,r++,n++;n*=2}return i}function i(){b=r(G,H),w=r(Y,X),x=r(W,q),E=r(Z,K)}function o(){for(var t=1,e=2,n=1;n<=15;n++){for(var r=t;r<e;r++)k[32767+r]=n,I[32767+r]=[],I[32767+r][1]=n,I[32767+r][0]=r;for(var i=-(e-1);i<=-t;i++)k[32767+i]=n,I[32767+i]=[],I[32767+i][1]=n,I[32767+i][0]=e-1+i;t<<=1,e<<=1}}function a(){for(var t=0;t<256;t++)B[t]=19595*t,B[t+256>>0]=38470*t,B[t+512>>0]=7471*t+32768,B[t+768>>0]=-11059*t,B[t+1024>>0]=-21709*t,B[t+1280>>0]=32768*t+8421375,B[t+1536>>0]=-27439*t,B[t+1792>>0]=-5329*t}function s(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(D|=1<<j),n--,j--,j<0&&(255==D?(u(255),u(0)):u(D),j=7,D=0)}function u(t){C.push(t)}function c(t){u(t>>8&255),u(255&t)}function l(t,e){var n,r,i,o,a,s,u,c,l,f=0;for(l=0;l<8;++l){n=t[f],r=t[f+1],i=t[f+2],o=t[f+3],a=t[f+4],s=t[f+5],u=t[f+6],c=t[f+7];var h=n+c,p=n-c,d=r+u,v=r-u,m=i+s,y=i-s,g=o+a,_=o-a,b=h+g,w=h-g,x=d+m,E=d-m;t[f]=b+x,t[f+4]=b-x;var T=.707106781*(E+w);t[f+2]=w+T,t[f+6]=w-T,b=_+y,x=y+v,E=v+p;var S=.382683433*(b-E),M=.5411961*b+S,O=1.306562965*E+S,A=.707106781*x,R=p+A,I=p-A;t[f+5]=I+M,t[f+3]=I-M,t[f+1]=R+O,t[f+7]=R-O,f+=8}for(f=0,l=0;l<8;++l){n=t[f],r=t[f+8],i=t[f+16],o=t[f+24],a=t[f+32],s=t[f+40],u=t[f+48],c=t[f+56];var k=n+c,N=n-c,C=r+u,D=r-u,j=i+s,L=i-s,F=o+a,U=o-a,z=k+F,B=k-F,V=C+j,G=C-j;t[f]=z+V,t[f+32]=z-V;var H=.707106781*(G+B);t[f+16]=B+H,t[f+48]=B-H,z=U+L,V=L+D,G=D+N;var W=.382683433*(z-G),q=.5411961*z+W,Y=1.306562965*G+W,X=.707106781*V,Z=N+X,K=N-X;t[f+40]=K+q,t[f+24]=K-q,t[f+8]=Z+Y,t[f+56]=Z-Y,f++}var Q;for(l=0;l<64;++l)Q=t[l]*e[l],P[l]=Q>0?Q+.5|0:Q-.5|0;return P}function f(){c(65504),c(16),u(74),u(70),u(73),u(70),u(0),u(1),u(1),u(0),c(1),c(1),u(0),u(0)}function h(t,e){c(65472),c(17),u(8),c(e),c(t),u(3),u(1),u(17),u(0),u(2),u(17),u(1),u(3),u(17),u(1)}function p(){c(65499),c(132),u(0);for(var t=0;t<64;t++)u(M[t]);u(1);for(var e=0;e<64;e++)u(O[e])}function d(){c(65476),c(418),u(0);for(var t=0;t<16;t++)u(G[t+1]);for(var e=0;e<=11;e++)u(H[e]);u(16);for(var n=0;n<16;n++)u(W[n+1]);for(var r=0;r<=161;r++)u(q[r]);u(1);for(var i=0;i<16;i++)u(Y[i+1]);for(var o=0;o<=11;o++)u(X[o]);u(17);for(var a=0;a<16;a++)u(Z[a+1]);for(var s=0;s<=161;s++)u(K[s])}function v(){c(65498),c(12),u(3),u(1),u(0),u(2),u(17),u(3),u(17),u(0),u(63),u(0)}function m(t,e,n,r,i){var o,a=i[0],u=i[240];for(var c=l(t,e),f=0;f<64;++f)N[V[f]]=c[f];var h=N[0]-n;n=N[0],0==h?s(r[0]):(o=32767+h,s(r[k[o]]),s(I[o]));for(var p=63;p>0&&0==N[p];p--);if(0==p)return s(a),n;for(var d,v=1;v<=p;){for(var m=v;0==N[v]&&v<=p;++v);var y=v-m;if(y>=16){d=y>>4;for(var g=1;g<=d;++g)s(u);y&=15}o=32767+N[v],s(i[(y<<4)+k[o]]),s(I[o]),v++}return 63!=p&&s(a),n}function y(){for(var t=String.fromCharCode,e=0;e<256;e++)z[e]=t(e)}function g(t){if(t<=0&&(t=1),t>100&&(t=100),T!=t){var e=0;e=t<50?Math.floor(5e3/t):Math.floor(200-2*t),n(e),T=t}}function _(){var t=(new Date).getTime();e||(e=50),y(),i(),o(),a(),g(e);(new Date).getTime()}var b,w,x,E,T,S=(Math.round,Math.floor),M=new Array(64),O=new Array(64),A=new Array(64),R=new Array(64),I=new Array(65535),k=new Array(65535),P=new Array(64),N=new Array(64),C=[],D=0,j=7,L=new Array(64),F=new Array(64),U=new Array(64),z=new Array(256),B=new Array(2048),V=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],G=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],W=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],q=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Y=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,n){(new Date).getTime();n&&g(n),C=new Array,D=0,j=7,c(65496),f(),p(),h(e.width,e.height),d(),v();var r=0,i=0,o=0;D=0,j=7,this.encode.displayName="_encode_";for(var a,u,l,y,_,T,S,M,O,I=e.data,k=e.width,P=e.height,N=4*k,z=0;z<P;){for(a=0;a<N;){for(_=N*z+a,T=_,S=-1,M=0,O=0;O<64;O++)M=O>>3,S=4*(7&O),T=_+M*N+S,z+M>=P&&(T-=N*(z+1+M-P)),a+S>=N&&(T-=a+S-N+4),u=I[T++],l=I[T++],y=I[T++],L[O]=(B[u]+B[l+256>>0]+B[y+512>>0]>>16)-128,F[O]=(B[u+768>>0]+B[l+1024>>0]+B[y+1280>>0]>>16)-128,U[O]=(B[u+1280>>0]+B[l+1536>>0]+B[y+1792>>0]>>16)-128;r=m(L,A,r,b,x),i=m(F,R,i,w,E),o=m(U,R,o,w,E),a+=32}z+=8}if(j>=0){var V=[];V[1]=j+1,V[0]=(1<<j+1)-1,s(V)}return c(65497),new t(C)},_()}function r(t,e){return void 0===e&&(e=50),{data:new n(e).encode(t,e),width:t.width,height:t.height}}e.exports=r}).call(this,t("buffer").Buffer)},{buffer:8}],493:[function(t,e,n){function r(t,e){var n={};"string"==typeof e&&(e=[].slice.call(arguments,1));for(var r in t)t.hasOwnProperty&&!t.hasOwnProperty(r)||e.indexOf(r)===-1&&(n[r]=t[r]);return n}e.exports=r},{}],494:[function(t,e,n){"use strict";function r(t,e,n,r,o){return new i(t,e,n,r,o)}function i(t,e,n,r,i){e=e||o,n=n||a,i=i||Array,this.nodeSize=r||64,this.points=t,this.ids=new i(t.length),this.coords=new i(2*t.length);for(var u=0;u<t.length;u++)this.ids[u]=u,this.coords[2*u]=e(t[u]),this.coords[2*u+1]=n(t[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function o(t){return t[0]}function a(t){return t[1]}var s=t("./sort"),u=t("./range"),c=t("./within");e.exports=r,i.prototype={range:function(t,e,n,r){return u(this.ids,this.coords,t,e,n,r,this.nodeSize)},within:function(t,e,n){return c(this.ids,this.coords,t,e,n,this.nodeSize)}}},{"./range":495,"./sort":496,"./within":497}],495:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){for(var s,u,c=[0,t.length-1,0],l=[];c.length;){var f=c.pop(),h=c.pop(),p=c.pop();if(h-p<=a)for(var d=p;d<=h;d++)s=e[2*d],u=e[2*d+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[d]);else{var v=Math.floor((p+h)/2);s=e[2*v],u=e[2*v+1],s>=n&&s<=i&&u>=r&&u<=o&&l.push(t[v]);var m=(f+1)%2;(0===f?n<=s:r<=u)&&(c.push(p),c.push(v-1),c.push(m)),(0===f?i>=s:o>=u)&&(c.push(v+1),c.push(h),c.push(m))}}return l}e.exports=r},{}],496:[function(t,e,n){"use strict";function r(t,e,n,o,a,s){if(!(a-o<=n)){var u=Math.floor((o+a)/2);i(t,e,u,o,a,s%2),r(t,e,n,o,u-1,s+1),r(t,e,n,u+1,a,s+1)}}function i(t,e,n,r,a,s){for(;a>r;){if(a-r>600){var u=a-r+1,c=n-r+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);i(t,e,n,Math.max(r,Math.floor(n-c*f/u+h)),Math.min(a,Math.floor(n+(u-c)*f/u+h)),s)}var p=e[2*n+s],d=r,v=a;for(o(t,e,r,n),e[2*a+s]>p&&o(t,e,r,a);d<v;){for(o(t,e,d,v),d++,v--;e[2*d+s]<p;)d++;for(;e[2*v+s]>p;)v--}e[2*r+s]===p?o(t,e,r,v):(v++,o(t,e,v,a)),v<=n&&(r=v+1),n<=v&&(a=v-1)}}function o(t,e,n,r){a(t,n,r),a(e,2*n,2*r),a(e,2*n+1,2*r+1)}function a(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r},{}],497:[function(t,e,n){"use strict";function r(t,e,n,r,o,a){for(var s=[0,t.length-1,0],u=[],c=o*o;s.length;){var l=s.pop(),f=s.pop(),h=s.pop();if(f-h<=a)for(var p=h;p<=f;p++)i(e[2*p],e[2*p+1],n,r)<=c&&u.push(t[p]);else{var d=Math.floor((h+f)/2),v=e[2*d],m=e[2*d+1];i(v,m,n,r)<=c&&u.push(t[d]);var y=(l+1)%2;(0===l?n-o<=v:r-o<=m)&&(s.push(h),s.push(d-1),s.push(y)),(0===l?n+o>=v:r+o>=m)&&(s.push(d+1),s.push(f),s.push(y))}}return u}function i(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}e.exports=r},{}],498:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function o(t,e,n,i,s,u){return t===e||(null==t||null==e||!l(t)&&!r(e)?t!==t&&e!==e:a(t,e,o,n,i,s,u))}function a(t,e,n,r,i,o,a){var l=f(t),p=f(e),v="[object Array]",g="[object Array]";l||(v=y.call(t),"[object Arguments]"==v?v=d:v!=d&&(l=h(t))),p||(g=y.call(e),"[object Arguments]"==g?g=d:g!=d&&(p=h(e)));var _=v==d,b=g==d,w=v==g;if(w&&!l&&!_)return u(t,e,v);if(!i){var x=_&&m.call(t,"__wrapped__"),E=b&&m.call(e,"__wrapped__");if(x||E)return n(x?t.value():t,E?e.value():e,r,i,o,a)}if(!w)return!1;o||(o=[]),a||(a=[]);for(var T=o.length;T--;)if(o[T]==t)return a[T]==e;o.push(t),a.push(e);var S=(l?s:c)(t,e,n,r,i,o,a);return o.pop(),a.pop(),S}function s(t,e,n,r,o,a,s){var u=-1,c=t.length,l=e.length;if(c!=l&&!(o&&l>c))return!1;for(;++u<c;){var f=t[u],h=e[u],p=r?r(o?h:f,o?f:h,u):void 0;if(void 0!==p){if(p)continue;return!1}if(o){if(!i(e,function(t){return f===t||n(f,t,r,o,a,s)}))return!1}else if(f!==h&&!n(f,h,r,o,a,s))return!1}return!0}function u(t,e,n){switch(n){case"[object Boolean]":case"[object Date]":return+t==+e;case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object Number]":return t!=+t?e!=+e:t==+e;case"[object RegExp]":case"[object String]":return t==e+""}return!1}function c(t,e,n,r,i,o,a){var s=p(t),u=s.length;if(u!=p(e).length&&!i)return!1;for(var c=u;c--;){var l=s[c];if(!(i?l in e:m.call(e,l)))return!1}for(var f=i;++c<u;){l=s[c];var h=t[l],d=e[l],v=r?r(i?d:h,i?h:d,l):void 0;if(!(void 0===v?n(h,d,r,i,o,a):v))return!1;f||(f="constructor"==l)}if(!f){var y=t.constructor,g=e.constructor;if(y!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof y&&y instanceof y&&"function"==typeof g&&g instanceof g))return!1}return!0}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var f=t("lodash.isarray"),h=t("lodash.istypedarray"),p=t("lodash.keys"),d="[object Object]",v=Object.prototype,m=v.hasOwnProperty,y=v.toString;e.exports=o},{"lodash.isarray":503,"lodash.istypedarray":505,"lodash.keys":506}],499:[function(t,e,n){function r(t,e,n){if("function"!=typeof t)return i;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function i(t){return t}e.exports=r},{}],500:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return s(n)?n:void 0}function o(t){return a(t)&&"[object Function]"==h.call(t)}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function s(t){return null!=t&&(o(t)?p.test(l.call(t)):r(t)&&u.test(t))}var u=/^\[object .+?Constructor\]$/,c=Object.prototype,l=Function.prototype.toString,f=c.hasOwnProperty,h=c.toString,p=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},{}],501:[function(t,e,n){(function(t){function n(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function r(t,e,o,a,s){var u=-1,c=t.length;for(o||(o=i),s||(s=[]);++u<c;){var l=t[u];e>0&&o(l)?e>1?r(l,e-1,o,a,s):n(s,l):a||(s[s.length]=l)}return s}function i(t){return x(t)||a(t)||!!(w&&t&&t[w])}function o(t){return(t?t.length:0)?r(t,1/0):[]}function a(t){return u(t)&&y.call(t,"callee")&&(!b.call(t,"callee")||"[object Arguments]"==g.call(t))}function s(t){return null!=t&&l(t.length)&&!c(t)}function u(t){return h(t)&&s(t)}function c(t){var e=f(t)?g.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function l(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function f(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function h(t){return!!t&&"object"==typeof t}var p="object"==typeof t&&t&&t.Object===Object&&t,d="object"==typeof self&&self&&self.Object===Object&&self,v=p||d||Function("return this")(),m=Object.prototype,y=m.hasOwnProperty,g=m.toString,_=v.Symbol,b=m.propertyIsEnumerable,w=_?_.isConcatSpreadable:void 0,x=Array.isArray;e.exports=o}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],502:[function(t,e,n){function r(t){return o(t)&&f.call(t,"callee")&&(!p.call(t,"callee")||"[object Arguments]"==h.call(t))}function i(t){return null!=t&&s(t.length)&&!a(t)}function o(t){return c(t)&&i(t)}function a(t){var e=u(t)?h.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var l=Object.prototype,f=l.hasOwnProperty,h=l.toString,p=l.propertyIsEnumerable;e.exports=r},{}],503:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}function i(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function a(t){return s(t)&&"[object Function]"==p.call(t)}function s(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null!=t&&(a(t)?d.test(f.call(t)):r(t)&&c.test(t))}var c=/^\[object .+?Constructor\]$/,l=Object.prototype,f=Function.prototype.toString,h=l.hasOwnProperty,p=l.toString,d=RegExp("^"+f.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=i(Array,"isArray"),m=v||function(t){return r(t)&&o(t.length)&&"[object Array]"==p.call(t)};e.exports=m},{}],504:[function(t,e,n){function r(t,e,n,r){n="function"==typeof n?o(n,r,3):void 0;var a=n?n(t,e):void 0;return void 0===a?i(t,e,n):!!a}var i=t("lodash._baseisequal"),o=t("lodash._bindcallback");e.exports=r},{"lodash._baseisequal":498,"lodash._bindcallback":499}],505:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function i(t){return!!t&&"object"==typeof t}function o(t){return i(t)&&r(t.length)&&!!a[u.call(t)]}var a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=Object.prototype,u=s.toString;e.exports=o},{}],506:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function i(t){return null!=t&&a(y(t))}function o(t,e){return t="number"==typeof t||p.test(t)?+t:-1,e=null==e?9007199254740991:e,t>-1&&t%1==0&&t<e}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function s(t){for(var e=c(t),n=e.length,r=n&&t.length,i=!!r&&a(r)&&(h(t)||f(t)),s=-1,u=[];++s<n;){var l=e[s];(i&&o(l,r)||v.call(t,l))&&u.push(l)}return u}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];u(t)||(t=Object(t));var e=t.length;e=e&&a(e)&&(h(t)||f(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,s=Array(e),c=e>0;++r<e;)s[r]=r+"";for(var l in t)c&&o(l,e)||"constructor"==l&&(i||!v.call(t,l))||s.push(l);return s}var l=t("lodash._getnative"),f=t("lodash.isarguments"),h=t("lodash.isarray"),p=/^\d+$/,d=Object.prototype,v=d.hasOwnProperty,m=l(Object,"keys"),y=r("length"),g=m?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&i(t)?s(t):u(t)?m(t):[]}:s;e.exports=g},{"lodash._getnative":500,"lodash.isarguments":502,"lodash.isarray":503}],507:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){return e=(0,a.splat)(e),Object.assign(t,{easeIn:function(n){return t(n,e)},easeOut:function(n){return 1-t(1-n,e)},easeInOut:function(n){return n<=.5?t(2*n,e)/2:(2-t(2*(1-n),e))/2}})}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../utils"),s=[],u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this.opt=(0,a.merge)({delay:0,duration:1e3,transition:function(t){return t},onCompute:a.noop,onComplete:a.noop},e)}return o(t,[{key:"start",value:function(t){this.opt=(0,a.merge)(this.opt,t||{}),this.time=Date.now(),this.animating=!0,s.push(this)}},{key:"step",value:function(){if(this.animating){
var t=Date.now(),e=this.time,n=this.opt,r=n.delay,i=n.duration,o=0;if(t<e+r)return void n.onCompute.call(this,o);t<e+r+i?(o=n.transition((t-e-r)/i),n.onCompute.call(this,o)):(this.animating=!1,n.onCompute.call(this,1),n.onComplete.call(this))}}}],[{key:"compute",value:function(t,e,n){return t+(e-t)*n}}]),t}();n.default=u,u.Queue=s,u.Transition={linear:function(t){return t}};var c=u.Transition;u.prototype.time=null;var l={Pow:function(t,e){return Math.pow(t,e[0]||6)},Expo:function(t){return Math.pow(2,8*(t-1))},Circ:function(t){return 1-Math.sin(Math.acos(t))},Sine:function(t){return 1-Math.sin((1-t)*Math.PI/2)},Back:function(t,e){return e=e[0]||1.618,Math.pow(t,2)*((e+1)*t-e)},Bounce:function(t){for(var e,n=0,r=1;1;n+=r,r/=2)if(t>=(7-4*n)/11){e=r*r-Math.pow((11-6*n-11*t)/4,2);break}return e},Elastic:function(t,e){return Math.pow(2,10*--t)*Math.cos(20*t*Math.PI*(e[0]||1)/3)}};for(var f in l)c[f]=i(l[f]);["Quad","Cubic","Quart","Quint"].forEach(function(t,e){c[t]=i(function(t){return Math.pow(t,[e+2])})});var h;try{h=window}catch(t){h=null}var p=function(){var t=s;if(s=[],t.length){for(var e,n=0,r=t.length;n<r;n++)e=t[n],e.step(),e.animating&&s.push(e);u.Queue=s}};if(h){var d=!1;["webkitAnimationTime","mozAnimationTime","animationTime","webkitAnimationStartTime","mozAnimationStartTime","animationStartTime"].forEach(function(t){t in h&&(u.animationTime=function(){return h[t]},d=!0)}),d||(u.animationTime=Date.now),d=!1,["webkitRequestAnimationFrame","mozRequestAnimationFrame","requestAnimationFrame"].forEach(function(t){t in h&&(u.requestAnimationFrame=function(e){h[t](function(){p(),e()})},d=!0)}),d||(u.requestAnimationFrame=function(t){setTimeout(function(){p(),t()},1e3/60)})}},{"../utils":561}],508:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.cancelAnimationFrame=n.requestAnimationFrame=void 0;var s,u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("autobind-decorator"),h=r(f),p=t("../utils"),d=t("../webgl/webgl-checks"),v=n.requestAnimationFrame=function(t){return p.isBrowser?window.requestAnimationFrame(t):setTimeout(t,1e3/60)},m=n.cancelAnimationFrame=function(t){return p.isBrowser?window.cancelAnimationFrame(t):clearTimeout(t)},y=(s=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.gl,a=void 0===r?null:r,s=(n.canvas,n.width),u=void 0===s?null:s,c=n.height,l=void 0===c?null:c,f=n.autoResizeViewport,h=void 0===f||f,d=n.autoResizeCanvas,v=void 0===d||d,m=n.autoResizeDrawingBuffer,y=void 0===m||m,g=n.useDevicePixelRatio,_=void 0===g||g;i(n,["gl","canvas","width","height","autoResizeViewport","autoResizeCanvas","autoResizeDrawingBuffer","useDevicePixelRatio"]);o(this,t),this.update({autoResizeViewport:h,autoResizeCanvas:v,autoResizeDrawingBuffer:y,useDevicePixelRatio:_}),this.width=u,this.height=l,this._startPromise=p.pageLoadPromise.then(function(t){return e.gl=a,t})}return l(t,[{key:"update",value:function(t){var e=t.autoResizeDrawingBuffer,n=void 0===e||e,r=t.autoResizeCanvas,i=void 0===r||r,o=t.autoResizeViewport,a=void 0===o||o,s=t.useDevicePixelRatio,u=void 0===s||s;return this.autoResizeViewport=a,this.autoResizeCanvas=i,this.autoResizeDrawingBuffer=n,this.useDevicePixelRatio=u,this}},{key:"context",value:function(t){var e=this;if(this.gl)throw new Error("AnimationFrame.context - context already provided");return this._startPromise=this._startPromise.then(function(){if(e.gl=t(),!(0,d.isWebGLContext)(e.gl))throw new Error("AnimationFrame.context - illegal context returned")}),this}},{key:"init",value:function(t){var e=this;return this._startPromise=this._startPromise.then(function(){if(!e.gl)throw new Error("AnimationFrame.context - no context provided");return e._initializeContext(),t(e._context)||{}}),this}},{key:"setupFrame",value:function(t){return this._onSetupFrame=t,this}},{key:"frame",value:function(t){return this._onRenderFrame=t,this._restartFrame(),this}},{key:"start",value:function(){var t=this;return this._startPromise.then(function(){t._animationFrameId||(t._animationFrameId=v(t._frame))}),this}},{key:"stop",value:function(){return this._animationFrameId&&(m(this._animationFrameId),this._animationFrameId=null),this}},{key:"resizeCanvas",value:function(t,e){return this._resizeCanvas(t,e),this}},{key:"_initializeContext",value:function(){this._context={gl:this.gl,canvas:this.gl.canvas,stop:this.stop,tick:0,tock:0},this._updateContext()}},{key:"_updateContext",value:function(){var t=this._context.canvas;this._context.width=t.width,this._context.height=t.height,this._context.aspect=t.width/t.height}},{key:"_restartFrame",value:function(){var t=this;this.stop(),this._startPromise.then(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t._initializeContext(),"object"===(void 0===e?"undefined":c(e))&&null!==e&&(t._context=u({},e,t._context)),t.start()})}},{key:"_frame",value:function(){var t=this._context.canvas;this._onSetupFrame?this._onSetupFrame(this._context):(this._resizeCanvasDrawingBuffer(t),this.autoResizeViewport&&this.gl.viewport(0,0,t.width,t.height)),this._updateContext(),this._onRenderFrame(this._context),this._context.tick++,this._animationFrameId=v(this._frame)}},{key:"_resizeCanvas",value:function(t,e){var n=this._context.canvas;if(n){if(this.autoResizeDrawingBuffer){var r=this.useDevicePixelRatio?window.devicePixelRatio||1:1,i=Math.floor(t*r),o=Math.floor(e*r);n.width===i&&n.height===o||(n.width=i,n.height=o)}n.style.width=t+"px",n.style.height=e+"px"}return this}},{key:"_resizeCanvasDrawingBuffer",value:function(){if(this.autoResizeDrawingBuffer){var t=this._context.canvas,e=this.useDevicePixelRatio?window.devicePixelRatio||1:1,n=window.innerWidth,r=window.innerHeight,i=Math.floor(n*e),o=Math.floor(r*e);n===i&&r===o||(t.width=i,t.height=o,t.style.width=n,t.style.height=r)}}},{key:"_resizeDrawingBuffer",value:function(t,e){var n=this._context.canvas;return n&&(n.width=t,n.height=e,this.autoResizeDrawingBuffer=!1),this}}]),t}(),a(s.prototype,"context",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"context"),s.prototype),a(s.prototype,"init",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"init"),s.prototype),a(s.prototype,"setupFrame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"setupFrame"),s.prototype),a(s.prototype,"frame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"frame"),s.prototype),a(s.prototype,"start",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"start"),s.prototype),a(s.prototype,"stop",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"stop"),s.prototype),a(s.prototype,"_frame",[h.default],Object.getOwnPropertyDescriptor(s.prototype,"_frame"),s.prototype),s);n.default=y},{"../utils":561,"../webgl/webgl-checks":582,"autobind-decorator":49}],509:[function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.OrthoCamera=n.PerspectiveCamera=n.Camera=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("../deprecated"),u=t("../utils"),c=n.Camera=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t),e=(0,u.merge)({fov:45,near:.1,far:500,aspect:1,position:new s.Vec3(0,0,0),target:new s.Vec3(0,0,-1),up:new s.Vec3(0,1,0)},e),this.fov=e.fov,this.near=e.near,this.far=e.far,this.aspect=e.aspect,this.position=e.position,this.target=e.target,this.up=e.up,this.view=new s.Mat4,this.uniforms={},this.projection=new s.Mat4,Object.seal(this),this.update()}return a(t,[{key:"project",value:function(){return null}},{key:"unproject",value:function(){return null}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"_updateUniforms",value:function(){var t=this.view.mulMat4(this.projection),e=t.invert();this.uniforms={cameraPosition:this.position,projectionMatrix:this.projection,viewMatrix:this.view,viewProjectionMatrix:t,viewInverseMatrix:this.view.invert(),viewProjectionInverseMatrix:e}}}]),t}();n.PerspectiveCamera=function(t){function e(){return o(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),a(e,[{key:"update",value:function(){this.projection=(new s.Mat4).perspective(this.fov,this.aspect,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),e}(c),n.OrthoCamera=function(){function t(){o(this,t)}return a(t,[{key:"update",value:function(){var t=this.near*Math.tan(this.fov*Math.PI/360),e=-t,n=e*this.aspect,r=t*this.aspect;this.projection=(new s.Mat4).ortho(n,r,e,t,this.near,this.far),this.view.lookAt(this.position,this.target,this.up),this._updateUniforms()}}]),t}()},{"../deprecated":517,"../utils":561}],510:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.MAX_TEXTURES=10,n.MAX_POINT_LIGHTS=4,n.PICKING_RES=4},{}],511:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t!==!0&&t}function o(t){var e=t.getBoundingClientRect();return{x:e.left,y:e.top,bbox:e}}function a(t,e){return e=e||window,t||e.event}function s(t){return t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3}function u(t){var e=t.which||t.keyCode,n=p(e),r=e-111;return r>0&&r<13&&(n="f"+r),n=n||String.fromCharCode(e).toLowerCase(),{code:e,key:n,shift:t.shiftKey,control:t.ctrlKey,alt:t.altKey,meta:t.metaKey}}function c(t){return 3===t.which||2===t.button}function l(t,e){e=e||window,t=t||e.event;var n=e.document;if(n=n.documentElement||n.body,t.touches&&t.touches.length){for(var r=[],i=t.touches.length,o=void 0,a=0;a<i;++a)o=t.touches[a],r.push({x:o.pageX||o.clientX+n.scrollLeft,y:o.pageY||o.clientY+n.scrollTop});return r}return[{x:t.pageX||t.clientX+n.scrollLeft,y:t.pageY||t.clientY+n.scrollTop}]}function f(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=d({cachePosition:!0,cacheSize:!0,relative:!0,centerOrigin:!0,disableContextMenu:!0,bind:!1,picking:!1,enableTouch:!0,enableMouse:!0,enableKeyboard:!0,onClick:m.noop,onRightClick:m.noop,onDragStart:m.noop,onDragMove:m.noop,onDragEnd:m.noop,onDragCancel:m.noop,onTouchStart:m.noop,onTouchMove:m.noop,onTouchEnd:m.noop,onTouchCancel:m.noop,onTap:m.noop,onMouseMove:m.noop,onMouseEnter:m.noop,onMouseLeave:m.noop,onMouseWheel:m.noop,onKeyDown:m.noop,onKeyUp:m.noop},e);var n=e.bind;if(n)for(var r in e)r.match(/^on[a-zA-Z0-9]+$/)&&function(t,r){e[t]=function(){r.apply(n,Array.prototype.slice.call(arguments))}}(r,e[r]);return new g(t,e)}function p(t){var e=_;for(var n in e)if(e[n]===t)return n;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.Keys=n.EventsProxy=n.stop=void 0;var d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},v=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.get=a,n.getWheel=s,n.getKey=u,n.isRightClick=c,n.getPos=l,n.addEvents=h;var m=t("../utils"),y={enter:13,up:38,down:40,left:37,right:39,esc:27,space:32,backspace:8,tab:9,delete:46};n.stop=f;var g=n.EventsProxy=function(){function t(e,n){r(this,t),this.scene=n.scene,this.domElem=e,this.pos=o(e),this.opt=this.callbacks=n,this.size={width:e.width||e.offsetWidth,height:e.height||e.offsetHeight},this.attachEvents()}return v(t,[{key:"attachEvents",value:function(){var t=this,e=this.domElem,n=this.opt;if(n.disableContextMenu&&(e.oncontextmenu=function(){return!1}),n.enableMouse){["mouseup","mousedown","mousemove","mouseover","mouseout"].forEach(function(n){e.addEventListener(n,function(e,r){t[n](t.eventInfo(n,e,r))},!1)});var r="";r=document.getBoxObjectFor||null!==window.mozInnerScreenX?"DOMMouseScroll":"mousewheel",e.addEventListener(r,function(e,n){t.mousewheel(t.eventInfo("mousewheel",e,n))},!1)}n.enableTouch&&["touchstart","touchmove","touchend"].forEach(function(n){e.addEventListener(n,function(e,r){t[n](t.eventInfo(n,e,r))},!1)}),n.enableKeyboard&&["keydown","keyup"].forEach(function(e){document.addEventListener(e,function(n,r){t[e](t.eventInfo(e,n,r))},!1)})}},{key:"eventInfo",value:function(t,e,n){for(var r=this.domElem,i=this.scene,h=this.opt,p=this.getSize(),d=h.relative,v=h.centerOrigin,m=h.cachePosition&&this.pos||o(r),y=a(e,n),g=l(e,n),_={x:g[0].x,y:g[0].y},b={},w=void 0,x=void 0,E=0,T=g.length;E<T;++E)w=g[E].x,x=g[E].y,d&&(w-=m.x,x-=m.y,v&&(w-=p.width/2,x-=p.height/2,x*=-1)),g[E].x=w,g[E].y=x;switch(t){case"mousewheel":b.wheel=s(y);break;case"keydown":case"keyup":Object.assign(b,u(y));break;case"mouseup":b.isRightClick=c(y)}var S=void 0;return Object.assign(b,{x:g[0].x,y:g[0].y,posArray:g,cache:!1,stop:function(){f(y)},getTarget:function(){return S?S:S=h.picking&&i.pick(_.x-m.x,_.y-m.y)||!0}}),b.event=y,b}},{key:"getSize",value:function(){if(this.cacheSize)return this.size;var t=this.domElem;return{width:t.width||t.offsetWidth,height:t.height||t.offsetHeight}}},{key:"mouseup",value:function(t){this.moved||(t.isRightClick?this.callbacks.onRightClick(t,this.hovered):this.callbacks.onClick(t,i(this.pressed))),this.pressed&&(this.moved?this.callbacks.onDragEnd(t,i(this.pressed)):this.callbacks.onDragCancel(t,i(this.pressed)),this.pressed=this.moved=!1)}},{key:"mouseout",value:function(t){for(var e=t.relatedTarget,n=this.domElem;e&&e.parentNode;){if(n===e.parentNode)return;e=e.parentNode}this.hovered&&(this.callbacks.onMouseLeave(t,this.hovered),this.hovered=!1),this.pressed&&this.moved&&(this.callbacks.onDragEnd(t),this.pressed=this.moved=!1)}},{key:"mouseover",value:function(t){}},{key:"mousemove",value:function(t){if(this.pressed)return this.moved=!0,void this.callbacks.onDragMove(t,i(this.pressed));if(this.hovered){var e=i(t.getTarget());e&&e.hash===this.hash?this.callbacks.onMouseMove(t,this.hovered):(this.callbacks.onMouseLeave(t,this.hovered),this.hovered=e,this.hash=e,e&&(this.hash=e.hash,this.callbacks.onMouseEnter(t,this.hovered)))}else this.hovered=i(t.getTarget()),this.hash=this.hovered,this.hovered&&(this.hash=this.hovered.hash,this.callbacks.onMouseEnter(t,this.hovered));this.opt.picking||this.callbacks.onMouseMove(t)}},{key:"mousewheel",value:function(t){this.callbacks.onMouseWheel(t)}},{key:"mousedown",value:function(t){this.pressed=t.getTarget(),this.callbacks.onDragStart(t,i(this.pressed))}},{key:"touchstart",value:function(t){this.touched=t.getTarget(),this.touchedLastPosition={x:t.x,y:t.y},this.callbacks.onTouchStart(t,i(this.touched))}},{key:"touchmove",value:function(t){this.touched&&(this.touchMoved=!0,this.callbacks.onTouchMove(t,i(this.touched)))}},{key:"touchend",value:function(t){this.touched&&(this.touchMoved?this.callbacks.onTouchEnd(t,i(this.touched)):(t.x=isNaN(t.x)?this.touchedLastPosition.x:t.x,t.y=isNaN(t.y)?this.touchedLastPosition.y:t.y,this.callbacks.onTap(t,i(this.touched)),this.callbacks.onTouchCancel(t,i(this.touched))),this.touched=this.touchMoved=!1)}},{key:"keydown",value:function(t){this.callbacks.onKeyDown(t)}},{key:"keyup",value:function(t){this.callbacks.onKeyUp(t)}}]),t}();Object.assign(g.prototype,{hovered:!1,pressed:!1,touched:!1,touchedLastPosition:{x:0,y:0},touchMoved:!1,moved:!1});var _=n.Keys=y},{"../utils":561}],512:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("../utils"),c=t("assert"),l=r(c),f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,r=e.drawMode,a=void 0===r?"TRIANGLES":r,s=e.vertexCount,c=void 0===s?void 0:s,f=e.attributes,h=i(e,["id","drawMode","vertexCount","attributes"]);o(this,t),(0,l.default)(a,"Geometry: Illegal argument"),this.id=n||(0,u.uid)(this.constructor.name),this.drawMode=a,this.vertexCount=c,this.attributes={},this.needsRedraw=!0,this.userData={},Object.seal(this),f?this.setAttributes(f):this.setAttributes(h)}return s(t,[{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setVertexCount",value:function(t){this.vertexCount=t}},{key:"getVertexCount",value:function(){return void 0!==this.vertexCount?this.vertexCount:this.attributes.indices?this.attributes.indices.value.length:this.attributes.vertices?this.attributes.vertices.value.length/3:!!this.attributes.positions&&this.attributes.positions.value.length/3}},{key:"hasAttribute",value:function(t){return Boolean(this.attributes[t])}},{key:"getAttribute",value:function(t){var e=this.attributes[t];return(0,l.default)(e),e.value}},{key:"getArray",value:function(t){var e=this.attributes[t];return(0,l.default)(e),e.value}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(t){for(var e in t){var n=t[e];n=ArrayBuffer.isView(n)?{value:n}:n,(0,l.default)(ArrayBuffer.isView(n.value),this._print(e)+": must be a typed array or an objectwith value as typed array"),this._autoDetectAttribute(e,n),this.attributes[e]=a({},n,{instanced:n.instanced||0})}return this.setNeedsRedraw(),this}},{key:"_autoDetectAttribute",value:function(t,e){var n=void 0;switch(t){case"indices":n=n||"indices";break;case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors"}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;case"indices":e.size=e.size||1,e.isIndexed=e.isIndexed||!0,(0,l.default)(e.value instanceof Uint16Array||e.value instanceof Uint32Array,'attribute array for "indices" must be of integer type')}(0,l.default)(e.size,"attribute "+t+" needs size")}},{key:"_print",value:function(t){return"Geometry "+this.id+" attribute "+t}}]),t}();n.default=f},{"../utils":561,assert:1}],513:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./geometry");Object.defineProperty(n,"Geometry",{enumerable:!0,get:function(){return r(i).default}});var o=t("./model");Object.defineProperty(n,"Model",{enumerable:!0,get:function(){return r(o).default}});var a=t("./animation-frame");Object.defineProperty(n,"AnimationFrame",{enumerable:!0,get:function(){return r(a).default}}),Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("./camera");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var u=t("./event");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})}),Object.defineProperty(n,"FrameAnimator",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(n,"Renderer",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(n,"Animation",{enumerable:!0,get:function(){return r(a).default}})},{"./animation-frame":508,"./camera":509,"./event":511,"./geometry":512,"./model":514}],514:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Material=void 0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("../webgl"),h=t("../scenegraph/object-3d"),p=r(h),d=t("../utils"),v=t("./geometry"),m=r(v),y=t("assert"),g=r(y),_=(n.Material=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.shininess,r=void 0===n?0:n,i=e.reflection,o=void 0===i?0:i,a=e.refraction,s=void 0===a?0:a;u(this,t),this.shininess=r,this.reflection=o,this.refraction=s},function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),n=t instanceof f.WebGLRenderingContext?c({},n,{gl:t}):t;var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.init(n),r}return s(e,t),l(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.program,n=t.gl,r=void 0===n?null:n,i=t.vs,a=void 0===i?null:i,s=t.fs,u=void 0===s?null:s,l=t.geometry,h=t.material,p=void 0===h?null:h,d=t.textures,v=t.isInstanced,y=void 0!==v&&v,_=t.instanceCount,b=void 0===_?0:_,w=t.vertexCount,x=void 0===w?void 0:w,E=t.pickable,T=void 0===E||E,S=t.pick,M=void 0===S?null:S,O=t.uniforms,A=void 0===O?{}:O,R=t.attributes,I=void 0===R?{}:R,k=(t.render,t.onBeforeRender),P=void 0===k?function(){}:k,N=t.onAfterRender,C=void 0===N?function(){}:N,D=o(t,["program","gl","vs","fs","geometry","material","textures","isInstanced","instanceCount","vertexCount","pickable","pick","uniforms","attributes","render","onBeforeRender","onAfterRender"]);if((0,g.default)(l instanceof m.default,"Model needs a geometry"),this.program=e||new f.Program(r,{vs:a,fs:u}),(0,g.default)(this.program instanceof f.Program,"Model needs a program"),D.instanced&&(console.warn('Warning: Model constructor: parameter "instanced" renamed to "isInstanced".\nThis will become a hard error in a future version of luma.gl.'),y=y||D.instanced),d)throw new Error('Model: parameter "textures" removed. Use uniforms to set textures');this.buffers={},this.userData={},this.drawParams={},this.dynamic=!1,this.needsRedraw=!0,this.material=p,this.setGeometry(l),this.attributes={},this.setAttributes(I),this.uniforms={},this.setUniforms(c({},this.program.defaultUniforms,A)),this.isInstanced=y,this.instanceCount=b,this.vertexCount=x,this.pickable=Boolean(T),this.pick=M||function(){return!1},this.onBeforeRender=P,this.onAfterRender=C}},{key:"destroy",value:function(){}},{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,r=!1;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r=r||this.geometry.getNeedsRedraw({clearRedrawFlags:n})}},{key:"setInstanceCount",value:function(t){return(0,g.default)(void 0!==t),this.instanceCount=t,this}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"setVertexCount",value:function(t){return this.vertexCount=t,this}},{key:"getVertexCount",value:function(){return void 0===this.vertexCount?this.geometry.getVertexCount():this.vertexCount}},{key:"isPickable",value:function(){return this.pickable}},{key:"setPickable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.pickable=Boolean(t),this}},{key:"getProgram",value:function(){return this.program}},{key:"getGeometry",value:function(){return this.geometry}},{key:"setGeometry",value:function(t){return this.geometry=t,this._createBuffersFromAttributeDescriptors(this.geometry.getAttributes()),this.setNeedsRedraw(),this}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(this.attributes,t),this._createBuffersFromAttributeDescriptors(t),this.setNeedsRedraw(),this}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.checkUniformValues)(t,this.id),Object.assign(this.uniforms,t),this.setNeedsRedraw(),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.uniforms,n=void 0===e?{}:e;t.attributes,t.settings;return this.render(n)}},{key:"addViewUniforms",value:function(t){var e=t.camera,n=t.viewMatrix,r=t.modelMatrix,i=o(t,["camera","viewMatrix","modelMatrix"]);return c({},e?e.getUniforms():{},n?this.getCoordinateUniforms(n,r):{},i)}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.addViewUniforms(t);this.setUniforms(e),d.log.log(2,">>> RENDERING MODEL "+this.id,this),this.setProgramState(),this._logAttributesAndUniforms(3,e),this.onBeforeRender();var n=this.drawParams;n.isInstanced&&!this.isInstanced&&d.log.warn(0,"Found instanced attributes on non-instanced model");var r=n.isIndexed,i=n.indexType,o=this.geometry,a=this.isInstanced,s=this.instanceCount;return(0,f.draw)(this.program.gl,{drawMode:o.drawMode,vertexCount:this.getVertexCount(),isIndexed:r,indexType:i,isInstanced:a,instanceCount:s}),this.onAfterRender(),this.unsetProgramState(),this.setNeedsRedraw(!1),d.log.log(2,"<<< RENDERING MODEL "+this.id+" - complete"),this}},{key:"setProgramState",value:function(){var t=this.program;return t.use(),this.drawParams={},t.setBuffers(this.buffers,{drawParams:this.drawParams}),t.setUniforms(this.uniforms),this}},{key:"unsetProgramState",value:function(){return this.program.unsetBuffers(),this}},{key:"_createBuffersFromAttributeDescriptors",value:function(t){var e=this.program.gl;for(var n in t){var r=t[n];if(r instanceof f.Buffer)this.buffers[n]=r;else{this.buffers[n]=this.buffers[n]||new f.Buffer(e);this.buffers[n].setData(c({},r,{data:r.value,target:r.isIndexed?f.GL.ELEMENT_ARRAY_BUFFER:f.GL.ARRAY_BUFFER}))}}return this}},{key:"_logAttributesAndUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d.log.priority>=t){var n=this._getAttributesTable({header:"Attributes "+this.id,program:this.program,attributes:c({},this.geometry.attributes,this.attributes)});d.log.table(t,n);var r=(0,f.getUniformsTable)({header:"Uniforms "+this.id,program:this.program,uniforms:c({},this.uniforms,e)}),i=r.table,o=r.unusedTable,a=r.unusedCount;d.log.table(t,i),d.log.log(t,(a||"No")+" unused uniforms ",o)}}},{key:"_getAttributesTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.attributes,n=t.header,r=void 0===n?"Attributes":n,o=(t.instanced,t.program);(0,g.default)(o);var a=o._attributeLocations,s=i({},r,{});for(var u in a){var c=e[u],l=a[u];s[u]=this._getAttributeEntry(c,l)}for(var f in e){var h=e[f];s[f]||(s[f]=this._getAttributeEntry(h,null))}return s}},{key:"_getAttributeEntry",value:function(t,e){var n=function(t){return Math.round(10*t)/10},r="NOT PROVIDED",i=0,o="N/A",a="N/A",s="N/A",u="N/A";if(t&&null===e&&(e=t.isIndexed?"ELEMENT_ARRAY_BUFFER":"NOT USED"),t instanceof f.Buffer){var c=t;r=c.layout.type,i=c.layout.instanced,o=c.layout.size,a=n(c.data.length/c.layout.size),s=c.data.length*c.data.BYTES_PER_ELEMENT}else t&&(r=t.value.constructor.name,i=t.instanced,o=t.size,a=n(t.value.length/t.size),s=t.value.length*t.value.BYTES_PER_ELEMENT,u=t.value);r=String(r).replace("Array","");var l=r.indexOf("nt")!==-1;return e=""+e+(i?" [instanced]":""),{Location:e,"Type Size x Verts = Bytes":r+" "+o+" x "+a+" = "+s,Value:(0,d.formatValue)(u,{size:o,isInteger:l})}}},{key:"setTextures",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];throw new Error("model.setTextures replaced: setUniforms({sampler2D: new Texture2D})")}},{key:"hash",get:function(){return this.id+" "+this.$pickingIndex}}]),e}(p.default));n.default=_},{"../scenegraph/object-3d":555,"../utils":561,"../webgl":571,"./geometry":512,assert:1}],515:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n]
;r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("../utils"),l=t("assert"),f=r(l),h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,r=void 0===n?"attribute-manager":n;i(e,["id"]);o(this,t),this.id=r,this.attributes={},this.allocedInstances=-1,this.needsRedraw=!0,this.userData={},this.onUpdateStart=a,this.onUpdateEnd=a,this.onLog=this._defaultLog,Object.seal(this)}return u(t,[{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e)}},{key:"invalidate",value:function(t){var e=this.attributes,n=e[t];(0,f.default)(n),n.needsUpdate=!0,this.onLog(1,"invalidated attribute "+t+" for "+this.id)}},{key:"invalidateAll",value:function(){var t=this.attributes;for(var e in t)this.invalidate(e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.numInstances,r=t.buffers,o=void 0===r?{}:r,a=t.props,s=void 0===a?{}:a,u=t.context,c=void 0===u?{}:u,l=i(t,["data","numInstances","buffers","props","context"]);this._checkExternalBuffers(o,l),this._setExternalBuffers(o),this._analyzeBuffers({numInstances:n})&&(this.onUpdateStart(this.id),this._updateBuffers({numInstances:n,data:e,props:s,context:c}),this.onUpdateEnd(this.id))}},{key:"setLogFunctions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.onLog,n=t.onUpdateStart,r=t.onUpdateEnd;this.onLog=void 0!==e?e:this.onLog,this.onUpdateStart=void 0!==n?n:this.onUpdateStart,this.onUpdateEnd=void 0!==r?r:this.onUpdateEnd}},{key:"getAttributes",value:function(){return this.attributes}},{key:"getChangedAttributes",value:function(t){var e=t.clearChangedFlags,n=void 0!==e&&e,r=this.attributes,i={};for(var o in r){var a=r[o];a.changed&&(a.changed=a.changed&&!n,i[o]=a)}return i}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,r=this.needsRedraw;return r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n,r}},{key:"setNeedsRedraw",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=!0,this}},{key:"addDynamic",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e)}},{key:"addInstanced",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._add(t,e,{instanced:1})}},{key:"_defaultLog",value:function(t,e){c.log.log(t,e)}},{key:"_add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(var i in t){i in e&&(t[i]=s({},t[i],e[i]));var o=t[i];this._validate(i,o);var a=s({target:void 0,isIndexed:!1,userData:{}},o,{isExternalBuffer:!1,needsAlloc:!1,needsUpdate:!1,changed:!1,size:o.size,value:o.value||null},n);Object.seal(a),this.attributes[i]=a}Object.assign(this.attributes,r)}},{key:"_validate",value:function(t,e){(0,f.default)("number"==typeof e.size,"Attribute definition for "+t+" missing size"),(0,f.default)("function"==typeof e.update||e.noAlloc,"Attribute updater for "+t+" missing update method")}},{key:"_checkExternalBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.attributes;for(var r in t){if(!n[r]&&!e.ignoreUnknownAttributes)throw new Error("Unknown attribute prop "+r)}}},{key:"_setExternalBuffers",value:function(t){var e=this.attributes,n=this.numInstances;for(var r in e){var i=e[r],o=t[r];if(i.isExternalBuffer=!1,o){if(!(o instanceof Float32Array))throw new Error("Attribute properties must be of type Float32Array");if(i.auto&&o.length<=n*i.size)throw new Error("Attribute prop array must match length and size");i.isExternalBuffer=!0,i.needsUpdate=!1,i.value!==o&&(i.value=o,i.changed=!0,this.needsRedraw=!0)}}}},{key:"_analyzeBuffers",value:function(t){var e=t.numInstances,n=this.attributes;(0,f.default)(void 0!==e);var r=!1;for(var i in n){var o=n[i];if(!o.isExternalBuffer){(null===o.value||o.value.length/o.size<e)&&o.update&&(o.needsAlloc=!0,r=!0),o.needsUpdate&&(r=!0)}}return r}},{key:"_updateBuffers",value:function(t){var e=t.numInstances,n=t.data,r=t.props,i=t.context,o=this.attributes,a=Math.max(e,1);for(var s in o){var u=o[s];if(u.needsAlloc){var c=u.type||Float32Array;u.value=new c(u.size*a),this.onLog(2,this.id+":"+s+" allocated "+a),u.needsAlloc=!1,u.needsUpdate=!0}if(u.needsUpdate){var l=u.update;l?(this.onLog(2,this.id+":"+s+" updating "+e),l.call(i,u,{data:n,props:r,numInstances:e})):this.onLog(2,this.id+":"+s+" missing update function"),u.needsUpdate=!1,u.changed=!0,this.needsRedraw=!0}}this.allocedInstances=a}}]),t}();n.default=h},{"../utils":561,assert:1}],516:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../webgl/webgl"),s=t("../webgl/webgl-checks"),u=t("../webgl/framebuffer"),c=r(u),l=t("../webgl/renderbuffer"),f=r(l),h=t("../webgl/texture-2d"),p=r(h),d=t("assert"),v=r(d),m=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.width,o=void 0===r?1:r,u=n.height,c=void 0===u?1:u,l=n.depth,f=void 0===l||l,h=n.minFilter,p=void 0===h?a.GL.NEAREST:h,d=n.magFilter,v=void 0===d?a.GL.NEAREST:d,m=n.format,y=void 0===m?a.GL.RGBA:m,g=n.type,_=void 0===g?a.GL.UNSIGNED_BYTE:g;i(this,t),(0,s.assertWebGLContext)(e),this.gl=e,this.depth=f,this.minFilter=p,this.magFilter=v,this.format=y,this.type=_,this.resize(o,c)}return o(t,[{key:"delete",value:function(){}},{key:"resize",value:function(t,e){if((0,v.default)(t>=0&&e>=0,"Width and height need to be integers"),t!==this.width||e!==this.height){var n=this.gl,r=new c.default(n),i=new p.default(n,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:t,height:e,type:this.type,format:this.format});if(r.attachTexture({attachment:a.GL.COLOR_ATTACHMENT0,texture:i}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=i,this.depth){var o=new f.default(n).storage({internalFormat:a.GL.DEPTH_COMPONENT16,width:t,height:e});r.attachRenderbuffer({attachment:a.GL.DEPTH_ATTACHMENT,renderbuffer:o}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=o}r.checkStatus(),this.width=t,this.height=e,this.fb&&this.fb.delete(),this.fb=r}}},{key:"bind",value:function(){this.fb.bind()}},{key:"unbind",value:function(){this.fb.unbind()}}]),t}();n.default=m},{"../webgl/framebuffer":569,"../webgl/renderbuffer":573,"../webgl/texture-2d":575,"../webgl/webgl":586,"../webgl/webgl-checks":582,assert:1}],517:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./math");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./attribute-manager");Object.defineProperty(n,"AttributeManager",{enumerable:!0,get:function(){return r(o).default}});var a=t("./fbo");Object.defineProperty(n,"FramebufferObject",{enumerable:!0,get:function(){return r(a).default}})},{"./attribute-manager":515,"./fbo":516,"./math":518}],518:[function(t,e,n){"use strict";function r(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}function i(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}Object.defineProperty(n,"__esModule",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=Math.sqrt,f=Math.sin,h=Math.cos,p=Math.tan,d=Math.PI,v=Array.prototype.slice,m=n.Vec3=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,3));return i[0]=t,i[1]=n,i[2]=r,i}return s(e,t),c(e,[{key:"x",get:function(){return this[0]},set:function(t){return this[0]=t}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=t}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=t}}],[{key:"create",value:function(){return new e(3)}}]),e}(u(Array)),y={setVec3:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},add:function(t,e){return new m(t[0]+e[0],t[1]+e[1],t[2]+e[2])},$add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t},add2:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},sub:function(t,e){return new m(t[0]-e[0],t[1]-e[1],t[2]-e[2])},$sub:function(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t},sub2:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},scale:function(t,e){return new m(t[0]*e,t[1]*e,t[2]*e)},$scale:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t},neg:function(t){return new m(-t[0],-t[1],-t[2])},$neg:function(t){return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t},unit:function(t){var e=m.norm(t);return e>0?m.scale(t,1/e):m.clone(t)},$unit:function(t){var e=m.norm(t);return e>0?m.$scale(t,1/e):t},cross:function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return new m(r*s-i*a,i*o-n*s,n*a-r*o)},$cross:function(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],s=e[2];return t[0]=r*s-i*a,t[1]=i*o-n*s,t[2]=n*a-r*o,t},distTo:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return l(n*n+r*r+i*i)},distToSq:function(t,e){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i},norm:function(t){var e=t[0],n=t[1],r=t[2];return l(e*e+n*n+r*r)},normSq:function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},clone:function(t){return t instanceof m?new m(t[0],t[1],t[2]):m.setVec3(new Float32Array(3),t)},toFloat32Array:function(t){var e=t.typedContainer;return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e):t}},g=m.prototype;for(var _ in y)m[_]=y[_],g[_]=function(t){return function(){var e=v.call(arguments);return e.unshift(this),m[t].apply(m,e)}}(_);var b=n.Mat4=function(t){function e(t,n,r,i,s,u,c,l,f,h,p,d,v,m,y,g){o(this,e);var _=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,16));return _.length=16,"number"==typeof t?_.set(t,n,r,i,s,u,c,l,f,h,p,d,v,m,y,g):_.id(),_.typedContainer=new Float32Array(16),_}return s(e,t),c(e,[{key:"copy",value:function(t){for(var e=0;e<16;++e)this[e]=t[e];return this}},{key:"n11",get:function(){return this[0]},set:function(t){this[0]=t}},{key:"n12",get:function(){return this[4]},set:function(t){this[4]=t}},{key:"n13",get:function(){return this[8]},set:function(t){this[8]=t}},{key:"n14",get:function(){return this[12]},set:function(t){this[12]=t}},{key:"n21",get:function(){return this[1]},set:function(t){this[1]=t}},{key:"n22",get:function(){return this[5]},set:function(t){this[5]=t}},{key:"n23",get:function(){return this[9]},set:function(t){this[9]=t}},{key:"n24",get:function(){return this[13]},set:function(t){this[13]=t}},{key:"n31",get:function(){return this[2]},set:function(t){this[2]=t}},{key:"n32",get:function(){return this[6]},set:function(t){this[6]=t}},{key:"n33",get:function(){return this[10]},set:function(t){this[10]=t}},{key:"n34",get:function(){return this[14]},set:function(t){this[14]=t}},{key:"n41",get:function(){return this[3]},set:function(t){this[3]=t}},{key:"n42",get:function(){return this[7]},set:function(t){this[7]=t}},{key:"n43",get:function(){return this[11]},set:function(t){this[11]=t}},{key:"n44",get:function(){return this[15]},set:function(t){this[15]=t}}],[{key:"create",value:function(){return new Array(16)}}]),e}(i(Array));y={id:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){return t instanceof b?new b(t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]):new typedArray(t)},set:function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m){return t[0]=e,t[4]=n,t[8]=r,t[12]=i,t[1]=o,t[5]=a,t[9]=s,t[13]=u,t[2]=c,t[6]=l,t[10]=f,t[14]=h,t[3]=p,t[7]=d,t[11]=v,t[15]=m,t},mulVec3:function(t,e){var n=m.clone(e);return b.$mulVec3(t,n)},$mulVec3:function(t,e){var n=e[0],r=e[1],i=e[2],o=1/(t[3]*n+t[7]*r+t[11]*i+t[15]);return e[0]=(t[0]*n+t[4]*r+t[8]*i+t[12])*o,e[1]=(t[1]*n+t[5]*r+t[9]*i+t[13])*o,e[2]=(t[2]*n+t[6]*r+t[10]*i+t[14])*o,e},mulMat42:function(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],m=e[13],y=e[14],g=e[15],_=n[0],b=n[1],w=n[2],x=n[3],E=n[4],T=n[5],S=n[6],M=n[7],O=n[8],A=n[9],R=n[10],I=n[11],k=n[12],P=n[13],N=n[14],C=n[15];return t[0]=_*r+b*s+w*f+x*v,t[1]=_*i+b*u+w*h+x*m,t[2]=_*o+b*c+w*p+x*y,t[3]=_*a+b*l+w*d+x*g,t[4]=E*r+T*s+S*f+M*v,t[5]=E*i+T*u+S*h+M*m,t[6]=E*o+T*c+S*p+M*y,t[7]=E*a+T*l+S*d+M*g,t[8]=O*r+A*s+R*f+I*v,t[9]=O*i+A*u+R*h+I*m,t[10]=O*o+A*c+R*p+I*y,t[11]=O*a+A*l+R*d+I*g,t[12]=k*r+P*s+N*f+C*v,t[13]=k*i+P*u+N*h+C*m,t[14]=k*o+P*c+N*p+C*y,t[15]=k*a+P*l+N*d+C*g,t},mulMat4:function(t,e){var n=b.clone(t);return b.mulMat42(n,t,e)},$mulMat4:function(t,e){return b.mulMat42(t,t,e)},add:function(t,e){var n=b.clone(t);return b.$add(n,e)},$add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],t[4]+=e[4],t[5]+=e[5],t[6]+=e[6],t[7]+=e[7],t[8]+=e[8],t[9]+=e[9],t[10]+=e[10],t[11]+=e[11],t[12]+=e[12],t[13]+=e[13],t[14]+=e[14],t[15]+=e[15],t},transpose:function(t){var e=b.clone(t);return b.$transpose(e)},$transpose:function(t){var e=t[4],n=t[8],r=t[12],i=t[1],o=t[9],a=t[13],s=t[2],u=t[6],c=t[14],l=t[3],f=t[7],h=t[11];return t[1]=e,t[2]=n,t[3]=r,t[4]=i,t[6]=o,t[7]=a,t[8]=s,t[9]=u,t[11]=c,t[12]=l,t[13]=f,t[14]=h,t},rotateAxis:function(t,e,n){var r=b.clone(t);return b.$rotateAxis(r,e,n)},$rotateAxis:function(t,e,n){var r=f(e),i=h(e),o=1-i,a=n[0],s=n[1],u=n[2],c=a*a*o+i,l=a*s*o+u*r,p=a*u*o-s*r,d=s*a*o-u*r,v=s*s*o+i,m=s*u*o+a*r,y=a*u*o+s*r,g=s*u*o-a*r,_=u*u*o+i,b=t[0],w=t[1],x=t[2],E=t[3],T=t[4],S=t[5],M=t[6],O=t[7],A=t[8],R=t[9],I=t[10],k=t[11];t[12],t[13],t[14],t[15];return t[0]=b*c+T*l+A*p,t[1]=w*c+S*l+R*p,t[2]=x*c+M*l+I*p,t[3]=E*c+O*l+k*p,t[4]=b*d+T*v+A*m,t[5]=w*d+S*v+R*m,t[6]=x*d+M*v+I*m,t[7]=E*d+O*v+k*m,t[8]=b*y+T*g+A*_,t[9]=w*y+S*g+R*_,t[10]=x*y+M*g+I*_,t[11]=E*y+O*g+k*_,t},rotateXYZ:function(t,e,n,r){var i=b.clone(t);return b.$rotateXYZ(i,e,n,r)},$rotateXYZ:function(t,e,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],u=t[4],c=t[5],l=t[6],p=t[7],d=t[8],v=t[9],m=t[10],y=t[11],g=h(e),_=h(n),b=h(r),w=f(e),x=f(n),E=f(r),T=_*b,S=-g*E+w*x*b,M=w*E+g*x*b,O=_*E,A=g*b+w*x*E,R=-w*b+g*x*E,I=-x,k=w*_,P=g*_;return t[0]=i*T+u*O+d*I,t[1]=o*T+c*O+v*I,t[2]=a*T+l*O+m*I,t[3]=s*T+p*O+y*I,t[4]=i*S+u*A+d*k,t[5]=o*S+c*A+v*k,t[6]=a*S+l*A+m*k,t[7]=s*S+p*A+y*k,t[8]=i*M+u*R+d*P,t[9]=o*M+c*R+v*P,t[10]=a*M+l*R+m*P,t[11]=s*M+p*R+y*P,t},translate:function(t,e,n,r){var i=b.clone(t);return b.$translate(i,e,n,r)},$translate:function(t,e,n,r){return t[12]=t[0]*e+t[4]*n+t[8]*r+t[12],t[13]=t[1]*e+t[5]*n+t[9]*r+t[13],t[14]=t[2]*e+t[6]*n+t[10]*r+t[14],t[15]=t[3]*e+t[7]*n+t[11]*r+t[15],t},scale:function(t,e,n,r){var i=b.clone(t);return b.$scale(i,e,n,r)},$scale:function(t,e,n,r){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=n,t[5]*=n,t[6]*=n,t[7]*=n,t[8]*=r,t[9]*=r,t[10]*=r,t[11]*=r,t},invert:function(t){var e=b.clone(t);return b.$invert(e)},$invert:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],m=t[15],y=e*a-n*o,g=e*s-r*o,_=e*u-i*o,b=n*s-r*a,w=n*u-i*a,x=r*u-i*s,E=c*d-l*p,T=c*v-f*p,S=c*m-h*p,M=l*v-f*d,O=l*m-h*d,A=f*m-h*v,R=1/(y*A-g*O+_*M+b*S-w*T+x*E);return t[0]=(+a*A-s*O+u*M)*R,t[1]=(-n*A+r*O-i*M)*R,t[2]=(+d*x-v*w+m*b)*R,t[3]=(-l*x+f*w-h*b)*R,t[4]=(-o*A+s*S-u*T)*R,t[5]=(+e*A-r*S+i*T)*R,t[6]=(-p*x+v*_-m*g)*R,t[7]=(+c*x-f*_+h*g)*R,t[8]=(+o*O-a*S+u*E)*R,t[9]=(-e*O+n*S-i*E)*R,t[10]=(+p*w-d*_+m*y)*R,t[11]=(-c*w+l*_-h*y)*R,t[12]=(-o*M+a*T-s*E)*R,t[13]=(+e*M-n*T+r*E)*R,t[14]=(-p*b+d*g-v*y)*R,t[15]=(+c*b-l*g+f*y)*R,t},lookAt:function(t,e,n,r){var i=m.sub(e,n);i.$unit();var o=m.cross(r,i);o.$unit();var a=m.cross(i,o);return a.$unit(),b.set(t,o[0],o[1],o[2],-o.dot(e),a[0],a[1],a[2],-a.dot(e),i[0],i[1],i[2],-i.dot(e),0,0,0,1)},frustum:function(t,e,n,r,i,o,a){var s=n-e,u=i-r,c=a-o;return t[0]=2*o/s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o/u,t[6]=0,t[7]=0,t[8]=(n+e)/s,t[9]=(i+r)/u,t[10]=-(a+o)/c,t[11]=-1,t[12]=0,t[13]=0,t[14]=-(a*o*2)/c,t[15]=0,t},perspective:function(t,e,n,r,i){var o=r*p(e*d/360),a=-o,s=a*n,u=o*n;return b.frustum(t,s,u,a,o,r,i)},ortho:function(t,e,n,r,i,o,a){var s=(this.elements,n-e),u=r-i,c=a-o,l=(n+e)/s,f=(r+i)/u,h=(a+o)/c;return t[0]=2/s,t[4]=0,t[8]=0,t[12]=-l,t[1]=0,t[5]=2/u,t[9]=0,t[13]=-f,t[2]=0,t[6]=0,t[10]=-2/c,t[14]=-h,t[3]=0,t[7]=0,t[11]=0,t[15]=1,t},toFloat32Array:function(t){var e=t.typedContainer;return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e):t}},g=b.prototype;for(_ in y)b[_]=y[_],g[_]=function(t){return function(){var e=v.call(arguments);return e.unshift(this),b[t].apply(b,e)}}(_);var w=n.Quat=function(t){function e(t,n,r,i){o(this,e);var s=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,4));return s[0]=t||0,s[1]=n||0,s[2]=r||0,s[3]=i||0,s.typedContainer=new Float32Array(4),s}return s(e,t),c(e,null,[{key:"create",value:function(){return new Array(4)}},{key:"fromVec3",value:function(t,n){return new e(t[0],t[1],t[2],n||0)}},{key:"fromMat4",value:function(t){var n,r,i;t[0]>t[5]&&t[0]>t[10]?(n=0,r=1,i=2):t[5]>t[0]&&t[5]>t[10]?(n=1,r=2,i=0):(n=2,r=0,i=1);var o=l(1+t[5*n]-t[5*r]-t[5*i]),a=new e;return a[n]=.5*o,a[r]=.5*(t["n"+r+n]+t["n"+n+r])/o,a[i]=.5*(t["n"+n+i]+t["n"+i+n])/o,a[3]=.5*(t["n"+r+i]-t["n"+i+r])/o,a}},{key:"fromXRotation",value:function(t){return new e(f(t/2),0,0,h(t/2))}},{key:"fromYRotation",value:function(t){return new e(0,f(t/2),0,h(t/2))}},{key:"fromZRotation",value:function(t){return new e(0,0,f(t/2),h(t/2))}},{key:"fromAxisRotation",value:function(t,n){var r=t[0],i=t[1],o=t[2],a=1/l(r*r+i*i+o*o),s=f(n/2);return new e(s*r*a,s*i*a,s*o*a,h(n/2))}}]),e}(r(Array));y={setQuat:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set:function(t,e,n,r,i){return t[0]=e||0,t[1]=n||0,t[2]=r||0,t[3]=i||0,t},clone:function(t){return t instanceof w?new w(t[0],t[1],t[2],t[3]):w.setQuat(new typedArray(4),t)},neg:function(t){return new w(-t[0],-t[1],-t[2],-t[3])},$neg:function(t){return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t[3]=-t[3],t},add:function(t,e){return new w(t[0]+e[0],t[1]+e[1],t[2]+e[2],t[3]+e[3])},$add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],t},sub:function(t,e){return new w(t[0]-e[0],t[1]-e[1],t[2]-e[2],t[3]-e[3])},$sub:function(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],t[3]-=e[3],t},scale:function(t,e){return new w(t[0]*e,t[1]*e,t[2]*e,t[3]*e)},$scale:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t},mulQuat:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return new w(o*a+n*c+r*u-i*s,o*s+r*c+i*a-n*u,o*u+i*c+n*s-r*a,o*c-n*a-r*s-i*u)},$mulQuat:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3];return t[0]=o*a+n*c+r*u-i*s,t[1]=o*s+r*c+i*a-n*u,t[2]=o*u+i*c+n*s-r*a,t[3]=o*c-n*a-r*s-i*u,t},divQuat:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3],l=1/(c*c+a*a+s*s+u*u);return new w((n*c-o*a-r*u+i*s)*l,(n*u-o*s+r*c-i*a)*l,(r*a+i*c-o*u-n*s)*l,(o*c+n*a+r*s+i*u)*l)},$divQuat:function(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],s=e[1],u=e[2],c=e[3],l=1/(c*c+a*a+s*s+u*u);return t[0]=(n*c-o*a-r*u+i*s)*l,t[1]=(n*u-o*s+r*c-i*a)*l,t[2]=(r*a+i*c-o*u-n*s)*l,t[3]=(o*c+n*a+r*s+i*u)*l,t},invert:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=1/(e*e+n*n+r*r+i*i);return new w(-e*o,-n*o,-r*o,i*o)},$invert:function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=1/(e*e+n*n+r*r+i*i);return t[0]=-e*o,t[1]=-n*o,t[2]=-r*o,t[3]=i*o,t},norm:function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return l(e*e+n*n+r*r+i*i)},normSq:function(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i},unit:function(t){return w.scale(t,1/w.norm(t))},$unit:function(t){return w.$scale(t,1/w.norm(t))},conjugate:function(t){return new w(-t[0],-t[1],-t[2],t[3])},$conjugate:function(t){return t[0]=-t[0],t[1]=-t[1],t[2]=-t[2],t}},g=w.prototype={};for(_ in y)w[_]=y[_],g[_]=function(t){return function(){var e=v.call(arguments);return e.unshift(this),w[t].apply(w,e)}}(_);m.fromQuat=function(t){return new m(t[0],t[1],t[2])},b.fromQuat=function(t){var e=t[3],n=t[0],r=t[1],i=t[2];return new b(e*e+n*n-r*r-i*i,2*n*r-2*e*i,2*n*i+2*e*r,0,2*n*r+2*e*i,e*e-n*n+r*r-i*i,2*r*i-2*e*n,0,2*n*i-2*e*r,2*r*i+2*e*n,e*e-n*n-r*r+i*i,0,0,0,0,1)}},{}],519:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./shader-cache");Object.defineProperty(n,"ShaderCache",{enumerable:!0,get:function(){return r(i).default}})},{"./shader-cache":520}],520:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../webgl"),s=t("assert"),u=r(s),c="ShaderCache expects source strings",l="ShaderCache does not support caching across multiple contexts",f=function(){function t(){i(this,t),this.vertexShaders={},this.fragmentShaders={}}return o(t,[{key:"delete",value:function(){return this}},{key:"getVertexShader",value:function(t,e){(0,u.default)("string"==typeof e,c);var n=this.vertexShaders[e];return(0,u.default)(!n||n.gl===t,l),n||(n=new a.VertexShader(t,e),this.vertexShaders[e]=n),n}},{key:"getFragmentShader",value:function(t,e){(0,u.default)("string"==typeof e,c);var n=this.fragmentShaders[e];return(0,u.default)(!n||n.gl===t,l),n||(n=new a.FragmentShader(t,e),this.fragmentShaders[e]=n),n}}]),t}();n.default=f},{"../webgl":571,assert:1}],521:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ConeGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("./truncated-cone"),l=t("../core/model"),f=r(l),h=n.ConeGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.radius,r=void 0===n?1:n,s=t.cap,c=void 0===s||s,l=i(t,["radius","cap"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},l,{topRadius:0,topCap:Boolean(c),bottomCap:Boolean(c),bottomRadius:r})))}return s(e,t),e}(c.TruncatedConeGeometry),p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({geometry:new h(t)},t)))}return s(e,t),e}(f.default);n.default=p},{"../core/model":514,"./truncated-cone":528}],522:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CubeGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("../core/geometry"),l=r(c),f=t("../core/model"),h=r(f),p=t("../utils"),d=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],v=[-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1],m=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0],y=[0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1],g=n.CubeGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=void 0===n?(0,p.uid)("cube-geometry"):n,s=i(t,["id"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{id:r,attributes:{indices:new Uint16Array(d),positions:new Float32Array(v),normals:new Float32Array(m),texCoords:new Float32Array(y)}})))}return s(e,t),e}(l.default),_=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=void 0===n?(0,p.uid)("cube"):n,s=i(t,["id"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{id:r,geometry:new g(s)})))}return s(e,t),e}(h.default);n.default=_},{"../core/geometry":512,"../core/model":514,"../utils":561}],523:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CylinderGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("./truncated-cone"),l=t("../core/model"),f=r(l),h=n.CylinderGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.radius,r=void 0===n?1:n,s=i(t,["radius"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{bottomRadius:r,topRadius:r})))}return s(e,t),e}(c.TruncatedConeGeometry),p=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},t,{geometry:new h(t)})))}return s(e,t),e}(f.default);n.default=p},{"../core/model":514,"./truncated-cone":528}],524:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.IcoSphereGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("../math"),l=t("../core/geometry"),f=r(l),h=t("../core/model"),p=r(h),d=[-1,0,0,0,1,0,0,0,-1,0,0,1,0,-1,0,1,0,0],v=[3,4,5,3,5,1,3,1,0,3,0,4,4,0,2,4,2,5,2,0,1,5,2,1],m=n.IcoSphereGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.iterations,r=void 0===n?0:n,s=(t.onAddVertex,i(t,["iterations","onAddVertex"]));o(this,e);var l=Math.PI,f=2*l,h=[].concat(d),p=[].concat(v);h.push(),p.push();for(var m=(function(){var t={};return function(e,n){e*=3,n*=3;var r=e<n?e:n,i=e>n?e:n,o=r+"|"+i;if(o in t)return t[o];var a=h[e],s=h[e+1],u=h[e+2],c=h[n],l=h[n+1],f=h[n+2],p=(a+c)/2,d=(s+l)/2,v=(u+f)/2,m=Math.sqrt(p*p+d*d+v*v);return p/=m,d/=m,v/=m,h.push(p,d,v),t[o]=h.length/3-1}}()),y=0;y<r;y++){for(var g=[],_=0;_<p.length;_+=3){var b=m(p[_+0],p[_+1]),w=m(p[_+1],p[_+2]),x=m(p[_+2],p[_+0]);g.push(x,p[_+0],b,b,p[_+1],w,w,p[_+2],x,b,w,x)}p=g}for(var E=new Array(3*p.length),T=new Array(2*p.length),S=p.length,M=S-3;M>=0;M-=3){
var O=p[M+0],A=p[M+1],R=p[M+2],I=3*O,k=3*A,P=3*R,N=2*O,C=2*A,D=2*R,j=h[I+0],L=h[I+1],F=h[I+2],U=Math.acos(F/Math.sqrt(j*j+L*L+F*F)),z=Math.atan2(L,j)+l,B=U/l,V=1-z/f,G=h[k+0],H=h[k+1],W=h[k+2],q=Math.acos(W/Math.sqrt(G*G+H*H+W*W)),Y=Math.atan2(H,G)+l,X=q/l,Z=1-Y/f,K=h[P+0],Q=h[P+1],J=h[P+2],$=Math.acos(J/Math.sqrt(K*K+Q*Q+J*J)),tt=Math.atan2(Q,K)+l,et=$/l,nt=1-tt/f,rt=[K-G,Q-H,J-W],it=[j-G,L-H,F-W],ot=c.Vector3.cross(rt,it).normalize(),at=void 0;(0===V||0===Z||0===nt)&&(0===V||V>.5)&&(0===Z||Z>.5)&&(0===nt||nt>.5)&&(h.push(h[I+0],h[I+1],h[I+2]),at=h.length/3-1,p.push(at),T[2*at+0]=1,T[2*at+1]=B,E[3*at+0]=ot.x,E[3*at+1]=ot.y,E[3*at+2]=ot.z,h.push(h[k+0],h[k+1],h[k+2]),at=h.length/3-1,p.push(at),T[2*at+0]=1,T[2*at+1]=X,E[3*at+0]=ot.x,E[3*at+1]=ot.y,E[3*at+2]=ot.z,h.push(h[P+0],h[P+1],h[P+2]),at=h.length/3-1,p.push(at),T[2*at+0]=1,T[2*at+1]=et,E[3*at+0]=ot.x,E[3*at+1]=ot.y,E[3*at+2]=ot.z),E[I+0]=E[k+0]=E[P+0]=ot.x,E[I+1]=E[k+1]=E[P+1]=ot.y,E[I+2]=E[k+2]=E[P+2]=ot.z,T[N+0]=V,T[N+1]=B,T[C+0]=Z,T[C+1]=X,T[D+0]=nt,T[D+1]=et}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{attributes:{positions:new Float32Array(h),normals:new Float32Array(E),texCoords:new Float32Array(T),indices:new Uint16Array(p)}})))}return s(e,t),e}(f.default),y=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},t,{geometry:new m(t)})))}return s(e,t),e}(p.default);n.default=y},{"../core/geometry":512,"../core/model":514,"../math":542}],525:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./cone");Object.defineProperty(n,"Cone",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(n,"ConeGeometry",{enumerable:!0,get:function(){return i.ConeGeometry}});var o=t("./cube");Object.defineProperty(n,"Cube",{enumerable:!0,get:function(){return r(o).default}}),Object.defineProperty(n,"CubeGeometry",{enumerable:!0,get:function(){return o.CubeGeometry}});var a=t("./cylinder");Object.defineProperty(n,"Cylinder",{enumerable:!0,get:function(){return r(a).default}}),Object.defineProperty(n,"CylinderGeometry",{enumerable:!0,get:function(){return a.CylinderGeometry}});var s=t("./ico-sphere");Object.defineProperty(n,"IcoSphere",{enumerable:!0,get:function(){return r(s).default}}),Object.defineProperty(n,"IcoSphereGeometry",{enumerable:!0,get:function(){return s.IcoSphereGeometry}});var u=t("./plane");Object.defineProperty(n,"Plane",{enumerable:!0,get:function(){return r(u).default}}),Object.defineProperty(n,"PlaneGeometry",{enumerable:!0,get:function(){return u.PlaneGeometry}});var c=t("./sphere");Object.defineProperty(n,"Sphere",{enumerable:!0,get:function(){return r(c).default}}),Object.defineProperty(n,"SphereGeometry",{enumerable:!0,get:function(){return c.SphereGeometry}}),Object.defineProperty(n,"TruncatedCone",{enumerable:!0,get:function(){return r(i).default}}),Object.defineProperty(n,"TruncatedConeGeometry",{enumerable:!0,get:function(){return i.TruncatedConeGeometry}})},{"./cone":521,"./cube":522,"./cylinder":523,"./ico-sphere":524,"./plane":526,"./sphere":527}],526:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PlaneGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("../core/geometry"),l=r(c),f=t("../core/model"),h=r(f),p=t("../utils"),d=n.PlaneGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.type,r=void 0===n?"x,y":n,s=t.offset,c=void 0===s?0:s,l=t.flipCull,f=void 0!==l&&l,h=t.unpack,d=void 0!==h&&h,v=t.id,m=void 0===v?(0,p.uid)("plane-geometry"):v,y=i(t,["type","offset","flipCull","unpack","id"]);o(this,e);var g=r.split(","),_=y[g[0]+"len"],b=y[g[1]+"len"],w=y["n"+g[0]]||1,x=y["n"+g[1]]||1,E=(w+1)*(x+1),T=new Float32Array(3*E),S=new Float32Array(3*E),M=new Float32Array(2*E);f&&(_=-_);for(var O=0,A=0,R=0;R<=x;R++)for(var I=0;I<=w;I++){var k=I/w,P=R/x;switch(M[O+0]=f?1-k:k,M[O+1]=P,r){case"x,y":T[A+0]=_*k-.5*_,T[A+1]=b*P-.5*b,T[A+2]=c,S[A+0]=0,S[A+1]=0,S[A+2]=f?1:-1;break;case"x,z":T[A+0]=_*k-.5*_,T[A+1]=c,T[A+2]=b*P-.5*b,S[A+0]=0,S[A+1]=f?1:-1,S[A+2]=0;break;case"y,z":T[A+0]=c,T[A+1]=_*k-.5*_,T[A+2]=b*P-.5*b,S[A+0]=f?1:-1,S[A+1]=0,S[A+2]=0}O+=2,A+=3}for(var N=w+1,C=new Uint16Array(w*x*6),D=0;D<x;D++)for(var j=0;j<w;j++){var L=6*(D*w+j);C[L+0]=(D+0)*N+j,C[L+1]=(D+1)*N+j,C[L+2]=(D+0)*N+j+1,C[L+3]=(D+1)*N+j,C[L+4]=(D+1)*N+j+1,C[L+5]=(D+0)*N+j+1}if(d){for(var F=new Float32Array(3*C.length),U=new Float32Array(3*C.length),z=new Float32Array(2*C.length),B=0;B<C.length;++B){var V=C[B];F[3*B+0]=T[3*V+0],F[3*B+1]=T[3*V+1],F[3*B+2]=T[3*V+2],U[3*B+0]=S[3*V+0],U[3*B+1]=S[3*V+1],U[3*B+2]=S[3*V+2],z[2*B+0]=M[2*V+0],z[2*B+1]=M[2*V+1]}T=F,S=U,M=z,C=void 0}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},y,{id:m,attributes:u({positions:T,normals:S,texCoords:M},C?{indices:C}:{})})))}return s(e,t),e}(l.default),v=function(t){function e(t){var n=t.id,r=void 0===n?(0,p.uid)("plane"):n,s=i(t,["id"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{id:r,geometry:new d(s)})))}return s(e,t),e}(h.default);n.default=v},{"../core/geometry":512,"../core/model":514,"../utils":561}],527:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.SphereGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("../core/geometry"),l=r(c),f=t("../core/model"),h=r(f),p=t("../utils"),d=n.SphereGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.nlat,r=void 0===n?10:n,s=t.nlong,c=void 0===s?10:s,l=t.radius,f=void 0===l?1:l,h=t.id,d=void 0===h?(0,p.uid)("sphere-geometry"):h,v=i(t,["nlat","nlong","radius","id"]);o(this,e);var m=Math.PI,y=m-0,g=2*Math.PI,_=g-0,b=(r+1)*(c+1);"number"==typeof f&&function(){var t=f;f=function(e,n,r,i,o){return t}}();for(var w=new Float32Array(3*b),x=new Float32Array(3*b),E=new Float32Array(2*b),T=new Uint16Array(r*c*6),S=0;S<=r;S++)for(var M=0;M<=c;M++){var O=M/c,A=S/r,R=M+S*(c+1),I=2*R,k=3*R,P=_*O,N=y*A,C=Math.sin(P),D=Math.cos(P),j=Math.sin(N),L=Math.cos(N),F=D*j,U=L,z=C*j,B=f(F,U,z,O,A);w[k+0]=B*F,w[k+1]=B*U,w[k+2]=B*z,x[k+0]=F,x[k+1]=U,x[k+2]=z,E[I+0]=O,E[I+1]=A}for(var V=r+1,G=0;G<r;G++)for(var H=0;H<c;H++){var W=6*(G*c+H);T[W+0]=H*V+G,T[W+1]=H*V+G+1,T[W+2]=(H+1)*V+G,T[W+3]=(H+1)*V+G,T[W+4]=H*V+G+1,T[W+5]=(H+1)*V+G+1}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},v,{id:d,attributes:{positions:w,indices:T,normals:x,texCoords:E}})))}return s(e,t),e}(l.default),v=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=void 0===n?(0,p.uid)("sphere"):n,s=i(t,["id"]);return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},s,{id:r,geometry:new d(s)})))}return s(e,t),e}(h.default);n.default=v},{"../core/geometry":512,"../core/model":514,"../utils":561}],528:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.TruncatedConeGeometry=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=t("../core/geometry"),l=r(c),f=t("../core/model"),h=r(f),p=n.TruncatedConeGeometry=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.bottomRadius,r=void 0===n?0:n,s=t.topRadius,c=void 0===s?0:s,l=t.height,f=void 0===l?1:l,h=t.nradial,p=void 0===h?10:h,d=t.nvertical,v=void 0===d?10:d,m=t.topCap,y=void 0!==m&&m,g=t.bottomCap,_=void 0!==g&&g,b=i(t,["bottomRadius","topRadius","height","nradial","nvertical","topCap","bottomCap"]);o(this,e);for(var w=(y?2:0)+(_?2:0),x=(p+1)*(v+1+w),E=Math.atan2(r-c,f),T=Math.sin,S=Math.cos,M=Math.PI,O=S(E),A=T(E),R=y?-2:0,I=v+(_?2:0),k=p+1,P=new Float32Array(3*x),N=new Float32Array(3*x),C=new Float32Array(2*x),D=new Uint16Array(p*(v+w)*6),j=0,L=0,F=R;F<=I;F++){var U=F/v,z=f*U,B=void 0;F<0?(z=0,U=1,B=r):F>v?(z=f,U=1,B=c):B=r+(c-r)*(F/v),F!==-2&&F!==v+2||(B=0,U=0),z-=f/2;for(var V=0;V<k;V++){var G=T(V*M*2/p),H=S(V*M*2/p);P[j+0]=G*B,P[j+1]=z,P[j+2]=H*B,N[j+0]=F<0||F>v?0:G*O,N[j+1]=F<0?-1:F>v?1:A,N[j+2]=F<0||F>v?0:H*O,C[L+0]=V/p,C[L+1]=U,L+=2,j+=3}}for(var W=0;W<v+w;W++)for(var q=0;q<p;q++){var Y=6*(W*p+q);D[Y+0]=k*(W+0)+0+q,D[Y+1]=k*(W+0)+1+q,D[Y+2]=k*(W+1)+1+q,D[Y+3]=k*(W+0)+0+q,D[Y+4]=k*(W+1)+1+q,D[Y+5]=k*(W+1)+0+q}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},b,{attributes:{positions:P,normals:N,texCoords:C,indices:D}})))}return s(e,t),e}(l.default),d=function(t){function e(t){return o(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,u({},t,{geometry:new p(t)})))}return s(e,t),e}(h.default);n.default=d},{"../core/geometry":512,"../core/model":514}],529:[function(t,e,n){(function(n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=t("./utils/is-browser"),o=r(i),a=t("../package.json"),s=o.default?window:n,u={VERSION:a.version,globals:{headlessGL:null,headlessTypes:null,modules:{},nodeIO:{}},global:s};if(s.luma&&s.luma.VERSION!==u.VERSION){var c=s.luma.VERSION+" vs "+u.VERSION;throw new Error("luma.gl - multiple versions detected: "+c)}s.luma=u,e.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../package.json":590,"./utils/is-browser":562}],530:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./without-io");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./io");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("./globals"),u=i(s),c=r(a);Object.assign(u.default,c)},{"./globals":529,"./io":535,"./without-io":589}],531:[function(t,e,n){(function(e){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return void 0===r&&"function"==typeof n&&(n=void 0,r=n),"string"==typeof e&&(e=new v(e)),new Promise(function(i,o){var a=void 0;try{a=h(e,t,n)}catch(t){return o(t),r(t,null)}return i(),r(null,a)})}function o(t){return new Promise(function(e,n){try{!function(){(0,c.default)(d,"window.File not defined. Must run under browser."),(0,c.default)(t instanceof d,"parameter must be a File object");var r=new p.FileReader;r.onerror=function(t){return n(new Error(a(t)))},r.onabort=function(){return n(new Error("Read operation was aborted."))},r.onload=function(){return e(r.result)},r.readAsText(t)}()}catch(t){n(t)}})}function a(t){switch(t.target.error.code){case t.target.error.NOT_FOUND_ERR:return"File not found.";case t.target.error.NOT_READABLE_ERR:return"File not readable.";case t.target.error.ABORT_ERR:return"Read operation was aborted.";case t.target.error.SECURITY_ERR:return"File is in a locked state.";case t.target.error.ENCODING_ERR:return'File is too long to encode in "data://" URL.';default:return"Read error."}}Object.defineProperty(n,"__esModule",{value:!0}),n.writeFile=i,n.readFile=o;var s=t("../../utils"),u=t("assert"),c=r(u),l="navigator"in e,f=e.navigator;s.isBrowser||(e.navigator={userAgent:"MSIE 9."});var h=t("filesaver.js");s.isBrowser||(l?e.navigator=f:delete e.navigator);var p=t("global/window"),d=p.File,v=p.Blob}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils":561,assert:1,"filesaver.js":448,"global/window":482}],532:[function(t,e,n){(function(e,r){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(t,n){if(t instanceof HTMLCanvasElement){return t.toDataURL(n)}(0,u.default)(t instanceof Image,"getImageData accepts image or canvas");var i=document.createElement("canvas");i.width=t.width,i.height=t.height,i.getContext("2d").drawImage(t,0,0);var o=i.toDataURL(n||"png").replace(/^data:image\/(png|jpg);base64,/,""),a=(0,l.default)();return e.nextTick(function(){return a.end(new r(o,"base64"))}),a}function a(t){return new Promise(function(e,n){try{!function(){var r=new Image;r.onload=function(){return e(r)},r.onerror=function(){return n(new Error("Could not load image "+t+"."))},r.src=t}()}catch(t){n(t)}})}Object.defineProperty(n,"__esModule",{value:!0}),n.compressImage=o,n.loadImage=a;var s=t("assert"),u=i(s),c=t("through"),l=i(c)}).call(this,t("_process"),t("buffer").Buffer)},{_process:28,assert:1,buffer:8,through:970}],533:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function a(t){return new c(t).sendAsync()}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.loadFile=a;var u={UNINITIALIZED:0,LOADING:1,LOADED:2,INTERACTIVE:3,COMPLETED:4},c=function(){function t(e){var n=e.url,a=e.path,s=void 0===a?null:a,u=e.method,c=void 0===u?"GET":u,l=e.async,f=void 0===l||l,h=e.noCache,p=void 0!==h&&h,d=e.sendAsBinary,v=void 0!==d&&d,m=e.responseType,y=void 0!==m&&m,g=e.onProgress,_=void 0===g?o:g,b=(e.onSuccess,e.onError),w=void 0===b?o:b,x=e.onAbort,E=void 0===x?o:x,T=e.onComplete,S=void 0===T?o:T;r(e,["url","path","method","async","noCache","sendAsBinary","responseType","onProgress","onSuccess","onError","onAbort","onComplete"]);i(this,t),this.url=s?s.join(s,n):n,this.method=c,this.async=f,this.noCache=p,this.sendAsBinary=v,this.responseType=y,this.req=new XMLHttpRequest,this.req.onload=function(t){return S(t)},this.req.onerror=function(t){return w(t)},this.req.onabort=function(t){return E(t)},this.req.onprogress=function(t){t.lengthComputable?_(t,Math.round(t.loaded/t.total*100)):_(t,-1)}}return s(t,[{key:"setRequestHeader",value:function(t,e){return this.req.setRequestHeader(t,e),this}},{key:"sendAsync",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.body||null;return new Promise(function(n,r){try{!function(){var i=t.req,o=t.method,a=t.async,s=t.noCache,c=t.sendAsBinary,l=t.responseType,f=s?t.url+(t.url.indexOf("?")>=0?"&":"?")+Date.now():t.url;i.open(o,f,a),l&&(i.responseType=l),a&&(i.onreadystatechange=function(t){i.readyState===u.COMPLETED&&(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+f)))}),c?i.sendAsBinary(e):i.send(e),a||(200===i.status?n(i.responseType?i.response:i.responseText):r(new Error(i.status+": "+f)))}()}catch(t){r(t)}})}}]),t}()},{}],534:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.browserFs=n.loadFile=void 0;var i=t("./browser-request");Object.defineProperty(n,"loadFile",{enumerable:!0,get:function(){return i.loadFile}});var o=t("./browser-image-io");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./browser-fs"),s=r(a);n.browserFs=s},{"./browser-fs":531,"./browser-image-io":532,"./browser-request":533}],535:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./platform");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})});var i=t("./load-files");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})})},{"./load-files":536,"./platform":539}],536:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(){}function a(t){var e=t.urls,n=t.onProgress,r=void 0===n?o:n,a=i(t,["urls","onProgress"]);(0,m.default)(e.every(function(t){return"string"==typeof t}),"loadImages: {urls} must be array of strings");var s=0;return Promise.all(e.map(function(t){var n=(0,y.loadFile)(d({url:t},a));return n.then(function(n){return r({progress:++s/e.length,count:s,total:e.length,url:t})}),n}))}function s(t){var e=t.urls,n=t.onProgress,r=void 0===n?o:n;i(t,["urls","onProgress"]);(0,m.default)(e.every(function(t){return"string"==typeof t}),"loadImages: {urls} must be array of strings");var a=0;return Promise.all(e.map(function(t){var n=(0,y.loadImage)(t);return n.then(function(n){return r({progress:++a/e.length,count:a,total:e.length,url:t})}),n}))}function u(t,e){var n=e.urls,r=e.onProgress,a=void 0===r?o:r,u=i(e,["urls","onProgress"]);return(0,m.default)(n.every(function(t){return"string"==typeof t}),"loadTextures: {urls} must be array of strings"),s(d({urls:n,onProgress:a},u)).then(function(e){return e.map(function(e,r){var i=Array.isArray(u.parameters)?u.parameters[r]:u.parameters;return i=void 0===i?{}:i,new g.Texture2D(t,d({id:n[r]},i,{data:e}))})})}function c(t,e){var n=e.vs,r=e.fs,s=e.onProgress,u=void 0===s?o:s,c=i(e,["vs","fs","onProgress"]);return a(d({urls:[n,r],onProgress:u},c)).then(function(e){var n=p(e,2),r=n[0],i=n[1];return new g.Program(t,d({vs:r,fs:i},c))})}function l(t,e){var n=e.url,r=e.onProgress,s=void 0===r?o:r,u=i(e,["url","onProgress"]);return a(d({urls:[n],onProgress:s},u)).then(function(e){return f(t,d({file:p(e,1)[0]},u))})}function f(t,e){var n=e.file,r=e.program,o=void 0===r?new g.Program(t):r,a=i(e,["file","program"]),s="string"==typeof n?h(n):n,u={},c={};for(var l in s){var f=s[l];Array.isArray(f)?u[l]="indices"===l?new Uint16Array(f):new Float32Array(f):c[l]=f}return new _.Model(d({program:o,geometry:new _.Geometry({attributes:u})},c,a))}function h(t){try{return JSON.parse(t)}catch(t){throw new Error("Failed to parse JSON: "+t)}}Object.defineProperty(n,"__esModule",{value:!0});var p=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.loadFiles=a,n.loadImages=s,n.loadTextures=u,n.loadProgram=c,n.loadModel=l,n.parseModel=f;var v=t("assert"),m=r(v),y=t("./platform"),g=t("../webgl"),_=t("../core")},{"../core":513,"../webgl":571,"./platform":539,assert:1}],537:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"png";return(0,c.default)((0,f.default)(t.data,[t.width,t.height,4],[4,4*t.width,1],0),e.replace("image/",""))}function o(t){return m(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.compressImage=i,n.loadImage=o;var a=t("get-pixels"),s=r(a),u=t("save-pixels"),c=r(u),l=t("ndarray"),f=r(l),h=t("fs"),p=t("../../utils"),d=t("../../globals"),v=r(d),m=(0,p.promisify)(s.default);v.default.globals.modules.getPixels=s.default,v.default.globals.modules.savePixels=c.default,v.default.globals.modules.ndarray=f.default,v.default.globals.nodeIO={readFile:h.readFile,writeFile:h.writeFile,compressImage:i,loadImage:o}},{"../../globals":529,"../../utils":561,fs:6,"get-pixels":460,ndarray:758,"save-pixels":964}],538:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("./headless-io");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return r[t]}})})},{"./headless-io":537}],539:[function(t,e,n){"use strict";var r=t("../utils");e.exports=t(r.isBrowser?"./browser":"./node")},{"../utils":561,"./browser":534,"./node":538}],540:[function(t,e,n){"use strict";function r(t){"epsilon"in t&&(g.glMatrix.EPSILON=t.epsilon),"debug"in t&&(g.glMatrix.debug=t.debug)}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.glMatrix.precision||4;return parseFloat(t.toPrecision(e))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&t.length}function a(t){return t.clone?t.clone():new Array(t)}function s(t,e){if(o(t)){for(var n=a(t),r=0;r<n.length;++r)n[r]=e(n[r],r,n);return n}return e(t)}function u(t){return s(t,function(t){return t/180*Math.PI})}function c(t){return s(t,function(t){return 180*t/Math.PI})}function l(t){return s(t,function(t){return Math.sin(t)})}function f(t){return s(t,function(t){return Math.cos(t)})}function h(t){return s(t,function(t){return Math.tan(t)})}function p(t){return s(t,function(t){return Math.asin(t)})}function d(t){return s(t,function(t){return Math.acos(t)})}function v(t){return s(t,function(t){return Math.atan(t)})}function m(t,e,n){return Math.max(e,Math.min(n,t))}function y(t,e){return Math.abs(t-e)<=g.glMatrix.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(n,"__esModule",{value:!0}),n.glMatrix=void 0,n.configure=r,n.formatValue=i,n.isArray=o,n.clone=a,n.radians=u,n.degrees=c,n.sin=l,n.cos=f,n.tan=h,n.asin=p,n.acos=d,n.atan=v,n.clamp=m,n.equals=y;var g=t("gl-matrix");g.glMatrix.debug=!0,g.glMatrix.printRowMajor=!0,n.glMatrix=g.glMatrix},{"gl-matrix":471}],541:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){return t>=0&&t<6}function u(t){if(t<0&&t>=6)throw new Error("Unknown Euler angle order");return t}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./math-array"),f=r(l),h=t("./common"),p=t("./matrix4"),d=t("./quaternion"),v=t("./vector3"),m=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.DefaultOrder;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return arguments.length>0&&Array.isArray(arguments[0])?s.fromVector3.apply(s,arguments):s.set(t,n,r,a),s}return a(e,t),c(e,[{key:"ELEMENTS",get:function(){return 4}}],[{key:"rotationOrder",value:function(t){return e.RotationOrders[t]}},{key:"ZYX",get:function(){return 0}},{key:"YXZ",get:function(){return 1}},{key:"XZY",get:function(){return 2}},{key:"ZXY",get:function(){return 3}},{key:"YZX",get:function(){return 4}},{key:"XYZ",get:function(){return 5}},{key:"RollPitchYaw",get:function(){return 0}},{key:"DefaultOrder",get:function(){return e.ZYX}},{key:"RotationOrders",get:function(){return["ZYX","YXZ","XZY","ZXY","YZX","XYZ"]}}]),c(e,[{key:"copy",value:function(t){for(var e=0;e<3;++e)this[e]=t[e];return this[3]=Number.isFinite(t[3])||this.order,this.check(),this}},{key:"set",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments[3];return this[0]=t,this[1]=e,this[2]=n,this[3]=Number.isFinite(r)?r:this[3],this.check(),this}},{key:"validate",value:function(){return s(this[3])&&Number.isFinite(this[0])&&Number.isFinite(this[1])&&Number.isFinite(this[2])}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t}},{key:"toArray4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this[0],t[e+1]=this[1],t[e+2]=this[2],t[e+3]=this[3],t}},{key:"toVector3",value:function(t){return t?t.set(this[0],this[1],this[2]):new v.Vector3(this[0],this[1],this[2])}},{key:"fromVector3",value:function(t,e){return this.set(t[0],t[1],t[2],Number.isFinite(e)?e:this[3])}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this[0]=t[0+e],this[1]=t[1+e],this[2]=t[2+e],void 0!==t[3]&&(this[3]=t[3]),this.check(),this}},{key:"fromRollPitchYaw",value:function(t,n,r){return this.set(t,n,r,e.ZYX)}},{key:"fromQuaternion",value:function(t,e){return this._fromRotationMatrix(p.Matrix4.fromQuaternion(t),e),this.check(),this}},{key:"fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder;return this._fromRotationMatrix(t,n),this.check(),this}},{key:"getRotationMatrix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new p.Matrix4;return this._getRotationMatrix(t),t}},{key:"getQuaternion",value:function(){var t=new d.Quaternion;switch(this[4]){case e.XYZ:return t.rotateX(this[0]).rotateY(this[1]).rotateZ(this[2]);case e.YXZ:return t.rotateY(this[0]).rotateX(this[1]).rotateZ(this[2]);case e.ZXY:return t.rotateZ(this[0]).rotateX(this[1]).rotateY(this[2]);case e.ZYX:return t.rotateZ(this[0]).rotateY(this[1]).rotateX(this[2]);case e.YZX:return t.rotateY(this[0]).rotateZ(this[1]).rotateX(this[2]);case e.XZY:return t.rotateX(this[0]).rotateZ(this[1]).rotateY(this[2]);default:throw new Error("Unknown Euler angle order")}}},{key:"_fromRotationMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.DefaultOrder,r=t.elements,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],c=r[9],l=r[2],f=r[6],p=r[10];switch(n=n||this[3]){case e.XYZ:this[1]=Math.asin((0,h.clamp)(a,-1,1)),Math.abs(a)<.99999?(this[0]=Math.atan2(-c,p),this[2]=Math.atan2(-o,i)):(this[0]=Math.atan2(f,u),this[2]=0);break;case e.YXZ:this[0]=Math.asin(-(0,h.clamp)(c,-1,1)),Math.abs(c)<.99999?(this[1]=Math.atan2(a,p),this[2]=Math.atan2(s,u)):(this[1]=Math.atan2(-l,i),this[2]=0);break;case e.ZXY:this[0]=Math.asin((0,h.clamp)(f,-1,1)),Math.abs(f)<.99999?(this[1]=Math.atan2(-l,p),this[2]=Math.atan2(-o,u)):(this[1]=0,this[2]=Math.atan2(s,i));break;case e.ZYX:this[1]=Math.asin(-(0,h.clamp)(l,-1,1)),Math.abs(l)<.99999?(this[0]=Math.atan2(f,p),this[2]=Math.atan2(s,i)):(this[0]=0,this[2]=Math.atan2(-o,u));break;case e.YZX:this[2]=Math.asin((0,h.clamp)(s,-1,1)),Math.abs(s)<.99999?(this[0]=Math.atan2(-c,u),this[1]=Math.atan2(-l,i)):(this[0]=0,this[1]=Math.atan2(a,p));break;case e.XZY:this[2]=Math.asin(-(0,h.clamp)(o,-1,1)),Math.abs(o)<.99999?(this[0]=Math.atan2(f,u),this[1]=Math.atan2(a,i)):(this[0]=Math.atan2(-c,p),this[1]=0);break;default:throw new Error("Unknown Euler angle order")}return this[3]=n,this}},{key:"_getRotationMatrix",value:function(){var t=new p.Matrix4,n=this.x,r=this.y,i=this.z,o=Math.cos(n),a=Math.cos(r),s=Math.cos(i),u=Math.sin(n),c=Math.sin(r),l=Math.sin(i);switch(this[3]){case e.XYZ:var f=o*s,h=o*l,d=u*s,v=u*l;t[0]=a*s,t[4]=-a*l,t[8]=c,t[1]=h+d*c,t[5]=f-v*c,t[9]=-u*a,t[2]=v-f*c,t[6]=d+h*c,t[10]=o*a;break;case e.YXZ:var m=a*s,y=a*l,g=c*s,_=c*l;t[0]=m+_*u,t[4]=g*u-y,t[8]=o*c,t[1]=o*l,t[5]=o*s,t[9]=-u,t[2]=y*u-g,t[6]=_+m*u,t[10]=o*a;break;case e.ZXY:var b=a*s,w=a*l,x=c*s,E=c*l;t[0]=b-E*u,t[4]=-o*l,t[8]=x+w*u,t[1]=w+x*u,t[5]=o*s,t[9]=E-b*u,t[2]=-o*c,t[6]=u,t[10]=o*a;break;case e.ZYX:var T=o*s,S=o*l,M=u*s,O=u*l;t[0]=a*s,t[4]=M*c-S,t[8]=T*c+O,t[1]=a*l,t[5]=O*c+T,t[9]=S*c-M,t[2]=-c,t[6]=u*a,t[10]=o*a;break;case e.YZX:var A=o*a,R=o*c,I=u*a,k=u*c;t[0]=a*s,t[4]=k-A*l,t[8]=I*l+R,t[1]=l,t[5]=o*s,t[9]=-u*s,t[2]=-c*s,t[6]=R*l+I,t[10]=A-k*l;break;case e.XZY:var P=o*a,N=o*c,C=u*a,D=u*c;t[0]=a*s,t[4]=-l,t[8]=c*s,t[1]=P*l+D,t[5]=o*s,t[9]=N*l-C,t[2]=C*l-N,t[6]=u*s,t[10]=D*l+P;break;default:throw new Error("Unknown Euler angle order")}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}},{key:"alpha",get:function(){return this[0]},set:function(t){return this[0]=(0,
h.checkNumber)(t)}},{key:"beta",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"gamma",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}},{key:"phi",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"theta",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"psi",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}},{key:"order",get:function(){return this[3]},set:function(t){return this[3]=u(t)}}]),e}(f.default);n.default=m},{"./common":540,"./math-array":543,"./matrix4":544,"./quaternion":545,"./vector3":549}],542:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n,r,i){t._assert(e.equals(n),{message:r||"should be equal",operator:"equal",actual:e,expected:n,extra:i})}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./common");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./vector2");Object.defineProperty(n,"Vector2",{enumerable:!0,get:function(){return r(a).default}});var s=t("./vector3");Object.defineProperty(n,"Vector3",{enumerable:!0,get:function(){return r(s).default}});var u=t("./vector4");Object.defineProperty(n,"Vector4",{enumerable:!0,get:function(){return r(u).default}});var c=t("./matrix4");Object.defineProperty(n,"Matrix4",{enumerable:!0,get:function(){return r(c).default}});var l=t("./quaternion");Object.defineProperty(n,"Quaternion",{enumerable:!0,get:function(){return r(l).default}});var f=t("./euler");Object.defineProperty(n,"Euler",{enumerable:!0,get:function(){return r(f).default}}),n.tapeEquals=i},{"./common":540,"./euler":541,"./matrix4":544,"./quaternion":545,"./vector2":548,"./vector3":549,"./vector4":550}],543:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./common"),c=function(t){function e(){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),s(e,[{key:"clone",value:function t(){var e=this.constructor,t=(new e).copy(this);return t.check(),t}},{key:"copy",value:function(t){for(var e=0;e<this.ELEMENTS;++e)this[e]=t[e];return this.check(),this}},{key:"set",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<this.ELEMENTS;++r)this[r]=e[r]||0;return this.check(),this}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)this[n]=t[n+e];return this.check(),this}},{key:"toString",value:function(){for(var t="",e=0;e<this.ELEMENTS;++e)t+=(e>0?", ":"")+(0,u.formatValue)(this[e]);return this.constructor.name+"("+t+")"}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<this.ELEMENTS;++n)t[e+n]=this[n];return t}},{key:"toFloat32Array",value:function(){return new Float32Array(this)}},{key:"equals",value:function(t){if(this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(!(0,u.equals)(this[e],t[e]))return!1;return!0}},{key:"exactEquals",value:function(t){if(this.length!==t.length)return!1;for(var e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}},{key:"validate",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,e=t.length===this.ELEMENTS,n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(t[n]);return e}},{key:"check",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(u.glMatrix.debug&&!this.validate(t))throw new Error("Invalid "+this.constructor.name)}}]),e}(a(Array));n.default=c},{"./common":540}],544:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("./math-array"),h=r(f),p=t("./common"),d=t("./vector2"),v=r(d),m=t("./vector3"),y=r(m),g=t("./vector4"),_=r(g),b=t("./utils/decorators"),w=t("gl-matrix"),x=t("./utils/validators"),E=(u=function(t){function e(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Array.isArray(n[0])&&1===arguments.length?a.copy(n[0]):a.identity(),a}return a(e,t),l(e,[{key:"setRowMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return w.mat4.set(this,t,i,u,h,e,o,c,p,n,a,l,d,r,s,f,v),this.check(),this}},{key:"setColumnMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0,h=arguments.length>12&&void 0!==arguments[12]?arguments[12]:0,p=arguments.length>13&&void 0!==arguments[13]?arguments[13]:0,d=arguments.length>14&&void 0!==arguments[14]?arguments[14]:0,v=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;return w.mat4.set(this,t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v),this.check(),this}},{key:"equals",value:function(t){return w.mat4.equals(this,t)}},{key:"exactEquals",value:function(t){return w.mat4.exactEquals(this,t)}},{key:"toString",value:function(){p.glMatrix.printRowMajor?w.mat4.str(this):w.mat4.str(this)}},{key:"determinant",value:function(){return w.mat4.determinant(this)}},{key:"getRotation",value:function(){}},{key:"identity",value:function(){return w.mat4.identity(this),this.check(),this}},{key:"frustum",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=t.far;return w.mat4.frustum(this,e,n,r,i,o,a),this.check(),this}},{key:"lookAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.eye,n=t.center,r=void 0===n?[0,0,0]:n,i=t.up,o=void 0===i?[0,1,0]:i;return w.mat4.lookAt(this,e,r,o),this.check(),this}},{key:"ortho",value:function(t){var e=t.left,n=t.right,r=t.bottom,i=t.top,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;return w.mat4.ortho(this,e,n,r,i,a,u),this.check(),this}},{key:"perspective",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fov,n=void 0===e?45*Math.PI/180:e,r=t.aspect,i=void 0===r?1:r,o=t.near,a=void 0===o?.1:o,s=t.far,u=void 0===s?500:s;if(n>2*Math.PI)throw Error("radians");return w.mat4.perspective(this,n,i,a,u),this.check(),this}},{key:"perspectiveFromFieldOfView",value:function(t,e,n,r){return w.mat4.perspectiveFromFieldOfView(t,e,n,r),this.check(),this}},{key:"fromQuaternion",value:function(t){return w.mat4.fromQuat(this,t),this.check(),this}},{key:"fromQuat",value:function(t){return w.mat4.fromQuat(this,t),this.check(),this}},{key:"fromRotation",value:function(t,e){return w.mat4.fromRotation(this,t,e),this.check(),this}},{key:"fromRotationTranslation",value:function(t,e){return w.mat4.fromRotationTranslation(this,t,e),this.check(),this}},{key:"fromRotationTranslationScale",value:function(t,e,n){return w.mat4.fromRotationTranslationScale(this,t,e,n),this.check(),this}},{key:"fromRotationTranslationScaleOrigin",value:function(t,e,n,r){return w.mat4.fromRotationTranslationScaleOrigin(this,t,e,n,r),this.check(),this}},{key:"fromScaling",value:function(t){return w.mat4.fromScaling(this,t),this.check(),this}},{key:"fromTranslation",value:function(t){return w.mat4.fromTranslation(this,t),this.check(),this}},{key:"fromXRotation",value:function(t){return w.mat4.fromXRotation(this,t),this.check(),this}},{key:"fromYRotation",value:function(t){return w.mat4.fromYRotation(this,t),this.check(),this}},{key:"fromZRotation",value:function(t){return w.mat4.fromZRotation(this,t),this.check(),this}},{key:"transpose",value:function(){return w.mat4.transpose(this,this),this.check(),this}},{key:"invert",value:function(){return w.mat4.invert(this,this),this.check(),this}},{key:"adjoint",value:function(){return w.mat4.adjoint(this,this),this.check(),this}},{key:"add",value:function(t,e){return w.mat4.add(this,this,t),this.check(),this}},{key:"multiplyLeft",value:function(t){return w.mat4.multiply(this,t,this),this.check(),this}},{key:"multiplyRight",value:function(t){return w.mat4.multiply(this,this,t),this.check(),this}},{key:"rotateX",value:function(t){return w.mat4.rotateX(this,this,t),this.check(),this}},{key:"rotateY",value:function(t){return w.mat4.rotateY(this,this,t),this.check(),this}},{key:"rotateZ",value:function(t){return w.mat4.rotateZ(this,this,t),this.check(),this}},{key:"rotateXYZ",value:function(t){var e=c(t,3),n=e[0],r=e[1],i=e[2],o=this[0],a=this[1],s=this[2],u=this[3],l=this[4],f=this[5],h=this[6],p=this[7],d=this[8],v=this[9],m=this[10],y=this[11],g=Math.cos(n),_=Math.cos(r),b=Math.cos(i),w=Math.sin(n),x=Math.sin(r),E=Math.sin(i),T=_*b,S=-g*E+w*x*b,M=w*E+g*x*b,O=_*E,A=g*b+w*x*E,R=-w*b+g*x*E,I=-x,k=w*_,P=g*_;return this[0]=o*T+l*O+d*I,this[1]=a*T+f*O+v*I,this[2]=s*T+h*O+m*I,this[3]=u*T+p*O+y*I,this[4]=o*S+l*A+d*k,this[5]=a*S+f*A+v*k,this[6]=s*S+h*A+m*k,this[7]=u*S+p*A+y*k,this[8]=o*M+l*R+d*P,this[9]=a*M+f*R+v*P,this[10]=s*M+h*R+m*P,this[11]=u*M+p*R+y*P,this.check(),this}},{key:"scale",value:function(t){return w.mat4.scale(this,this,t),this.check(),this}},{key:"translate",value:function(t){return w.mat4.translate(this,this,t),this.check(),this}},{key:"transformVector2",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new v.default;return w.vec2.transformMat4(e,t,this),(0,x.checkVector2)(e),e}},{key:"transformVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new y.default;return w.vec3.transformMat4(e,t,this),(0,x.checkVector3)(e),e}},{key:"transformVector4",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new _.default;return w.vec4.transformMat4(e,t,this),(0,x.checkVector4)(e),e}},{key:"transformVector",value:function(t){switch(t.length){case 2:return this.transformVector2(t);case 3:return this.transformVector3(t);case 4:return this.transformVector4(t);default:throw new Error("Illegal vector")}}},{key:"ELEMENTS",get:function(){return 16}},{key:"m00",get:function(){return this[0]},set:function(t){return this[0]=(0,p.checkNumber)(t)}},{key:"m01",get:function(){return this[4]},set:function(t){return this[4]=(0,p.checkNumber)(t)}},{key:"m02",get:function(){return this[8]},set:function(t){return this[8]=(0,p.checkNumber)(t)}},{key:"m03",get:function(){return this[12]},set:function(t){return this[12]=(0,p.checkNumber)(t)}},{key:"m10",get:function(){return this[1]},set:function(t){return this[1]=(0,p.checkNumber)(t)}},{key:"m11",get:function(){return this[5]},set:function(t){return this[5]=(0,p.checkNumber)(t)}},{key:"m12",get:function(){return this[9]},set:function(t){return this[9]=(0,p.checkNumber)(t)}},{key:"m13",get:function(){return this[13]},set:function(t){return this[13]=(0,p.checkNumber)(t)}},{key:"m20",get:function(){return this[2]},set:function(t){return this[2]=(0,p.checkNumber)(t)}},{key:"m21",get:function(){return this[6]},set:function(t){return this[6]=(0,p.checkNumber)(t)}},{key:"m22",get:function(){return this[10]},set:function(t){return this[10]=(0,p.checkNumber)(t)}},{key:"m23",get:function(){return this[14]},set:function(t){return this[14]=(0,p.checkNumber)(t)}},{key:"m30",get:function(){return this[3]},set:function(t){return this[3]=(0,p.checkNumber)(t)}},{key:"m31",get:function(){return this[7]},set:function(t){return this[7]=(0,p.checkNumber)(t)}},{key:"m32",get:function(){return this[11]},set:function(t){return this[11]=(0,p.checkNumber)(t)}},{key:"m33",get:function(){return this[15]},set:function(t){return this[15]=(0,p.checkNumber)(t)}}]),e}(h.default),s(u.prototype,"equals",[b.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[b.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"toString",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"toString"),u.prototype),s(u.prototype,"determinant",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"determinant"),u.prototype),s(u.prototype,"lookAt",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"lookAt"),u.prototype),s(u.prototype,"ortho",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"ortho"),u.prototype),s(u.prototype,"perspective",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"perspective"),u.prototype),s(u.prototype,"perspectiveFromFieldOfView",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"perspectiveFromFieldOfView"),u.prototype),s(u.prototype,"transpose",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"transpose"),u.prototype),s(u.prototype,"invert",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"invert"),u.prototype),s(u.prototype,"adjoint",[b.unary],Object.getOwnPropertyDescriptor(u.prototype,"adjoint"),u.prototype),s(u.prototype,"add",[b.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"multiplyLeft",[b.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiplyLeft"),u.prototype),s(u.prototype,"multiplyRight",[b.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiplyRight"),u.prototype),s(u.prototype,"scale",[b.binary],Object.getOwnPropertyDescriptor(u.prototype,"scale"),u.prototype),s(u.prototype,"translate",[b.binary],Object.getOwnPropertyDescriptor(u.prototype,"translate"),u.prototype),u);n.default=E},{"./common":540,"./math-array":543,"./utils/decorators":546,"./utils/validators":547,"./vector2":548,"./vector3":549,"./vector4":550,"gl-matrix":471}],545:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./math-array"),f=r(l),h=t("./common"),p=t("gl-matrix"),d=t("./utils/decorators"),v=(u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Array.isArray(t)&&1===arguments.length?s.copy(t):s.set(t,n,r,a),s}return a(e,t),c(e,[{key:"fromMatrix3",value:function(t){return p.quat.fromMat3(this,t),this.check(),this}},{key:"fromValues",value:function(t,e,n,r){return this.set(t,e,n,r)}},{key:"identity",value:function(){return p.quat.identity(this),this.check(),this}},{key:"equals",value:function(t){return p.quat.equals(this,t)}},{key:"exactEquals",value:function(t){return p.quat.exactEquals(this,t)}},{key:"length",value:function(){return p.quat.length(this)}},{key:"squaredLength",value:function(t){return p.quat.squaredLength(this)}},{key:"dot",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.dot only takes one argument");return p.quat.dot(this,t)}},{key:"getAxisAngle",value:function(){var t=[];return{axis:t,angle:p.quat.getAxisAngle(t,this)}}},{key:"rotationTo",value:function(t,e){return p.quat.rotationTo(this,t,e),this.check(),this}},{key:"add",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.add only takes one argument");return p.quat.add(this,t),this.check(),this}},{key:"calculateW",value:function(){return p.quat.calculateW(this,this),this.check(),this}},{key:"conjugate",value:function(){return p.quat.conjugate(this,this),this.check(),this}},{key:"invert",value:function(){return p.quat.invert(this,this),this.check(),this}},{key:"lerp",value:function(t,e,n){return p.quat.lerp(this,t,e,n),this.check(),this}},{key:"multiply",value:function(t,e){if(void 0!==e)throw new Error("Quaternion.multiply only takes one argument");return p.quat.multiply(this,this,e),this.check(),this}},{key:"normalize",value:function(){return p.quat.normalize(this,this),this.check(),this}},{key:"rotateX",value:function(t){return p.quat.rotateX(this,this,t),this.check(),this}},{key:"rotateY",value:function(t){return p.quat.rotateY(this,this,t),this.check(),this}},{key:"rotateZ",value:function(t){return p.quat.rotateZ(this,this,t),this.check(),this}},{key:"scale",value:function(t){return p.quat.scale(this,this,t),this.check(),this}},{key:"set",value:function(t,e,n,r){return p.quat.set(this,t,e,n,r),this.check(),this}},{key:"setAxisAngle",value:function(t,e){return p.quat.setAxisAngle(this,t,e),this.check(),this}},{key:"slerp",value:function(t,e,n){return p.quat.slerp(this,t,e,n),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=(0,h.checkNumber)(t)}}]),e}(f.default),s(u.prototype,"equals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"add",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"multiply",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"normalize",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),u);n.default=v},{"./common":540,"./math-array":543,"./utils/decorators":546,"gl-matrix":471}],546:[function(t,e,n){"use strict";function r(t){return Array.isArray(t)?t:Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){if(!t||!t.hasOwnProperty)return!1;for(var e=["value","initializer","get","set"],n=0,r=e.length;n<r;n++)if(t.hasOwnProperty(e[n]))return!0;return!1}function a(t,e){return o(t[t.length-1])?e.apply(void 0,i(t).concat([[]])):function(){return e.apply(void 0,Array.prototype.slice.call(arguments).concat([t]))}}function s(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(e,function(t,e,n,i){var o=(r(i),t.constructor);return o[e]=function(){var t;return(t=new o)[e].apply(t,arguments)},f({},n,{value:function(){return n.value.apply(this,arguments)}})})}function u(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(e,function(t,e,n,i){var o=(r(i),t.constructor);return o[e]=function(){var t;return(t=new o)[e].apply(t,arguments)},f({},n,{value:function(){return n.value.apply(this,arguments)}})})}function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(e,function(t,e,n,i){var o=(r(i),t.constructor);return o[e]=function(t,n){return(new o).copy(t)[e](n)},f({},n,{value:function(){return n.value.apply(this,arguments)}})})}function l(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return a(e,function(t,e,n,i){var o=(r(i),t.constructor);return o[e]=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce(function(t,n){return t[e](n)},(new o).copy(t))},f({},n,{value:function(){return n.value.apply(this,arguments)}})})}Object.defineProperty(n,"__esModule",{value:!0});var f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};n.unary=s,n.staticMethod=u,n.binary=c,n.spread=l},{}],547:[function(t,e,n){"use strict";function r(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0;r<e.length;++r)if(void 0===e[r])throw new Error("Invalid math argument")}function i(t){return 2===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])}function o(t){if(b.glMatrix.debug&&!i(t))throw new Error("Invalid Vector2")}function a(t){return 3===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])}function s(t){if(b.glMatrix.debug&&!a(t))throw new Error("Invalid Vector3")}function u(t){return 4===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])}function c(t){if(b.glMatrix.debug&&!u(t))throw new Error("Invalid Vector4")}function l(t){return 4===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])}function f(t){if(b.glMatrix.debug&&!l(t))throw new Error("Invalid Quaternion")}function h(t){return 4===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])}function p(t){if(b.glMatrix.debug&&!h(t))throw new Error("Invalid Matrix2")}function d(t){return 6===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])&&Number.isFinite(t[4])&&Number.isFinite(t[5])}function v(t){if(b.glMatrix.debug&&!d(t))throw new Error("Invalid Matrix2d")}function m(t){return 9===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])&&Number.isFinite(t[4])&&Number.isFinite(t[5])&&Number.isFinite(t[6])&&Number.isFinite(t[7])&&Number.isFinite(t[8])}function y(t){if(b.glMatrix.debug&&!m(t))throw new Error("Invalid Matrix3")}function g(t){return 16===t.length&&Number.isFinite(t[0])&&Number.isFinite(t[1])&&Number.isFinite(t[2])&&Number.isFinite(t[3])&&Number.isFinite(t[4])&&Number.isFinite(t[5])&&Number.isFinite(t[6])&&Number.isFinite(t[7])&&Number.isFinite(t[8])&&Number.isFinite(t[9])&&Number.isFinite(t[10])&&Number.isFinite(t[11])&&Number.isFinite(t[12])&&Number.isFinite(t[13])&&Number.isFinite(t[14])&&Number.isFinite(t[15])}function _(t){if(b.glMatrix.debug&&!g(t))throw new Error("Invalid Matrix4")}Object.defineProperty(n,"__esModule",{value:!0}),n.checkArguments=r,n.validateVector2=i,n.checkVector2=o,n.validateVector3=a,n.checkVector3=s,n.validateVector4=u,n.checkVector4=c,n.validateQuaternion=l,n.checkQuaternion=f,n.validateMatrix2=h,n.checkMatrix2=p,n.validateMatrix2d=d,n.checkMatrix2d=v,n.validateMatrix3=m,n.checkMatrix3=y,n.validateMatrix4=g,n.checkMatrix4=_;var b=t("gl-matrix")},{"gl-matrix":471}],548:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./math-array"),f=r(l),h=t("./common"),p=t("gl-matrix"),d=t("./utils/decorators"),v=(u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;i(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Array.isArray(t)&&1===arguments.length?r.copy(t):r.set(t,n),r}return a(e,t),c(e,[{key:"set",value:function(t,e){return p.vec2.set(this,t,e),this.check(),this}},{key:"equals",value:function(t){return p.vec2.equals(this,t)}},{key:"exactEquals",value:function(t){return p.vec2.exactEquals(this,t)}},{key:"add",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec2.add(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this}},{key:"ELEMENTS",get:function(){return 2}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}}]),e}(f.default),s(u.prototype,"equals",[d.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[d.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"add",[d.staticMethod],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),u);n.default=v},{"./common":540,"./math-array":543,"./utils/decorators":546,"gl-matrix":471}],549:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}
}(),l=t("./math-array"),f=r(l),h=t("./common"),p=t("gl-matrix"),d=t("./utils/decorators"),v=(u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e);var a=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Array.isArray(t)&&1===arguments.length?a.copy(t):a.set(t,n,r),a}return a(e,t),c(e,[{key:"set",value:function(t,e,n){return p.vec3.set(this,t,e,n),this.check(),this}},{key:"equals",value:function(t){return p.vec3.equals(this,t)}},{key:"exactEquals",value:function(t){return p.vec3.exactEquals(this,t)}},{key:"distance",value:function(t){return p.vec3.distance(t)}},{key:"dist",value:function(t){return p.vec3.dist(t)}},{key:"angle",value:function(t){return p.vec3.angle(t)}},{key:"add",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec3.add(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec3.subtract(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec3.multiply(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec3.divide(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"ceil",value:function(){return p.vec3.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return p.vec3.floor(this,this),this.check(),this}},{key:"min",value:function(){return p.vec3.min(this,this),this.check(),this}},{key:"max",value:function(){return p.vec3.max(this,this),this.check(),this}},{key:"scale",value:function(t){return p.vec3.scale(this,this,t),this.check(),this}},{key:"scaleAndAdd",value:function(t,e){return p.vec3.scaleAndAdd(this,this,t,e),this.check(),this}},{key:"negate",value:function(){return p.vec3.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return p.vec3.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return p.vec3.normalize(this,this),this.check(),this}},{key:"dot",value:function(t){return p.vec3.dot(this,this,t),this.check(),this}},{key:"cross",value:function(t){return p.vec3.cross(this,this,t),this.check(),this}},{key:"lerp",value:function(t){return p.vec3.lerp(this,this,t),this.check(),this}},{key:"hermite",value:function(t){return p.vec3.hermite(this,this,t),this.check(),this}},{key:"bezier",value:function(t){return p.vec3.bezier(this,this,t),this.check(),this}},{key:"random",value:function(t){return p.vec3.cross(this,this,t),this.check(),this}},{key:"rotateX",value:function(t,e){return p.vec3.rotateX(this,this,t,e),this.check(),this}},{key:"rotateY",value:function(t,e){return p.vec3.rotateY(this,this,t,e),this.check(),this}},{key:"rotateZ",value:function(t,e){return p.vec3.rotateZ(this,this,t,e),this.check(),this}},{key:"ELEMENTS",get:function(){return 3}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}}]),e}(f.default),s(u.prototype,"equals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"distance",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"distance"),u.prototype),s(u.prototype,"dist",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"dist"),u.prototype),s(u.prototype,"angle",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"angle"),u.prototype),s(u.prototype,"add",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"subtract",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"subtract"),u.prototype),s(u.prototype,"multiply",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"divide",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"divide"),u.prototype),s(u.prototype,"ceil",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"ceil"),u.prototype),s(u.prototype,"floor",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"floor"),u.prototype),s(u.prototype,"min",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"min"),u.prototype),s(u.prototype,"max",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"max"),u.prototype),s(u.prototype,"scale",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"scale"),u.prototype),s(u.prototype,"negate",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"negate"),u.prototype),s(u.prototype,"inverse",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"inverse"),u.prototype),s(u.prototype,"normalize",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),s(u.prototype,"dot",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"dot"),u.prototype),s(u.prototype,"cross",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"cross"),u.prototype),u);n.default=v},{"./common":540,"./math-array":543,"./utils/decorators":546,"gl-matrix":471}],550:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./math-array"),f=r(l),h=t("./common"),p=t("gl-matrix"),d=t("./utils/decorators"),v=(u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,e);var s=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return Array.isArray(t)&&1===arguments.length?s.copy(t):s.set(t,n,r,a),s}return a(e,t),c(e,[{key:"set",value:function(t,e,n,r){return p.vec4.set(this,t,e,n,r),this.check(),this}},{key:"equals",value:function(t){return p.vec4.equals(this,t)}},{key:"exactEquals",value:function(t){return p.vec4.exactEquals(this,t)}},{key:"distance",value:function(t){return p.vec4.distance(t)}},{key:"dist",value:function(t){return p.vec4.dist(t)}},{key:"angle",value:function(t){return p.vec4.angle(t)}},{key:"add",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec4.add(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"subtract",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec4.subtract(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"multiply",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec4.multiply(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"divide",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;p.vec4.divide(this,u)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.check(),this}},{key:"ceil",value:function(){return p.vec4.ceil(this,this),this.check(),this}},{key:"floor",value:function(){return p.vec4.floor(this,this),this.check(),this}},{key:"min",value:function(){return p.vec4.min(this,this),this.check(),this}},{key:"max",value:function(){return p.vec4.max(this,this),this.check(),this}},{key:"scale",value:function(t){return p.vec4.scale(this,this,t),this.check(),this}},{key:"scaleAndAdd",value:function(t,e){return p.vec4.scaleAndAdd(this,this,t,e),this.check(),this}},{key:"negate",value:function(){return p.vec4.negate(this,this),this.check(),this}},{key:"inverse",value:function(){return p.vec4.inverse(this,this),this.check(),this}},{key:"normalize",value:function(){return p.vec4.normalize(this,this),this.check(),this}},{key:"dot",value:function(t){return p.vec4.dot(this,this,t),this.check(),this}},{key:"cross",value:function(t){return p.vec4.cross(this,this,t),this.check(),this}},{key:"lerp",value:function(t){return p.vec4.lerp(this,this,t),this.check(),this}},{key:"hermite",value:function(t){return p.vec4.hermite(this,this,t),this.check(),this}},{key:"bezier",value:function(t){return p.vec4.bezier(this,this,t),this.check(),this}},{key:"random",value:function(t){return p.vec4.random(this,this,t),this.check(),this}},{key:"rotateX",value:function(t,e){return p.vec4.rotateX(this,this,t,e),this.check(),this}},{key:"rotateY",value:function(t,e){return p.vec4.rotateY(this,this,t,e),this.check(),this}},{key:"rotateZ",value:function(t,e){return p.vec4.rotateZ(this,this,t,e),this.check(),this}},{key:"ELEMENTS",get:function(){return 4}},{key:"x",get:function(){return this[0]},set:function(t){return this[0]=(0,h.checkNumber)(t)}},{key:"y",get:function(){return this[1]},set:function(t){return this[1]=(0,h.checkNumber)(t)}},{key:"z",get:function(){return this[2]},set:function(t){return this[2]=(0,h.checkNumber)(t)}},{key:"w",get:function(){return this[3]},set:function(t){return this[3]=(0,h.checkNumber)(t)}}]),e}(f.default),s(u.prototype,"equals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"equals"),u.prototype),s(u.prototype,"exactEquals",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"exactEquals"),u.prototype),s(u.prototype,"distance",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"distance"),u.prototype),s(u.prototype,"dist",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"dist"),u.prototype),s(u.prototype,"angle",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"angle"),u.prototype),s(u.prototype,"add",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"add"),u.prototype),s(u.prototype,"subtract",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"subtract"),u.prototype),s(u.prototype,"multiply",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"multiply"),u.prototype),s(u.prototype,"divide",[d.spread],Object.getOwnPropertyDescriptor(u.prototype,"divide"),u.prototype),s(u.prototype,"negate",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"negate"),u.prototype),s(u.prototype,"inverse",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"inverse"),u.prototype),s(u.prototype,"normalize",[d.unary],Object.getOwnPropertyDescriptor(u.prototype,"normalize"),u.prototype),s(u.prototype,"dot",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"dot"),u.prototype),s(u.prototype,"cross",[d.binary],Object.getOwnPropertyDescriptor(u.prototype,"cross"),u.prototype),u);n.default=v},{"./common":540,"./math-array":543,"./utils/decorators":546,"gl-matrix":471}],551:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=t("../core"),c=t("../webgl"),l=[-1,-1,1,-1,-1,1,1,1],f=l.map(function(t){return t===-1?0:t}),h=function(t){function e(t){var n=t.gl,a=r(t,["gl"]);i(this,e);var h=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,s({gl:n},a,{vs:"attribute vec2 aClipSpacePosition;\nattribute vec2 aTexCoord;\nattribute vec2 aCoordinate;\n\nvarying vec2 position;\nvarying vec2 coordinate;\nvarying vec2 uv;\n\nvoid main(void) {\n  gl_Position = vec4(aClipSpacePosition, 0., 1.);\n  position = aClipSpacePosition;\n  coordinate = aCoordinate;\n  uv = aTexCoord;\n}\n",geometry:new u.Geometry({drawMode:c.GL.TRIANGLE_STRIP,attributes:{aClipSpacePosition:{value:new Float32Array(l),size:2},aTexCoord:{value:new Float32Array(f),size:2},aCoordinate:{value:new Float32Array(f),size:2}}})})));return h.setVertexCount(4),h}return a(e,t),e}(u.Model);n.default=h},{"../core":513,"../webgl":571}],552:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./clip-space-quad");Object.defineProperty(n,"ClipSpaceQuad",{enumerable:!0,get:function(){return r(i).default}})},{"./clip-space-quad":551}],553:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./object-3d"),f=r(l),h=t("../deprecated"),p=t("assert"),d=r(p),v=function(t){function e(t){var n=t.children,r=void 0===n?[]:n,i=o(t,["children"]);a(this,e),r.every(function(t){return(0,d.default)(t instanceof f.default)});var u=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i));return u.children=r,u}return u(e,t),c(e,[{key:"add",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;Array.isArray(c)?this.add.apply(this,i(c)):this.children.push(c)}}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return this}},{key:"remove",value:function(t){var e=this.children,n=e.indexOf(t);return n>-1&&e.splice(n,1),this}},{key:"removeAll",value:function(){return this.children=[],this}},{key:"traverse",value:regeneratorRuntime.mark(function t(){var n,r,i,o,a,s,u,c,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=l.viewMatrix,p=void 0===f?new h.Mat4:f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=!0,r=!1,i=void 0,t.prev=3,o=this.children[Symbol.iterator]();case 5:if(n=(a=o.next()).done){t.next=19;break}if(s=a.value,u=s.matrix,c=p.mulMat4(u),!(s instanceof e)){t.next=13;break}return t.delegateYield(s.traverse({matrix:u,worldMatrix:c}),"t0",11);case 11:t.next=16;break;case 13:return s.program&&(s.program.use(),s.program.setUniforms({worldMatrix:c})),t.next=16,s;case 16:n=!0,t.next=5;break;case 19:t.next=25;break;case 21:t.prev=21,t.t1=t.catch(3),r=!0,i=t.t1;case 25:t.prev=25,t.prev=26,!n&&o.return&&o.return();case 28:if(t.prev=28,!r){t.next=31;break}throw i;case 31:return t.finish(28);case 32:return t.finish(25);case 33:case"end":return t.stop()}},t,this,[[3,21,25,33],[26,,28,32]])})},{key:"traverseReverse",value:regeneratorRuntime.mark(function t(){var n,r,i,o,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=a.viewMatrix,u=void 0===s?new h.Mat4:s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.children.length-1;case 1:if(!(n>=0)){t.next=15;break}if(r=this.children[n],i=r.matrix,o=u.mulMat4(i),!(r instanceof e)){t.next=9;break}return t.delegateYield(r.traverseReverse({matrix:i,worldMatrix:o}),"t0",7);case 7:t.next=12;break;case 9:return r.program&&(r.program.use(),r.program.setUniforms({worldMatrix:o})),t.next=12,r;case 12:--n,t.next=1;break;case 15:case"end":return t.stop()}},t,this)})}]),e}(f.default);n.default=v},{"../deprecated":517,"./object-3d":555,assert:1}],554:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./object-3d");Object.defineProperty(n,"Object3D",{enumerable:!0,get:function(){return r(i).default}});var o=t("./group");Object.defineProperty(n,"Group",{enumerable:!0,get:function(){return r(o).default}});var a=t("./scene");Object.defineProperty(n,"Scene",{enumerable:!0,get:function(){return r(a).default}});var s=t("./pick");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})})},{"./group":553,"./object-3d":555,"./pick":556,"./scene":557}],555:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../deprecated"),s=t("assert"),u=r(s),c=t("../utils"),l=function(){function t(e){var n=e.id;e.display;i(this,t),this.position=new a.Vec3,this.rotation=new a.Vec3,this.scale=new a.Vec3(1,1,1),this.matrix=new a.Mat4,this.id=n||(0,c.uid)(this.constructor.name),this.display=!0,this.userData={}}return o(t,[{key:"setPosition",value:function(t){return(0,u.default)(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return(0,u.default)(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return(0,u.default)(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrixComponents",value:function(t){var e=t.position,n=t.rotation,r=t.scale,i=t.update,o=void 0===i||i;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),o&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,n=this.scale;return this.matrix.id(),this.matrix.$translate(t[0],t[1],t[2]),this.matrix.$rotateXYZ(e[0],e[1],e[2]),this.matrix.$scale(n[0],n[1],n[2]),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,n=t.rotation,r=t.scale;return e&&this.setPosition(e),n&&this.setRotation(n),r&&this.setScale(r),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){(0,u.default)(t),e=e||this.matrix;var n=(new a.Mat4).copy(t).mulMat4(e),r=n.invert();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:n,worldInverseMatrix:r,worldInverseTransposeMatrix:r.transpose()}}},{key:"transform",value:function(){if(this.parent){var t=this.parent;this.endPosition.setVec3(this.position.add(t.endPosition)),this.endRotation.setVec3(this.rotation.add(t.endRotation)),this.endScale.setVec3(this.scale.add(t.endScale))}else this.endPosition.setVec3(this.position),this.endRotation.setVec3(this.rotation),this.endScale.setVec3(this.scale);for(var e=this.children,n=0;n<e.length;++n)e[n].transform();return this}}]),t}();n.default=l},{"../deprecated":517,"../utils":561,assert:1}],556:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e.group,r=e.uniforms,i=e.x,s=e.y,c=e.pickingFBO,f=void 0===c?null:c;e.pickingProgram,e.pickingColors;(0,a.assertWebGLContext)(t),(0,l.default)(n instanceof u.default,"Illegal argument to pick");var h="undefined"!=typeof window?window.devicePixelRatio:1,p=i*h,d=t.canvas.height-s*h;return f=f||new o.Framebuffer(t,{width:t.canvas.width,height:t.canvas.height}),(0,o.glContextWithState)(t,{frameBuffer:f,scissorTest:{x:p,y:d,w:1,h:1}},function(){var e=!0,a=!1,u=void 0;try{for(var c,l=n.traverseReverse()[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){var f=c.value;if(f.isPickable()){t.clear(o.GL.COLOR_BUFFER_BIT|o.GL.DEPTH_BUFFER_BIT),f.setUniforms({renderPickingBuffer:1,enablePicking:!0}),f.render(r),f.setUniforms({renderPickingBuffer:!1,enablePicking:!1});var h=new Uint8Array(4);t.readPixels(p,d,1,1,t.RGBA,t.UNSIGNED_BYTE,h);if(0!==h[0]||0!==h[1]||0!==h[2]||0!==h[3])return{model:f,color:h,x:i,y:s,deviceX:p,deviceY:d}}}}catch(t){a=!0,u=t}finally{try{!e&&l.return&&l.return()}finally{if(a)throw u}}return null})}Object.defineProperty(n,"__esModule",{value:!0}),n.pickModels=i;var o=t("../webgl"),a=t("../webgl/webgl-checks"),s=t("./group"),u=r(s),c=t("assert"),l=r(c)},{"../webgl":571,"../webgl/webgl-checks":582,"./group":553,assert:1}],557:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("../core/config"),h=i(f),p=t("../math"),d=t("../utils"),v=t("./group"),m=r(v),y=t("./pick"),g=t("assert"),_=r(g),b={lights:{enable:!1,ambient:{r:.2,g:.2,b:.2},directional:{direction:{x:1,y:1,z:1},color:{r:0,g:0,b:0}}},effects:{fog:!1},clearColor:!0,clearDepth:!0,backgroundColor:{r:0,g:0,b:0,a:1},backgroundDepth:1},w=function(t){function e(t,n){a(this,e),(0,_.default)(t,"LumaGL.Scene invalid argument"),n=(0,d.merge)(b,n);var r=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n));return r.gl=t,r.config=n,r.needsRedraw=!1,Object.seal(r),r}return u(e,t),l(e,[{key:"setNeedsRedraw",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.needsRedraw=t,this}},{key:"getNeedsRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.clearRedrawFlags,n=void 0!==e&&e,r=!1;r=r||this.needsRedraw,this.needsRedraw=this.needsRedraw&&!n;var i=!0,o=!1,a=void 0;try{for(var s,u=this.traverse()[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r||c.getNeedsRedraw({clearRedrawFlags:n})}}catch(t){o=!0,a=t}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return r}},{key:"clear",value:function(){var t=this.gl;if(this.config.clearColor){var e=this.config.backgroundColor;t.clearColor(e.r,e.g,e.b,e.a)}return this.config.clearDepth&&t.clearDepth(this.config.backgroundDepth),this.config.clearColor&&this.config.clearDepth?t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT):this.config.clearColor?t.clear(t.COLOR_BUFFER_BIT):this.config.clearDepth&&t.clear(t.DEPTH_BUFFER_BIT),this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clear();var e=!0,n=!1,r=void 0;try{for(var i,o=this.traverse()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.display&&this.renderObject({model:a,uniforms:t})}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return this}},{key:"renderObject",value:function(t){var e=t.model,n=t.uniforms;return e.render(c({},this.getSceneUniforms(),n)),this}},{key:"pickModels",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.x,n=t.y,r=t.uniforms,i=void 0===r?{}:r,a=o(t,["x","y","uniforms"]);return(0,y.pickModels)(this.gl,c({group:this,x:e,y:n,uniforms:c({},i)},a))}},{key:"getSceneUniforms",value:function(){var t=this.config.lights,e=t.enable,n=t.ambient,r=t.directional,i=t.points;return c({},this.getEffectsUniforms(),{enableLights:e},e&&n?this.getAmbientUniforms(n):{},e&&r?this.getDirectionalUniforms(r):{},e&&i?this.getPointUniforms(i):{})}},{key:"getAmbientUniforms",value:function(t){return{ambientColor:[t.r,t.g,t.b]}}},{key:"getDirectionalUniforms",value:function(t){var e=t.color,n=t.direction,r=new p.Vector3(n.x,n.y,n.z).normalize().scale(-1,-1,-1);return{directionalColor:[e.r,e.g,e.b],lightingDirection:[r.x,r.y,r.z]}}},{key:"getPointUniforms",value:function(t){t=t instanceof Array?t:[t];var e=t.length,n={numberPoints:e},r=[],i=[],o=[],a=[],s=!0,u=!1,c=void 0;try{for(var l,f=t[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,p=h.position,d=h.color,v=h.diffuse,m=h.specular,y=d||v;r.push(p.x,p.y,p.z),i.push(y.r,y.g,y.b),o.push(Number(Boolean(m))),m?a.push(m.r,m.g,m.b):a.push(0,0,0)}}catch(t){u=!0,c=t}finally{try{!s&&f.return&&f.return()}finally{if(u)throw c}}return r.length&&Object.assign(n,{pointLocation:r,pointColor:i,enableSpecular:o,pointSpecularColor:a}),n}},{key:"getEffectsUniforms",value:function(){var t=this.config.effects.fog;if(t){var e=t.color,n=void 0===e?{r:.5,g:.5,b:.5}:e;return{hasFog:!0,fogNear:t.near,fogFar:t.far,fogColor:[n.r,n.g,n.b]}}return{hasFog:!1}}}]),e}(m.default);n.default=w,w.MAX_TEXTURES=h.MAX_TEXTURES,w.MAX_POINT_LIGHTS=h.MAX_POINT_LIGHTS,w.PICKING_RES=h.PICKING_RES},{"../core/config":510,"../math":542,"../utils":561,"./group":553,"./pick":556,assert:1}],558:[function(t,e,n){"use strict";e.exports={hasTexture1:!1,hasTextureCube1:!1,enableLights:!1,useReflection:!1,enablePicking:!1,hasPickingColors:!1,hasFog:!1}},{}],559:[function(t,e,n){"use strict";var r=(t("path"),t("./default-uniforms"));e.exports={DEFAULT:{vs:"#define SHADER_NAME luma-default-vertex\n\n#define LIGHT_MAX 4\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec4 pickingColors;\nattribute vec2 texCoords;\n\n// camera and object matrices\nuniform mat4 viewMatrix;\nuniform mat4 viewInverseMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\n\n// objectMatrix * viewMatrix = worldMatrix\nuniform mat4 worldMatrix;\nuniform mat4 worldInverseMatrix;\nuniform mat4 worldInverseTransposeMatrix;\nuniform mat4 objectMatrix;\nuniform vec3 cameraPosition;\n\n// lighting configuration\nuniform bool enableLights;\nuniform vec3 ambientColor;\nuniform vec3 directionalColor;\nuniform vec3 lightingDirection;\n\n// point lights configuration\nuniform vec3 pointLocation[LIGHT_MAX];\nuniform vec3 pointColor[LIGHT_MAX];\nuniform int numberPoints;\n\n// reflection / refraction configuration\nuniform bool useReflection;\n\n// varyings\nvarying vec3 vReflection;\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec4 vNormal;\nvarying vec3 lightWeighting;\n\nvoid main(void) {\n  vec4 mvPosition = worldMatrix * vec4(positions, 1.0);\n  vec4 transformedNormal = worldInverseTransposeMatrix * vec4(normals, 1.0);\n\n  // lighting code\n  if(!enableLights) {\n    lightWeighting = vec3(1.0, 1.0, 1.0);\n  } else {\n    vec3 plightDirection;\n    vec3 pointWeight = vec3(0.0, 0.0, 0.0);\n    float directionalLightWeighting =\n      max(dot(transformedNormal.xyz, lightingDirection), 0.0);\n    for (int i = 0; i < LIGHT_MAX; i++) {\n      if (i < numberPoints) {\n        plightDirection = normalize(\n          (viewMatrix * vec4(pointLocation[i], 1.0)).xyz - mvPosition.xyz);\n         pointWeight += max(\n          dot(transformedNormal.xyz, plightDirection), 0.0) * pointColor[i];\n       } else {\n         break;\n       }\n     }\n\n    lightWeighting = ambientColor +\n      (directionalColor * directionalLightWeighting) + pointWeight;\n  }\n\n  // refraction / reflection code\n  if (useReflection) {\n    vReflection =\n      (viewInverseMatrix[3] - (worldMatrix * vec4(positions, 1.0))).xyz;\n  } else {\n    vReflection = vec3(1.0, 1.0, 1.0);\n  }\n\n  // pass results to varyings\n  vColor = colors;\n  vPickingColor = pickingColors;\n  vTexCoord = texCoords;\n  vNormal = transformedNormal;\n  gl_Position = projectionMatrix * worldMatrix * vec4(positions, 1.0);\n}\n",
fs:"#define SHADER_NAME luma-default-fragment\n\n#ifdef GL_ES\nprecision highp float;\n#endif\n\n// varyings\nvarying vec4 vColor;\nvarying vec4 vPickingColor;\nvarying vec2 vTexCoord;\nvarying vec3 lightWeighting;\nvarying vec3 vReflection;\nvarying vec4 vNormal;\n\n// texture configs\nuniform bool hasTexture1;\nuniform sampler2D sampler1;\nuniform bool hasTextureCube1;\nuniform samplerCube samplerCube1;\n\n// picking configs\nuniform bool enablePicking;\nuniform bool hasPickingColors;\nuniform vec3 pickColor;\n\n// reflection / refraction configs\nuniform float reflection;\nuniform float refraction;\n\n// fog configuration\nuniform bool hasFog;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n\nvoid main(){\n  // set color from texture\n  if (!hasTexture1) {\n    gl_FragColor = vec4(vColor.rgb * lightWeighting, vColor.a);\n  } else {\n    gl_FragColor =\n      vec4(texture2D(sampler1, vec2(vTexCoord.s, vTexCoord.t)).rgb *\n      lightWeighting, 1.0);\n  }\n\n  // has cube texture then apply reflection\n  // if (hasTextureCube1) {\n  //   vec3 nReflection = normalize(vReflection);\n  //   vec3 reflectionValue;\n  //   if (refraction > 0.0) {\n  //    reflectionValue = refract(nReflection, vNormal.xyz, refraction);\n  //   } else {\n  //    reflectionValue = -reflect(nReflection, vNormal.xyz);\n  //   }\n\n  //   // TODO(nico): check whether this is right.\n  //   vec4 cubeColor = textureCube(samplerCube1,\n  //       vec3(-reflectionValue.x, -reflectionValue.y, reflectionValue.z));\n  //   gl_FragColor = vec4(mix(gl_FragColor.xyz, cubeColor.xyz, reflection), 1.0);\n  // }\n\n  // set picking\n  if (enablePicking) {\n    if (hasPickingColors) {\n      gl_FragColor = vPickingColor;\n    } else {\n      gl_FragColor = vec4(pickColor, 1.0);\n    }\n  }\n\n  // handle fog\n  // if (hasFog) {\n  //   float depth = gl_FragCoord.z / gl_FragCoord.w;\n  //   float fogFactor = smoothstep(fogNear, fogFar, depth);\n  //   gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n  // }\n}\n",defaultUniforms:r}}},{"./default-uniforms":558,path:26}],560:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.pageLoadPromise=n.isPageLoaded=void 0;var i=t("./is-browser"),o=r(i),a=n.isPageLoaded=!1;n.pageLoadPromise=o.default?new Promise(function(t,e){window.onload=function(){n.isPageLoaded=a=!0,t(document)}}):Promise.resolve({})},{"./is-browser":562}],561:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./is-browser");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./browser-utils");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./promise-utils");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("./utils");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var u=t("./log");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})}),Object.defineProperty(n,"log",{enumerable:!0,get:function(){return r(u).default}})},{"./browser-utils":560,"./is-browser":562,"./log":563,"./promise-utils":564,"./utils":565}],562:[function(t,e,n){(function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n.isNode="object"===(void 0===t?"undefined":e(t))&&"[object process]"===String(t)&&!t.browser,i=n.isBrowser=!r;n.default=i}).call(this,t("_process"))},{_process:28}],563:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){for(var n=e.maxElts,r=void 0===n?16:n,i=e.size,a=void 0===i?1:i,s="[",u=0;u<t.length&&u<r;++u)u>0&&(s+=","+(u%a===0?" ":"")),s+=o(t[u],e);return""+s+(t.length>r?"...":"]")}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.isInteger,r=void 0!==n&&n;if(Array.isArray(t)||ArrayBuffer.isView(t))return i(t,e);if(!Number.isFinite(t))return String(t);if(r)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);var o=t.toPrecision(2);return o.indexOf(".0")===o.length-2?o.slice(0,-1):o}Object.defineProperty(n,"__esModule",{value:!0}),n.formatValue=o;var a=t("../globals"),s=r(a),u={priority:0,table:function(t,e){t<=u.priority&&e&&console.table(e)},log:function(t){if(t<=u.priority){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).debug.apply(e,r)}},info:function(t){if(t<=u.priority){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).log.apply(e,r)}},warn:function(t){if(t<=u.priority){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).warn.apply(e,r)}}};s.default.log=u,n.default=u},{"../globals":529}],564:[function(t,e,n){"use strict";function r(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Promise(function(e,r){function i(t,n){try{t?r(t):e(n)}catch(t){r(t)}}t.apply(void 0,n.concat([i]))})}}Object.defineProperty(n,"__esModule",{value:!0}),n.promisify=r},{}],565:[function(t,e,n){"use strict";function r(t){return t?Array.isArray(t)?t:[t]:[]}function i(){}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return u[t]=u[t]||1,t+"-"+u[t]++}function a(t){for(var e={},n=0,r=arguments.length;n<r;n++){var i=arguments[n];if(i&&"Object"===i.constructor.name)for(var o in i){var u=i[o],c=e[o];c&&"Object"===u.constructor.name&&"Object"===c.constructor.name?e[o]=a(c,u):e[o]=s(u)}}return e}function s(t){var e=t.constructor.name,n=void 0;if("Object"===e){n={};for(var r in t)n[r]=s(t[r])}else if("Array"===e){n=[];for(var i=0,o=t.length;i<o;i++)n[i]=s(t[i])}else n=t;return n}Object.defineProperty(n,"__esModule",{value:!0}),n.splat=r,n.noop=i,n.uid=o,n.merge=a;var u={}},{}],566:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BufferLayout=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./webgl"),s=t("./webgl-checks"),u=t("assert"),c=r(u),l=n.BufferLayout=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.type,r=e.size,o=void 0===r?1:r,a=e.offset,s=void 0===a?0:a,u=e.stride,c=void 0===u?0:u,l=e.normalized,f=void 0!==l&&l,h=e.integer,p=void 0!==h&&h,d=e.instanced,v=void 0===d?0:d;i(this,t),this.type=n,this.size=o,this.offset=s,this.stride=c,this.normalized=f,this.integer=p,this.instanced=v},f=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,o=n.handle;if(i(this,t),(0,s.assertWebGLContext)(e),o=o||e.createBuffer(),!(o instanceof a.WebGLBuffer))throw new Error("Failed to create WebGLBuffer");this.gl=e,this.handle=o,this.id=r,this.bytes=void 0,this.data=null,this.target=a.GL.ARRAY_BUFFER,this.layout=null,this.userData={},Object.seal(this)}return o(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e).setData({handle:n.handle||n})}}]),o(t,[{key:"delete",value:function(){var t=this.gl;return this.handle&&(t.deleteBuffer(this.handle),this.handle=null),this}},{key:"setData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.bytes,r=t.target,i=void 0===r?a.GL.ARRAY_BUFFER:r,o=t.usage,u=void 0===o?a.GL.STATIC_DRAW:o,f=t.layout,h=t.type,p=t.size,d=void 0===p?1:p,v=t.offset,m=void 0===v?0:v,y=t.stride,g=void 0===y?0:y,_=t.normalized,b=void 0!==_&&_,w=t.integer,x=void 0!==w&&w,E=t.instanced,T=void 0===E?0:E,S=this.gl;return(0,c.default)(e||n>=0,"Buffer.setData needs data or bytes"),h=h||(0,a.glTypeFromArray)(e),e&&(0,s.assertArrayTypeMatch)(e,h,"in Buffer.setData"),this.bytes=n,this.data=e,this.target=i,this.layout=f||new l({type:h,size:d,offset:m,stride:g,normalized:b,integer:x,instanced:T}),this.bind({target:i}),S.bufferData(i,e||n,u),this.unbind({target:i}),this}},{key:"subData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.data,n=t.offset,r=void 0===n?0:n,i=this.gl;return(0,c.default)(e,"Buffer.updateData needs data"),this.bind({target:a.GL.ARRAY_BUFFER}),i.bufferSubData(a.GL.ARRAY_BUFFER,r,e),this.unbind({target:a.GL.ARRAY_BUFFER}),this}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e;return this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target;void 0===e&&this.target;return this}},{key:"bindBase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,this.handle),this}},{key:"unbindBase",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,null),this}},{key:"bindRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index,i=t.offset,o=void 0===i?0:i,a=t.size;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferRange(n,r,this.handle,o,a),this}},{key:"unbindRange",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?this.target:e,r=t.index;return(0,s.assertWebGL2Context)(this.gl),this.gl.bindBufferBase(n,r,null),this}}]),t}();n.default=f},{"./webgl":586,"./webgl-checks":582,assert:1}],567:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.canvas,n=t.width,r=void 0===n?800:n,a=t.height,c=void 0===a?600:a,l=t.webgl2,f=void 0!==l&&l,h=t.debug,d=void 0===h||h,y=o(t,["canvas","width","height","webgl2","debug"]),g=void 0;if(T.isBrowser){if(!b.webGLTypesAvailable)throw new Error("WebGL API is missing. Check your if your browser supports WebGL or\ninstall a recent version of a major browser.");if(e=e,"string"==typeof e){if(!T.isPageLoaded)throw new Error("createGLContext called on canvas '"+e+"' before page was loaded");e=document.getElementById(e)}e||(e=s()),e.addEventListener("webglcontextcreationerror",function(t){T.log.log(0,t.statusMessage||"Unknown error")},!1),f&&(g=e.getContext("webgl2",y),g=g||e.getContext("experimental-webgl2",y)),g=g||e.getContext("webgl",y),g=g||e.getContext("experimental-webgl",y),(0,A.default)(g,"Failed to create WebGLRenderingContext")}else g=u(r,c,y);if(T.isBrowser&&d){var w=_.default.makeDebugContext(g,v,m),x=function t(){i(this,t)};Object.assign(x.prototype,w),g=w,g.debug=!0,T.log.priority=T.log.priority<1?1:T.log.priority,p(g),T.log.log(0,"Assign luma.log.priority in console to control logging: 0: none, 1: minimal, 2: verbose, 3: attribute/uniforms, 4: gl logs\nluma.log.break[], set to gl funcs, luma.log.profile[] set to model names")}return g}function s(){var t=document.createElement("canvas");return t.id="lumagl-canvas",t.style.width="100%",t.style.height="100%",T.pageLoadPromise.then(function(e){var n=e.body;n.insertBefore(t,n.firstChild)}),t}function u(t,e,n){if(!b.webGLTypesAvailable)throw new Error("WebGL API is missing. To run luma.gl under Node.js, please \"npm install gl\"\nand import 'luma.gl/headless' before importing 'luma.gl'.");if(!M.default.globals.headlessGL)throw new Error("Cannot create headless WebGL context, headlessGL not available");var r=M.default.globals.headlessGL(t,e,n);if(!r)throw new Error("headlessGL failed to create headless WebGL context");return r}function c(t,e){var n="Illegal arg to getExtension";(0,A.default)(t instanceof b.WebGLRenderingContext,n),(0,A.default)("string"==typeof e,n);var r=t.getExtension(e);return(0,A.default)(r,e+" not supported!"),r}function l(t){(0,w.assertWebGLContext)(t),E.default.poll(t)}function f(t,e,n){var r=e.scissorTest,i=e.framebuffer,o=void 0;if(r){o=t.isEnabled(t.SCISSOR_TEST);var a=r.x,s=r.y,u=r.w,c=r.h;t.enable(t.SCISSOR_TEST),t.scissor(a,s,u,c)}i&&i.bind();var l=void 0;try{l=n(t)}finally{o||t.disable(t.SCISSOR_TEST),i&&t.bindFramebuffer(t.FRAMEBUFFER,null)}return l}function h(t){var e=t.getExtension("WEBGL_debug_renderer_info");return{vendor:e&&e.UNMASKED_VENDOR_WEBGL?t.getParameter(e.UNMASKED_VENDOR_WEBGL):"unknown",renderer:e&&e.UNMASKED_RENDERER_WEBGL?t.getParameter(e.UNMASKED_RENDERER_WEBGL):"unknown"}}function p(t){var e=(0,w.isWebGL2Context)(t)?"WebGL2":"WebGL1",n=h(t),r=n?"using driver: "+n.vendor+" "+n.renderer:"",i=t.debug?"debug":"";T.log.log(0,"luma.gl "+M.default.VERSION+": "+e+" "+i+" context "+r,t)}function d(t,e){var n=_.default.glFunctionArgsToString(t,e);return n=""+n.slice(0,100)+(n.length>100?"...":""),"gl."+t+"("+n+")"}function v(t,e,n){var r=_.default.glEnumToString(t),i=_.default.glFunctionArgsToString(e,n);throw new Error(r+" was caused by call to: gl."+e+"("+i+")")}function m(t,e){var n=void 0;T.log.priority>=4&&(n=d(t,e),T.log.info(4,""+n));var r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){if(void 0===a.value)throw n=n||d(t,e),new Error("Undefined argument: "+n)}}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(T.log.break){n=n||d(t,e);T.log.break&&T.log.break.every(function(t){return n.indexOf(t)!==-1})}}function y(t,e){return T.log.warn(0,"luma.gl: getExtension is deprecated"),c(t,e)}Object.defineProperty(n,"__esModule",{value:!0}),n.createGLContext=a,n.getGLExtension=c,n.poll=l,n.glContextWithState=f,n.glGetDebugInfo=h,n.getExtension=y;var g=t("webgl-debug"),_=r(g),b=t("./webgl-types"),w=t("./webgl-checks"),x=t("./helpers/query-manager"),E=r(x),T=t("../utils"),S=t("../globals"),M=r(S),O=t("assert"),A=r(O)},{"../globals":529,"../utils":561,"./helpers/query-manager":570,"./webgl-checks":582,"./webgl-types":585,assert:1,"webgl-debug":981}],568:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=e.drawMode,r=void 0===n?o.GL.TRIANGLES:n,i=e.vertexCount,s=e.offset,u=void 0===s?0:s,c=e.isIndexed,l=void 0!==c&&c,f=e.indexType,h=void 0===f?o.GL.UNSIGNED_SHORT:f,p=e.isInstanced,d=void 0!==p&&p,v=e.instanceCount,m=void 0===v?0:v;if((0,a.assertWebGLContext)(t),r=(0,o.glGet)(r),h=(0,o.glGet)(h),(0,a.assertDrawMode)(r,"in draw"),l&&(0,a.assertIndexType)(h,"in draw"),d){var y=t.getExtension("ANGLE_instanced_arrays");l?y.drawElementsInstancedANGLE(r,i,h,u,m):y.drawArraysInstancedANGLE(r,u,i,m)}else l?t.drawElements(r,i,h,u):t.drawArrays(r,u,i)}Object.defineProperty(n,"__esModule",{value:!0}),n.draw=i;var o=(t("./context"),t("./webgl")),a=t("./webgl-checks"),s=t("assert");r(s)},{"./context":567,"./webgl":586,"./webgl-checks":582,assert:1}],569:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t){switch(t){case u.GL.ALPHA:return 1;case u.GL.RGB:return 3;case u.GL.RGBA:return 4;default:throw new Error("Unknown format")}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./webgl"),c=t("./webgl-checks"),l=t("./texture-2d"),f=r(l),h=t("./renderbuffer"),p=r(h),d=t("assert"),v=r(d),m=t("../utils"),y=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,a=i(n,["id"]);o(this,t),(0,c.assertWebGLContext)(e);var s=e.createFramebuffer();if(!s)throw new Error("Failed to create WebGL Framebuffer");this.gl=e,this.id=(0,m.uid)(r),this.handle=s,this.colorBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.texture=null,this.userData={},this.width=0,this.height=0,Object.seal(this),this.resize(a)}return s(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e,{handle:n.handle||n})}}]),s(t,[{key:"delete",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"resize",value:function(t){var e=t.width,n=t.height;this.update({width:e,height:n})}},{key:"update",value:function(t){var e=t.width,n=void 0===e?1:e,r=t.height,i=void 0===r?1:r,o=t.depth,a=void 0===o||o,s=t.minFilter,c=(void 0===s?u.GL.NEAREST:s,t.magFilter),l=(void 0===c?u.GL.NEAREST:c,t.format),h=void 0===l?u.GL.RGBA:l,d=t.type,y=void 0===d?u.GL.UNSIGNED_BYTE:d;if((0,v.default)(n>=0&&i>=0,"Width and height need to be integers"),n!==this.width||i!==this.height){m.log.log(1,"Resizing framebuffer "+this.id+" to "+n+"x"+i);var g=this.gl,_=new f.default(g,{minFilter:this.minFilter,magFilter:this.magFilter}).setImageData({data:null,width:n,height:i,type:y,format:h});if(this.attachTexture({attachment:u.GL.COLOR_ATTACHMENT0,texture:_}),this.colorBuffer&&this.colorBuffer.delete(),this.colorBuffer=_,this.texture=_,a){var b=new p.default(g).storage({internalFormat:u.GL.DEPTH_COMPONENT16,width:n,height:i});this.attachRenderbuffer({attachment:u.GL.DEPTH_ATTACHMENT,renderbuffer:b}),this.depthBuffer&&this.depthBuffer.delete(),this.depthBuffer=b}this.checkStatus(),this.width=n,this.height=i}}},{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e;return this.gl.bindFramebuffer(n,null),this}},{key:"readPixels",value:function(t){var e=t.x,n=void 0===e?0:e,r=t.y,i=void 0===r?0:r,o=t.width,s=t.height,c=t.format,l=void 0===c?u.GL.RGBA:c,f=t.type,h=t.pixelArray,p=void 0===h?null:h,d=this.gl;if(!p){f=f||u.GL.UNSIGNED_BYTE;var v=(0,u.glTypeToArray)(f),m=a(l);p=p||new v(o*s*m)}return f=f||(0,u.glTypeFromArray)(p),this.bind(),d.readPixels(n,i,o,s,l,f,p),this.unbind(),p}},{key:"attachTexture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.texture,n=void 0===e?null:e,r=t.target,i=void 0===r?u.GL.FRAMEBUFFER:r,o=t.attachment,a=void 0===o?u.GL.COLOR_ATTACHMENT0:o,s=t.textureTarget,c=void 0===s?u.GL.TEXTURE_2D:s,l=t.mipmapLevel,h=void 0===l?0:l,p=this.gl;return n=n&&f.default.makeFrom(p,n),this.bind({target:i}),p.framebufferTexture2D(i,(0,u.glGet)(a),(0,u.glGet)(c),n.handle,h),this.unbind(),this}},{key:"attachRenderbuffer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.renderbuffer,n=void 0===e?null:e,r=t.attachment,i=void 0===r?u.GL.COLOR_ATTACHMENT0:r,o=t.target,a=void 0===o?u.GL.FRAMEBUFFER:o,s=t.renderbufferTarget,c=void 0===s?u.GL.RENDERBUFFER:s,l=this.gl;return n=n&&p.default.makeFrom(l,n),this.bind({target:a}),l.framebufferRenderbuffer(a,(0,u.glGet)(i),(0,u.glGet)(c),n.handle),this.unbind({target:a}),this}},{key:"checkStatus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e,r=this.gl;this.bind({target:n});var i=r.checkFramebufferStatus(n);if(this.unbind({target:n}),i!==r.FRAMEBUFFER_COMPLETE)throw new Error(this._getFrameBufferStatus(i));return this}},{key:"blit",value:function(t){var e=t.srcX0,n=t.srcY0,r=t.srcX1,i=t.srcY1,o=t.dstX0,a=t.dstY0,s=t.dstX1,l=t.dstY1,f=t.mask,h=t.filter,p=void 0===h?u.GL.NEAREST:h,d=this.gl;return(0,c.assertWebGL2)(d),d.blitFramebuffer(e,n,r,i,o,a,s,l,f,p),this}},{key:"textureLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e,r=t.attachment,i=t.texture,o=t.level,a=t.layer,s=this.gl;return(0,c.assertWebGL2)(s),s.framebufferTextureLayer(n,r,i,o,a),this}},{key:"invalidate",value:function(t){var e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e,r=t.attachments,i=void 0===r?[]:r,o=this.gl;return(0,c.assertWebGL2)(o),o.invalidateFramebuffer(n,i),this}},{key:"invalidateSub",value:function(t){var e=t.target,n=void 0===e?u.GL.FRAMEBUFFER:e,r=t.attachments,i=void 0===r?[]:r,o=t.x,a=void 0===o?0:o,s=t.y,l=void 0===s?0:s,f=t.width,h=t.height,p=this.gl;return(0,c.assertWebGL2)(p),p.invalidateFramebuffer(n,i,a,l,f,h),this}},{key:"readBuffer",value:function(t){var e=t.src,n=this.gl;return(0,c.assertWebGL2)(n),n.readBuffer(e),this}},{key:"alphaSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE)}},{key:"blueSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE)}},{key:"colorEncoding",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING)}},{key:"componentType",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE)}},{key:"depthSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE)}},{key:"greenSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE)}},{key:"objectName",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME)}},{key:"objectType",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE)}},{key:"redSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE)}},{key:"stencilSize",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE)}},{key:"cubeMapFace",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE)}},{key:"layer",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER)}},{key:"level",value:function(){return this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}},{key:"getParameters",value:function(){return{redSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_RED_SIZE),greenSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE),blueSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE),alphaSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE),depthSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE),stencilSize:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE),colorEncoding:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING),componentType:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE),objectName:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),objectType:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE),cubeMapFace:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE),layer:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER),level:this.getAttachmentParameter(u.GL.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL)}}},{key:"getAttachmentParameter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.pname,n=t.target,r=t.attachment,i=this.gl;return(0,c.assertWebGL2)(i),i.getFramebufferAttachmentParameter(n,r,e)}},{key:"_getFrameBufferStatus",value:function(t){var e=void 0;switch(t){case u.GL.FRAMEBUFFER_COMPLETE:e="Success. Framebuffer is correctly set up";break;case u.GL.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:e="The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:e="There is no attachment.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:e="Height and width of the attachment are not the same.";break;case u.GL.FRAMEBUFFER_UNSUPPORTED:e="The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.";break;case u.GL.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:e="The values of GL.RENDERBUFFER_SAMPLES are different among attached renderbuffers, or are non-zero if the attached images are a mix of renderbuffers and textures.";break;default:e="Framebuffer error "+t}return e}}]),t}();n.default=y},{"../utils":561,"./renderbuffer":573,"./texture-2d":575,"./webgl":586,"./webgl-checks":582,assert:1}],570:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t){return t},a=function(){function t(){r(this,t),this.pendingQueries=new Set,this.invalidQueryType=null,this.invalidErrorMessage="",this.checkInvalid=function(){return!1}}return i(t,[{key:"poll",value:function(t){this.cancelInvalidQueries(t);var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.isResultAvailable()){var s=a.getResult();this.resolveQuery(a,s)}}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setInvalidator",value:function(t){var e=t.queryType,n=t.errorMessage,r=t.checkInvalid;this.invalidQueryType=e,this.invalidErrorMessage=n,this.checkInvalid=r}},{key:"beginQuery",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;this.cancelInvalidQueries(t.gl),this.cancelQuery(t);var r={};return t.promise=new Promise(function(t,e){r.resolve=t,r.reject=e}),Object.assign(t.promise,r),this.pendingQueries.add(t),t.promise.then(e).catch(n)}},{key:"resolveQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise.resolve(e)}},{key:"rejectQuery",value:function(t,e){this.pendingQueries.delete(t),t.promise&&t.promise.reject(new Error(e))}},{key:"deleteQuery",value:function(t){return this.rejectQuery(t,"Query was deleted before result was available")}},{key:"cancelQuery",value:function(t){return this.rejectQuery(t,"Query was canceled before result was available")}},{key:"invalidateQuery",value:function(t){t instanceof this.invalidQueryType&&this.rejectQuery(t,this.invalidErrorMessage)}},{key:"cancelInvalidQueries",value:function(t){if(this.checkInvalid(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=this.pendingQueries.values()[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;this.invalidateQuery(a)}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}}}}]),t}();n.default=new a},{}],571:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.TimerQuery=n.VertexAttributes=n.TextureCube=n.Texture2D=n.Renderbuffer=n.Framebuffer=n.Program=n.FragmentShader=n.VertexShader=n.Shader=n.Buffer=void 0;var o=t("./webgl");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./buffer");Object.defineProperty(n,"Buffer",{enumerable:!0,get:function(){return i(a).default}});var s=t("./shader");Object.defineProperty(n,"Shader",{enumerable:!0,get:function(){return i(s).default}}),Object.defineProperty(n,"VertexShader",{enumerable:!0,get:function(){return s.VertexShader}}),Object.defineProperty(n,"FragmentShader",{enumerable:!0,get:function(){return s.FragmentShader}});var u=t("./program");Object.defineProperty(n,"Program",{enumerable:!0,get:function(){return i(u).default}});var c=t("./framebuffer");Object.defineProperty(n,"Framebuffer",{enumerable:!0,get:function(){return i(c).default}});var l=t("./renderbuffer");Object.defineProperty(n,"Renderbuffer",{enumerable:!0,get:function(){return i(l).default}});var f=t("./texture-2d");Object.defineProperty(n,"Texture2D",{enumerable:!0,get:function(){return i(f).default}});var h=t("./texture-cube");Object.defineProperty(n,"TextureCube",{enumerable:!0,get:function(){return i(h).default}});var p=t("./timer-query");Object.defineProperty(n,"TimerQuery",{enumerable:!0,get:function(){return i(p).default}});var d=t("./context");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return d[t]}})});var v=t("./draw");Object.keys(v).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return v[t]}})});var m=t("./uniforms");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return m[t]}})});var y=t("./vertex-attributes"),g=r(y);n.VertexAttributes=g},{"./buffer":566,"./context":567,"./draw":568,"./framebuffer":569,"./program":572,"./renderbuffer":573,"./shader":574,"./texture-2d":575,"./texture-cube":576,"./timer-query":578,"./uniforms":579,"./vertex-attributes":580,"./webgl":586}],572:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n={},r=e.getUniformCount(),i=0;i<r;i++){var o=e.getUniformInfo(i),a=e.getUniformLocation(o.name),s=(0,m.getUniformSetter)(t,a,o);n[s.name]=s}return n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.getUniformDescriptors=a;var u=t("./webgl"),c=t("./webgl-checks"),l=t("./vertex-attributes"),f=i(l),h=t("./buffer"),p=r(h),d=t("./texture"),v=r(d),m=t("./uniforms"),y=t("./shader"),g=t("../shaderlib"),_=r(g),b=t("../utils"),w=t("assert"),x=r(w),E=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.id,i=n.vs,a=void 0===i?_.default.DEFAULT.vs:i,s=n.fs,u=void 0===s?_.default.DEFAULT.fs:s,l=n.defaultUniforms,f=n.handle;o(this,t),(0,c.assertWebGLContext)(e),(a===_.default.DEFAULT.vs||u===_.default.DEFAULT.fs&&void 0===l)&&(l=_.default.DEFAULT.defaultUniforms),this.vs="string"==typeof a?new y.VertexShader(e,a):a,
this.fs="string"==typeof a?new y.FragmentShader(e,u):u,(0,x.default)(this.vs instanceof y.VertexShader,"Program: bad vertex shader"),(0,x.default)(this.fs instanceof y.FragmentShader,"Program: bad fragment shader");var h=this.vs.getName()||this.fs.getName();if(h=h?h+"-program":"program",this.id=r||(0,b.uid)(h),this.gl=e,this.defaultUniforms=l,this.handle=f,this.handle||(this.handle=e.createProgram(),this._compileAndLink()),!this.handle)throw new Error("Failed to create program");this._attributeLocations=this._getAttributeLocations(),this._attributeCount=this.getAttributeCount(),this._warn=[],this._filledLocations={},this._uniformSetters=this._getUniformSetters(),this._uniformCount=this.getUniformCount(),this._textureIndexCounter=0,this.userData={},Object.seal(this)}return s(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e).setData({handle:n.handle||n})}}]),s(t,[{key:"delete",value:function(){var t=this.gl;return this.handle&&t.deleteProgram(this.handle),this.handle=null,this}},{key:"use",value:function(){return this.gl.useProgram(this.handle),this}},{key:"clearBuffers",value:function(){return this._filledLocations={},this}},{key:"_print",value:function(t){return"Program "+this.id+": Attribute "+t}},{key:"setBuffers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clear,r=void 0===n||n,i=e.check,o=void 0===i||i,a=e.drawParams,s=void 0===a?{}:a,u=this.gl;if(Array.isArray(t))throw new Error("Program.setBuffers expects map of buffers");r&&this.clearBuffers(),s.isInstanced=!1,s.isIndexed=!1,s.indexType=null;for(var c=this._sortBuffersByLocation(t),l=c.locations,h=c.elements,p=0;p<l.length;++p){var d=l[p],v=t[d];if(v){var m=v.layout.instanced?1:0;f.enable(u,p),f.setBuffer({gl:u,location:p,buffer:v}),f.setDivisor(u,p,m),s.isInstanced=v.layout.instanced>0,this._filledLocations[d]=!0}else f.disable(u,p)}if(h){var y=t[h];y.bind(),s.isIndexed=!0,s.indexType=y.layout.type}return o&&this.checkBuffers(),this}},{key:"checkBuffers",value:function(){for(var t in this._attributeLocations)if(!this._filledLocations[t]&&!this._warn[t]){var e=this._attributeLocations[t];b.log.warn(0,"Program "+this.id+": Attribute "+e+":"+t+" not supplied"),this._warn[t]=!0}return this}},{key:"unsetBuffers",value:function(){for(var t=this.gl,e=this._attributeCount,n=1;n<e;++n)f.disable(t,n);return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),this}},{key:"setUniforms",value:function(t){for(var e in t){var n=t[e],r=this._uniformSetters[e];if(r)if(n instanceof v.default){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var i=n,o=r.textureIndex;i.bind(o),r(o)}else r(n)}return this}},{key:"getAttachedShadersCount",value:function(){return this.getProgramParameter(u.GL.ATTACHED_SHADERS)}},{key:"getAttributeCount",value:function(){return this.getProgramParameter(u.GL.ACTIVE_ATTRIBUTES)}},{key:"getAttributeInfo",value:function(t){return this.gl.getActiveAttrib(this.handle,t)}},{key:"getAttributeName",value:function(t){return this.getAttributeInfo(t).name}},{key:"getAttributeLocation",value:function(t){return this.gl.getAttribLocation(this.handle,t)}},{key:"getUniformCount",value:function(){return this.getProgramParameter(u.GL.ACTIVE_UNIFORMS)}},{key:"getUniformInfo",value:function(t){return this.gl.getActiveUniform(this.handle,t)}},{key:"getUniformLocation",value:function(t){return this.gl.getUniformLocation(this.handle,t)}},{key:"getUniformValue",value:function(t){return this.gl.getUniform(this.handle,t)}},{key:"isFlaggedForDeletion",value:function(){return this.getProgramParameter(u.GL.DELETE_STATUS)}},{key:"getLastLinkStatus",value:function(){return this.getProgramParameter(u.GL.LINK_STATUS)}},{key:"getLastValidationStatus",value:function(){return this.getProgramParameter(u.GL.VALIDATE_STATUS)}},{key:"getTransformFeedbackBufferMode",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_BUFFER_MODE)}},{key:"getTransformFeedbackVaryingsCount",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.TRANSFORM_FEEDBACK_VARYINGS)}},{key:"getActiveUniformBlocksCount",value:function(){return(0,c.assertWebGL2Context)(this.gl),this.getProgramParameter(this.gl.ACTIVE_UNIFORM_BLOCKS)}},{key:"getFragDataLocation",value:function(t){return(0,c.assertWebGL2Context)(this.gl),this.gl.getFragDataLocation(this.handle,t)}},{key:"getProgramParameter",value:function(t){return this.gl.getProgramParameter(this.handle,t)}},{key:"_compileAndLink",value:function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),t.linkProgram(this.handle),t.validateProgram(this.handle),!t.getProgramParameter(this.handle,t.LINK_STATUS))throw new Error("Error linking "+t.getProgramInfoLog(this.handle))}},{key:"_sortBuffersByLocation",value:function(t){var e=null,n=new Array(this._attributeCount);for(var r in t){var i=p.default.makeFrom(this.gl,t[r]),o=this._attributeLocations[r];if(void 0===o){if(i.target===u.GL.ELEMENT_ARRAY_BUFFER&&e)throw new Error(this._print(r)+" duplicate gl.ELEMENT_ARRAY_BUFFER");i.target===u.GL.ELEMENT_ARRAY_BUFFER?e=r:this._warn[r]||(b.log.warn(2,this._print(r)+" not used"),this._warn[r]=!0)}else{if(i.target===u.GL.ELEMENT_ARRAY_BUFFER)throw new Error(this._print(r)+":"+o+" has both location and type gl.ELEMENT_ARRAY_BUFFER");n[o]=r}}return{locations:n,elements:e}}},{key:"_areAllAttributesEnabled",value:function(){for(var t=this.gl,e=this._attributeCount,n=0;n<e;++n)if(!f.isEnabled(t,n))return!1;return!0}},{key:"_getAttributeLocations",value:function(){for(var t={},e=this.getAttributeCount(),n=0;n<e;n++){var r=this.getAttributeName(n);t[r]=this.getAttributeLocation(r)}return t}},{key:"_getUniformSetters",value:function(){for(var t=this.gl,e={},n=this.getUniformCount(),r=0;r<n;r++){var i=this.getUniformInfo(r),o=(0,m.parseUniformName)(i.name),a=this.getUniformLocation(o.name);e[o.name]=(0,m.getUniformSetter)(t,a,i,o.isArray)}return e}}]),t}();n.default=E},{"../shaderlib":559,"../utils":561,"./buffer":566,"./shader":574,"./texture":577,"./uniforms":579,"./vertex-attributes":580,"./webgl":586,"./webgl-checks":582,assert:1}],573:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("./webgl"),s=r(a),u=t("./webgl-checks"),c=t("assert"),l=r(c),f=function(){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(i(this,t),(0,u.assertWebGLContext)(e),this.gl=e,this.handle=e.createRenderbuffer(),!this.handle)throw new Error("Failed to create WebGL Renderbuffer")}return o(t,null,[{key:"makeFrom",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof t?n:new t(e,{handle:n.handle||n})}}]),o(t,[{key:"delete",value:function(){return this.gl.deleteRenderbuffer(this.handle),this}},{key:"bind",value:function(){return this.gl.bindRenderbuffer(s.default.RENDERBUFFER,this.handle),this}},{key:"unbind",value:function(){return this.gl.bindRenderbuffer(s.default.RENDERBUFFER,null),this}},{key:"storage",value:function(t){var e=t.internalFormat,n=t.width,r=t.height,i=this.gl;return(0,l.default)(e,"Needs internalFormat"),this.bind(),i.renderbufferStorage(s.default.RENDERBUFFER,(0,a.glGet)(e),n,r),this.unbind(),this}},{key:"getParameter",value:function(t){var e=this.gl;this.bind();var n=e.getRenderbufferParameter(s.default.RENDERBUFFER,(0,a.glGet)(t));return this.unbind(),n}},{key:"storageMultisample",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.samples,n=t.internalformat,r=t.width,i=t.height,o=this.gl;return(0,u.assertWebGL2Context)(o),o.renderbufferStorageMultisample(s.default.RENDERBUFFER,e,n,r,i),this}},{key:"getInternalformatParameter",value:function(t){var e=t.internalformat,n=t.pname,r=void 0===n?"SAMPLES":n,i=this.gl;return(0,u.assertWebGL2Context)(i),i.getInternalformatParameter(s.default.RENDERBUFFER,e,r)}},{key:"width",get:function(){return this.getParameter(s.default.RENDERBUFFER_WIDTH)}},{key:"height",get:function(){return this.getParameter(s.default.RENDERBUFFER_HEIGHT)}},{key:"internalFormat",get:function(){return this.getParameter(s.default.RENDERBUFFER_INTERNAL_FORMAT)}},{key:"greenSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_GREEN_SIZE)}},{key:"blueSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_BLUE_SIZE)}},{key:"redSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_RED_SIZE)}},{key:"alphaSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_ALPHA_SIZE)}},{key:"depthSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_DEPTH_SIZE)}},{key:"stencilSize",get:function(){return this.getParameter(s.default.RENDERBUFFER_STENCIL_SIZE)}},{key:"samples",get:function(){return this.getParameter(this.gl.RENDERBUFFER_SAMPLES)}}]),t}();n.default=f},{"./webgl":586,"./webgl-checks":582,assert:1}],574:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.FragmentShader=n.VertexShader=n.Shader=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./webgl"),c=t("./webgl-checks"),l=t("./webgl-format-glsl-error"),f=t("../utils"),h=t("assert"),p=r(h),d=n.Shader=function(){function t(e,n,r){if(a(this,t),(0,c.assertWebGLContext)(e),(0,p.default)("string"==typeof n,"Shader: GLSL source code must be a JavaScript string"),this.id=(0,l.getShaderName)(n)||(0,f.uid)(this.getTypeName(r)),this.gl=e,this.shaderType=r,this.source=n,this.handle=e.createShader(r),null===this.handle)throw new Error("Error creating shader with type "+r);this.compile()}return s(t,[{key:"delete",value:function(){var t=this.gl;this.handle&&(t.deleteShader(this.handle),this.handle=null)}},{key:"toString",value:function(){return this.getTypeName(this.shaderType)+":"+this.id}},{key:"getName",value:function(){return(0,l.getShaderName)(this.source)}},{key:"getTypeName",value:function(t){switch(t){case u.GL.VERTEX_SHADER:return"vertex-shader";case u.GL.FRAGMENT_SHADER:return"fragment-shader";default:return"shader"}}},{key:"compile",value:function(){var t=this.gl;if(t.shaderSource(this.handle,this.source),t.compileShader(this.handle),!t.getShaderParameter(this.handle,u.GL.COMPILE_STATUS)){var e=t.getShaderInfoLog(this.handle),n=(0,l.formatCompilerError)(e,this.source,this.shaderType);throw f.log.priority>0&&this.copyToClipboard(this.source),this.delete(),new Error("Error while compiling the shader "+n)}}},{key:"copyToClipboard",value:function(t){if(f.isBrowser){var e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.focus(),e.select(),document.execCommand("copy")||console.log("Failed to copy to clipboard"),e.remove()}}}]),t}();n.VertexShader=function(t){function e(t,n){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,u.GL.VERTEX_SHADER))}return o(e,t),e}(d),n.FragmentShader=function(t){function e(t,n){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,u.GL.FRAGMENT_SHADER))}return o(e,t),e}(d)},{"../utils":561,"./webgl":586,"./webgl-checks":582,"./webgl-format-glsl-error":584,assert:1}],575:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("./webgl"),h=t("./webgl-checks"),p=t("./texture"),d=r(p),v=t("./buffer"),m=r(v),y=t("./framebuffer"),g=r(y),_=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,h.assertWebGLContext)(t);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u({},n,{target:t.TEXTURE_2D})));return r.width=null,r.height=null,Object.seal(r),r.setImageData(n),n.generateMipmap&&r.generateMipmap(),r}return s(e,t),l(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t,{handle:n.handle||n})}},{key:"makeFromSolidColor",value:function(t,n){var r=c(n,4),i=r[0],o=void 0===i?0:i,a=r[1],s=void 0===a?0:a,u=r[2],l=void 0===u?0:u,f=r[3],h=void 0===f?1:f;return new e(t,{pixels:new Uint8Array([o,s,l,h]),width:1,format:t.RGBA,magFilter:t.NEAREST,minFilter:t.NEAREST})}},{key:"makeFromPixelArray",value:function(t,n){var r=n.dataArray,o=(n.format,n.width,n.height,i(n,["dataArray","format","width","height"]));return new e(t,u({pixels:new Uint8Array(r),width:1,format:t.RGBA},o))}}]),l(e,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,e=this.gl;if(void 0===t)throw new Error("Texture.bind: must specify texture unit");return this.textureUnit=t,e.activeTexture(e.TEXTURE0+t),e.bindTexture(this.target,this.handle),t}},{key:"unbind",value:function(){var t=this.gl;if(void 0===this.textureUnit)throw new Error("Texture.unbind: texture unit not specified");return t.activeTexture(t.TEXTURE0+this.textureUnit),t.bindTexture(this.target,null),this.textureUnit}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(f.GL.ACTIVE_TEXTURE)-f.GL.TEXTURE0}},{key:"setPixels",value:function(t){var e=t.buffer,n=(t.offset,t.width),r=void 0===n?null:n,o=t.height,a=void 0===o?null:o,s=t.mipmapLevel,u=void 0===s?0:s,c=t.internalFormat,l=(void 0===c?f.GL.RGBA:c,t.format),h=void 0===l?f.GL.RGBA:l,p=t.type,d=void 0===p?f.GL.UNSIGNED_BYTE:p,v=t.border,y=void 0===v?0:v,g=(i(t,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]),this.gl);return e=m.default.makeFrom(e),g.bindBuffer(f.GL.PIXEL_UNPACK_BUFFER,e.target),this.bind(),g.texImage2D(g.TEXTURE_2D,u,h,r,a,y,h,d,e.target),this.unbind(),g.bindBuffer(f.GL.GL_PIXEL_UNPACK_BUFFER,null),this}},{key:"setImageDataFromCompressedBuffer",value:function(t){var e=t.buffer,n=(t.offset,t.width),r=void 0===n?null:n,o=t.height,a=void 0===o?null:o,s=t.mipmapLevel,u=void 0===s?0:s,c=t.internalFormat,l=void 0===c?f.GL.RGBA:c,h=t.format,p=(void 0===h?f.GL.RGBA:h,t.type),d=(void 0===p?f.GL.UNSIGNED_BYTE:p,t.border),v=void 0===d?0:d;i(t,["buffer","offset","width","height","mipmapLevel","internalFormat","format","type","border"]);return this.gl.compressedTexImage2D(this.target,u,l,r,a,v,e),this}},{key:"copyImageFromFramebuffer",value:function(t){var e=t.framebuffer,n=(t.offset,t.x),r=t.y,o=t.width,a=t.height,s=t.mipmapLevel,u=void 0===s?0:s,c=t.internalFormat,l=void 0===c?f.GL.RGBA:c,h=t.type,p=(void 0===h?f.GL.UNSIGNED_BYTE:h,t.border),d=void 0===p?0:p,v=(i(t,["framebuffer","offset","x","y","width","height","mipmapLevel","internalFormat","type","border"]),this.gl);e=g.default.makeFrom(e),e.bind(),this.bind(),v.copyTexImage2D(this.target,u,l,n,r,o,a,d),this.unbind(),e.unbind()}},{key:"copySubImage",value:function(t){var e=(t.pixels,t.offset,t.x,t.y,t.width,t.height,t.mipmapLevel,t.internalFormat),n=(void 0===e?f.GL.RGBA:e,t.type);void 0===n&&f.GL.UNSIGNED_BYTE,t.border}}]),e}(d.default);n.default=_},{"./buffer":566,"./framebuffer":569,"./texture":577,"./webgl":586,"./webgl-checks":582}],576:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./webgl"),f=t("./webgl-checks"),h=t("./texture"),p=r(h),d=function(t){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e),(0,f.assertWebGLContext)(t);var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,u({},n,{target:l.GL.TEXTURE_CUBE_MAP})));return r.setCubeMapImageData(n),r}return s(e,t),c(e,null,[{key:"makeFrom",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n instanceof e?n:new e(t,{handle:n.handle||n})}}]),c(e,[{key:"bind",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.index,n=this.gl;if(void 0!==e&&n.activeTexture(l.GL.TEXTURE0+e),n.bindTexture(l.GL.TEXTURE_CUBE_MAP,this.handle),void 0===e){return n.getParameter(n.ACTIVE_TEXTURE)-l.GL.TEXTURE0}return e}},{key:"unbind",value:function(){this.gl.bindTexture(l.GL.TEXTURE_CUBE_MAP,null)}},{key:"setCubeMapImageData",value:function(t){var e=t.width,n=t.height,r=t.pixels,o=t.data,a=t.border,s=void 0===a?0:a,u=t.format,c=void 0===u?l.GL.RGBA:u,f=t.type,h=void 0===f?l.GL.UNSIGNED_BYTE:f,p=t.generateMipmap,d=void 0!==p&&p,v=(i(t,["width","height","pixels","data","border","format","type","generateMipmap"]),this.gl);return r=r||o,this.bind(),this.width||this.height?(v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,c,e,n,s,c,h,r.pos.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,c,e,n,s,c,h,r.pos.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,c,e,n,s,c,h,r.pos.z),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,c,e,n,s,c,h,r.neg.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,c,e,n,s,c,h,r.neg.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,c,e,n,s,c,h,r.neg.z)):(v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_X,0,c,c,h,r.pos.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Y,0,c,c,h,r.pos.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_POSITIVE_Z,0,c,c,h,r.pos.z),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_X,0,c,c,h,r.neg.x),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,c,c,h,r.neg.y),v.texImage2D(l.GL.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,c,c,h,r.neg.z)),this.unbind(),d&&this.generateMipmap(),this}}]),e}(p.default);n.default=d},{"./texture":577,"./webgl":586,"./webgl-checks":582}],577:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./webgl"),c=t("./webgl-checks"),l=t("./buffer"),f=r(l),h=t("../utils"),p=t("assert"),d=r(p),v=function(){function t(e,n){var r=n.id,s=void 0===r?(0,h.uid)("texture"):r,l=n.unpackFlipY,f=void 0===l||l,p=n.magFilter,d=void 0===p?u.GL.NEAREST:p,v=n.minFilter,m=void 0===v?u.GL.NEAREST:v,y=n.wrapS,g=void 0===y?u.GL.CLAMP_TO_EDGE:y,_=n.wrapT,b=void 0===_?u.GL.CLAMP_TO_EDGE:_,w=n.target,x=void 0===w?u.GL.TEXTURE_2D:w,E=n.handle,T=i(n,["id","unpackFlipY","magFilter","minFilter","wrapS","wrapT","target","handle"]);o(this,t),(0,c.assertWebGLContext)(e),this.handle=E||e.createTexture(),this.id=s,this.gl=e,this.target=x,this.hasFloatTexture=e.getExtension("OES_texture_float"),this.width=null,this.height=null,this.textureUnit=void 0,this.userData={},this.setPixelStorageModes(a({},T,{unpackFlipY:f})),this.setParameters(a({},T,{magFilter:d,minFilter:m,wrapS:g,wrapT:b}))}return s(t,[{key:"delete",value:function(){return this.handle&&(this.gl.deleteTexture(this.handle),this.handle=null),this}},{key:"toString",value:function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"}},{key:"generateMipmap",value:function(){return this.gl.bindTexture(this.target,this.handle),this.gl.generateMipmap(this.target),this.gl.bindTexture(this.target,null),this}},{key:"setImageData",value:function(t){var e=t.target,n=void 0===e?this.target:e,r=t.pixels,o=void 0===r?null:r,a=t.data,s=void 0===a?null:a,c=t.width,l=t.height,h=t.mipmapLevel,p=void 0===h?0:h,v=t.format,m=void 0===v?u.GL.RGBA:v,y=t.type,g=t.offset,_=void 0===g?0:g,b=t.border,w=void 0===b?0:b,x=(i(t,["target","pixels","data","width","height","mipmapLevel","format","type","offset","border"]),this.gl);if(o=o||s,o&&o.data){var E=o;o=E.data,c=E.shape[0],l=E.shape[1]}if(x.bindTexture(this.target,this.handle),null===o)c=c||1,l=l||1,y=y||u.GL.UNSIGNED_BYTE,x.texImage2D(n,p,m,c,l,w,m,y,o),this.width=c,this.height=l;else if(ArrayBuffer.isView(o)){if((0,d.default)(c>0&&l>0,"Texture2D: Width and height required"),y=y||(0,u.glTypeFromArray)(o),y===x.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");x.texImage2D(n,p,m,c,l,w,m,y,o),this.width=c,this.height=l}else if(o instanceof u.WebGLBuffer||o instanceof f.default){(0,d.default)(x instanceof u.WebGL2RenderingContext,"Requires WebGL2"),y=y||u.GL.UNSIGNED_BYTE;var T=f.default.makeFrom(o);x.bindBuffer(u.GL.PIXEL_UNPACK_BUFFER,T.handle),x.texImage2D(n,p,m,c,l,w,m,y,_),x.bindBuffer(u.GL.GL_PIXEL_UNPACK_BUFFER,null),this.width=c,this.height=l}else{var S=this._deduceImageSize(o);(0,d.default)(void 0===c&&void 0===l,"Texture2D.setImageData: Width and height must not be provided"),y=y||u.GL.UNSIGNED_BYTE,x.texImage2D(n,p,m,m,y,o),this.width=S.width,this.height=S.height}return x.bindTexture(this.target,null),this}},{key:"_deduceImageSize",value:function(t){if("undefined"!=typeof ImageData&&t instanceof ImageData)return{width:t.width,height:t.height};if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)return{width:t.naturalWidth,height:t.naturalHeight};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{width:t.width,height:t.height};if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)return{width:t.videoWidth,height:t.videoHeight};throw new Error("Unknown image data format. Failed to deduce image size")}},{key:"setPixelStorageModes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.packAlignment,n=t.unpackAlignment,r=t.unpackFlipY,i=t.unpackPremultiplyAlpha,o=t.unpackColorspaceConversion,a=t.packRowLength,s=t.packSkipPixels,u=t.packSkipRows,c=t.unpackRowLength,l=t.unpackImageHeight,f=t.unpackSkipPixels,h=t.unpackSkipRows,p=t.unpackSkipImages,d=this.gl;return d.bindTexture(this.target,this.handle),e&&d.pixelStorei(d.PACK_ALIGNMENT,e),n&&d.pixelStorei(d.UNPACK_ALIGNMENT,n),r&&d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,r),i&&d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),o&&d.pixelStorei(d.UNPACK_COLORSPACE_CONVERSION_WEBGL,o),a&&d.pixelStorei(d.PACK_ROW_LENGTH,a),s&&d.pixelStorei(d.PACK_SKIP_PIXELS,s),u&&d.pixelStorei(d.PACK_SKIP_ROWS,u),c&&d.pixelStorei(d.UNPACK_ROW_LENGTH,c),l&&d.pixelStorei(d.UNPACK_IMAGE_HEIGHT,l),f&&d.pixelStorei(d.UNPACK_SKIP_PIXELS,f),h&&d.pixelStorei(d.UNPACK_SKIP_ROWS,h),p&&d.pixelStorei(d.UNPACK_SKIP_IMAGES,p),d.bindTexture(this.target,null),this}},{key:"setParameters",value:function(t){var e=t.magFilter,n=t.minFilter,r=t.wrapS,i=t.wrapT,o=t.wrapR,a=t.baseLevel,s=t.maxLevel,u=t.minLOD,c=t.maxLOD,l=t.compareFunc,f=t.compareMode,h=this.gl;return h.bindTexture(this.target,this.handle),e&&h.texParameteri(this.target,h.TEXTURE_MAG_FILTER,e),n&&h.texParameteri(this.target,h.TEXTURE_MIN_FILTER,n),r&&h.texParameteri(this.target,h.TEXTURE_WRAP_S,r),i&&h.texParameteri(this.target,h.TEXTURE_WRAP_T,i),o&&h.texParameteri(this.target,h.TEXTURE_WRAP_R,o),a&&h.texParameteri(this.target,h.TEXTURE_BASE_LEVEL,a),s&&h.texParameteri(this.target,h.TEXTURE_MAX_LEVEL,s),l&&h.texParameteri(this.target,h.TEXTURE_COMPARE_FUNC,l),f&&h.texParameteri(this.target,h.TEXTURE_COMPARE_MODE,f),u&&h.texParameterf(this.target,h.TEXTURE_MIN_LOD,u),c&&h.texParameterf(this.target,h.TEXTURE_MAX_LOD,c),h.bindTexture(this.target,null),this}},{key:"getParameters",value:function(){var t=this.gl;t.bindTexture(this.target,this.handle);var e={magFilter:t.getTexParameter(this.target,t.TEXTURE_MAG_FILTER),minFilter:t.getTexParameter(this.target,t.TEXTURE_MIN_FILTER),wrapS:t.getTexParameter(this.target,t.TEXTURE_WRAP_S),wrapT:t.getTexParameter(this.target,t.TEXTURE_WRAP_T)};return t.bindTexture(this.target,null),e}},{key:"image2D",value:function(t){var e=t.pixels,n=t.format,r=void 0===n?u.GL.RGBA:n,i=t.type,o=void 0===i?u.GL.UNSIGNED_BYTE:i;if(o===u.GL.FLOAT&&!this.hasFloatTexture)throw new Error("floating point textures are not supported.");return this.gl.bindTexture(this.target,this.handle),this.gl.texImage2D(u.GL.TEXTURE_2D,0,r,r,o,e),this.gl.bindTexture(this.target,null),this}},{key:"update",value:function(t){throw new Error("Texture.update() is deprecated()")}}]),t}();n.default=v},{"../utils":561,"./buffer":566,"./webgl":586,"./webgl-checks":582,assert:1}],578:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t("../webgl/webgl-checks"),s=t("./helpers/query-manager"),u=r(s),c=function(t){return t},l=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onComplete,o=void 0===r?c:r,s=n.onError,u=void 0===s?c:s;i(this,t),(0,a.assertWebGLContext)(e),this.gl=e,this.ext=this.gl.getExtension("EXT_disjoint_timer_query"),this.handle=this.ext?this.ext.createQueryEXT():null,this.target=null,this.userData={},this.onComplete=o,this.onError=u,this.promise=null,Object.seal(this)}return o(t,null,[{key:"isSupported",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.requireTimestamps,r=void 0!==n&&n;(0,a.assertWebGLContext)(t);var i=t.getExtension("EXT_disjoint_timer_query"),o=i?i.getQueryEXT(36392,34916):0,s=o>0;return Boolean(i)&&(!r||s)}}]),o(t,[{key:"delete",value:function(){return this.handle&&(u.default.deleteQuery(this),this.ext.deleteQueryEXT(this.handle),(0,a.glCheckError)(this.gl),this.handle=null),this}},{key:"begin",value:function(){return u.default.beginQuery(this,this.onComplete,this.onError),this.ext?(this.target=35007,this.ext.beginQueryEXT(this.target,this.handle)):u.default.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension'),this}},{key:"end",value:function(){return this.target&&(this.ext.endQueryEXT(this.target),this.target=null),this}},{key:"timestamp",value:function(){return u.default.beginQuery(this,this.onComplete,this.onError),this.ext?this.ext.queryCounterEXT(this.handle,36392):u.default.rejectQuery(this,'Timer queries require "EXT_disjoint_timer_query" extension'),this}},{key:"cancel",value:function(){return this.end(),u.default.cancelQuery(this),this}},{key:"isResultAvailable",value:function(){return this.ext&&this.ext.getQueryObjectEXT(this.handle,34919)}},{key:"getResult",value:function(){return this.ext?this.ext.getQueryObjectEXT(this.handle,34918)/1e6:0}}]),t}();n.default=l,u.default.setInvalidator({queryType:l,errorMessage:"Disjoint GPU operation invalidated timer queries",checkInvalid:function(t){return t.getParameter(36795)}})},{"../webgl/webgl-checks":582,"./helpers/query-manager":570}],579:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){var e=t.match(/([^\[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name "+t);return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function a(t,e,n){var r=y[n.type];if(!r)throw new Error("Unknown GLSL uniform type "+n.type);var i=t[r.function].bind(t),o=r.type,a=n.size*(r.elements||1);return a>1?function(t){if(!(t instanceof o)){var n=new o(a);n.set(t),t=n}(0,m.default)(t.length===a),r.matrix?i(e,!1,t):i(e,t)}:function(t){return i(e,t)}}function s(t,e){for(var n in t){var r=t[n];if(!u(r))throw e=e?e+" ":"",console.error(e+" Bad uniform "+n,r),new Error(e+" Bad uniform "+n)}return!0}function u(t){var e=!0;if(t instanceof p.default)e=!0;else if(Array.isArray(t)){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;isFinite(s)||(e=!1)}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}e=e&&t.length>0}else ArrayBuffer.isView(t)?e=t.length>0:isFinite(t)||(e=!1);return e}function c(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.header,n=void 0===e?"Uniforms":e,r=t.program,o=t.uniforms;(0,m.default)(r);var a=r._uniformSetters,s=i({},n,{});for(var u in a){var c=o[u];void 0!==c&&(s[u]={Type:c,Value:(0,d.formatValue)(c)})}for(var l in a){void 0===o[l]&&(s[l]={Type:"NOT PROVIDED",Value:"N/A"})}var f={},h=0;for(var p in o){var v=o[p];s[p]||(h++,f[p]={Type:"NOT USED: "+v,Value:(0,d.formatValue)(v)})}return{table:s,unusedTable:f,unusedCount:h}}Object.defineProperty(n,"__esModule",{value:!0});var l;n.parseUniformName=o,n.getUniformSetter=a,n.checkUniformValues=s,n.getUniformsTable=c;var f=t("./webgl"),h=t("./texture"),p=r(h),d=t("../utils"),v=t("assert"),m=r(v),y=(l={},i(l,f.GL.FLOAT,{function:"uniform1f",type:Float32Array}),i(l,f.GL.INT,{function:"uniform1i",type:Uint16Array}),i(l,f.GL.BOOL,{function:"uniform1i",type:Uint16Array}),i(l,f.GL.FLOAT_VEC2,{function:"uniform2fv",type:Float32Array,elements:2}),i(l,f.GL.FLOAT_VEC3,{function:"uniform3fv",type:Float32Array,elements:3}),i(l,f.GL.FLOAT_VEC4,{function:"uniform4fv",type:Float32Array,elements:4}),i(l,f.GL.INT_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),i(l,f.GL.INT_VEC3,{function:"uniform3iv",type:Uint16Array,elements:3}),i(l,f.GL.INT_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),i(l,f.GL.BOOL_VEC2,{function:"uniform2iv",type:Uint16Array,elements:2}),i(l,f.GL.BOOL_VEC3,{function:"uniform3fv",type:Uint16Array,elements:3}),i(l,f.GL.BOOL_VEC4,{function:"uniform4iv",type:Uint16Array,elements:4}),i(l,f.GL.FLOAT_MAT2,{function:"uniformMatrix2fv",type:Float32Array,matrix:!0,elements:4}),i(l,f.GL.FLOAT_MAT3,{mfunction:"uniformMatrix3fv",type:Float32Array,matrix:!0,elements:9}),i(l,f.GL.FLOAT_MAT4,{function:"uniformMatrix4fv",type:Float32Array,matrix:!0,elements:16}),i(l,f.GL.SAMPLER_2D,{function:"uniform1i",type:Uint16Array,texture:!0}),i(l,f.GL.SAMPLER_CUBE,{function:"uniform1i",type:Uint16Array,texture:!0}),l)},{"../utils":561,"./texture":577,"./webgl":586,assert:1}],580:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t.luma||(t.luma={extensions:{}}),void 0===t.luma.extensions.ANGLE_instanced_arrays&&(t.luma.extensions.ANGLE_instanced_arrays=t.getExtension("ANGLE_instanced_arrays")),t.luma}function o(t){return(0,S.assertWebGLContext)(t),t.getParameter(t.MAX_VERTEX_ATTRIBS)}function a(t){return(0,S.assertWebGLContext)(t),Boolean((0,S.isWebGL2Context)(t)||t.getExtension(t,"ANGLE_instanced_arrays"))}function s(t,e){return Boolean(m(t,e,t.VERTEX_ATTRIB_ARRAY_ENABLED))}function u(t,e){return m(t,e,t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING)}function c(t,e){return m(t,t.CURRENT_VERTEX_ATTRIB)}function l(t,e){return m(e,t.VERTEX_ATTRIB_ARRAY_SIZE)}function f(t,e){return m(e,t.VERTEX_ATTRIB_ARRAY_TYPE)}function h(t,e){return m(e,t.VERTEX_ATTRIB_ARRAY_NORMALIZED)}function p(t,e){return(0,S.assertWebGL2Context)(t),m(e,t.VERTEX_ATTRIB_ARRAY_INTEGER)}function d(t,e){return m(e,t.VERTEX_ATTRIB_ARRAY_STRIDE)}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.VERTEX_ATTRIB_ARRAY_POINTER;return t.getVertexAttribOffset(e,n)}function m(t,e,n){return(0,S.assertWebGLContext)(t),t.getVertexAttrib(e,n)}function y(t,e){t.enableVertexAttribArray(e)}function g(t,e){e>0&&t.disableVertexAttribArray(e)}function _(t,e,n){if((0,S.isWebGL2Context)(t))return void t.vertexAttribDivisor(e,n);var r=i(t).extensions.ANGLE_instanced_arrays;if(r)return void r.vertexAttribDivisorANGLE(e,n);if(0!==n)throw new Error("WebGL instanced rendering not supported")}function b(t,e){if((0,I.default)(e>0),(0,S.isWebGL2Context)(t)){return m(e,t.VERTEX_ATTRIB_ARRAY_DIVISOR)}var n=i(t).extensions.ANGLE_instanced_arrays;if(n){return m(e,n.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)}return 0}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.gl,n=t.location,r=t.buffer,i=t.target,o=t.layout;(0,S.assertWebGLContext)(e),r=O.default.makeFrom(e,r),i=(0,T.glGet)(void 0!==i?i:r.target),o=void 0!==o?o:r.layout,(0,I.default)(i,"setBuffer needs target"),(0,I.default)(o,"setBuffer called on uninitialized buffer"),r.bind({target:e.ARRAY_BUFFER}),o.integer?((0,S.assertWebGL2Context)(e),e.vertexAttribIPointer(n,o.size,(0,T.glGet)(o.type),o.stride,o.offset)):e.vertexAttribPointer(n,o.size,(0,T.glGet)(o.type),o.normalized,o.stride,o.offset),r.unbind({target:e.ARRAY_BUFFER})}function x(t){var e=t.gl,n=t.location,r=t.array;A.log.warn(0,"VertexAttributes.setGeneric is not well tested"),r instanceof Float32Array?e.vertexAttrib4fv(n,r):r instanceof Int32Array?((0,S.assertWebGL2Context)(e),e.vertexAttribI4iv(n,r)):r instanceof Uint32Array&&((0,S.assertWebGL2Context)(e),e.vertexAttribI4uiv(n,r))}function E(t,e,n,r,i,o){switch(A.log.warn(0,"VertexAttributes.setGenericValues is not well tested"),arguments.length-1){case 1:t.vertexAttrib1f(e,n);break;case 2:t.vertexAttrib2f(e,n,r);break;case 3:t.vertexAttrib3f(e,n,r,i);break;case 4:t.vertexAttrib4f(e,n,r,i,o);break;default:throw new Error("vertex attribute size must be between 1 and 4")}}Object.defineProperty(n,"__esModule",{value:!0}),n.getMaxAttributes=o,n.hasDivisor=a,n.isEnabled=s,n.getBuffer=u,n.getGeneric=c,n.getSize=l,n.getType=f,n.isNormalized=h,n.isInteger=p,n.getStride=d,n.getOffset=v,n.enable=y,n.disable=g,n.setDivisor=_,n.getDivisor=b,n.setBuffer=w,n.setGeneric=x,n.setGenericValues=E;var T=t("./webgl"),S=t("./webgl-checks"),M=t("./buffer"),O=r(M),A=t("../utils"),R=t("assert"),I=r(R)},{"../utils":561,"./buffer":566,"./webgl":586,"./webgl-checks":582,assert:1}],581:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return s.default.FLOAT;case Uint16Array:return s.default.UNSIGNED_SHORT;case Uint32Array:return s.default.UNSIGNED_INT;case Uint8Array:return s.default.UNSIGNED_BYTE;case Uint8ClampedArray:return s.default.UNSIGNED_BYTE;case Int8Array:return s.default.BYTE;case Int16Array:return s.default.SHORT;case Int32Array:return s.default.INT;default:throw new Error("Failed to deduce type from array/array type")}}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.clamped,r=void 0===n||n;switch(t){case s.default.FLOAT:return Float32Array;case s.default.UNSIGNED_SHORT:case s.default.UNSIGNED_SHORT_5_6_5:case s.default.UNSIGNED_SHORT_4_4_4_4:case s.default.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case s.default.UNSIGNED_INT:return Uint32Array;case s.default.UNSIGNED_BYTE:return r?Uint8ClampedArray:Uint8Array;case s.default.BYTE:return Int8Array;case s.default.SHORT:return Int16Array;case s.default.INT:return Int32Array;default:throw new Error("Failed to deduce type from array")}}Object.defineProperty(n,"__esModule",{value:!0}),n.glArrayFromType=void 0,n.glTypeFromArray=i,n.glTypeToArray=o;var a=t("./webgl-constants"),s=r(a);n.glArrayFromType=o},{"./webgl-constants":583}],582:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return t instanceof m.WebGLRenderingContext||t&&34962===t.ARRAY_BUFFER}function o(t){return t instanceof m.WebGL2RenderingContext||t&&32874===t.TEXTURE_BINDING_3D}function a(t){(0,w.default)(i(t),"Invalid WebGLRenderingContext")}function s(t){(0,w.default)(o(t),"Requires WebGL2")}function u(t){return x.indexOf(t)!==-1}function c(t,e){(0,w.default)(u(t),"Bad index type "+(0,y.glKey)(t)+" "+e)}function l(t){return E.indexOf(t)!==-1}function f(t,e){(0,w.default)(l(t),"Bad draw mode "+(0,y.glKey)(t)+" "+e)}function h(t,e,n){(0,w.default)(e===(0,_.glTypeFromArray)(t),(t.constructor.name||"Array")+" does not match element type "+(0,y.glKey)(e)+" "+n)}function p(t){for(var e=[],n=t.getError();n!==t.NO_ERROR;)e.push(v(t,n)),n=t.getError();return e.length?new Error(e.join("\n")):null}function d(t){if(t.debug){var e=p(t);if(e)throw e}}function v(t,e){switch(e){case g.default.CONTEXT_LOST_WEBGL:return"WebGL context lost";case g.default.INVALID_ENUM:return"WebGL invalid enumerated argument";case g.default.INVALID_VALUE:return"WebGL invalid value";case g.default.INVALID_OPERATION:return"WebGL invalid operation";case g.default.INVALID_FRAMEBUFFER_OPERATION:return"WebGL invalid framebuffer operation";case g.default.OUT_OF_MEMORY:return"WebGL out of memory";default:return"WebGL unknown error "+e}}Object.defineProperty(n,"__esModule",{value:!0}),n.GL_BUFFER_USAGE=n.GL_TARGETS=n.GL_DRAW_MODES=n.GL_INDEX_TYPES=void 0,n.isWebGLContext=i,n.isWebGL2Context=o,n.assertWebGLContext=a,n.assertWebGL2Context=s,n.isIndexType=u,n.assertIndexType=c,n.isDrawMode=l,n.assertDrawMode=f,n.assertArrayTypeMatch=h,n.glGetError=p,n.glCheckError=d;var m=t("./webgl-types"),y=t("./webgl-constants"),g=r(y),_=t("./webgl-arrays"),b=t("assert"),w=r(b),x=n.GL_INDEX_TYPES=[g.default.UNSIGNED_BYTE,g.default.UNSIGNED_SHORT,g.default.UNSIGNED_INT],E=n.GL_DRAW_MODES=[g.default.POINTS,g.default.LINE_STRIP,g.default.LINE_LOOP,g.default.LINES,g.default.TRIANGLE_STRIP,g.default.TRIANGLE_FAN,g.default.TRIANGLES];n.GL_TARGETS=[g.default.ARRAY_BUFFER,g.default.ELEMENT_ARRAY_BUFFER,g.default.COPY_READ_BUFFER,g.default.COPY_WRITE_BUFFER,g.default.TRANSFORM_FEEDBACK_BUFFER,g.default.UNIFORM_BUFFER,g.default.PIXEL_PACK_BUFFER,g.default.PIXEL_UNPACK_BUFFER],n.GL_BUFFER_USAGE=[g.default.STATIC_DRAW,g.default.DYNAMIC_DRAW,g.default.STREAM_DRAW,g.default.STATIC_READ,g.default.DYNAMIC_READ,g.default.STREAM_READ,g.default.STATIC_COPY,g.default.DYNAMIC_COPY,g.default.STREAM_COPY]},{"./webgl-arrays":581,"./webgl-constants":583,"./webgl-types":585,assert:1}],583:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t;return"string"==typeof t&&(e=s.default[t],(0,c.default)(void 0!==e,"Accessing GL."+t)),e}function o(t){for(var e in s.default)if(s.default[e]===t)return"GL."+e;return String(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.GL=void 0,n.glGet=i,n.glKey=o;var a=t("gl-constants"),s=r(a),u=t("assert"),c=r(u);n.GL=s.default,n.default=s.default},{assert:1,"gl-constants":470}],584:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"unnamed"}function o(t,e,n){for(var r=t.split(/\r?\n/),o={},s=0;s<r.length;s++){var c=r[s];if(!(c.length<=1)){var l=parseInt(c.split(":")[2],10);if(isNaN(l))return"Could not parse GLSL compiler error: "+t;o[l]=c}}for(var f="",h=a(e).split(/\r?\n/),p=0;p<h.length;p++){var d=h[p];if((o[p+3]||o[p+2]||o[p+1])&&(f+=d+"\n",o[p+1])){var v=o[p+1];v=v.substr(v.split(":",3).join(":").length+1).trim(),f+="^^^ "+v+"\n\n"}}var m=i(e)||"unknown name";return"GLSL error in "+u(n)+" shader "+m+"\n"+f}function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map(function(t,r){var o=r+e;return s(o,i-String(o).length)+n+t}).join("\n")}function s(t,e){for(var n="",r=0;r<e;++r)n+=" ";return""+n+t}function u(t){switch(t){case l.default.FRAGMENT_SHADER:return"fragment";case l.default.VERTEX_SHADER:return"vertex";default:return"unknown type"}}Object.defineProperty(n,"__esModule",{value:!0}),n.getShaderName=i,n.default=o;var c=t("./webgl-constants"),l=r(c)},{"./webgl-constants":583}],585:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){var t=function t(){i(this,t)};return c.WebGL2RenderingContext||t}function a(){var t=function t(){i(this,t)};return c.Image||t}Object.defineProperty(n,"__esModule",{value:!0}),n.WebGL2RenderingContext=n.WebGLShaderPrecisionFormat=n.WebGLActiveInfo=n.WebGLUniformLocation=n.WebGLTexture=n.WebGLRenderbuffer=n.WebGLFramebuffer=n.WebGLBuffer=n.WebGLShader=n.WebGLProgram=n.WebGLRenderingContext=n.Image=n.webGLTypesAvailable=void 0;var s=t("../globals"),u=r(s),c=u.default.global,l=function t(){i(this,t)},f=u.default.globals.headlessTypes||c,h=f.WebGLRenderingContext,p=void 0===h?l:h,d=f.WebGLProgram,v=void 0===d?l:d,m=f.WebGLShader,y=void 0===m?l:m,g=f.WebGLBuffer,_=void 0===g?l:g,b=f.WebGLFramebuffer,w=void 0===b?l:b,x=f.WebGLRenderbuffer,E=void 0===x?l:x,T=f.WebGLTexture,S=void 0===T?l:T,M=f.WebGLUniformLocation,O=void 0===M?l:M,A=f.WebGLActiveInfo,R=void 0===A?l:A,I=f.WebGLShaderPrecisionFormat,k=void 0===I?l:I,P=(n.webGLTypesAvailable=p!==l&&v!==l&&y!==l&&_!==l&&w!==l&&E!==l&&S!==l&&O!==l&&R!==l&&k!==l,o()),N=a();n.Image=N,n.WebGLRenderingContext=p,n.WebGLProgram=v,n.WebGLShader=y,n.WebGLBuffer=_,n.WebGLFramebuffer=w,n.WebGLRenderbuffer=E,n.WebGLTexture=S,n.WebGLUniformLocation=O,n.WebGLActiveInfo=R,n.WebGLShaderPrecisionFormat=k,n.WebGL2RenderingContext=P},{"../globals":529}],586:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./webgl-types");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[t]}})});var o=t("./webgl-arrays");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./webgl-constants");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r(a).default}})},{"./webgl-arrays":581,"./webgl-constants":583,"./webgl-types":585}],587:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./vertex-array-object");Object.defineProperty(n,"VertexArrayObject",{enumerable:!0,get:function(){return r(i).default}})},{"./vertex-array-object":588}],588:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t){if(t instanceof l.WebGL2RenderingContext)return t.createVertexArray();var e=t.getExtension("OES_vertex_array_object");return e?e.createVertexArrayOES():null}function a(t,e){t instanceof l.WebGL2RenderingContext&&t.deleteVertexArray(e);var n=t.getExtension("OES_vertex_array_object");n&&n.deleteVertexArrayOES(e)}function s(t,e){if(t instanceof l.WebGL2RenderingContext)return t.isVertexArray(e);var n=t.getExtension("OES_vertex_array_object");return!!n&&n.isVertexArrayOES(e)}function u(t,e){t instanceof l.WebGL2RenderingContext&&t.bindVertexArray(e);var n=t.getExtension("OES_vertex_array_object");n&&n.bindVertexArrayOES(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n.isVertexArray=s;var l=t("../webgl/webgl-types"),f=t("../webgl/webgl-checks"),h=t("assert"),p=r(h),d=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.handle;if(i(this,t),(0,f.assertWebGLContext)(e),(0,p.default)(t.isSupported(e),"VertexArrayObject: WebGL2 or OES_vertex_array_object required"),r=r||o(e),!r)throw new Error("Could not create VertexArrayObject");this.gl=e,this.handle=r,this.userData={},Object.seal(this)}return c(t,null,[{key:"isSupported",value:function(t){return(0,f.assertWebGLContext)(t),t instanceof l.WebGL2RenderingContext||t.getExtension("OES_vertex_array_object")}},{key:"wrap",value:function(e,n){return n instanceof t?n:new t(e,{handle:n.handle||n})}}]),c(t,[{key:"delete",value:function(){return a(this.gl,this.handle),this}},{key:"bind",value:function(){return u(this.gl,this.handle),this}},{key:"unbind",value:function(){return u(this.gl,null),this}}]),t}();n.default=d},{"../webgl/webgl-checks":582,"../webgl/webgl-types":585,assert:1}],589:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.Fx=n.Shaders=void 0;var o=t("./webgl");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return o[t]}})});var a=t("./webgl2");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return a[t]}})});var s=t("./math");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return s[t]}})});var u=t("./scenegraph");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return u[t]}})});var c=t("./core");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return c[t]}})});var l=t("./geometry");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return l[t]}})});var f=t("./models");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return f[t]}})});var h=t("./shaderlib");Object.defineProperty(n,"Shaders",{enumerable:!0,get:function(){return i(h).default}});var p=t("./addons/fx");Object.defineProperty(n,"Fx",{enumerable:!0,get:function(){return i(p).default}});var d=t("./deprecated");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(n,t,{enumerable:!0,get:function(){return d[t]}})});var v=r(o),m=r(a),y=r(s),g=r(u),_=r(c),b=r(l),w=r(f),x=t("./experimental"),E=r(x),T=i(h),S=i(p),M=r(d),O=t("./globals"),A=i(O);Object.assign(A.default,v,m,y,g,_,b,w,E,T.default,M,{Fx:S.default})},{"./addons/fx":507,"./core":513,"./deprecated":517,"./experimental":519,"./geometry":525,"./globals":529,"./math":542,"./models":552,"./scenegraph":554,"./shaderlib":559,"./webgl":571,"./webgl2":587}],590:[function(t,e,n){e.exports={name:"luma.gl",version:"2.10.4",description:"A WebGL JavaScript visualization library.",license:"MIT",contributors:["Ib Green <ib@uber.com>","Nicolas Belmonte <nico@uber.com>","Rye Terrell <ryeterrell@ryeterrell.net","Shan He <shan@uber.com>","Mikola Lysenko <mikolalysenko@gmail.com","Wesam Manassra <manassra@uber.com>"],repository:{type:"git",url:"https://github.com/uber/luma.gl"},keywords:["webgl","w3c","visualization","canvas","animation","3d"],main:"dist/index.js",files:["dist","shaderlib","src","headless.js","node-io.js","experimental.js"],dependencies:{"autobind-decorator":"^1.3.3","babel-polyfill":"^6.5.0","canvas-to-blob":"0.0.0","filesaver.js":"^0.2.0","get-pixels":"^3.3.0","gl-constants":"^1.0.0","gl-matrix":"^2.3.2",global:"^4.3.1",ndarray:"^1.0.18","save-pixels":"^2.3.2",through:"^2.3.8","webgl-debug":"^1.0.2"},devDependencies:{"babel-cli":"^6.3.15","babel-core":"^6.7.7","babel-eslint":"^6.0.0","babel-plugin-static-fs":"^1.1.0","babel-plugin-transform-builtin-extend":"^1.1.0","babel-plugin-transform-decorators-legacy":"^1.3.4","babel-preset-es2015":"^6.3.13","babel-preset-stage-2":"^6.3.13",babelify:"^7.2.0",bl:"^1.1.2","blue-tape":"^0.2.0","brfs-babel":"^1.0.0",browserify:"^13.0.0",budo:"^8.0.3","cookie-cutter":"^0.1.1","d3-format":"^1.0.0",disc:"^1.3.2","electron-prebuilt":"^0.37.2",eslint:"^2.0","eslint-config-uber-es2015":"^2.0.0",faucet:"0.0.1",gl:"^4.0.2",husky:"^0.10.2",mkdirp:"^0.5.1","source-map-support":"^0.4.2","tap-browser-color":"^0.1.2","tape-catch":"^1.0.4","tape-promise":"^1.1.0",testron:"^1.2.0","uglify-js":"^2.6.1"},scripts:{build:"npm run build-clean && npm run build-compile && npm run build-script","build-clean":"rm -fr dist/*","build-compile":"babel src -d dist --source-maps inline --copy-files","build-watch":"babel src -d dist --source-maps inline --copy-files --watch & babel examples -d dist --source-maps inline --copy-files --watch &","build-script":"browserify src/bundle.js --debug -o dist/lumagl.js -t babelify -t brfs-babel && cat dist/lumagl.js | uglifyjs > dist/lumagl.min.js",docs:"npm run docs-build && open ./_docs/docs/index.html","docs-build":"rm -fr _docs/* && jekyll build --config=docs/_config.yml --layouts docs/_layouts","docs-gh-pages":"git subtree push --prefix _docs origin gh-pages","docs-gh-pages-force":"git push origin `git subtree split --prefix _docs dev`:gh-pages --force","docs-publish":"npm run docs-build && git add _docs -f && git commit -m 'UPDATE DOCS' --no-verify && npm run docs-gh-pages",lint:"eslint src",precommit:"npm test",mypublish:"npm run build && npm run test && npm publish",test:"npm run lint && npm run test-headless && npm run test-headless-nowebgl","test-headless":"babel-node --include='' test/headless.js | faucet","test-headless-nowebgl":"babel-node --include='' test/headless-nowebgl.js | faucet","test-browser":"budo test/browser.js:build/test-bundle.js --dir test --live --open --port 3001 --watch-glob '**/*.{html,css,js,glsl}' -- -t babelify","test-electron":"browserify test/electron.js | testron | faucet","profile-disc":"browserify src/bundle.js --full-paths -t babelify -t brfs-babel | discify --open",start:"npm run build-watch && budo dist/bundle.js:dist/lumagl.js --live --open --port 3000 --watch-glob '**/*.{html,css,js,glsl}' -- -t brfs-babel"}}},{}],591:[function(t,e,n){"use strict";function r(t){return!!(i()&&o()&&a()&&s()&&u()&&c()&&l()&&f(t&&t.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function o(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function u(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function c(){return"Worker"in window}function l(){return"Uint8ClampedArray"in window}function f(t){return void 0===p[t]&&(p[t]=h(t)),p[t]}function h(t){var e=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=t,e.probablySupportsContext?e.probablySupportsContext("webgl",n)||e.probablySupportsContext("experimental-webgl",n):e.supportsContext?e.supportsContext("webgl",n)||e.supportsContext("experimental-webgl",n):e.getContext("webgl",n)||e.getContext("experimental-webgl",n)}void 0!==e&&e.exports?e.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var p={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],592:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t){var i=t[r].paintVertexArray;if(0!==i.length){var o=i.serialize(e),a=i.constructor.serialize();n[r]={array:o,type:a}}}return n}var i=t("./program_configuration"),o=function(t,e){this.vertexOffset=t,this.primitiveOffset=e,this.vertexLength=0,this.primitiveLength=0},a=function(t,e,n){var r=this;this.globalProperties={zoom:n};var o=t.layoutVertexArrayType;this.layoutVertexArray=new o;var a=t.elementArrayType;a&&(this.elementArray=new a);var s=t.elementArrayType2;s&&(this.elementArray2=new s),this.layerData={};for(var u=0,c=e;u<c.length;u+=1){var l=c[u],f=i.createDynamic(t.paintAttributes||[],l,n);r.layerData[l.id]={layer:l,programConfiguration:f,paintVertexArray:new f.PaintVertexArray}}this.segments=[],this.segments2=[]};a.prototype.prepareSegment=function(t){var e=this.segments[this.segments.length-1];return(!e||e.vertexLength+t>a.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray.length),this.segments.push(e)),e},a.prototype.prepareSegment2=function(t){var e=this.segments2[this.segments2.length-1];return(!e||e.vertexLength+t>a.MAX_VERTEX_ARRAY_LENGTH)&&(e=new o(this.layoutVertexArray.length,this.elementArray2.length),this.segments2.push(e)),e},a.prototype.populatePaintArrays=function(t){var e=this;for(var n in this.layerData){var r=e.layerData[n];0!==r.paintVertexArray.bytesPerElement&&r.programConfiguration.populatePaintArray(r.layer,r.paintVertexArray,e.layoutVertexArray.length,e.globalProperties,t)}},a.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},a.prototype.serialize=function(t){return{layoutVertexArray:this.layoutVertexArray.serialize(t),elementArray:this.elementArray&&this.elementArray.serialize(t),elementArray2:this.elementArray2&&this.elementArray2.serialize(t),paintVertexArrays:r(this.layerData,t),segments:this.segments,segments2:this.segments2}},a.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,e.exports=a},{"./program_configuration":606}],593:[function(t,e,n){"use strict";var r=t("./array_group"),i=t("./buffer_group"),o=t("../util/util"),a=function(t,e){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,t.arrays?this.buffers=new i(e,t.layers,t.zoom,t.arrays):this.arrays=new r(e,t.layers,t.zoom)};a.prototype.populate=function(t,e){for(var n=this,r=0,i=t;r<i.length;r+=1){var o=i[r];n.layers[0].filter(o)&&(n.addFeature(o),e.featureIndex.insert(o,n.index))}},a.prototype.isEmpty=function(){return this.arrays.isEmpty()},a.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),arrays:this.arrays.serialize(t)}},a.prototype.destroy=function(){this.buffers&&(this.buffers.destroy(),this.buffers=null)},e.exports=a,a.deserialize=function(t,e){if(e){for(var n={},r=0,i=t;r<i.length;r+=1){var a=i[r],s=a.layerIds.map(function(t){return e.getLayer(t)}).filter(Boolean);if(0!==s.length)for(var u=s[0].createBucket(o.extend({layers:s},a)),c=0,l=s;c<l.length;c+=1){var f=l[c];n[f.id]=u}}return n}}},{"../util/util":720,"./array_group":592,"./buffer_group":600}],594:[function(t,e,n){"use strict";function r(t,e,n,r,i){t.emplaceBack(2*e+(r+1)/2,2*n+(i+1)/2)}var i=t("../bucket"),o=t("../vertex_array_type"),a=t("../element_array_type"),s=t("../load_geometry"),u=t("../extent"),c={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:a(),paintAttributes:[{property:"circle-color",type:"Uint8"},{property:"circle-radius",type:"Uint16",multiplier:10},{property:"circle-blur",type:"Uint16",multiplier:10},{property:"circle-opacity",type:"Uint8",multiplier:255},{property:"circle-stroke-color",type:"Uint8"},{property:"circle-stroke-width",type:"Uint16",multiplier:10},{property:"circle-stroke-opacity",type:"Uint8",multiplier:255}]},l=function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,i=s(t);n<i.length;n+=1)for(var o=i[n],a=0,c=o;a<c.length;a+=1){var l=c[a],f=l.x,h=l.y;if(!(f<0||f>=u||h<0||h>=u)){var p=e.prepareSegment(4),d=p.vertexLength;r(e.layoutVertexArray,f,h,-1,-1),r(e.layoutVertexArray,f,h,1,-1),r(e.layoutVertexArray,f,h,1,1),r(e.layoutVertexArray,f,h,-1,1),e.elementArray.emplaceBack(d,d+1,d+2),e.elementArray.emplaceBack(d,d+3,d+2),p.vertexLength+=4,p.primitiveLength+=2}}e.populatePaintArrays(t.properties)},e}(i);e.exports=l},{"../bucket":593,"../element_array_type":601,"../extent":602,"../load_geometry":604,"../vertex_array_type":608}],595:[function(t,e,n){"use strict";var r=t("../bucket"),i=t("../vertex_array_type"),o=t("../element_array_type"),a=t("../load_geometry"),s=t("earcut"),u=t("../../util/classify_rings"),c={layoutVertexArrayType:i([{name:"a_pos",components:2,type:"Int16"}]),elementArrayType:o(3),elementArrayType2:o(2),paintAttributes:[{property:"fill-color",type:"Uint8"},{property:"fill-outline-color",type:"Uint8"},{property:"fill-opacity",type:"Uint8",multiplier:255}]},l=function(t){function e(e){t.call(this,e,c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,r=u(a(t),500);n<r.length;n+=1){for(var i=r[n],o=0,c=0,l=i;c<l.length;c+=1){o+=l[c].length}for(var f=e.prepareSegment(o),h=f.vertexLength,p=[],d=[],v=0,m=i;v<m.length;v+=1){var y=m[v];if(0!==y.length){y!==i[0]&&d.push(p.length/2);var g=e.prepareSegment2(y.length),_=g.vertexLength;e.layoutVertexArray.emplaceBack(y[0].x,y[0].y),e.elementArray2.emplaceBack(_+y.length-1,_),p.push(y[0].x),p.push(y[0].y);for(var b=1;b<y.length;b++)e.layoutVertexArray.emplaceBack(y[b].x,y[b].y),e.elementArray2.emplaceBack(_+b-1,_+b),p.push(y[b].x),p.push(y[b].y);g.vertexLength+=y.length,g.primitiveLength+=y.length}}for(var w=s(p,d),x=0;x<w.length;x+=3)e.elementArray.emplaceBack(h+w[x],h+w[x+1],h+w[x+2]);f.vertexLength+=o,f.primitiveLength+=w.length/3}e.populatePaintArrays(t.properties)},e}(r);e.exports=l},{"../../util/classify_rings":704,"../bucket":593,"../element_array_type":601,"../load_geometry":604,"../vertex_array_type":608,earcut:422}],596:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s){t.emplaceBack(e,n,2*Math.floor(r*p)+a,i*p*2,o*p*2,Math.round(s))}function i(t,e){return t.x===e.x&&(t.x<0||t.x>c)||t.y===e.y&&(t.y<0||t.y>c)}var o=t("../bucket"),a=t("../vertex_array_type"),s=t("../element_array_type"),u=t("../load_geometry"),c=t("../extent"),l=t("earcut"),f=t("../../util/classify_rings"),h={layoutVertexArrayType:a([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}]),elementArrayType:s(3),paintAttributes:[{property:"fill-extrusion-base",type:"Uint16"},{property:"fill-extrusion-height",type:"Uint16"},{property:"fill-extrusion-color",type:"Uint8"}]},p=Math.pow(2,13),d=function(t){function e(e){t.call(this,e,h)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this.arrays,n=0,o=f(u(t),500);n<o.length;n+=1){for(var a=o[n],s=0,c=0,h=a;c<h.length;c+=1){s+=h[c].length}for(var p=e.prepareSegment(5*s),d=[],v=[],m=[],y=0,g=a;y<g.length;y+=1){var _=g[y];if(0!==_.length){_!==a[0]&&v.push(d.length/2);for(var b=0,w=0;w<_.length;w++){var x=_[w];if(r(e.layoutVertexArray,x.x,x.y,0,0,1,1,0),m.push(p.vertexLength++),w>=1){var E=_[w-1];if(!i(x,E)){var T=x.sub(E)._perp()._unit();r(e.layoutVertexArray,x.x,x.y,T.x,T.y,0,0,b),r(e.layoutVertexArray,x.x,x.y,T.x,T.y,0,1,b),b+=E.dist(x),r(e.layoutVertexArray,E.x,E.y,T.x,T.y,0,0,b),r(e.layoutVertexArray,E.x,E.y,T.x,T.y,0,1,b);var S=p.vertexLength;e.elementArray.emplaceBack(S,S+1,S+2),e.elementArray.emplaceBack(S+1,S+2,S+3),p.vertexLength+=4,p.primitiveLength+=2}}d.push(x.x),d.push(x.y)}}}for(var M=l(d,v),O=0;O<M.length;O+=3)e.elementArray.emplaceBack(m[M[O]],m[M[O+1]],m[M[O+2]]);p.primitiveLength+=M.length/3}e.populatePaintArrays(t.properties)},e}(o);e.exports=d},{"../../util/classify_rings":704,"../bucket":593,"../element_array_type":601,"../extent":602,"../load_geometry":604,"../vertex_array_type":608,earcut:422}],597:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){t.emplaceBack(e.x<<1|r,e.y<<1|i,Math.round(63*n.x)+128,Math.round(63*n.y)+128,(0===o?0:o<0?-1:1)+1|(.5*a&63)<<2,.5*a>>6)}var i=t("../bucket"),o=t("../vertex_array_type"),a=t("../element_array_type"),s=t("../load_geometry"),u=t("../extent"),c=Math.cos(37.5*(Math.PI/180)),l=Math.pow(2,14)/.5,f={layoutVertexArrayType:o([{name:"a_pos",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}]),paintAttributes:[{property:"line-color",type:"Uint8"},{property:"line-blur",multiplier:10,type:"Uint8"},{property:"line-opacity",multiplier:10,type:"Uint8"},{property:"line-gap-width",multiplier:10,type:"Uint8",
name:"a_gapwidth"},{property:"line-offset",multiplier:1,type:"Int8"}],elementArrayType:a()},h=function(t){function e(e){t.call(this,e,f)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addFeature=function(t){for(var e=this,n=this.layers[0].layout,r=n["line-join"],i=n["line-cap"],o=n["line-miter-limit"],a=n["line-round-limit"],u=0,c=s(t,15);u<c.length;u+=1){var l=c[u];e.addLine(l,t.properties,r,i,o,a)}},e.prototype.addLine=function(t,e,n,r,i,o){for(var a=this,s=t.length;s>2&&t[s-1].equals(t[s-2]);)s--;if(!(t.length<2)){"bevel"===n&&(i=1.05);var l=15*(u/(512*this.overscaling)),f=t[0],h=t[s-1],p=f.equals(h),d=this.arrays,v=d.prepareSegment(10*s);if(2!==s||!p){this.distance=0;var m,y,g,_,b,w,x,E=r,T=p?"butt":r,S=!0;this.e1=this.e2=this.e3=-1,p&&(m=t[s-2],b=f.sub(m)._unit()._perp());for(var M=0;M<s;M++)if(g=p&&M===s-1?t[1]:t[M+1],!g||!t[M].equals(g)){b&&(_=b),m&&(y=m),m=t[M],b=g?g.sub(m)._unit()._perp():_,_=_||b;var O=_.add(b);0===O.x&&0===O.y||O._unit();var A=O.x*b.x+O.y*b.y,R=0!==A?1/A:1/0,I=A<c&&y&&g;if(I&&M>0){var k=m.dist(y);if(k>2*l){var P=m.sub(m.sub(y)._mult(l/k)._round());a.distance+=P.dist(y),a.addCurrentVertex(P,a.distance,_.mult(1),0,0,!1,v),y=P}}var N=y&&g,C=N?n:g?E:T;if(N&&"round"===C&&(R<o?C="miter":R<=2&&(C="fakeround")),"miter"===C&&R>i&&(C="bevel"),"bevel"===C&&(R>2&&(C="flipbevel"),R<i&&(C="miter")),y&&(a.distance+=m.dist(y)),"miter"===C)O._mult(R),a.addCurrentVertex(m,a.distance,O,0,0,!1,v);else if("flipbevel"===C){if(R>100)O=b.clone().mult(-1);else{var D=_.x*b.y-_.y*b.x>0?-1:1,j=R*_.add(b).mag()/_.sub(b).mag();O._perp()._mult(j*D)}a.addCurrentVertex(m,a.distance,O,0,0,!1,v),a.addCurrentVertex(m,a.distance,O.mult(-1),0,0,!1,v)}else if("bevel"===C||"fakeround"===C){var L=_.x*b.y-_.y*b.x>0,F=-Math.sqrt(R*R-1);if(L?(x=0,w=F):(w=0,x=F),S||a.addCurrentVertex(m,a.distance,_,w,x,!1,v),"fakeround"===C){for(var U,z=Math.floor(8*(.5-(A-.5))),B=0;B<z;B++)U=b.mult((B+1)/(z+1))._add(_)._unit(),a.addPieSliceVertex(m,a.distance,U,L,v);a.addPieSliceVertex(m,a.distance,O,L,v);for(var V=z-1;V>=0;V--)U=_.mult((V+1)/(z+1))._add(b)._unit(),a.addPieSliceVertex(m,a.distance,U,L,v)}g&&a.addCurrentVertex(m,a.distance,b,-w,-x,!1,v)}else"butt"===C?(S||a.addCurrentVertex(m,a.distance,_,0,0,!1,v),g&&a.addCurrentVertex(m,a.distance,b,0,0,!1,v)):"square"===C?(S||(a.addCurrentVertex(m,a.distance,_,1,1,!1,v),a.e1=a.e2=-1),g&&a.addCurrentVertex(m,a.distance,b,-1,-1,!1,v)):"round"===C&&(S||(a.addCurrentVertex(m,a.distance,_,0,0,!1,v),a.addCurrentVertex(m,a.distance,_,1,1,!0,v),a.e1=a.e2=-1),g&&(a.addCurrentVertex(m,a.distance,b,-1,-1,!0,v),a.addCurrentVertex(m,a.distance,b,0,0,!1,v)));if(I&&M<s-1){var G=m.dist(g);if(G>2*l){var H=m.add(g.sub(m)._mult(l/G)._round());a.distance+=H.dist(m),a.addCurrentVertex(H,a.distance,b.mult(1),0,0,!1,v),m=H}}S=!1}d.populatePaintArrays(e)}}},e.prototype.addCurrentVertex=function(t,e,n,i,o,a,s){var u,c=a?1:0,f=this.arrays,h=f.layoutVertexArray,p=f.elementArray;u=n.clone(),i&&u._sub(n.perp()._mult(i)),r(h,t,u,c,0,i,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,u=n.mult(-1),o&&u._sub(n.perp()._mult(o)),r(h,t,u,c,1,-o,e),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(p.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,e>l/2&&(this.distance=0,this.addCurrentVertex(t,this.distance,n,i,o,a,s))},e.prototype.addPieSliceVertex=function(t,e,n,i,o){var a=i?1:0;n=n.mult(i?-1:1);var s=this.arrays,u=s.layoutVertexArray,c=s.elementArray;r(u,t,n,0,a,0,e),this.e3=o.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),o.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},e}(i);e.exports=h},{"../bucket":593,"../element_array_type":601,"../extent":602,"../load_geometry":604,"../vertex_array_type":608}],598:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,c,l){t.emplaceBack(e,n,Math.round(64*r),Math.round(64*i),o/4,a/4,10*(c||0),l,10*(s||0),10*Math.min(u||25,25))}function i(t,e,n,r,i){return t.emplaceBack(e.x,e.y,Math.round(n.x),Math.round(n.y),10*r,10*i)}var o=t("point-geometry"),a=t("../array_group"),s=t("../buffer_group"),u=t("../vertex_array_type"),c=t("../element_array_type"),l=t("../extent"),f=t("../../symbol/anchor"),h=t("../../symbol/get_anchors"),p=t("../../util/token"),d=t("../../symbol/quads"),v=t("../../symbol/shaping"),m=t("../../symbol/resolve_text"),y=t("../../symbol/mergelines"),g=t("../../symbol/clip_line"),_=t("../../util/util"),b=t("../../util/script_detection"),w=t("../load_geometry"),x=t("../../symbol/collision_feature"),E=t("../../util/find_pole_of_inaccessibility"),T=t("../../util/classify_rings"),S=t("vector-tile").VectorTileFeature,M=t("../../source/rtl_text_plugin"),O=v.shapeText,A=v.shapeIcon,R=v.WritingMode,I=d.getGlyphQuads,k=d.getIconQuads,P=c(),N=u([{name:"a_pos",components:2,type:"Int16"},{name:"a_offset",components:2,type:"Int16"},{name:"a_texture_pos",components:2,type:"Uint16"},{name:"a_data",components:4,type:"Uint8"}]),C={glyph:{layoutVertexArrayType:N,elementArrayType:P},icon:{layoutVertexArrayType:N,elementArrayType:P},collisionBox:{layoutVertexArrayType:u([{name:"a_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"},{name:"a_data",components:2,type:"Uint8"}]),elementArrayType:c(2)}},D=function(t){var e=this;if(this.collisionBoxArray=t.collisionBoxArray,this.symbolQuadsArray=t.symbolQuadsArray,this.symbolInstancesArray=t.symbolInstancesArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.index=t.index,this.sdfIcons=t.sdfIcons,this.iconsNeedLinear=t.iconsNeedLinear,this.adjustedTextSize=t.adjustedTextSize,this.adjustedIconSize=t.adjustedIconSize,this.fontstack=t.fontstack,t.arrays){this.buffers={};for(var n in t.arrays)t.arrays[n]&&(e.buffers[n]=new s(C[n],t.layers,t.zoom,t.arrays[n]))}};D.prototype.populate=function(t,e){var n=this,r=this.layers[0].layout,i=r["text-field"],o=r["text-font"],a=r["icon-image"],s=i&&o,u=a;if(this.features=[],s||u){for(var c=e.iconDependencies,l=e.glyphDependencies,f=l[o]=l[o]||{},h=0;h<t.length;h++){var d=t[h];if(n.layers[0].filter(d)){var v;s&&(v=M.applyArabicShaping?M.applyArabicShaping(m(d,r)):m(d,r));var g;if(u&&(g=p(d.properties,a)),(v||g)&&(n.features.push({text:v,icon:g,index:h,sourceLayerIndex:d.sourceLayerIndex,geometry:w(d),properties:d.properties,type:S.types[d.type]}),g&&(c[g]=!0),v))for(var _=0;_<v.length;_++)f[v.charCodeAt(_)]=!0}}"line"===r["symbol-placement"]&&(this.features=y(this.features))}},D.prototype.isEmpty=function(){return this.arrays.icon.isEmpty()&&this.arrays.glyph.isEmpty()&&this.arrays.collisionBox.isEmpty()},D.prototype.serialize=function(t){return{zoom:this.zoom,layerIds:this.layers.map(function(t){return t.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,adjustedTextSize:this.adjustedTextSize,adjustedIconSize:this.adjustedIconSize,fontstack:this.fontstack,arrays:_.mapObject(this.arrays,function(e){return e.isEmpty()?null:e.serialize(t)})}},D.prototype.destroy=function(){this.buffers&&(this.buffers.icon&&this.buffers.icon.destroy(),this.buffers.glyph&&this.buffers.glyph.destroy(),this.buffers.collisionBox&&this.buffers.collisionBox.destroy(),this.buffers=null)},D.prototype.createArrays=function(){var t=this;this.arrays=_.mapObject(C,function(e){return new a(e,t.layers,t.zoom)})},D.prototype.prepare=function(t,e){var n=this;this.createArrays(),this.adjustedTextMaxSize=this.layers[0].getLayoutValue("text-size",{zoom:18}),this.adjustedTextSize=this.layers[0].getLayoutValue("text-size",{zoom:this.zoom+1}),this.adjustedIconMaxSize=this.layers[0].getLayoutValue("icon-size",{zoom:18}),this.adjustedIconSize=this.layers[0].getLayoutValue("icon-size",{zoom:this.zoom+1});var r=512*this.overscaling;this.tilePixelRatio=l/r,this.compareText={},this.iconsNeedLinear=!1,this.symbolInstancesStartIndex=this.symbolInstancesArray.length;var i=this.layers[0].layout,o=.5,a=.5;switch(i["text-anchor"]){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(i["text-anchor"]){case"bottom":case"bottom-right":case"bottom-left":a=1;break;case"top":case"top-right":case"top-left":a=0}for(var s="right"===i["text-justify"]?1:"left"===i["text-justify"]?0:.5,u=24*i["text-line-height"],c="line"!==i["symbol-placement"]?24*i["text-max-width"]:0,f=24*i["text-letter-spacing"],h=[24*i["text-offset"][0],24*i["text-offset"][1]],p=this.fontstack=i["text-font"].join(","),d="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],v=0,m=this.features;v<m.length;v+=1){var y,g=m[v];if(g.text){var w=b.allowsVerticalWritingMode(g.text);y={},y[R.horizontal]=O(g.text,t[p],c,u,o,a,s,f,h,24,R.horizontal),y[R.vertical]=w&&d&&O(g.text,t[p],c,u,o,a,s,f,h,24,R.vertical)}else y={};var x;if(g.icon){var E=e[g.icon];x=A(E,n.layers[0].getLayoutValue("icon-offset",{zoom:n.zoom},g.properties)),E&&(void 0===n.sdfIcons?n.sdfIcons=E.sdf:n.sdfIcons!==E.sdf&&_.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),1!==E.pixelRatio?n.iconsNeedLinear=!0:0===i["icon-rotate"]&&n.layers[0].isLayoutValueFeatureConstant("icon-rotate")||(n.iconsNeedLinear=!0))}(y[R.horizontal]||x)&&n.addFeature(g,y,x)}this.symbolInstancesEndIndex=this.symbolInstancesArray.length},D.prototype.addFeature=function(t,e,n){var r=this,i=this.layers[0].layout,o=this.adjustedTextSize/24,a=void 0!==this.adjustedTextMaxSize?this.adjustedTextMaxSize:this.adjustedTextSize,s=this.tilePixelRatio*o,u=this.tilePixelRatio*a/24,c=this.tilePixelRatio*this.adjustedIconSize,p=this.tilePixelRatio*i["symbol-spacing"],d=i["symbol-avoid-edges"],v=i["text-padding"]*this.tilePixelRatio,m=i["icon-padding"]*this.tilePixelRatio,y=i["text-max-angle"]/180*Math.PI,_="map"===i["text-rotation-alignment"]&&"line"===i["symbol-placement"],b="map"===i["icon-rotation-alignment"]&&"line"===i["symbol-placement"],w=i["text-allow-overlap"]||i["icon-allow-overlap"]||i["text-ignore-placement"]||i["icon-ignore-placement"],x=i["symbol-placement"],S=p/2,M=function(i,o){var a=!(o.x<0||o.x>l||o.y<0||o.y>l);if(!d||a){var u=a||w;r.addSymbolInstance(o,i,e,n,r.layers[0],u,r.symbolInstancesArray.length,r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,s,v,_,c,m,b,{zoom:r.zoom},t.properties)}};if("line"===x)for(var O=0,A=g(t.geometry,0,0,l,l);O<A.length;O+=1)for(var I=A[O],k=h(I,p,y,e[R.vertical]||e[R.horizontal],n,24,u,r.overscaling,l),P=0,N=k;P<N.length;P+=1){var C=N[P],D=e[R.horizontal];D&&r.anchorIsTooClose(D.text,S,C)||M(I,C)}else if("Polygon"===t.type)for(var j=0,L=T(t.geometry,0);j<L.length;j+=1){var F=L[j],U=E(F,16);M(F[0],new f(U.x,U.y,0))}else if("LineString"===t.type)for(var z=0,B=t.geometry;z<B.length;z+=1){var V=B[z];M(V,new f(V[0].x,V[0].y,0))}else if("Point"===t.type)for(var G=0,H=t.geometry;G<H.length;G+=1)for(var W=H[G],q=0,Y=W;q<Y.length;q+=1){var X=Y[q];M([X],new f(X.x,X.y,0))}},D.prototype.anchorIsTooClose=function(t,e,n){var r=this.compareText;if(t in r){for(var i=r[t],o=i.length-1;o>=0;o--)if(n.dist(i[o])<e)return!0}else r[t]=[];return r[t].push(n),!1},D.prototype.place=function(t,e){var n=this;this.createArrays();var r=this.layers[0].layout,i=t.maxScale,o="map"===r["text-rotation-alignment"]&&"line"===r["symbol-placement"],a="map"===r["icon-rotation-alignment"]&&"line"===r["symbol-placement"];if(r["text-allow-overlap"]||r["icon-allow-overlap"]||r["text-ignore-placement"]||r["icon-ignore-placement"]){var s=this.symbolInstancesArray.toArray(this.symbolInstancesStartIndex,this.symbolInstancesEndIndex),u=t.angle,c=Math.sin(u),l=Math.cos(u);this.sortedSymbolInstances=s.sort(function(t,e){return(c*t.anchorPointX+l*t.anchorPointY|0)-(c*e.anchorPointX+l*e.anchorPointY|0)||e.index-t.index})}for(var f=this.symbolInstancesStartIndex;f<this.symbolInstancesEndIndex;f++){var h=n.sortedSymbolInstances?n.sortedSymbolInstances[f-n.symbolInstancesStartIndex]:n.symbolInstancesArray.get(f),p={boxStartIndex:h.textBoxStartIndex,boxEndIndex:h.textBoxEndIndex},d={boxStartIndex:h.iconBoxStartIndex,boxEndIndex:h.iconBoxEndIndex},v=!(h.textBoxStartIndex===h.textBoxEndIndex),m=!(h.iconBoxStartIndex===h.iconBoxEndIndex),y=r["text-optional"]||!v,g=r["icon-optional"]||!m,_=v?t.placeCollisionFeature(p,r["text-allow-overlap"],r["symbol-avoid-edges"]):t.minScale,b=m?t.placeCollisionFeature(d,r["icon-allow-overlap"],r["symbol-avoid-edges"]):t.minScale;y||g?!g&&_?_=Math.max(b,_):!y&&b&&(b=Math.max(b,_)):b=_=Math.max(b,_),v&&(t.insertCollisionFeature(p,_,r["text-ignore-placement"]),_<=i&&n.addSymbols(n.arrays.glyph,h.glyphQuadStartIndex,h.glyphQuadEndIndex,_,r["text-keep-upright"],o,t.angle,h.writingModes)),m&&(t.insertCollisionFeature(d,b,r["icon-ignore-placement"]),b<=i&&n.addSymbols(n.arrays.icon,h.iconQuadStartIndex,h.iconQuadEndIndex,b,r["icon-keep-upright"],a,t.angle))}e&&this.addToDebugBuffers(t)},D.prototype.addSymbols=function(t,e,n,i,o,a,s,u){for(var c=this,l=t.elementArray,f=t.layoutVertexArray,h=this.zoom,p=Math.max(Math.log(i)/Math.LN2+h,0),d=e;d<n;d++){var v=c.symbolQuadsArray.get(d).SymbolQuad,m=(v.anchorAngle+s+Math.PI)%(2*Math.PI);if(u&R.vertical){if(a&&v.writingMode===R.vertical){if(o&&a&&m<=5*Math.PI/4||m>7*Math.PI/4)continue}else if(o&&a&&m<=3*Math.PI/4||m>5*Math.PI/4)continue}else if(o&&a&&(m<=Math.PI/2||m>3*Math.PI/2))continue;var y=v.tl,g=v.tr,_=v.bl,b=v.br,w=v.tex,x=v.anchorPoint,E=Math.max(h+Math.log(v.minScale)/Math.LN2,p),T=Math.min(h+Math.log(v.maxScale)/Math.LN2,25);if(!(T<=E)){E===p&&(E=0);var S=Math.round(v.glyphAngle/(2*Math.PI)*256),M=t.prepareSegment(4),O=M.vertexLength;r(f,x.x,x.y,y.x,y.y,w.x,w.y,E,T,p,S),r(f,x.x,x.y,g.x,g.y,w.x+w.w,w.y,E,T,p,S),r(f,x.x,x.y,_.x,_.y,w.x,w.y+w.h,E,T,p,S),r(f,x.x,x.y,b.x,b.y,w.x+w.w,w.y+w.h,E,T,p,S),l.emplaceBack(O,O+1,O+2),l.emplaceBack(O+1,O+2,O+3),M.vertexLength+=4,M.primitiveLength+=2}}},D.prototype.addToDebugBuffers=function(t){for(var e=this,n=this.arrays.collisionBox,r=n.layoutVertexArray,a=n.elementArray,s=-t.angle,u=t.yStretch,c=this.symbolInstancesStartIndex;c<this.symbolInstancesEndIndex;c++){var l=e.symbolInstancesArray.get(c);l.textCollisionFeature={boxStartIndex:l.textBoxStartIndex,boxEndIndex:l.textBoxEndIndex},l.iconCollisionFeature={boxStartIndex:l.iconBoxStartIndex,boxEndIndex:l.iconBoxEndIndex};for(var f=0;f<2;f++){var h=l[0===f?"textCollisionFeature":"iconCollisionFeature"];if(h)for(var p=h.boxStartIndex;p<h.boxEndIndex;p++){var d=e.collisionBoxArray.get(p),v=d.anchorPoint,m=new o(d.x1,d.y1*u)._rotate(s),y=new o(d.x2,d.y1*u)._rotate(s),g=new o(d.x1,d.y2*u)._rotate(s),_=new o(d.x2,d.y2*u)._rotate(s),b=Math.max(0,Math.min(25,e.zoom+Math.log(d.maxScale)/Math.LN2)),w=Math.max(0,Math.min(25,e.zoom+Math.log(d.placementScale)/Math.LN2)),x=n.prepareSegment(4),E=x.vertexLength;i(r,v,m,b,w),i(r,v,y,b,w),i(r,v,_,b,w),i(r,v,g,b,w),a.emplaceBack(E,E+1),a.emplaceBack(E+1,E+2),a.emplaceBack(E+2,E+3),a.emplaceBack(E+3,E),x.vertexLength+=4,x.primitiveLength+=4}}}},D.prototype.addSymbolInstance=function(t,e,n,r,i,o,a,s,u,c,l,f,h,p,d,v,m,y,g){var b,w,E,T=this,S=[];for(var M in n){var O=parseInt(M,10);n[O]&&(S=S.concat(o?I(t,n[O],f,e,i,p,O):[]),b=new x(s,e,t,u,c,l,n[O],f,h,p,!1))}var A=this.symbolQuadsArray.length;if(S&&S.length)for(var P=0;P<S.length;P++)T.addSymbolQuad(S[P]);var N=this.symbolQuadsArray.length,C=b?b.boxStartIndex:this.collisionBoxArray.length,j=b?b.boxEndIndex:this.collisionBoxArray.length;r&&(E=o?k(t,r,d,e,i,m,n[R.horizontal],y,g):[],w=new x(s,e,t,u,c,l,r,d,v,m,!0));var L=this.symbolQuadsArray.length;E&&1===E.length&&this.addSymbolQuad(E[0]);var F=this.symbolQuadsArray.length,U=w?w.boxStartIndex:this.collisionBoxArray.length,z=w?w.boxEndIndex:this.collisionBoxArray.length;F>D.MAX_QUADS&&_.warnOnce("Too many symbols being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),N>D.MAX_QUADS&&_.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907");var B=(n[R.vertical]?R.vertical:0)|(n[R.horizontal]?R.horizontal:0);return this.symbolInstancesArray.emplaceBack(C,j,U,z,A,N,L,F,t.x,t.y,a,B)},D.prototype.addSymbolQuad=function(t){return this.symbolQuadsArray.emplaceBack(t.anchorPoint.x,t.anchorPoint.y,t.tl.x,t.tl.y,t.tr.x,t.tr.y,t.bl.x,t.bl.y,t.br.x,t.br.y,t.tex.h,t.tex.w,t.tex.x,t.tex.y,t.anchorAngle,t.glyphAngle,t.maxScale,t.minScale,t.writingMode)},D.MAX_QUADS=65535,e.exports=D},{"../../source/rtl_text_plugin":640,"../../symbol/anchor":666,"../../symbol/clip_line":668,"../../symbol/collision_feature":670,"../../symbol/get_anchors":672,"../../symbol/mergelines":675,"../../symbol/quads":676,"../../symbol/resolve_text":677,"../../symbol/shaping":678,"../../util/classify_rings":704,"../../util/find_pole_of_inaccessibility":710,"../../util/script_detection":717,"../../util/token":719,"../../util/util":720,"../array_group":592,"../buffer_group":600,"../element_array_type":601,"../extent":602,"../load_geometry":604,"../vertex_array_type":608,"point-geometry":784,"vector-tile":973}],599:[function(t,e,n){"use strict";var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT"},i=function(t,e,n){this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.attributes=e.members,this.itemSize=e.bytesPerElement,this.type=n,this.arrayType=e};i.fromStructArray=function(t,e){return new i(t.serialize(),t.constructor.serialize(),e)},i.prototype.bind=function(t){var e=t[this.type];this.buffer?t.bindBuffer(e,this.buffer):(this.gl=t,this.buffer=t.createBuffer(),t.bindBuffer(e,this.buffer),t.bufferData(e,this.arrayBuffer,t.STATIC_DRAW),this.arrayBuffer=null)},i.prototype.setVertexAttribPointers=function(t,e,n){for(var i=this,o=0;o<this.attributes.length;o++){var a=i.attributes[o],s=e[a.name];void 0!==s&&t.vertexAttribPointer(s,a.components,t[r[a.type]],!1,i.arrayType.bytesPerElement,a.offset+(i.arrayType.bytesPerElement*n||0))}},i.prototype.destroy=function(){this.buffer&&this.gl.deleteBuffer(this.buffer)},i.BufferType={VERTEX:"ARRAY_BUFFER",ELEMENT:"ELEMENT_ARRAY_BUFFER"},e.exports=i},{}],600:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("./buffer"),o=t("./program_configuration"),a=t("../render/vertex_array_object"),s=function(t,e,n,s){var u=this;this.layoutVertexBuffer=new i(s.layoutVertexArray,t.layoutVertexArrayType.serialize(),i.BufferType.VERTEX),s.elementArray&&(this.elementBuffer=new i(s.elementArray,t.elementArrayType.serialize(),i.BufferType.ELEMENT)),s.elementArray2&&(this.elementBuffer2=new i(s.elementArray2,t.elementArrayType2.serialize(),i.BufferType.ELEMENT)),this.layerData={};for(var c=0,l=e;c<l.length;c+=1){var f=l[c],h=s.paintVertexArrays&&s.paintVertexArrays[f.id],p=o.createDynamic(t.paintAttributes||[],f,n),d=h?new i(h.array,h.type,i.BufferType.VERTEX):null;u.layerData[f.id]={programConfiguration:p,paintVertexBuffer:d}}this.segments=s.segments,this.segments2=s.segments2;for(var v=0,m=[this.segments,this.segments2];v<m.length;v+=1)for(var y=m[v],g=0,_=y||[];g<_.length;g+=1){var b=_[g];b.vaos=r.mapObject(u.layerData,function(){return new a})}};s.prototype.destroy=function(){var t=this;this.layoutVertexBuffer.destroy(),this.elementBuffer&&this.elementBuffer.destroy(),this.elementBuffer2&&this.elementBuffer2.destroy();for(var e in this.layerData){var n=t.layerData[e].paintVertexBuffer;n&&n.destroy()}for(var r=0,i=[this.segments,this.segments2];r<i.length;r+=1)for(var o=i[r],a=0,s=o||[];a<s.length;a+=1){var u=s[a];for(var c in u.vaos)u.vaos[c].destroy()}},e.exports=s},{"../render/vertex_array_object":630,"../util/util":720,"./buffer":599,"./program_configuration":606}],601:[function(t,e,n){"use strict";function r(t){return i({members:[{type:"Uint16",name:"vertices",components:t||3}]})}var i=t("../util/struct_array");e.exports=r},{"../util/struct_array":718}],602:[function(t,e,n){"use strict";e.exports=8192},{}],603:[function(t,e,n){"use strict";function r(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function i(t,e){return e-t}function o(t){return t["line-gap-width"]>0?t["line-gap-width"]+2*t["line-width"]:t["line-width"]}function a(t,e,n,r,i){if(!e[0]&&!e[1])return t;e=u.convert(e),"viewport"===n&&e._rotate(-r);for(var o=[],a=0;a<t.length;a++){for(var s=t[a],c=[],l=0;l<s.length;l++)c.push(s[l].sub(e._mult(i)));o.push(c)}return o}function s(t,e){for(var n=[],r=new u(0,0),i=0;i<t.length;i++){for(var o=t[i],a=[],s=0;s<o.length;s++){var c=o[s-1],l=o[s],f=o[s+1],h=0===s?r:l.sub(c)._unit()._perp(),p=s===o.length-1?r:f.sub(l)._unit()._perp(),d=h._add(p)._unit(),v=d.x*p.x+d.y*p.y;d._mult(1/v),a.push(d._mult(e)._add(l))}n.push(a)}return n}var u=t("point-geometry"),c=t("./load_geometry"),l=t("./extent"),f=t("feature-filter"),h=t("../util/struct_array"),p=t("grid-index"),d=t("../util/dictionary_coder"),v=t("vector-tile"),m=t("pbf"),y=t("../util/vectortile_to_geojson"),g=t("../util/util").arraysIntersect,_=t("../util/intersection_tests"),b=_.multiPolygonIntersectsBufferedMultiPoint,w=_.multiPolygonIntersectsMultiPolygon,x=_.multiPolygonIntersectsBufferedMultiLine,E=h({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),T=function(t,e,n){if(t.grid){var r=t,i=e;t=r.coord,e=r.overscaling,this.grid=new p(r.grid),this.featureIndexArray=new E(r.featureIndexArray),this.rawTileData=i,this.bucketLayerIDs=r.bucketLayerIDs}else this.grid=new p(l,16,0),this.featureIndexArray=new E;this.coord=t,this.overscaling=e,this.x=t.x,this.y=t.y,this.z=t.z-Math.log(e)/Math.LN2,this.setCollisionTile(n)};T.prototype.insert=function(t,e){var n=this,r=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(t.index,t.sourceLayerIndex,e);for(var i=c(t),o=0;o<i.length;o++){for(var a=i[o],s=[1/0,1/0,-(1/0),-(1/0)],u=0;u<a.length;u++){var l=a[u];s[0]=Math.min(s[0],l.x),s[1]=Math.min(s[1],l.y),s[2]=Math.max(s[2],l.x),s[3]=Math.max(s[3],l.y)}n.grid.insert(r,s[0],s[1],s[2],s[3])}},T.prototype.setCollisionTile=function(t){this.collisionTile=t},T.prototype.serialize=function(t){var e=this.grid.toArrayBuffer();return t&&t.push(e),{coord:this.coord,overscaling:this.overscaling,grid:e,featureIndexArray:this.featureIndexArray.serialize(t),bucketLayerIDs:this.bucketLayerIDs}},T.prototype.query=function(t,e){this.vtLayers||(this.vtLayers=new v.VectorTile(new m(this.rawTileData)).layers,this.sourceLayerCoder=new d(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));var n={},a=t.params||{},s=l/t.tileSize/t.scale,c=f(a.filter),h=0;for(var p in e){var y=e[p],g=y.paint,_=0;"line"===y.type?_=o(g)/2+Math.abs(g["line-offset"])+r(g["line-translate"]):"fill"===y.type?_=r(g["fill-translate"]):"fill-extrusion"===y.type?_=r(g["fill-extrusion-translate"]):"circle"===y.type&&(_=g["circle-radius"]+r(g["circle-translate"])),h=Math.max(h,_*s)}for(var b=t.queryGeometry.map(function(t){return t.map(function(t){return new u(t.x,t.y)})}),w=1/0,x=1/0,E=-(1/0),T=-(1/0),S=0;S<b.length;S++)for(var M=b[S],O=0;O<M.length;O++){var A=M[O];w=Math.min(w,A.x),x=Math.min(x,A.y),E=Math.max(E,A.x),T=Math.max(T,A.y)}var R=this.grid.query(w-h,x-h,E+h,T+h);R.sort(i),this.filterMatching(n,R,this.featureIndexArray,b,c,a.layers,e,t.bearing,s);var I=this.collisionTile.queryRenderedSymbols(b,t.scale);return I.sort(),this.filterMatching(n,I,this.collisionTile.collisionBoxArray,b,c,a.layers,e,t.bearing,s),n},T.prototype.filterMatching=function(t,e,n,r,i,u,l,f,h){for(var p,d=this,v=0;v<e.length;v++){var m=e[v];if(m!==p){p=m;var _=n.get(m),E=d.bucketLayerIDs[_.bucketIndex];if(!u||g(u,E)){var T=d.sourceLayerCoder.decode(_.sourceLayerIndex),S=d.vtLayers[T],M=S.feature(_.featureIndex);if(i(M))for(var O=null,A=0;A<E.length;A++){var R=E[A];if(!(u&&u.indexOf(R)<0)){var I=l[R];if(I){var k;if("symbol"!==I.type){O||(O=c(M));var P=I.paint;if("line"===I.type){k=a(r,P["line-translate"],P["line-translate-anchor"],f,h);var N=o(P)/2*h;if(P["line-offset"]&&(O=s(O,P["line-offset"]*h)),!x(k,O,N))continue}else if("fill"===I.type||"fill-extrusion"===I.type){var C=I.type;if(k=a(r,P[C+"-translate"],P[C+"-translate-anchor"],f,h),!w(k,O))continue}else if("circle"===I.type){k=a(r,P["circle-translate"],P["circle-translate-anchor"],f,h);var D=P["circle-radius"]*h;if(!b(k,O,D))continue}}var j=new y(M,d.z,d.x,d.y);j.layer=I.serialize();var L=t[R];void 0===L&&(L=t[R]=[]),L.push(j)}}}}}}},e.exports=T},{"../util/dictionary_coder":706,"../util/intersection_tests":713,"../util/struct_array":718,"../util/util":720,"../util/vectortile_to_geojson":721,"./extent":602,"./load_geometry":604,"feature-filter":447,"grid-index":483,pbf:762,"point-geometry":784,"vector-tile":973}],604:[function(t,e,n){"use strict";function r(t){return{min:-1*Math.pow(2,t-1),max:Math.pow(2,t-1)-1}}var i=t("../util/util"),o=t("./extent"),a={15:r(15),16:r(16)};e.exports=function(t,e){for(var n=a[e||16],r=o/t.extent,s=t.loadGeometry(),u=0;u<s.length;u++)for(var c=s[u],l=0;l<c.length;l++){var f=c[l];f.x=Math.round(f.x*r),f.y=Math.round(f.y*r),(f.x<n.min||f.x>n.max||f.y<n.min||f.y>n.max)&&i.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return s}},{"../util/util":720,"./extent":602}],605:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2}]});e.exports=i},{"../util/struct_array":718}],606:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.zoomStops)return e.getPaintValue(t.property,n,r);var i=t.zoomStops.map(function(i){return e.getPaintValue(t.property,a.extend({},n,{zoom:i}),r)});return 1===i.length?i[0]:i}function i(t,e){var n=t.property.replace(e.type+"-","").replace(/-/g,"_"),r="color"===e._paintSpecifications[t.property].type;return a.extend({name:"a_"+n,components:r?4:1,multiplier:r?255:1},t)}var o=t("./vertex_array_type"),a=t("../util/util"),s=function(){this.attributes=[],this.uniforms=[],this.interpolationUniforms=[],this.pragmas={vertex:{},fragment:{}},this.cacheKey=""};s.createDynamic=function(t,e,n){for(var r=new s,a=0,u=t;a<u.length;a+=1){var c=u[a],l=i(c,e),f=l.name.slice(2);e.isPaintValueFeatureConstant(l.property)?r.addZoomAttribute(f,l):e.isPaintValueZoomConstant(l.property)?r.addPropertyAttribute(f,l):r.addZoomAndPropertyAttribute(f,l,e,n)}return r.PaintVertexArray=o(r.attributes),r},s.createStatic=function(t){for(var e=new s,n=0,r=t;n<r.length;n+=1){var i=r[n];e.addUniform(i,"u_"+i)}return e},s.prototype.addUniform=function(t,e){var n=this.getPragmas(t);n.define.push("uniform {precision} {type} "+e+";"),n.initialize.push("{precision} {type} "+t+" = "+e+";"),this.cacheKey+="/u_"+t},s.prototype.addZoomAttribute=function(t,e){this.uniforms.push(e),this.addUniform(t,e.name)},s.prototype.addPropertyAttribute=function(t,e){var n=this.getPragmas(t);this.attributes.push(e),n.define.push("varying {precision} {type} "+t+";"),n.vertex.define.push("attribute {precision} {type} "+e.name+";"),n.vertex.initialize.push(t+" = "+e.name+" / "+e.multiplier+".0;"),this.cacheKey+="/a_"+t},s.prototype.addZoomAndPropertyAttribute=function(t,e,n,r){var i=this,o=this.getPragmas(t);o.define.push("varying {precision} {type} "+t+";");for(var s=0,u=n.getPaintValueStopZoomLevels(e.property);s<u.length&&u[s]<r;)s++;var c=Math.max(0,Math.min(u.length-4,s-2)),l="u_"+t+"_t";o.vertex.define.push("uniform lowp float "+l+";"),this.interpolationUniforms.push({name:l,property:e.property,stopOffset:c});for(var f=[],h=0;h<4;h++)f.push(u[Math.min(c+h,u.length-1)]);var p=[];if(1===e.components)this.attributes.push(a.extend({},e,{components:4,zoomStops:f})),o.vertex.define.push("attribute {precision} vec4 "+e.name+";"),p.push(e.name);else for(var d=0;d<4;d++){var v=e.name+d;p.push(v),i.attributes.push(a.extend({},e,{name:v,zoomStops:[f[d]]})),o.vertex.define.push("attribute {precision} {type} "+v+";")}o.vertex.initialize.push(t+" = evaluate_zoom_function_"+e.components+"(            "+p.join(", ")+", "+l+") / "+e.multiplier+".0;"),this.cacheKey+="/z_"+t},s.prototype.getPragmas=function(t){return this.pragmas[t]||(this.pragmas[t]={define:[],initialize:[]},this.pragmas[t].fragment={define:[],initialize:[]},this.pragmas[t].vertex={define:[],initialize:[]}),this.pragmas[t]},s.prototype.applyPragmas=function(t,e){var n=this;return t.replace(/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,function(t,r,i,o,a){return n.pragmas[a][r].concat(n.pragmas[a][e][r]).join("\n").replace(/{type}/g,o).replace(/{precision}/g,i)})},s.prototype.populatePaintArray=function(t,e,n,i,o){var a=e.length;e.resize(n);for(var s=0,u=this.attributes;s<u.length;s+=1)for(var c=u[s],l=r(c,t,i,o),f=a;f<n;f++){var h=e.get(f);if(4===c.components)for(var p=0;p<4;p++)h[c.name+p]=l[p]*c.multiplier;else h[c.name]=l*c.multiplier}},s.prototype.setUniforms=function(t,e,n,r){for(var i=0,o=this.uniforms;i<o.length;i+=1){var a=o[i],s=n.getPaintValue(a.property,r);4===a.components?t.uniform4fv(e[a.name],s):t.uniform1f(e[a.name],s)}for(var u=0,c=this.interpolationUniforms;u<c.length;u+=1){var l=c[u],f=n.getPaintInterpolationT(l.property,r);t.uniform1f(e[l.name],Math.max(0,Math.min(4,f-l.stopOffset)))}},e.exports=s},{"../util/util":720,"./vertex_array_type":608}],607:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=r({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});e.exports=i},{"../util/struct_array":718}],608:[function(t,e,n){"use strict";function r(t){return i({members:t,alignment:4})}var i=t("../util/struct_array");e.exports=r},{"../util/struct_array":718}],609:[function(t,e,n){"use strict";var r=function(t,e,n){this.column=t,this.row=e,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(t){return this.clone()._zoomTo(t)},r.prototype.sub=function(t){return this.clone()._sub(t)},r.prototype._zoomTo=function(t){var e=Math.pow(2,t-this.zoom);return this.column*=e,this.row*=e,this.zoom=t,this},r.prototype._sub=function(t){return t=t.zoomTo(this.zoom),this.column-=t.column,this.row-=t.row,this},e.exports=r},{}],610:[function(t,e,n){"use strict";var r=t("../util/util").wrap,i=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid LngLat object: ("+t+", "+e+")");if(this.lng=+t,this.lat=+e,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.convert=function(t){if(t instanceof i)return t;if(t&&t.hasOwnProperty("lng")&&t.hasOwnProperty("lat"))return new i(t.lng,t.lat);if(Array.isArray(t)&&2===t.length)return new i(t[0],t[1]);throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},e.exports=i},{"../util/util":720}],611:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=function(t,e){t&&(e?this.setSouthWest(t).setNorthEast(e):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))};i.prototype.setNorthEast=function(t){return this._ne=r.convert(t),this},i.prototype.setSouthWest=function(t){return this._sw=r.convert(t),this},i.prototype.extend=function(t){var e,n,o=this._sw,a=this._ne;if(t instanceof r)e=t,n=t;else{if(!(t instanceof i))return Array.isArray(t)?t.every(Array.isArray)?this.extend(i.convert(t)):this.extend(r.convert(t)):this;if(e=t._sw,n=t._ne,!e||!n)return this}return o||a?(o.lng=Math.min(e.lng,o.lng),o.lat=Math.min(e.lat,o.lat),a.lng=Math.max(n.lng,a.lng),a.lat=Math.max(n.lat,a.lat)):(this._sw=new r(e.lng,e.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},
i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.convert=function(t){return!t||t instanceof i?t:new i(t)},e.exports=i},{"./lng_lat":610}],612:[function(t,e,n){"use strict";var r=t("./lng_lat"),i=t("point-geometry"),o=t("./coordinate"),a=t("../util/util"),s=t("../util/interpolate"),u=t("../source/tile_coord"),c=t("../data/extent"),l=t("@mapbox/gl-matrix"),f=l.vec4,h=l.mat4,p=l.mat2,d=function(t,e,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=t||0,this._maxZoom=e||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0},v={minZoom:{},maxZoom:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};v.minZoom.get=function(){return this._minZoom},v.minZoom.set=function(t){this._minZoom!==t&&(this._minZoom=t,this.zoom=Math.max(this.zoom,t))},v.maxZoom.get=function(){return this._maxZoom},v.maxZoom.set=function(t){this._maxZoom!==t&&(this._maxZoom=t,this.zoom=Math.min(this.zoom,t))},v.worldSize.get=function(){return this.tileSize*this.scale},v.centerPoint.get=function(){return this.size._div(2)},v.size.get=function(){return new i(this.width,this.height)},v.bearing.get=function(){return-this.angle/Math.PI*180},v.bearing.set=function(t){var e=-a.wrap(t,-180,180)*Math.PI/180;this.angle!==e&&(this._unmodified=!1,this.angle=e,this._calcMatrices(),this.rotationMatrix=p.create(),p.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},v.pitch.get=function(){return this._pitch/Math.PI*180},v.pitch.set=function(t){var e=a.clamp(t,0,60)/180*Math.PI;this._pitch!==e&&(this._unmodified=!1,this._pitch=e,this._calcMatrices())},v.fov.get=function(){return this._fov/Math.PI*180},v.fov.set=function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=t/180*Math.PI,this._calcMatrices())},v.zoom.get=function(){return this._zoom},v.zoom.set=function(t){var e=Math.min(Math.max(t,this.minZoom),this.maxZoom);this._zoom!==e&&(this._unmodified=!1,this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom,this._constrain(),this._calcMatrices())},v.center.get=function(){return this._center},v.center.set=function(t){t.lat===this._center.lat&&t.lng===this._center.lng||(this._unmodified=!1,this._center=t,this._constrain(),this._calcMatrices())},d.prototype.coveringZoomLevel=function(t){return(t.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/t.tileSize))},d.prototype.coveringTiles=function(t){var e=this.coveringZoomLevel(t),n=e;if(e<t.minzoom)return[];e>t.maxzoom&&(e=t.maxzoom);var r=this.pointCoordinate(this.centerPoint,e),o=new i(r.column-.5,r.row-.5),a=[this.pointCoordinate(new i(0,0),e),this.pointCoordinate(new i(this.width,0),e),this.pointCoordinate(new i(this.width,this.height),e),this.pointCoordinate(new i(0,this.height),e)];return u.cover(e,a,t.reparseOverscaled?n:e,this._renderWorldCopies).sort(function(t,e){return o.dist(t)-o.dist(e)})},d.prototype.resize=function(t,e){this.width=t,this.height=e,this.pixelsToGLUnits=[2/t,-2/e],this._constrain(),this._calcMatrices()},v.unmodified.get=function(){return this._unmodified},d.prototype.zoomScale=function(t){return Math.pow(2,t)},d.prototype.scaleZoom=function(t){return Math.log(t)/Math.LN2},d.prototype.project=function(t){return new i(this.lngX(t.lng),this.latY(t.lat))},d.prototype.unproject=function(t){return new r(this.xLng(t.x),this.yLat(t.y))},v.x.get=function(){return this.lngX(this.center.lng)},v.y.get=function(){return this.latY(this.center.lat)},v.point.get=function(){return new i(this.x,this.y)},d.prototype.lngX=function(t){return(180+t)*this.worldSize/360},d.prototype.latY=function(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))*this.worldSize/360},d.prototype.xLng=function(t){return 360*t/this.worldSize-180},d.prototype.yLat=function(t){var e=180-360*t/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90},d.prototype.setLocationAtPoint=function(t,e){var n=this.pointCoordinate(e)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(t)._sub(n))},d.prototype.locationPoint=function(t){return this.coordinatePoint(this.locationCoordinate(t))},d.prototype.pointLocation=function(t){return this.coordinateLocation(this.pointCoordinate(t))},d.prototype.locationCoordinate=function(t){return new o(this.lngX(t.lng)/this.tileSize,this.latY(t.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},d.prototype.coordinateLocation=function(t){var e=t.zoomTo(this.zoom);return new r(this.xLng(e.column*this.tileSize),this.yLat(e.row*this.tileSize))},d.prototype.pointCoordinate=function(t,e){void 0===e&&(e=this.tileZoom);var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];f.transformMat4(n,n,this.pixelMatrixInverse),f.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],a=r[3],u=n[0]/i,c=r[0]/a,l=n[1]/i,h=r[1]/a,p=n[2]/i,d=r[2]/a,v=p===d?0:(0-p)/(d-p);return new o(s(u,c,v)/this.tileSize,s(l,h,v)/this.tileSize,this.zoom)._zoomTo(e)},d.prototype.coordinatePoint=function(t){var e=t.zoomTo(this.zoom),n=[e.column*this.tileSize,e.row*this.tileSize,0,1];return f.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},d.prototype.calculatePosMatrix=function(t,e){var n=t.toCoordinate(e),r=this.worldSize/this.zoomScale(n.zoom),i=h.identity(new Float64Array(16));return h.translate(i,i,[n.column*r,n.row*r,0]),h.scale(i,i,[r/c,r/c,1]),h.multiply(i,this.projMatrix,i),new Float32Array(i)},d.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t,e,n,r,o,a,s,u,c=this.size,l=this._unmodified;this.latRange&&(t=this.latY(this.latRange[1]),e=this.latY(this.latRange[0]),o=e-t<c.y?c.y/(e-t):0),this.lngRange&&(n=this.lngX(this.lngRange[0]),r=this.lngX(this.lngRange[1]),a=r-n<c.x?c.x/(r-n):0);var f=Math.max(a||0,o||0);if(f)return this.center=this.unproject(new i(a?(r+n)/2:this.x,o?(e+t)/2:this.y)),this.zoom+=this.scaleZoom(f),this._unmodified=l,void(this._constraining=!1);if(this.latRange){var h=this.y,p=c.y/2;h-p<t&&(u=t+p),h+p>e&&(u=e-p)}if(this.lngRange){var d=this.x,v=c.x/2;d-v<n&&(s=n+v),d+v>r&&(s=r-v)}void 0===s&&void 0===u||(this.center=this.unproject(new i(void 0!==s?s:this.x,void 0!==u?u:this.y))),this._unmodified=l,this._constraining=!1}},d.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var t=this._fov/2,e=Math.PI/2+this._pitch,n=Math.sin(t)*this.cameraToCenterDistance/Math.sin(Math.PI-e-t),r=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,i=1.01*r,o=new Float64Array(16);h.perspective(o,this._fov,this.width/this.height,1,i),h.scale(o,o,[1,-1,1]),h.translate(o,o,[0,0,-this.cameraToCenterDistance]),h.rotateX(o,o,this._pitch),h.rotateZ(o,o,this.angle),h.translate(o,o,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(h.scale(o,o,[1,1,a,1]),this.projMatrix=o,o=h.create(),h.scale(o,o,[this.width/2,-this.height/2,1]),h.translate(o,o,[1,-1,0]),this.pixelMatrix=h.multiply(new Float64Array(16),o,this.projMatrix),o=h.invert(new Float64Array(16),this.pixelMatrix),!o)throw new Error("failed to invert matrix");this.pixelMatrixInverse=o}},Object.defineProperties(d.prototype,v),e.exports=d},{"../data/extent":602,"../source/tile_coord":644,"../util/interpolate":712,"../util/util":720,"./coordinate":609,"./lng_lat":610,"@mapbox/gl-matrix":47,"point-geometry":784}],613:[function(t,e,n){"use strict";var r,i=t("./util/worker_pool");e.exports=function(){return r||(r=new i),r}},{"./util/worker_pool":723}],614:[function(t,e,n){"use strict";var r={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]};e.exports=function(t,e,n,i){i=i||1;var o,a,s,u,c,l,f,h,p=[];for(o=0,a=t.length;o<a;o++)if(c=r[t[o]]){for(h=null,s=0,u=c[1].length;s<u;s+=2)c[1][s]===-1&&c[1][s+1]===-1?h=null:(l=e+c[1][s]*i,f=n-c[1][s+1]*i,h&&p.push(h.x,h.y,l,f),h={x:l,y:f});e+=c[0]*i}return p}},{}],615:[function(t,e,n){"use strict";var r=t("./util/browser"),i=e.exports={};i.version=t("../package.json").version,i.workerCount=Math.max(Math.floor(r.hardwareConcurrency/2),1),i.Map=t("./ui/map"),i.NavigationControl=t("./ui/control/navigation_control"),i.GeolocateControl=t("./ui/control/geolocate_control"),i.AttributionControl=t("./ui/control/attribution_control"),i.ScaleControl=t("./ui/control/scale_control"),i.Popup=t("./ui/popup"),i.Marker=t("./ui/marker"),i.Style=t("./style/style"),i.LngLat=t("./geo/lng_lat"),i.LngLatBounds=t("./geo/lng_lat_bounds"),i.Point=t("point-geometry"),i.Evented=t("./util/evented"),i.util=t("./util/util"),i.supported=t("./util/browser").supported;var o=t("./util/ajax");i.util.getJSON=o.getJSON,i.util.getArrayBuffer=o.getArrayBuffer;var a=t("./util/config");i.config=a;var s=t("./source/rtl_text_plugin");i.setRTLTextPlugin=s.setRTLTextPlugin,Object.defineProperty(i,"accessToken",{get:function(){return a.ACCESS_TOKEN},set:function(t){a.ACCESS_TOKEN=t}})},{"../package.json":754,"./geo/lng_lat":610,"./geo/lng_lat_bounds":611,"./source/rtl_text_plugin":640,"./style/style":654,"./ui/control/attribution_control":684,"./ui/control/geolocate_control":685,"./ui/control/navigation_control":686,"./ui/control/scale_control":687,"./ui/map":696,"./ui/marker":697,"./ui/popup":698,"./util/ajax":700,"./util/browser":701,"./util/config":705,"./util/evented":709,"./util/util":720,"point-geometry":784}],616:[function(t,e,n){"use strict";function r(t,e,n){var r=t.gl,o=t.transform,a=o.tileSize,s=n.paint["background-color"],u=n.paint["background-pattern"],c=n.paint["background-opacity"],l=!u&&1===s[3]&&1===c;if(t.isOpaquePass===l){r.disable(r.STENCIL_TEST),t.setDepthSublayer(0);var f;u?(f=t.useProgram("fillPattern",t.basicFillProgramConfiguration),i.prepare(u,t,f),t.tileExtentPatternVAO.bind(r,f,t.tileExtentBuffer)):(f=t.useProgram("fill",t.basicFillProgramConfiguration),r.uniform4fv(f.u_color,s),t.tileExtentVAO.bind(r,f,t.tileExtentBuffer)),r.uniform1f(f.u_opacity,c);for(var h=o.coveringTiles({tileSize:a}),p=0,d=h;p<d.length;p+=1){var v=d[p];u&&i.setTile({coord:v,tileSize:a},t,f),r.uniformMatrix4fv(f.u_matrix,!1,t.transform.calculatePosMatrix(v)),r.drawArrays(r.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}}}var i=t("./pattern");e.exports=r},{"./pattern":628}],617:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){var o=t.gl;t.setDepthSublayer(0),t.depthMask(!1),o.disable(o.STENCIL_TEST);for(var a=0;a<r.length;a++){var s=r[a],u=e.getTile(s),c=u.getBucket(n);if(c){var l=c.buffers,f=l.layerData[n.id],h=f.programConfiguration,p=t.useProgram("circle",h);h.setUniforms(o,p,n,{zoom:t.transform.zoom}),"map"===n.paint["circle-pitch-scale"]?(o.uniform1i(p.u_scale_with_map,!0),o.uniform2f(p.u_extrude_scale,t.transform.pixelsToGLUnits[0]*t.transform.cameraToCenterDistance,t.transform.pixelsToGLUnits[1]*t.transform.cameraToCenterDistance)):(o.uniform1i(p.u_scale_with_map,!1),o.uniform2fv(p.u_extrude_scale,t.transform.pixelsToGLUnits)),o.uniform1f(p.u_devicepixelratio,i.devicePixelRatio),o.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(s.posMatrix,u,n.paint["circle-translate"],n.paint["circle-translate-anchor"]));for(var d=0,v=l.segments;d<v.length;d+=1){var m=v[d];m.vaos[n.id].bind(o,p,l.layoutVertexBuffer,l.elementBuffer,f.paintVertexBuffer,m.vertexOffset),o.drawElements(o.TRIANGLES,3*m.primitiveLength,o.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}}var i=t("../util/browser");e.exports=r},{"../util/browser":701}],618:[function(t,e,n){"use strict";function r(t,e,n,r){var i=t.gl;i.enable(i.STENCIL_TEST);for(var o=t.useProgram("collisionBox"),a=0;a<r.length;a++){var s=r[a],u=e.getTile(s),c=u.getBucket(n);if(c){var l=c.buffers.collisionBox;if(l){i.uniformMatrix4fv(o.u_matrix,!1,s.posMatrix),t.enableTileClippingMask(s),t.lineWidth(1),i.uniform1f(o.u_scale,Math.pow(2,t.transform.zoom-u.coord.z)),i.uniform1f(o.u_zoom,10*t.transform.zoom),i.uniform1f(o.u_maxzoom,10*(u.coord.z+1));for(var f=0,h=l.segments;f<h.length;f+=1){var p=h[f];p.vaos[n.id].bind(i,o,l.layoutVertexBuffer,l.elementBuffer,null,p.vertexOffset),i.drawElements(i.LINES,2*p.primitiveLength,i.UNSIGNED_SHORT,2*p.primitiveOffset*2)}}}}}e.exports=r},{}],619:[function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)i(t,e,n[r])}function i(t,e,n){var r=t.gl;r.disable(r.STENCIL_TEST),t.lineWidth(1*a.devicePixelRatio);var i=n.posMatrix,h=t.useProgram("debug");r.uniformMatrix4fv(h.u_matrix,!1,i),r.uniform4f(h.u_color,1,0,0,1),t.debugVAO.bind(r,h,t.debugBuffer),r.drawArrays(r.LINE_STRIP,0,t.debugBuffer.length);for(var p=o(n.toString(),50,200,5),d=new f,v=0;v<p.length;v+=2)d.emplaceBack(p[v],p[v+1]);var m=c.fromStructArray(d,c.BufferType.VERTEX);(new l).bind(r,h,m),r.uniform4f(h.u_color,1,1,1,1);for(var y=e.getTile(n).tileSize,g=u/(Math.pow(2,t.transform.zoom-n.z)*y),_=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<_.length;b++){var w=_[b];r.uniformMatrix4fv(h.u_matrix,!1,s.translate([],i,[g*w[0],g*w[1],0])),r.drawArrays(r.LINES,0,m.length)}r.uniform4f(h.u_color,0,0,0,1),r.uniformMatrix4fv(h.u_matrix,!1,i),r.drawArrays(r.LINES,0,m.length)}var o=t("../lib/debugtext"),a=t("../util/browser"),s=t("@mapbox/gl-matrix").mat4,u=t("../data/extent"),c=t("../data/buffer"),l=t("./vertex_array_object"),f=t("../data/pos_array");e.exports=r},{"../data/buffer":599,"../data/extent":602,"../data/pos_array":605,"../lib/debugtext":614,"../util/browser":701,"./vertex_array_object":630,"@mapbox/gl-matrix":47}],620:[function(t,e,n){"use strict";function r(t,e,n,r){var s=t.gl;s.enable(s.STENCIL_TEST);var u=!n.paint["fill-pattern"]&&n.isPaintValueFeatureConstant("fill-color")&&n.isPaintValueFeatureConstant("fill-opacity")&&1===n.paint["fill-color"][3]&&1===n.paint["fill-opacity"];t.isOpaquePass===u&&(t.setDepthSublayer(1),i(t,e,n,r,o)),!t.isOpaquePass&&n.paint["fill-antialias"]&&(t.lineWidth(2),t.depthMask(!1),t.setDepthSublayer(n.getPaintProperty("fill-outline-color")?2:0),i(t,e,n,r,a))}function i(t,e,n,r,i){for(var o=!0,a=0,s=r;a<s.length;a+=1){var u=s[a],c=e.getTile(u),l=c.getBucket(n);l&&(t.enableTileClippingMask(u),i(t,e,n,c,u,l.buffers,o),o=!1)}}function o(t,e,n,r,i,o,a){for(var u=t.gl,c=o.layerData[n.id],l=s("fill",n.paint["fill-pattern"],t,c,n,r,i,a),f=0,h=o.segments;f<h.length;f+=1){var p=h[f];p.vaos[n.id].bind(u,l,o.layoutVertexBuffer,o.elementBuffer,c.paintVertexBuffer,p.vertexOffset),u.drawElements(u.TRIANGLES,3*p.primitiveLength,u.UNSIGNED_SHORT,3*p.primitiveOffset*2)}}function a(t,e,n,r,i,o,a){var u=t.gl,c=o.layerData[n.id],l=n.paint["fill-pattern"]&&!n.getPaintProperty("fill-outline-color"),f=s("fillOutline",l,t,c,n,r,i,a);u.uniform2f(f.u_world,u.drawingBufferWidth,u.drawingBufferHeight);for(var h=0,p=o.segments2;h<p.length;h+=1){var d=p[h];d.vaos[n.id].bind(u,f,o.layoutVertexBuffer,o.elementBuffer2,c.paintVertexBuffer,d.vertexOffset),u.drawElements(u.LINES,2*d.primitiveLength,u.UNSIGNED_SHORT,2*d.primitiveOffset*2)}}function s(t,e,n,r,i,o,a,s){var c,l=n.currentProgram;return e?(c=n.useProgram(t+"Pattern",r.programConfiguration),(s||c!==l)&&(r.programConfiguration.setUniforms(n.gl,c,i,{zoom:n.transform.zoom}),u.prepare(i.paint["fill-pattern"],n,c)),u.setTile(o,n,c)):(c=n.useProgram(t,r.programConfiguration),(s||c!==l)&&r.programConfiguration.setUniforms(n.gl,c,i,{zoom:n.transform.zoom})),n.gl.uniformMatrix4fv(c.u_matrix,!1,n.translatePosMatrix(a.posMatrix,o,i.paint["fill-translate"],i.paint["fill-translate-anchor"])),c}var u=t("./pattern");e.exports=r},{"./pattern":628}],621:[function(t,e,n){"use strict";function r(t,e,n,r){if(0!==n.paint["fill-extrusion-opacity"]){var a=t.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),t.depthMask(!0);var s=new i(a,t,n);s.bindFramebuffer(),a.clearColor(0,0,0,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);for(var u=0;u<r.length;u++)o(t,e,n,r[u]);s.unbindFramebuffer(),s.renderToMap()}}function i(t,e,n){this.gl=t,this.width=e.width,this.height=e.height,this.painter=e,this.layer=n,this.texture=null,this.fbo=null,this.fbos=this.painter.preFbos[this.width]&&this.painter.preFbos[this.width][this.height]}function o(t,e,n,r){if(!t.isOpaquePass){var i=e.getTile(r),o=i.getBucket(n);if(o){var s=o.buffers,u=t.gl,c=n.paint["fill-extrusion-pattern"],l=s.layerData[n.id],h=l.programConfiguration,p=t.useProgram(c?"fillExtrusionPattern":"fillExtrusion",h);h.setUniforms(u,p,n,{zoom:t.transform.zoom}),c&&(f.prepare(c,t,p),f.setTile(i,t,p),u.uniform1f(p.u_height_factor,-Math.pow(2,r.z)/i.tileSize/8)),t.gl.uniformMatrix4fv(p.u_matrix,!1,t.translatePosMatrix(r.posMatrix,i,n.paint["fill-extrusion-translate"],n.paint["fill-extrusion-translate-anchor"])),a(p,t);for(var d=0,v=s.segments;d<v.length;d+=1){var m=v[d];m.vaos[n.id].bind(u,p,s.layoutVertexBuffer,s.elementBuffer,l.paintVertexBuffer,m.vertexOffset),u.drawElements(u.TRIANGLES,3*m.primitiveLength,u.UNSIGNED_SHORT,3*m.primitiveOffset*2)}}}}function a(t,e){var n=e.gl,r=e.style.light,i=r.calculated.position,o=[i.x,i.y,i.z],a=h.create();"viewport"===r.calculated.anchor&&h.fromRotation(a,-e.transform.angle),d.transformMat3(o,o,a),n.uniform3fv(t.u_lightpos,o),n.uniform1f(t.u_lightintensity,r.calculated.intensity),n.uniform3fv(t.u_lightcolor,r.calculated.color.slice(0,3))}var s=t("@mapbox/gl-matrix"),u=t("../data/buffer"),c=t("./vertex_array_object"),l=t("../data/pos_array"),f=t("./pattern"),h=s.mat3,p=s.mat4,d=s.vec3;e.exports=r,i.prototype.bindFramebuffer=function(){var t=this.gl;if(this.texture=this.painter.getViewportTexture(this.width,this.height),t.activeTexture(t.TEXTURE1),this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,null),this.texture.width=this.width,this.texture.height=this.height),this.fbos)this.fbo=this.fbos.pop(),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0);else{this.fbo=t.createFramebuffer();var e=t.createRenderbuffer(),n=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,e),t.bindRenderbuffer(t.RENDERBUFFER,n),t.renderbufferStorage(t.RENDERBUFFER,t.RGBA4,this.width,this.height),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,e),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0)}},i.prototype.unbindFramebuffer=function(){this.painter.bindDefaultFramebuffer(),this.fbos?this.fbos.push(this.fbo):(this.painter.preFbos[this.width]||(this.painter.preFbos[this.width]={}),this.painter.preFbos[this.width][this.height]=[this.fbo]),this.painter.saveViewportTexture(this.texture)},i.prototype.renderToMap=function(){var t=this.gl,e=this.painter,n=e.useProgram("extrusionTexture");t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.uniform1f(n.u_opacity,this.layer.paint["fill-extrusion-opacity"]),t.uniform1i(n.u_texture,1),t.uniformMatrix4fv(n.u_matrix,!1,p.ortho(p.create(),0,e.width,e.height,0,0,1)),t.disable(t.DEPTH_TEST),t.uniform1i(n.u_xdim,e.width),t.uniform1i(n.u_ydim,e.height);var r=new l;r.emplaceBack(0,0),r.emplaceBack(e.width,0),r.emplaceBack(0,e.height),r.emplaceBack(e.width,e.height);var i=u.fromStructArray(r,u.BufferType.VERTEX);(new c).bind(t,n,i),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.enable(t.DEPTH_TEST)}},{"../data/buffer":599,"../data/pos_array":605,"./pattern":628,"./vertex_array_object":630,"@mapbox/gl-matrix":47}],622:[function(t,e,n){"use strict";function r(t,e,n,r,a,s,u,c,l){var f,h,p,d,v=e.gl,m=a.paint["line-dasharray"],y=a.paint["line-pattern"];if(c||l){var g=1/o(n,1,e.transform.tileZoom);if(m){f=e.lineAtlas.getDash(m.from,"round"===a.layout["line-cap"]),h=e.lineAtlas.getDash(m.to,"round"===a.layout["line-cap"]);var _=f.width*m.fromScale,b=h.width*m.toScale;v.uniform2f(t.u_patternscale_a,g/_,-f.height/2),v.uniform2f(t.u_patternscale_b,g/b,-h.height/2),v.uniform1f(t.u_sdfgamma,e.lineAtlas.width/(256*Math.min(_,b)*i.devicePixelRatio)/2)}else if(y){if(p=e.spriteAtlas.getPosition(y.from,!0),d=e.spriteAtlas.getPosition(y.to,!0),!p||!d)return;v.uniform2f(t.u_pattern_size_a,p.size[0]*y.fromScale/g,d.size[1]),v.uniform2f(t.u_pattern_size_b,d.size[0]*y.toScale/g,d.size[1])}v.uniform2f(t.u_gl_units_to_pixels,1/e.transform.pixelsToGLUnits[0],1/e.transform.pixelsToGLUnits[1])}c&&(m?(v.uniform1i(t.u_image,0),v.activeTexture(v.TEXTURE0),e.lineAtlas.bind(v),v.uniform1f(t.u_tex_y_a,f.y),v.uniform1f(t.u_tex_y_b,h.y),v.uniform1f(t.u_mix,m.t)):y&&(v.uniform1i(t.u_image,0),v.activeTexture(v.TEXTURE0),e.spriteAtlas.bind(v,!0),v.uniform2fv(t.u_pattern_tl_a,p.tl),v.uniform2fv(t.u_pattern_br_a,p.br),v.uniform2fv(t.u_pattern_tl_b,d.tl),v.uniform2fv(t.u_pattern_br_b,d.br),v.uniform1f(t.u_fade,y.t)),v.uniform1f(t.u_width,a.paint["line-width"])),e.enableTileClippingMask(s);var w=e.translatePosMatrix(s.posMatrix,n,a.paint["line-translate"],a.paint["line-translate-anchor"]);v.uniformMatrix4fv(t.u_matrix,!1,w),v.uniform1f(t.u_ratio,1/o(n,1,e.transform.zoom));for(var x=0,E=r.segments;x<E.length;x+=1){var T=E[x];T.vaos[a.id].bind(v,t,r.layoutVertexBuffer,r.elementBuffer,u.paintVertexBuffer,T.vertexOffset),v.drawElements(v.TRIANGLES,3*T.primitiveLength,v.UNSIGNED_SHORT,3*T.primitiveOffset*2)}}var i=t("../util/browser"),o=t("../source/pixels_to_tile_units");e.exports=function(t,e,n,i){if(!t.isOpaquePass){t.setDepthSublayer(0),t.depthMask(!1);var o=t.gl;if(o.enable(o.STENCIL_TEST),!(n.paint["line-width"]<=0))for(var a,s=n.paint["line-dasharray"]?"lineSDF":n.paint["line-pattern"]?"linePattern":"line",u=!0,c=0,l=i;c<l.length;c+=1){var f=l[c],h=e.getTile(f),p=h.getBucket(n);if(p){var d=p.buffers.layerData[n.id],v=t.currentProgram,m=t.useProgram(s,d.programConfiguration),y=u||m!==v,g=a!==h.coord.z;y&&d.programConfiguration.setUniforms(t.gl,m,n,{zoom:t.transform.zoom}),r(m,t,h,p.buffers,n,f,d,y,g),a=h.coord.z,u=!1}}}}},{"../source/pixels_to_tile_units":637,"../util/browser":701}],623:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){var o=t.gl;o.enable(o.DEPTH_TEST),t.depthMask(!0),o.depthFunc(o.LESS);for(var a=r.length&&r[0].z,s=0;s<r.length;s++){var u=r[s];t.setDepthSublayer(u.z-a),i(t,e,n,u)}o.depthFunc(o.LEQUAL)}}function i(t,e,n,r){var i=t.gl;i.disable(i.STENCIL_TEST);var c=e.getTile(r),l=t.transform.calculatePosMatrix(r,e.getSource().maxzoom);c.registerFadeDuration(t.style.animationLoop,n.paint["raster-fade-duration"]);var f=t.useProgram("raster");i.uniformMatrix4fv(f.u_matrix,!1,l),i.uniform1f(f.u_brightness_low,n.paint["raster-brightness-min"]),i.uniform1f(f.u_brightness_high,n.paint["raster-brightness-max"]),i.uniform1f(f.u_saturation_factor,s(n.paint["raster-saturation"])),i.uniform1f(f.u_contrast_factor,a(n.paint["raster-contrast"])),i.uniform3fv(f.u_spin_weights,o(n.paint["raster-hue-rotate"]));var h,p,d=c.sourceCache&&c.sourceCache.findLoadedParent(r,0,{}),v=u(c,d,n,t.transform);i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,c.texture),i.activeTexture(i.TEXTURE1),d?(i.bindTexture(i.TEXTURE_2D,d.texture),h=Math.pow(2,d.coord.z-c.coord.z),p=[c.coord.x*h%1,c.coord.y*h%1]):i.bindTexture(i.TEXTURE_2D,c.texture),i.uniform2fv(f.u_tl_parent,p||[0,0]),i.uniform1f(f.u_scale_parent,h||1),i.uniform1f(f.u_buffer_scale,1),i.uniform1f(f.u_fade_t,v.mix),i.uniform1f(f.u_opacity,v.opacity*n.paint["raster-opacity"]),i.uniform1i(f.u_image0,0),i.uniform1i(f.u_image1,1);var m=c.boundsBuffer||t.rasterBoundsBuffer;(c.boundsVAO||t.rasterBoundsVAO).bind(i,f,m),i.drawArrays(i.TRIANGLE_STRIP,0,m.length)}function o(t){t*=Math.PI/180;var e=Math.sin(t),n=Math.cos(t);return[(2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3]}function a(t){return t>0?1/(1-t):1+t}function s(t){return t>0?1-1/(1.001-t):-t}function u(t,e,n,r){var i=n.paint["raster-fade-duration"];if(t.sourceCache&&i>0){var o=Date.now(),a=(o-t.timeAdded)/i,s=e?(o-e.timeAdded)/i:-1,u=t.sourceCache.getSource(),l=r.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),f=!e||Math.abs(e.coord.z-l)>Math.abs(t.coord.z-l),h=c.clamp(f?a:1-s,0,1);return e?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}var c=t("../util/util");e.exports=r},{"../util/util":720}],624:[function(t,e,n){"use strict";function r(t,e,n,r){if(!t.isOpaquePass){
var o=!(n.layout["text-allow-overlap"]||n.layout["icon-allow-overlap"]||n.layout["text-ignore-placement"]||n.layout["icon-ignore-placement"]),a=t.gl;o?a.disable(a.STENCIL_TEST):a.enable(a.STENCIL_TEST),t.setDepthSublayer(0),t.depthMask(!1),i(t,e,n,r,!1,n.paint["icon-translate"],n.paint["icon-translate-anchor"],n.layout["icon-rotation-alignment"],n.layout["icon-rotation-alignment"],n.layout["icon-size"],n.paint["icon-halo-width"],n.paint["icon-halo-color"],n.paint["icon-halo-blur"],n.paint["icon-opacity"],n.paint["icon-color"]),i(t,e,n,r,!0,n.paint["text-translate"],n.paint["text-translate-anchor"],n.layout["text-rotation-alignment"],n.layout["text-pitch-alignment"],n.layout["text-size"],n.paint["text-halo-width"],n.paint["text-halo-color"],n.paint["text-halo-blur"],n.paint["text-opacity"],n.paint["text-color"]),e.map.showCollisionBoxes&&c(t,e,n,r)}}function i(t,e,n,r,i,s,u,c,l,f,h,p,d,v,m){if(i||!t.style.sprite||t.style.sprite.loaded()){var y=t.gl,g="map"===c,_="map"===l,b=_;b?y.enable(y.DEPTH_TEST):y.disable(y.DEPTH_TEST);for(var w,x,E=0,T=r;E<T.length;E+=1){var S=T[E],M=e.getTile(S),O=M.getBucket(n);if(O){var A=i?O.buffers.glyph:O.buffers.icon;if(A&&A.segments.length){var R=i||O.sdfIcons;w&&O.fontstack===x||(w=t.useProgram(R?"symbolSDF":"symbolIcon"),o(w,t,i,R,g,_,O.fontstack,f,O.iconsNeedLinear,i?O.adjustedTextSize:O.adjustedIconSize,v)),t.enableTileClippingMask(S),y.uniformMatrix4fv(w.u_matrix,!1,t.translatePosMatrix(S.posMatrix,M,s,u)),a(w,t,n,M,A,i,R,_,f,h,p,d,m),x=O.fontstack}}}b||y.enable(y.DEPTH_TEST)}}function o(t,e,n,r,i,o,a,s,c,l,f){var h=e.gl,p=e.transform;if(h.uniform1i(t.u_rotate_with_map,i),h.uniform1i(t.u_pitch_with_map,o),h.activeTexture(h.TEXTURE0),h.uniform1i(t.u_texture,0),n){var d=a&&e.glyphSource.getGlyphAtlas(a);if(!d)return;d.updateTexture(h),h.uniform2f(t.u_texsize,d.width/4,d.height/4)}else{var v=e.options.rotating||e.options.zooming,m=1!==s||u.devicePixelRatio!==e.spriteAtlas.pixelRatio||c,y=o||p.pitch;e.spriteAtlas.bind(h,r||v||m||y),h.uniform2f(t.u_texsize,e.spriteAtlas.width/4,e.spriteAtlas.height/4)}h.activeTexture(h.TEXTURE1),e.frameHistory.bind(h),h.uniform1i(t.u_fadetexture,1);var g=Math.log(s/l)/Math.LN2||0;h.uniform1f(t.u_zoom,10*(p.zoom-g)),h.uniform1f(t.u_pitch,p.pitch/360*2*Math.PI),h.uniform1f(t.u_bearing,p.bearing/360*2*Math.PI),h.uniform1f(t.u_aspect_ratio,p.width/p.height),h.uniform1f(t.u_opacity,f)}function a(t,e,n,r,i,o,a,u,c,h,p,d,v){var m=e.gl,y=e.transform,g=c/(o?24:1);if(u){var _=l(r,g,y.zoom);m.uniform2f(t.u_extrude_scale,_,_)}else{var b=y.cameraToCenterDistance*g;m.uniform2f(t.u_extrude_scale,y.pixelsToGLUnits[0]*b,y.pixelsToGLUnits[1]*b)}if(a){var w=g*(u?Math.cos(y._pitch):1)*y.cameraToCenterDistance;h&&(m.uniform1f(t.u_gamma,(1.19*d/8+f)/w),m.uniform4fv(t.u_color,p),m.uniform1f(t.u_buffer,(6-h/g)/8),s(i,n,m,t)),m.uniform1f(t.u_gamma,f/w),m.uniform4fv(t.u_color,v),m.uniform1f(t.u_buffer,.75)}s(i,n,m,t)}function s(t,e,n,r){for(var i=0,o=t.segments;i<o.length;i+=1){var a=o[i];a.vaos[e.id].bind(n,r,t.layoutVertexBuffer,t.elementBuffer,null,a.vertexOffset),n.drawElements(n.TRIANGLES,3*a.primitiveLength,n.UNSIGNED_SHORT,3*a.primitiveOffset*2)}}var u=t("../util/browser"),c=t("./draw_collision_debug"),l=t("../source/pixels_to_tile_units");e.exports=r;var f=.105/u.devicePixelRatio},{"../source/pixels_to_tile_units":637,"../util/browser":701,"./draw_collision_debug":618}],625:[function(t,e,n){"use strict";var r=function(){this.changeTimes=new Float64Array(256),this.changeOpacities=new Uint8Array(256),this.opacities=new Uint8ClampedArray(256),this.array=new Uint8Array(this.opacities.buffer),this.previousZoom=0,this.firstFrame=!0};r.prototype.record=function(t,e,n){var r=this;this.firstFrame&&(t=0,this.firstFrame=!1),e=Math.floor(10*e);var i;if(e<this.previousZoom)for(i=e+1;i<=this.previousZoom;i++)r.changeTimes[i]=t,r.changeOpacities[i]=r.opacities[i];else for(i=e;i>this.previousZoom;i--)r.changeTimes[i]=t,r.changeOpacities[i]=r.opacities[i];for(i=0;i<256;i++){var o=t-r.changeTimes[i],a=255*(n?o/n:1);i<=e?r.opacities[i]=r.changeOpacities[i]+a:r.opacities[i]=r.changeOpacities[i]-a}this.changed=!0,this.previousZoom=e},r.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.changed&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,256,1,t.ALPHA,t.UNSIGNED_BYTE,this.array),this.changed=!1)):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,256,1,0,t.ALPHA,t.UNSIGNED_BYTE,this.array))},e.exports=r},{}],626:[function(t,e,n){"use strict";var r=t("../util/util"),i=function(t,e){this.width=t,this.height=e,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.setSprite=function(t){this.sprite=t},i.prototype.getDash=function(t,e){var n=t.join(",")+e;return this.positions[n]||(this.positions[n]=this.addDash(t,e)),this.positions[n]},i.prototype.addDash=function(t,e){var n=this,i=e?7:0,o=2*i+1;if(this.nextRow+o>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<t.length;s++)a+=t[s];for(var u=this.width/a,c=u/2,l=t.length%2===1,f=-i;f<=i;f++)for(var h=n.nextRow+i+f,p=n.width*h,d=l?-t[t.length-1]:0,v=t[0],m=1,y=0;y<this.width;y++){for(;v<y/u;)d=v,v+=t[m],l&&m===t.length-1&&(v+=t[0]),m++;var g,_=Math.abs(y-d*u),b=Math.abs(y-v*u),w=Math.min(_,b),x=m%2===1;if(e){var E=i?f/i*(c+1):0;if(x){var T=c-Math.abs(E);g=Math.sqrt(w*w+T*T)}else g=c-Math.sqrt(w*w+E*E)}else g=(x?1:-1)*w;n.data[3+4*(p+y)]=Math.max(0,Math.min(255,g+128))}var S={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:a};return this.nextRow+=o,this.dirty=!0,S},i.prototype.bind=function(t){this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},e.exports=i},{"../util/util":720}],627:[function(t,e,n){"use strict";var r=t("../util/browser"),i=t("@mapbox/gl-matrix").mat4,o=t("./frame_history"),a=t("../source/source_cache"),s=t("../data/extent"),u=t("../source/pixels_to_tile_units"),c=t("../util/util"),l=t("../data/buffer"),f=t("./vertex_array_object"),h=t("../data/raster_bounds_array"),p=t("../data/pos_array"),d=t("../data/program_configuration"),v=t("./shaders"),m={symbol:t("./draw_symbol"),circle:t("./draw_circle"),line:t("./draw_line"),fill:t("./draw_fill"),"fill-extrusion":t("./draw_fill_extrusion"),raster:t("./draw_raster"),background:t("./draw_background"),debug:t("./draw_debug")},y=function(t,e){this.gl=t,this.transform=e,this.reusableTextures={tiles:{},viewport:null},this.preFbos={},this.frameHistory=new o,this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=t.getParameter(t.ALIASED_LINE_WIDTH_RANGE),this.basicFillProgramConfiguration=d.createStatic(["color","opacity"]),this.emptyProgramConfiguration=new d};y.prototype.resize=function(t,e){var n=this.gl;this.width=t*r.devicePixelRatio,this.height=e*r.devicePixelRatio,n.viewport(0,0,this.width,this.height)},y.prototype.setup=function(){var t=this.gl;t.verbose=!0,t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.enable(t.STENCIL_TEST),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),this._depthMask=!1,t.depthMask(!1);var e=new p;e.emplaceBack(0,0),e.emplaceBack(s,0),e.emplaceBack(0,s),e.emplaceBack(s,s),this.tileExtentBuffer=l.fromStructArray(e,l.BufferType.VERTEX),this.tileExtentVAO=new f,this.tileExtentPatternVAO=new f;var n=new p;n.emplaceBack(0,0),n.emplaceBack(s,0),n.emplaceBack(s,s),n.emplaceBack(0,s),n.emplaceBack(0,0),this.debugBuffer=l.fromStructArray(n,l.BufferType.VERTEX),this.debugVAO=new f;var r=new h;r.emplaceBack(0,0,0,0),r.emplaceBack(s,0,32767,0),r.emplaceBack(0,s,0,32767),r.emplaceBack(s,s,32767,32767),this.rasterBoundsBuffer=l.fromStructArray(r,l.BufferType.VERTEX),this.rasterBoundsVAO=new f},y.prototype.clearColor=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},y.prototype.clearStencil=function(){var t=this.gl;t.clearStencil(0),t.stencilMask(255),t.clear(t.STENCIL_BUFFER_BIT)},y.prototype.clearDepth=function(){var t=this.gl;t.clearDepth(1),this.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT)},y.prototype._renderTileClippingMasks=function(t){var e=this,n=this.gl;n.colorMask(!1,!1,!1,!1),this.depthMask(!1),n.disable(n.DEPTH_TEST),n.enable(n.STENCIL_TEST),n.stencilMask(248),n.stencilOp(n.KEEP,n.KEEP,n.REPLACE);var r=1;this._tileClippingMaskIDs={};for(var i=0,o=t;i<o.length;i+=1){var a=o[i],s=e._tileClippingMaskIDs[a.id]=r++<<3;n.stencilFunc(n.ALWAYS,s,248);var u=e.useProgram("fill",e.basicFillProgramConfiguration);n.uniformMatrix4fv(u.u_matrix,!1,a.posMatrix),e.tileExtentVAO.bind(n,u,e.tileExtentBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}n.stencilMask(0),n.colorMask(!0,!0,!0,!0),this.depthMask(!0),n.enable(n.DEPTH_TEST)},y.prototype.enableTileClippingMask=function(t){var e=this.gl;e.stencilFunc(e.EQUAL,this._tileClippingMaskIDs[t.id],248)},y.prototype.prepareBuffers=function(){},y.prototype.bindDefaultFramebuffer=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},y.prototype.render=function(t,e){if(this.style=t,this.options=e,this.lineAtlas=t.lineAtlas,this.spriteAtlas=t.spriteAtlas,this.spriteAtlas.setSprite(t.sprite),this.glyphSource=t.glyphSource,this.frameHistory.record(Date.now(),this.transform.zoom,t.getTransition().duration),this.prepareBuffers(),this.clearColor(),this.clearDepth(),this.showOverdrawInspector(e.showOverdrawInspector),this.depthRange=(t._order.length+2)*this.numSublayers*this.depthEpsilon,this.isOpaquePass=!0,this.renderPass(),this.isOpaquePass=!1,this.renderPass(),this.options.showTileBoundaries){var n=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];n&&m.debug(this,n,n.getVisibleCoordinates())}},y.prototype.renderPass=function(){var t,e,n=this,r=this.style._order;this.currentLayer=this.isOpaquePass?r.length-1:0,this.isOpaquePass?this._showOverdrawInspector||this.gl.disable(this.gl.BLEND):this.gl.enable(this.gl.BLEND);for(var i=0;i<r.length;i++){var o=n.style._layers[r[n.currentLayer]];o.source!==(t&&t.id)&&(t=n.style.sourceCaches[o.source],e=[],t&&(t.prepare&&t.prepare(),n.clearStencil(),e=t.getVisibleCoordinates(),t.getSource().isTileClipped&&n._renderTileClippingMasks(e)),n.isOpaquePass||e.reverse()),n.renderLayer(n,t,o,e),n.currentLayer+=n.isOpaquePass?-1:1}},y.prototype.depthMask=function(t){t!==this._depthMask&&(this._depthMask=t,this.gl.depthMask(t))},y.prototype.renderLayer=function(t,e,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,m[n.type](t,e,n,r))},y.prototype.setDepthSublayer=function(t){var e=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon,n=e-1+this.depthRange;this.gl.depthRange(n,e)},y.prototype.translatePosMatrix=function(t,e,n,r){if(!n[0]&&!n[1])return t;if("viewport"===r){var o=Math.sin(-this.transform.angle),a=Math.cos(-this.transform.angle);n=[n[0]*a-n[1]*o,n[0]*o+n[1]*a]}var s=[u(e,n[0],this.transform.zoom),u(e,n[1],this.transform.zoom),0],c=new Float32Array(16);return i.translate(c,t,s),c},y.prototype.saveTileTexture=function(t){var e=this.reusableTextures.tiles[t.size];e?e.push(t):this.reusableTextures.tiles[t.size]=[t]},y.prototype.saveViewportTexture=function(t){this.reusableTextures.viewport=t},y.prototype.getTileTexture=function(t){var e=this.reusableTextures.tiles[t];return e&&e.length>0?e.pop():null},y.prototype.getViewportTexture=function(t,e){var n=this.reusableTextures.viewport;if(n)return n.width===t&&n.height===e?n:(this.gl.deleteTexture(n),void(this.reusableTextures.viewport=null))},y.prototype.lineWidth=function(t){this.gl.lineWidth(c.clamp(t,this.lineWidthRange[0],this.lineWidthRange[1]))},y.prototype.showOverdrawInspector=function(t){if(t||this._showOverdrawInspector){this._showOverdrawInspector=t;var e=this.gl;if(t){e.blendFunc(e.CONSTANT_COLOR,e.ONE);e.blendColor(1/8,1/8,1/8,0),e.clearColor(0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)}else e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA)}},y.prototype.createProgram=function(t,e){var n=this.gl,i=n.createProgram(),o=v[t],a="#define MAPBOX_GL_JS\n#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1)+"\n";this._showOverdrawInspector&&(a+="#define OVERDRAW_INSPECTOR;\n");var s=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(s,e.applyPragmas(a+v.prelude.fragmentSource+o.fragmentSource,"fragment")),n.compileShader(s),n.attachShader(i,s);var u=n.createShader(n.VERTEX_SHADER);n.shaderSource(u,e.applyPragmas(a+v.prelude.vertexSource+o.vertexSource,"vertex")),n.compileShader(u),n.attachShader(i,u),n.linkProgram(i);for(var c=n.getProgramParameter(i,n.ACTIVE_ATTRIBUTES),l={program:i,numAttributes:c},f=0;f<c;f++){var h=n.getActiveAttrib(i,f);l[h.name]=n.getAttribLocation(i,h.name)}for(var p=n.getProgramParameter(i,n.ACTIVE_UNIFORMS),d=0;d<p;d++){var m=n.getActiveUniform(i,d);l[m.name]=n.getUniformLocation(i,m.name)}return l},y.prototype._createProgramCached=function(t,e){this.cache=this.cache||{};var n=""+t+(e.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=this.createProgram(t,e)),this.cache[n]},y.prototype.useProgram=function(t,e){var n=this.gl,r=this._createProgramCached(t,e||this.emptyProgramConfiguration);return this.currentProgram!==r&&(n.useProgram(r.program),this.currentProgram=r),r},e.exports=y},{"../data/buffer":599,"../data/extent":602,"../data/pos_array":605,"../data/program_configuration":606,"../data/raster_bounds_array":607,"../source/pixels_to_tile_units":637,"../source/source_cache":642,"../util/browser":701,"../util/util":720,"./draw_background":616,"./draw_circle":617,"./draw_debug":619,"./draw_fill":620,"./draw_fill_extrusion":621,"./draw_line":622,"./draw_raster":623,"./draw_symbol":624,"./frame_history":625,"./shaders":629,"./vertex_array_object":630,"@mapbox/gl-matrix":47}],628:[function(t,e,n){"use strict";var r=t("../source/pixels_to_tile_units");n.prepare=function(t,e,n){var r=e.gl,i=e.spriteAtlas.getPosition(t.from,!0),o=e.spriteAtlas.getPosition(t.to,!0);i&&o&&(r.uniform1i(n.u_image,0),r.uniform2fv(n.u_pattern_tl_a,i.tl),r.uniform2fv(n.u_pattern_br_a,i.br),r.uniform2fv(n.u_pattern_tl_b,o.tl),r.uniform2fv(n.u_pattern_br_b,o.br),r.uniform1f(n.u_mix,t.t),r.uniform2fv(n.u_pattern_size_a,i.size),r.uniform2fv(n.u_pattern_size_b,o.size),r.uniform1f(n.u_scale_a,t.fromScale),r.uniform1f(n.u_scale_b,t.toScale),r.activeTexture(r.TEXTURE0),e.spriteAtlas.bind(r,!0))},n.setTile=function(t,e,n){var i=e.gl;i.uniform1f(n.u_tile_units_to_pixels,1/r(t,1,e.transform.tileZoom));var o=Math.pow(2,t.coord.z),a=t.tileSize*Math.pow(2,e.transform.tileZoom)/o,s=a*(t.coord.x+t.coord.w*o),u=a*t.coord.y;i.uniform2f(n.u_pixel_coord_upper,s>>16,u>>16),i.uniform2f(n.u_pixel_coord_lower,65535&s,65535&u)}},{"../source/pixels_to_tile_units":637}],629:[function(t,e,n){"use strict";t("path");e.exports={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\nfloat evaluate_zoom_function_1(const vec4 values, const float t) {\n    if (t < 1.0) {\n        return mix(values[0], values[1], t);\n    } else if (t < 2.0) {\n        return mix(values[1], values[2], t - 1.0);\n    } else {\n        return mix(values[2], values[3], t - 2.0);\n    }\n}\nvec4 evaluate_zoom_function_4(const vec4 value0, const vec4 value1, const vec4 value2, const vec4 value3, const float t) {\n    if (t < 1.0) {\n        return mix(value0, value1, t);\n    } else if (t < 2.0) {\n        return mix(value1, value2, t - 1.0);\n    } else {\n        return mix(value2, value3, t - 2.0);\n    }\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    float extrude_length = length(v_extrude);\n    float antialiased_blur = -max(blur, v_antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform vec2 u_extrude_scale;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec2 v_extrude;\nvarying lowp float v_antialiasblur;\n\nvoid main(void) {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    v_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    vec2 extrude = v_extrude * (radius + stroke_width) * u_extrude_scale;\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    gl_Position = u_matrix * vec4(floor(a_pos * 0.5), 0, 1);\n\n    if (u_scale_with_map) {\n        gl_Position.xy += extrude;\n    } else {\n        gl_Position.xy += extrude * gl_Position.w;\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    v_antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n}\n"},collisionBox:{fragmentSource:"uniform float u_zoom;\nuniform float u_maxzoom;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0) * alpha;\n\n    if (v_placement_zoom > u_zoom) {\n        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n    }\n\n    if (u_zoom >= v_max_zoom) {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0) * alpha * 0.25;\n    }\n\n    if (v_placement_zoom >= u_maxzoom) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0) * alpha * 0.2;\n    }\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_data;\n\nuniform mat4 u_matrix;\nuniform float u_scale;\n\nvarying float v_max_zoom;\nvarying float v_placement_zoom;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos + a_extrude / u_scale, 0.0, 1.0);\n\n    v_max_zoom = a_data.x;\n    v_placement_zoom = a_data.y;\n}\n"},debug:{fragmentSource:"uniform lowp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, step(32767.0, a_pos.x), 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = smoothstep(1.0, 0.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    gl_FragColor = v_color;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\nuniform lowp vec4 u_outline_color;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define lowp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize lowp vec4 color\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n#ifdef OUTLINE\n    color = u_outline_color;\n#endif\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a, u_pattern_br_a, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b, u_pattern_br_b, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",
vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_texture;\nuniform float u_opacity;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_texture, v_pos) * u_opacity;\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform int u_xdim;\nuniform int u_ydim;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos.x = a_pos.x / float(u_xdim);\n    v_pos.y = 1.0 - a_pos.y / float(u_ydim);\n}\n"},line:{fragmentSource:"#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a, u_pattern_br_a, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b, u_pattern_br_b, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform mediump float u_width;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset; \n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma, 0.5 + u_sdfgamma, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec2 a_pos;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\nuniform mediump float u_width;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n\nvoid main() {\n    #pragma mapbox: initialize lowp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    // We store the texture normals in the most insignificant bit\n    // transform y so that 0 => -1 and 1 => 1\n    // In the texture normal, x is 0 if the normal points straight up/down and 1 if it's a round cap\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = mod(a_pos, 2.0);\n    normal.y = sign(normal.y - 0.5);\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases. \n    // moved them into the shader for clarity and simplicity. \n    gapwidth = gapwidth / 2.0;\n    float width = u_width / 2.0;\n    offset = -1.0 * offset;\n \n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + width * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    // Remove the texture normal bit to get the position\n    vec2 pos = floor(a_pos * 0.5);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos0 = (((a_texture_pos / 32767.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp float u_opacity;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    lowp float alpha = texture2D(u_fadetexture, v_fade_tex).a * u_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n    if (u_rotate_with_map) {\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    } else {\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"},symbolSDF:{fragmentSource:"uniform sampler2D u_texture;\nuniform sampler2D u_fadetexture;\nuniform lowp vec4 u_color;\nuniform lowp float u_opacity;\nuniform lowp float u_buffer;\nuniform lowp float u_gamma;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    lowp float dist = texture2D(u_texture, v_tex).a;\n    lowp float fade_alpha = texture2D(u_fadetexture, v_fade_tex).a;\n    lowp float gamma = u_gamma * v_gamma_scale;\n    lowp float alpha = smoothstep(u_buffer - gamma, u_buffer + gamma, dist) * fade_alpha;\n\n    gl_FragColor = u_color * (alpha * u_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec2 a_pos;\nattribute vec2 a_offset;\nattribute vec2 a_texture_pos;\nattribute vec4 a_data;\n\n\n// matrix is for the vertex position.\nuniform mat4 u_matrix;\n\nuniform mediump float u_zoom;\nuniform bool u_rotate_with_map;\nuniform bool u_pitch_with_map;\nuniform mediump float u_pitch;\nuniform mediump float u_bearing;\nuniform mediump float u_aspect_ratio;\nuniform vec2 u_extrude_scale;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying vec2 v_fade_tex;\nvarying float v_gamma_scale;\n\nvoid main() {\n    vec2 a_tex = a_texture_pos.xy;\n    mediump float a_labelminzoom = a_data[0];\n    mediump vec2 a_zoom = a_data.pq;\n    mediump float a_minzoom = a_zoom[0];\n    mediump float a_maxzoom = a_zoom[1];\n\n    // u_zoom is the current zoom level adjusted for the change in font size\n    mediump float z = 2.0 - step(a_minzoom, u_zoom) - (1.0 - step(a_maxzoom, u_zoom));\n\n    // pitch-alignment: map\n    // rotation-alignment: map | viewport\n    if (u_pitch_with_map) {\n        lowp float angle = u_rotate_with_map ? (a_data[1] / 256.0 * 2.0 * PI) : u_bearing;\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, asin, -1.0 * asin, acos);\n        vec2 offset = RotationMatrix * a_offset;\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos + extrude, 0, 1);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: map\n    } else if (u_rotate_with_map) {\n        // foreshortening factor to apply on pitched maps\n        // as a label goes from horizontal <=> vertical in angle\n        // it goes from 0% foreshortening to up to around 70% foreshortening\n        lowp float pitchfactor = 1.0 - cos(u_pitch * sin(u_pitch * 0.75));\n\n        lowp float lineangle = a_data[1] / 256.0 * 2.0 * PI;\n\n        // use the lineangle to position points a,b along the line\n        // project the points and calculate the label angle in projected space\n        // this calculation allows labels to be rendered unskewed on pitched maps\n        vec4 a = u_matrix * vec4(a_pos, 0, 1);\n        vec4 b = u_matrix * vec4(a_pos + vec2(cos(lineangle),sin(lineangle)), 0, 1);\n        lowp float angle = atan((b[1]/b[3] - a[1]/a[3])/u_aspect_ratio, b[0]/b[3] - a[0]/a[3]);\n        lowp float asin = sin(angle);\n        lowp float acos = cos(angle);\n        mat2 RotationMatrix = mat2(acos, -1.0 * asin, asin, acos);\n\n        vec2 offset = RotationMatrix * (vec2((1.0-pitchfactor)+(pitchfactor*cos(angle*2.0)), 1.0) * a_offset);\n        vec2 extrude = u_extrude_scale * (offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n        gl_Position.z += z * gl_Position.w;\n    // pitch-alignment: viewport\n    // rotation-alignment: viewport\n    } else {\n        vec2 extrude = u_extrude_scale * (a_offset / 64.0);\n        gl_Position = u_matrix * vec4(a_pos, 0, 1) + vec4(extrude, 0, 0);\n    }\n\n    v_gamma_scale = gl_Position.w;\n\n    v_tex = a_tex / u_texsize;\n    v_fade_tex = vec2(a_labelminzoom / 255.0, 0.0);\n}\n"}}},{path:26}],630:[function(t,e,n){"use strict";var r=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundElementBuffer=null,this.boundVertexOffset=null,this.vao=null};r.prototype.bind=function(t,e,n,r,i,o){void 0===t.extVertexArrayObject&&(t.extVertexArrayObject=t.getExtension("OES_vertex_array_object"));var a=!this.vao||this.boundProgram!==e||this.boundVertexBuffer!==n||this.boundVertexBuffer2!==i||this.boundElementBuffer!==r||this.boundVertexOffset!==o;!t.extVertexArrayObject||a?(this.freshBind(t,e,n,r,i,o),this.gl=t):t.extVertexArrayObject.bindVertexArrayOES(this.vao)},r.prototype.freshBind=function(t,e,n,r,i,o){var a,s=e.numAttributes;if(t.extVertexArrayObject)this.vao&&this.destroy(),this.vao=t.extVertexArrayObject.createVertexArrayOES(),t.extVertexArrayObject.bindVertexArrayOES(this.vao),a=0,this.boundProgram=e,this.boundVertexBuffer=n,this.boundVertexBuffer2=i,this.boundElementBuffer=r,this.boundVertexOffset=o;else{a=t.currentNumAttributes||0;for(var u=s;u<a;u++)t.disableVertexAttribArray(u)}for(var c=a;c<s;c++)t.enableVertexAttribArray(c);n.bind(t),n.setVertexAttribPointers(t,e,o),i&&(i.bind(t),i.setVertexAttribPointers(t,e,o)),r&&r.bind(t),t.currentNumAttributes=s},r.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},e.exports=r},{}],631:[function(t,e,n){"use strict";var r=t("./image_source"),i=t("../util/window"),o=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.options=n,this.animate=!n.hasOwnProperty("animate")||n.animate}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions(this.canvas))return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));var t;this.play=function(){t=this.map.style.animationLoop.set(1/0),this.map._rerender()},this.pause=function(){this.map.style.animationLoop.cancel(t)},this._finishLoading()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.onAdd=function(t){this.map||(this.map=t,this.load(),this.canvas&&(this.animate&&this.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){var t=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions()||this.tile&&this._prepareImage(this.map.painter.gl,this.canvas,t)},e.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},e.prototype._hasInvalidDimensions=function(){for(var t=0,e=[this.canvas.width,this.canvas.height];t<e.length;t+=1){var n=e[t];if(isNaN(n)||n<=0)return!0}return!1},e}(r);e.exports=o},{"../util/window":703,"./image_source":635}],632:[function(t,e,n){"use strict";function r(t){var e=a.document.createElement("a");return e.href=t,e.href}var i=t("../util/evented"),o=t("../util/util"),a=t("../util/window"),s=t("../data/extent"),u=function(t){function e(e,n,r,i){t.call(this),n=n||{},this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var a=s/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:Math.min(n.clusterMaxZoom,this.maxzoom-1)||this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*a,log:!1}},n.workerOptions)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return void t.fire("error",{error:e});t.fire("data",{dataType:"source"}),t.fire("source.load")})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.setData=function(t){var e=this;return this._data=t,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return e.fire("error",{error:t});e.fire("data",{dataType:"source"})}),this},e.prototype._updateWorkerData=function(t){var e=this,n=o.extend({},this.workerOptions),i=this._data;"string"==typeof i?n.url=r(i):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n){e._loaded=!0,t(n)})},e.prototype.loadTile=function(t,e){var n=this,r=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={type:this.type,uid:t.uid,coord:t.coord,zoom:t.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID=this.dispatcher.send("loadTile",i,function(r,i){if(t.unloadVectorData(),!t.aborted)return r?e(r):(t.loadVectorData(i,n.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(n)),e(null))},this.workerID)},e.prototype.abortTile=function(t){t.aborted=!0},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},function(){},t.workerID)},e.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id},function(){})},e.prototype.serialize=function(){return{type:this.type,data:this._data}},e}(i);e.exports=u},{"../data/extent":602,"../util/evented":709,"../util/util":720,"../util/window":703}],633:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("geojson-rewind"),o=t("./geojson_wrapper"),a=t("vt-pbf"),s=t("supercluster"),u=t("geojson-vt"),c=t("./vector_tile_worker_source"),l=function(t){function e(e,n,r){t.call(this,e,n),r&&(this.loadGeoJSON=r),this._geoJSONIndexes={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadVectorData=function(t,e){var n=t.source,r=t.coord;if(!this._geoJSONIndexes[n])return e(null,null);var i=this._geoJSONIndexes[n].getTile(Math.min(r.z,t.maxZoom),r.x,r.y);if(!i)return e(null,null);var s=new o(i.features);s.name="_geojsonTileLayer";var u=a({layers:{_geojsonTileLayer:s}});0===u.byteOffset&&u.byteLength===u.buffer.byteLength||(u=new Uint8Array(u)),s.rawData=u.buffer,e(null,s)},e.prototype.loadData=function(t,e){var n=function(n,r){var o=this;return n?e(n):"object"!=typeof r?e(new Error("Input data is not a valid GeoJSON object.")):(i(r,!0),void this._indexData(r,t,function(n,r){if(n)return e(n);o._geoJSONIndexes[t.source]=r,e(null)}))}.bind(this);this.loadGeoJSON(t,n)},e.prototype.loadGeoJSON=function(t,e){if(t.url)r.getJSON(t.url,e);else{if("string"!=typeof t.data)return e(new Error("Input data is not a valid GeoJSON object."));try{return e(null,JSON.parse(t.data))}catch(t){return e(new Error("Input data is not a valid GeoJSON object."))}}},e.prototype.removeSource=function(t){this._geoJSONIndexes[t.source]&&delete this._geoJSONIndexes[t.source]},e.prototype._indexData=function(t,e,n){
try{e.cluster?n(null,s(e.superclusterOptions).load(t.features)):n(null,u(t,e.geojsonVtOptions))}catch(t){return n(t)}},e}(c);e.exports=l},{"../util/ajax":700,"./geojson_wrapper":634,"./vector_tile_worker_source":646,"geojson-rewind":451,"geojson-vt":455,supercluster:968,"vt-pbf":978}],634:[function(t,e,n){"use strict";var r=t("point-geometry"),i=t("vector-tile").VectorTileFeature,o=t("../data/extent"),a=function(t){var e=this;if(this.type=t.type,1===t.type){this.rawGeometry=[];for(var n=0;n<t.geometry.length;n++)e.rawGeometry.push([t.geometry[n]])}else this.rawGeometry=t.geometry;this.properties=t.tags,this.extent=o};a.prototype.loadGeometry=function(){var t=this,e=this.rawGeometry;this.geometry=[];for(var n=0;n<e.length;n++){for(var i=e[n],o=[],a=0;a<i.length;a++)o.push(new r(i[a][0],i[a][1]));t.geometry.push(o)}return this.geometry},a.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,i=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},a.prototype.toGeoJSON=function(){i.prototype.toGeoJSON.call(this)};var s=function(t){this.features=t,this.length=t.length,this.extent=o};s.prototype.feature=function(t){return new a(this.features[t])},e.exports=s},{"../data/extent":602,"point-geometry":784,"vector-tile":973}],635:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=t("./tile_coord"),a=t("../geo/lng_lat"),s=t("point-geometry"),u=t("../util/evented"),c=t("../util/ajax"),l=t("../data/extent"),f=t("../data/raster_bounds_array"),h=t("../data/buffer"),p=t("../render/vertex_array_object"),d=function(t){function e(e,n,r,i){t.call(this),this.id=e,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.setEventedParent(i),this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,c.getImage(this.options.url,function(e,n){if(e)return t.fire("error",{error:e});t.image=n,t._finishLoading()})},e.prototype._finishLoading=function(){this.fire("source.load"),this.map&&this.setCoordinates(this.coordinates)},e.prototype.onAdd=function(t){this.load(),this.map=t,this.image&&this.setCoordinates(this.coordinates)},e.prototype.setCoordinates=function(t){this.coordinates=t;var e=this.map,n=t.map(function(t){return e.transform.locationCoordinate(a.convert(t)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);return i.column=Math.round(i.column),i.row=Math.round(i.row),this.minzoom=this.maxzoom=i.zoom,this.coord=new o(i.zoom,i.column,i.row),this._tileCoords=n.map(function(t){var e=t.zoomTo(i.zoom);return new s(Math.round((e.column-i.column)*l),Math.round((e.row-i.row)*l))}),this.fire("data",{dataType:"source"}),this},e.prototype._setTile=function(t){this.tile=t;var e=new f;e.emplaceBack(this._tileCoords[0].x,this._tileCoords[0].y,0,0),e.emplaceBack(this._tileCoords[1].x,this._tileCoords[1].y,32767,0),e.emplaceBack(this._tileCoords[3].x,this._tileCoords[3].y,0,32767),e.emplaceBack(this._tileCoords[2].x,this._tileCoords[2].y,32767,32767),this.tile.buckets={},this.tile.boundsBuffer=h.fromStructArray(e,h.BufferType.VERTEX),this.tile.boundsVAO=new p},e.prototype.prepare=function(){this.tile&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},e.prototype._prepareImage=function(t,e,n){"loaded"!==this.tile.state?(this.tile.state="loaded",this.tile.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)):n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e):(e instanceof i.HTMLVideoElement||e instanceof i.ImageData||e instanceof i.HTMLCanvasElement)&&(t.bindTexture(t.TEXTURE_2D,this.tile.texture),t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e))},e.prototype.loadTile=function(t,e){this.coord&&this.coord.toString()===t.coord.toString()?(this._setTile(t),e(null)):(t.state="errored",e(null))},e.prototype.serialize=function(){return{type:"image",urls:this.url,coordinates:this.coordinates}},e}(u);e.exports=d},{"../data/buffer":599,"../data/extent":602,"../data/raster_bounds_array":607,"../geo/lng_lat":610,"../render/vertex_array_object":630,"../util/ajax":700,"../util/evented":709,"../util/util":720,"../util/window":703,"./tile_coord":644,"point-geometry":784}],636:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSourceURL;e.exports=function(t,e){var n=function(t,n){if(t)return e(t);var i=r.pick(n,["tiles","minzoom","maxzoom","attribution"]);n.vector_layers&&(i.vectorLayers=n.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(t){return t.id})),e(null,i)};t.url?i.getJSON(a(t.url),n):o.frame(n.bind(null,null,t))}},{"../util/ajax":700,"../util/browser":701,"../util/mapbox":716,"../util/util":720}],637:[function(t,e,n){"use strict";var r=t("../data/extent");e.exports=function(t,e,n){return e*(r/(t.tileSize*Math.pow(2,n-t.coord.z)))}},{"../data/extent":602}],638:[function(t,e,n){"use strict";function r(t,e){var n=t.coord,r=e.coord;return n.z-r.z||n.y-r.y||n.w-r.w||n.x-r.x}function i(t){for(var e=t[0]||{},n=1;n<t.length;n++){var r=t[n];for(var i in r){var o=r[i],a=e[i];if(void 0===a)a=e[i]=o;else for(var s=0;s<o.length;s++)a.push(o[s])}}return e}var o=t("./tile_coord");n.rendered=function(t,e,n,o,a,s){var u=t.tilesIn(n);u.sort(r);for(var c=[],l=0;l<u.length;l++){var f=u[l];f.tile.featureIndex&&c.push(f.tile.featureIndex.query({queryGeometry:f.queryGeometry,scale:f.scale,tileSize:f.tile.tileSize,bearing:s,params:o},e))}return i(c)},n.source=function(t,e){for(var n=t.getRenderableIds().map(function(e){return t.getTileByID(e)}),r=[],i={},a=0;a<n.length;a++){var s=n[a],u=new o(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;i[u]||(i[u]=!0,s.querySourceFeatures(r,e))}return r}},{"./tile_coord":644}],639:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/ajax"),o=t("../util/evented"),a=t("./load_tilejson"),s=t("../util/mapbox").normalizeTileURL,u=function(t){function e(e,n,i,o){t.call(this),this.id=e,this.dispatcher=i,this.setEventedParent(o),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this.options=n,r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),a(this.options,function(e,n){if(e)return t.fire("error",e);r.extend(t,n),t.fire("data",{dataType:"source"}),t.fire("source.load")})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return{type:"raster",url:this.url,tileSize:this.tileSize,tiles:this.tiles}},e.prototype.loadTile=function(t,e){function n(n,r){if(delete t.request,t.aborted)return this.state="unloaded",e(null);if(n)return this.state="errored",e(n);t.setExpiryData(r),delete r.cacheControl,delete r.expires;var i=this.map.painter.gl;t.texture=this.map.painter.getTileTexture(r.width),t.texture?(i.bindTexture(i.TEXTURE_2D,t.texture),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,r)):(t.texture=i.createTexture(),i.bindTexture(i.TEXTURE_2D,t.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,r),t.texture.size=r.width),i.generateMipmap(i.TEXTURE_2D),t.state="loaded",e(null)}var r=s(t.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);t.request=i.getImage(r,n.bind(this))},e.prototype.abortTile=function(t){t.request&&(t.request.abort(),delete t.request)},e.prototype.unloadTile=function(t){t.texture&&this.map.painter.saveTileTexture(t.texture)},e}(o);e.exports=u},{"../util/ajax":700,"../util/evented":709,"../util/mapbox":716,"../util/util":720,"./load_tilejson":636}],640:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("../util/window"),o=[],a=!1,s=null;e.exports.registerForPluginAvailability=function(t){s?t(s):o.push(t)},e.exports.errorCallback=null,e.exports.setRTLTextPlugin=function(t,n){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,e.exports.errorCallback=n,r.getArrayBuffer(t,function(t,e){if(t)n(t);else{s=i.URL.createObjectURL(new i.Blob([e.data]),{type:"text/javascript"});for(var r=0,a=o;r<a.length;r+=1){(0,a[r])(s)}}})}},{"../util/ajax":700,"../util/window":703}],641:[function(t,e,n){"use strict";var r=t("../util/util"),i={vector:t("../source/vector_tile_source"),raster:t("../source/raster_tile_source"),geojson:t("../source/geojson_source"),video:t("../source/video_source"),image:t("../source/image_source"),canvas:t("../source/canvas_source")};n.create=function(t,e,n,o){if(e=new i[e.type](t,e,n,o),e.id!==t)throw new Error("Expected Source id to be "+t+" instead of "+e.id);return r.bindAll(["load","abort","unload","serialize","prepare"],e),e},n.getType=function(t){return i[t]},n.setType=function(t,e){i[t]=e}},{"../source/canvas_source":631,"../source/geojson_source":632,"../source/image_source":635,"../source/raster_tile_source":639,"../source/vector_tile_source":645,"../source/video_source":647,"../util/util":720}],642:[function(t,e,n){"use strict";function r(t,e,n){var r=n.zoomTo(Math.min(t.z,e));return{x:(r.column-(t.x+t.w*Math.pow(2,t.z)))*p,y:(r.row-t.y)*p}}function i(t,e){return t%32-e%32}function o(t){return"raster"===t||"image"===t||"video"===t}var a=t("./source"),s=t("./tile"),u=t("../util/evented"),c=t("./tile_coord"),l=t("../util/lru_cache"),f=t("../geo/coordinate"),h=t("../util/util"),p=t("../data/extent"),d=function(t){function e(e,n,r){t.call(this),this.id=e,this.dispatcher=r,this.on("source.load",function(){this._sourceLoaded=!0}),this.on("error",function(){this._sourceErrored=!0}),this.on("data",function(t){this._sourceLoaded&&"source"===t.dataType&&(this.reload(),this.transform&&this.update(this.transform))}),this._source=a.create(e,n,r,this),this._tiles={},this._cache=new l(0,this.unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._isIdRenderable=this._isIdRenderable.bind(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){this.map=t,this._source&&this._source.onAdd&&this._source.onAdd(t)},e.prototype.onRemove=function(t){this._source&&this._source.onRemove&&this._source.onRemove(t)},e.prototype.loaded=function(){var t=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var e in this._tiles){var n=t._tiles[e];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},e.prototype.getSource=function(){return this._source},e.prototype.loadTile=function(t,e){return this._source.loadTile(t,e)},e.prototype.unloadTile=function(t){if(this._source.unloadTile)return this._source.unloadTile(t)},e.prototype.abortTile=function(t){if(this._source.abortTile)return this._source.abortTile(t)},e.prototype.serialize=function(){return this._source.serialize()},e.prototype.prepare=function(){if(this._sourceLoaded&&this._source.prepare)return this._source.prepare()},e.prototype.getIds=function(){return Object.keys(this._tiles).map(Number).sort(i)},e.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},e.prototype._isIdRenderable=function(t){return this._tiles[t].hasData()&&!this._coveredTiles[t]},e.prototype.reload=function(){var t=this;this._cache.reset();for(var e in this._tiles)t.reloadTile(e,"reloading")},e.prototype.reloadTile=function(t,e){var n=this._tiles[t];"loading"!==n.state&&(n.state=e),this.loadTile(n,this._tileLoaded.bind(this,n,t))},e.prototype._tileLoaded=function(t,e,n){if(n)return t.state="errored",void this._source.fire("error",{tile:t,error:n});t.sourceCache=this,t.timeAdded=(new Date).getTime(),this._setTileReloadTimer(e,t),this._source.fire("data",{tile:t,coord:t.coord,dataType:"tile"}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},e.prototype.getTile=function(t){return this.getTileByID(t.id)},e.prototype.getTileByID=function(t){return this._tiles[t]},e.prototype.getZoom=function(t){return t.zoom+t.scaleZoom(t.tileSize/this._source.tileSize)},e.prototype.findLoadedChildren=function(t,e,n){var r=this,i=!1;for(var o in this._tiles){var a=r._tiles[o];if(!(n[o]||!a.hasData()||a.coord.z<=t.z||a.coord.z>e)){var s=Math.pow(2,Math.min(a.coord.z,r._source.maxzoom)-Math.min(t.z,r._source.maxzoom));if(Math.floor(a.coord.x/s)===t.x&&Math.floor(a.coord.y/s)===t.y)for(n[o]=!0,i=!0;a&&a.coord.z-1>t.z;){var u=a.coord.parent(r._source.maxzoom).id;a=r._tiles[u],a&&a.hasData()&&(delete n[o],n[u]=!0)}}}return i},e.prototype.findLoadedParent=function(t,e,n){for(var r=this,i=t.z-1;i>=e;i--){t=t.parent(r._source.maxzoom);var o=r._tiles[t.id];if(o&&o.hasData())return n[t.id]=!0,o;if(r._cache.has(t.id))return n[t.id]=!0,r._cache.get(t.id)}},e.prototype.updateCacheSize=function(t){var e=Math.ceil(t.width/t.tileSize)+1,n=Math.ceil(t.height/t.tileSize)+1,r=e*n;this._cache.setMaxSize(Math.floor(5*r))},e.prototype.update=function(t){var n=this;if(this._sourceLoaded){var r,i,a,s;this.updateCacheSize(t);var u=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(t)),l=Math.max(u-e.maxOverzooming,this._source.minzoom),f=Math.max(u+e.maxUnderzooming,this._source.minzoom),p={};this._coveredTiles={};var d;for(d=this.used?this._source.coord?[this._source.coord]:t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}):[],r=0;r<d.length;r++)i=d[r],a=n.addTile(i),p[i.id]=!0,a.hasData()||n.findLoadedChildren(i,f,p)||(s=n.findLoadedParent(i,l,p),s&&n.addTile(s.coord));var v={};if(o(this._source.type))for(var m=Object.keys(p),y=0;y<m.length;y++){var g=m[y];i=c.fromID(g),a=n._tiles[g],a&&(void 0===a.fadeEndTime||a.fadeEndTime>=Date.now())&&(n.findLoadedChildren(i,f,p)&&(p[g]=!0),s=n.findLoadedParent(i,l,v),s&&n.addTile(s.coord))}var _;for(_ in v)p[_]||(n._coveredTiles[_]=!0);for(_ in v)p[_]=!0;var b=h.keysDifference(this._tiles,p);for(r=0;r<b.length;r++)n.removeTile(+b[r]);this.transform=t}},e.prototype.addTile=function(t){var e=this._tiles[t.id];if(e)return e;var n=t.wrapped();if(e=this._tiles[n.id],e||(e=this._cache.get(n.id),e&&(e.redoPlacement(this._source),this._cacheTimers[n.id]&&(clearTimeout(this._cacheTimers[n.id]),this._cacheTimers[n.id]=void 0,this._setTileReloadTimer(n.id,e)))),!e){var r=t.z,i=r>this._source.maxzoom?Math.pow(2,r-this._source.maxzoom):1;e=new s(n,this._source.tileSize*i,this._source.maxzoom),this.loadTile(e,this._tileLoaded.bind(this,e,t.id))}return e.uses++,this._tiles[t.id]=e,this._source.fire("dataloading",{tile:e,coord:e.coord,dataType:"tile"}),e},e.prototype._setTileReloadTimer=function(t,e){var n=this,r=e.getExpiry();r&&(this._timers[t]=setTimeout(function(){n.reloadTile(t,"expired"),n._timers[t]=void 0},r-(new Date).getTime()))},e.prototype._setCacheInvalidationTimer=function(t,e){var n=this,r=e.getExpiry();r&&(this._cacheTimers[t]=setTimeout(function(){n._cache.remove(t),n._cacheTimers[t]=void 0},r-(new Date).getTime()))},e.prototype.removeTile=function(t){var e=this._tiles[t];if(e&&(e.uses--,delete this._tiles[t],this._timers[t]&&(clearTimeout(this._timers[t]),this._timers[t]=void 0),this._source.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),!(e.uses>0)))if(e.hasData()){var n=e.coord.wrapped().id;this._cache.add(n,e),this._setCacheInvalidationTimer(n,e)}else e.aborted=!0,this.abortTile(e),this.unloadTile(e)},e.prototype.clearTiles=function(){var t=this;for(var e in this._tiles)t.removeTile(e);this._cache.reset()},e.prototype.tilesIn=function(t){for(var e=this,n={},i=this.getIds(),o=1/0,a=1/0,s=-(1/0),u=-(1/0),l=t[0].zoom,h=0;h<t.length;h++){var d=t[h];o=Math.min(o,d.column),a=Math.min(a,d.row),s=Math.max(s,d.column),u=Math.max(u,d.row)}for(var v=0;v<i.length;v++){var m=e._tiles[i[v]],y=c.fromID(i[v]),g=[r(y,m.sourceMaxZoom,new f(o,a,l)),r(y,m.sourceMaxZoom,new f(s,u,l))];if(g[0].x<p&&g[0].y<p&&g[1].x>=0&&g[1].y>=0){for(var _=[],b=0;b<t.length;b++)_.push(r(y,m.sourceMaxZoom,t[b]));var w=n[m.coord.id];void 0===w&&(w=n[m.coord.id]={tile:m,coord:y,queryGeometry:[],scale:Math.pow(2,e.transform.zoom-m.coord.z)}),w.queryGeometry.push(_)}}var x=[];for(var E in n)x.push(n[E]);return x},e.prototype.redoPlacement=function(){for(var t=this,e=this.getIds(),n=0;n<e.length;n++){t.getTileByID(e[n]).redoPlacement(t._source)}},e.prototype.getVisibleCoordinates=function(){for(var t=this,e=this.getRenderableIds().map(c.fromID),n=0,r=e;n<r.length;n+=1){var i=r[n];i.posMatrix=t.transform.calculatePosMatrix(i,t._source.maxzoom)}return e},e}(u);d.maxOverzooming=10,d.maxUnderzooming=3,e.exports=d},{"../data/extent":602,"../geo/coordinate":609,"../util/evented":709,"../util/lru_cache":715,"../util/util":720,"./source":641,"./tile":643,"./tile_coord":644}],643:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../data/bucket"),o=t("../data/feature_index"),a=t("vector-tile"),s=t("pbf"),u=t("../util/vectortile_to_geojson"),c=t("feature-filter"),l=t("../symbol/collision_tile"),f=t("../symbol/collision_box"),h=t("../symbol/symbol_instances"),p=t("../symbol/symbol_quads"),d=function(t,e,n){this.coord=t,this.uid=r.uniqueId(),this.uses=0,this.tileSize=e,this.sourceMaxZoom=n,this.buckets={},this.expires=null,this.cacheControl=null,this.state="loading"};d.prototype.registerFadeDuration=function(t,e){var n=e+this.timeAdded;n<Date.now()||this.fadeEndTime&&n<this.fadeEndTime||(this.fadeEndTime=n,t.set(this.fadeEndTime-Date.now()))},d.prototype.loadVectorData=function(t,e){this.hasData()&&this.unloadVectorData(e),this.state="loaded",t&&(t.rawTileData&&(this.rawTileData=t.rawTileData),this.collisionBoxArray=new f(t.collisionBoxArray),this.collisionTile=new l(t.collisionTile,this.collisionBoxArray),this.symbolInstancesArray=new h(t.symbolInstancesArray),this.symbolQuadsArray=new p(t.symbolQuadsArray),this.featureIndex=new o(t.featureIndex,this.rawTileData,this.collisionTile),this.buckets=i.deserialize(t.buckets,e.style))},d.prototype.reloadSymbolData=function(t,e){var n=this;if("unloaded"!==this.state){this.collisionTile=new l(t.collisionTile,this.collisionBoxArray),this.featureIndex.setCollisionTile(this.collisionTile);for(var o in this.buckets){var a=n.buckets[o];"symbol"===a.layers[0].type&&(a.destroy(),delete n.buckets[o])}r.extend(this.buckets,i.deserialize(t.buckets,e))}},d.prototype.unloadVectorData=function(){var t=this;for(var e in this.buckets)t.buckets[e].destroy();this.buckets={},this.collisionBoxArray=null,this.symbolQuadsArray=null,this.symbolInstancesArray=null,this.collisionTile=null,this.featureIndex=null,this.state="unloaded"},d.prototype.redoPlacement=function(t){var e=this;if("vector"===t.type||"geojson"===t.type)return"loaded"!==this.state?void(this.redoWhenDone=!0):void(this.collisionTile&&(this.state="reloading",t.dispatcher.send("redoPlacement",{type:t.type,uid:this.uid,source:t.id,angle:t.map.transform.angle,pitch:t.map.transform.pitch,showCollisionBoxes:t.map.showCollisionBoxes},function(n,r){e.reloadSymbolData(r,t.map.style),t.fire("data",{tile:e,coord:e.coord,dataType:"tile"}),t.map&&(t.map.painter.tileExtentVAO.vao=null),e.state="loaded",e.redoWhenDone&&(e.redoWhenDone=!1,e.redoPlacement(t))},this.workerID)))},d.prototype.getBucket=function(t){return this.buckets[t.id]},d.prototype.querySourceFeatures=function(t,e){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new s(this.rawTileData)).layers);var r=this.vtLayers._geojsonTileLayer||this.vtLayers[e.sourceLayer];if(r)for(var i=c(e&&e.filter),o={z:this.coord.z,x:this.coord.x,y:this.coord.y},l=0;l<r.length;l++){var f=r.feature(l);if(i(f)){var h=new u(f,n.coord.z,n.coord.x,n.coord.y);h.tile=o,t.push(h)}}}},d.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},d.prototype.setExpiryData=function(t){t.cacheControl&&(this.cacheControl=t.cacheControl),t.expires&&(this.expires=t.expires)},d.prototype.getExpiry=function(){if(this.cacheControl){var t=r.parseCacheControl(this.cacheControl);if(t["max-age"])return this.timeAdded+1e3*t["max-age"]}else if(this.expires)return new Date(this.expires).getTime()},e.exports=d},{"../data/bucket":593,"../data/feature_index":603,"../symbol/collision_box":669,"../symbol/collision_tile":671,"../symbol/symbol_instances":680,"../symbol/symbol_quads":681,"../util/util":720,"../util/vectortile_to_geojson":721,"feature-filter":447,pbf:762,"vector-tile":973}],644:[function(t,e,n){"use strict";function r(t,e){if(t.row>e.row){var n=t;t=e,e=n}return{x0:t.column,y0:t.row,x1:e.column,y1:e.row,dx:e.column-t.column,dy:e.row-t.row}}function i(t,e,n,r,i){var o=Math.max(n,Math.floor(e.y0)),a=Math.min(r,Math.ceil(e.y1));if(t.x0===e.x0&&t.y0===e.y0?t.x0+e.dy/t.dy*t.dx<e.x1:t.x1-e.dy/t.dy*t.dx<e.x0){var s=t;t=e,e=s}for(var u=t.dx/t.dy,c=e.dx/e.dy,l=t.dx>0,f=e.dx<0,h=o;h<a;h++){var p=u*Math.max(0,Math.min(t.dy,h+l-t.y0))+t.x0,d=c*Math.max(0,Math.min(e.dy,h+f-e.y0))+e.x0;i(Math.floor(d),Math.ceil(p),h)}}function o(t,e,n,o,a,s){var u,c=r(t,e),l=r(e,n),f=r(n,t);c.dy>l.dy&&(u=c,c=l,l=u),c.dy>f.dy&&(u=c,c=f,f=u),l.dy>f.dy&&(u=l,l=f,f=u),c.dy&&i(f,c,o,a,s),l.dy&&i(f,l,o,a,s)}function a(t,e,n){for(var r,i="",o=t;o>0;o--)r=1<<o-1,i+=(e&r?1:0)+(n&r?2:0);return i}var s=t("whoots-js"),u=t("../geo/coordinate"),c=function(t,e,n,r){isNaN(r)&&(r=0),this.z=+t,this.x=+e,this.y=+n,this.w=+r,r*=2,r<0&&(r=r*-1-1);var i=1<<this.z;this.id=32*(i*i*r+i*this.y+this.x)+this.z,this.posMatrix=null};c.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},c.prototype.toCoordinate=function(t){var e=Math.min(this.z,void 0===t?this.z:t),n=Math.pow(2,e),r=this.y;return new u(this.x+n*this.w,r,e)},c.prototype.url=function(t,e,n){var r=s.getTileBBox(this.x,this.y,this.z),i=a(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",Math.min(this.z,e||this.z)).replace("{x}",this.x).replace("{y}","tms"===n?Math.pow(2,this.z)-this.y-1:this.y).replace("{quadkey}",i).replace("{bbox-epsg-3857}",r)},c.prototype.parent=function(t){return 0===this.z?null:this.z>t?new c(this.z-1,this.x,this.y,this.w):new c(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},c.prototype.wrapped=function(){return new c(this.z,this.x,this.y,0)},c.prototype.children=function(t){if(this.z>=t)return[new c(this.z+1,this.x,this.y,this.w)];var e=this.z+1,n=2*this.x,r=2*this.y;return[new c(e,n,r,this.w),new c(e,n+1,r,this.w),new c(e,n,r+1,this.w),new c(e,n+1,r+1,this.w)]},c.cover=function(t,e,n,r){function i(t,e,i){var o,u,l,f;if(i>=0&&i<=a)for(o=t;o<e;o++)u=Math.floor(o/a),l=(o%a+a)%a,0!==u&&r!==!0||(f=new c(n,l,i,u),s[f.id]=f)}void 0===r&&(r=!0);var a=1<<t,s={};return o(e[0],e[1],e[2],0,a,i),o(e[2],e[3],e[0],0,a,i),Object.keys(s).map(function(t){return s[t]})},c.fromID=function(t){var e=t%32,n=1<<e,r=(t-e)/32,i=r%n,o=(r-i)/n%n,a=Math.floor(r/(n*n));return a%2!==0&&(a=a*-1-1),a/=2,new c(e,i,o,a)},e.exports=c},{"../geo/coordinate":609,"whoots-js":992}],645:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/util"),o=t("./load_tilejson"),a=t("../util/mapbox").normalizeTileURL,s=function(t){function e(e,n,r,o){if(t.call(this),this.id=e,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(o)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this;this.fire("dataloading",{dataType:"source"}),o(this._options,function(e,n){if(e)return void t.fire("error",e);i.extend(t,n),t.fire("data",{dataType:"source"}),t.fire("source.load")})},e.prototype.onAdd=function(t){this.load(),this.map=t},e.prototype.serialize=function(){return i.extend({},this._options)},e.prototype.loadTile=function(t,e){function n(n,r){if(!t.aborted){if(n)return e(n);t.setExpiryData(r),t.loadVectorData(r,this.map.painter),t.redoWhenDone&&(t.redoWhenDone=!1,t.redoPlacement(this)),e(null),t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)}}var r=t.coord.z>this.maxzoom?Math.pow(2,t.coord.z-this.maxzoom):1,i={url:a(t.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),uid:t.uid,coord:t.coord,zoom:t.coord.z,tileSize:this.tileSize*r,type:this.type,source:this.id,overscaling:r,angle:this.map.transform.angle,pitch:this.map.transform.pitch,showCollisionBoxes:this.map.showCollisionBoxes};t.workerID&&"expired"!==t.state?"loading"===t.state?t.reloadCallback=e:this.dispatcher.send("reloadTile",i,n.bind(this),t.workerID):t.workerID=this.dispatcher.send("loadTile",i,n.bind(this))},e.prototype.abortTile=function(t){this.dispatcher.send("abortTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e.prototype.unloadTile=function(t){t.unloadVectorData(),this.dispatcher.send("removeTile",{uid:t.uid,type:this.type,source:this.id},null,t.workerID)},e}(r);e.exports=s},{"../util/evented":709,"../util/mapbox":716,"../util/util":720,"./load_tilejson":636}],646:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("vector-tile"),o=t("pbf"),a=t("./worker_tile"),s=t("../util/util"),u=function(t,e,n){this.actor=t,this.layerIndex=e,n&&(this.loadVectorData=n),this.loading={},this.loaded={}};u.prototype.loadTile=function(t,e){function n(t,n){return delete this.loading[r][i],t?e(t):n?(o.vectorTile=n,o.parse(n,this.layerIndex,this.actor,function(t,r,i){if(t)return e(t);var o={};n.expires&&(o.expires=n.expires),n.cacheControl&&(o.cacheControl=n.cacheControl),e(null,s.extend({rawTileData:n.rawData},r,o),i)}),this.loaded[r]=this.loaded[r]||{},void(this.loaded[r][i]=o)):e(null,null)}var r=t.source,i=t.uid;this.loading[r]||(this.loading[r]={});var o=this.loading[r][i]=new a(t);o.abort=this.loadVectorData(t,n.bind(this))},u.prototype.reloadTile=function(t,e){function n(t,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,o.layerIndex,o.actor,r)}e(t,n)}var r=this.loaded[t.source],i=t.uid,o=this;if(r&&r[i]){var a=r[i];"parsing"===a.status?a.reloadCallback=e:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,n.bind(a))}},u.prototype.abortTile=function(t){var e=this.loading[t.source],n=t.uid;e&&e[n]&&e[n].abort&&(e[n].abort(),delete e[n])},u.prototype.removeTile=function(t){var e=this.loaded[t.source],n=t.uid;e&&e[n]&&delete e[n]},u.prototype.loadVectorData=function(t,e){function n(t,n){if(t)return e(t);var r=new i.VectorTile(new o(n.data));r.rawData=n.data,r.cacheControl=n.cacheControl,r.expires=n.expires,e(t,r)}var a=r.getArrayBuffer(t.url,n.bind(this));return function(){a.abort()}},u.prototype.redoPlacement=function(t,e){var n=this.loaded[t.source],r=this.loading[t.source],i=t.uid;if(n&&n[i]){var o=n[i],a=o.redoPlacement(t.angle,t.pitch,t.showCollisionBoxes);a.result&&e(null,a.result,a.transferables)}else r&&r[i]&&(r[i].angle=t.angle)},e.exports=u},{"../util/ajax":700,"../util/util":720,"./worker_tile":649,pbf:762,"vector-tile":973}],647:[function(t,e,n){"use strict";var r=t("../util/ajax"),i=t("./image_source"),o=function(t){function e(e,n,r,i){t.call(this,e,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.load=function(){var t=this,e=this.options;this.urls=e.urls,r.getVideo(e.urls,function(e,n){if(e)return t.fire("error",{error:e});t.video=n,t.video.loop=!0;var r;t.video.addEventListener("playing",function(){r=t.map.style.animationLoop.set(1/0),t.map._rerender()}),t.video.addEventListener("pause",function(){t.map.style.animationLoop.cancel(r)}),t.map&&t.video.play(),t._finishLoading()})},e.prototype.getVideo=function(){return this.video},e.prototype.onAdd=function(t){this.map||(this.load(),this.map=t,this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},e.prototype.prepare=function(){!this.tile||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},e.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},e}(i);e.exports=o},{"../util/ajax":700,"./image_source":635}],648:[function(t,e,n){"use strict";var r=t("../util/actor"),i=t("../style/style_layer_index"),o=t("./vector_tile_worker_source"),a=t("./geojson_worker_source"),s=t("./rtl_text_plugin"),u=function(t){var e=this;this.self=t,this.actor=new r(t,this),this.layerIndexes={},this.workerSourceTypes={vector:o,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(t,n){if(e.workerSourceTypes[t])throw new Error('Worker source with name "'+t+'" already registered.');e.workerSourceTypes[t]=n},this.self.registerRTLTextPlugin=function(t){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=t.applyArabicShaping,s.processBidirectionalText=t.processBidirectionalText}};u.prototype.setLayers=function(t,e){this.getLayerIndex(t).replace(e)},u.prototype.updateLayers=function(t,e){this.getLayerIndex(t).update(e.layers,e.removedIds,e.symbolOrder)},u.prototype.loadTile=function(t,e,n){this.getWorkerSource(t,e.type).loadTile(e,n)},u.prototype.reloadTile=function(t,e,n){this.getWorkerSource(t,e.type).reloadTile(e,n)},u.prototype.abortTile=function(t,e){this.getWorkerSource(t,e.type).abortTile(e)},u.prototype.removeTile=function(t,e){this.getWorkerSource(t,e.type).removeTile(e)},u.prototype.removeSource=function(t,e){var n=this.getWorkerSource(t,e.type);void 0!==n.removeSource&&n.removeSource(e)},u.prototype.redoPlacement=function(t,e,n){this.getWorkerSource(t,e.type).redoPlacement(e,n)},u.prototype.loadWorkerSource=function(t,e,n){try{this.self.importScripts(e.url),n()}catch(t){n(t)}},u.prototype.loadRTLTextPlugin=function(t,e,n){try{s.applyArabicShaping||s.processBidirectionalText||this.self.importScripts(e)}catch(t){n(t)}},u.prototype.getLayerIndex=function(t){var e=this.layerIndexes[t];return e||(e=this.layerIndexes[t]=new i),e},u.prototype.getWorkerSource=function(t,e){var n=this;if(this.workerSources[t]||(this.workerSources[t]={}),!this.workerSources[t][e]){var r={send:function(e,r,i,o){n.actor.send(e,r,i,o,t)}};this.workerSources[t][e]=new this.workerSourceTypes[e](r,this.getLayerIndex(t))}return this.workerSources[t][e]},e.exports=function(t){return new u(t)}},{"../style/style_layer_index":662,"../util/actor":699,"./geojson_worker_source":633,"./rtl_text_plugin":640,"./vector_tile_worker_source":646}],649:[function(t,e,n){"use strict";function r(t,e){for(var n=0,r=t.layers;n<r.length;n+=1){r[n].recalculate(e)}}function i(t,e){return t.filter(function(t){return!t.isEmpty()}).map(function(t){return t.serialize(e)})}var o=t("../data/feature_index"),a=t("../symbol/collision_tile"),s=t("../symbol/collision_box"),u=t("../util/dictionary_coder"),c=t("../util/util"),l=t("../symbol/symbol_instances"),f=t("../symbol/symbol_quads"),h=function(t){this.coord=t.coord,this.uid=t.uid,this.zoom=t.zoom,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=t.overscaling,this.angle=t.angle,this.pitch=t.pitch,
this.showCollisionBoxes=t.showCollisionBoxes};h.prototype.parse=function(t,e,n,h){var p=this;t.layers||(t={layers:{_geojsonTileLayer:t}}),this.status="parsing",this.data=t,this.collisionBoxArray=new s,this.symbolInstancesArray=new l,this.symbolQuadsArray=new f;var d=new u(Object.keys(t.layers).sort()),v=new o(this.coord,this.overscaling);v.bucketLayerIDs={};var m={},y=0,g={featureIndex:v,iconDependencies:{},glyphDependencies:{}},_=e.familiesBySource[this.source];for(var b in _){var w=t.layers[b];if(w){1===w.version&&c.warnOnce('Vector tile source "'+p.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var x=d.encode(b),E=[],T=0;T<w.length;T++){var S=w.feature(T);S.index=T,S.sourceLayerIndex=x,E.push(S)}for(var M=0,O=_[b];M<O.length;M+=1){var A=O[M],R=A[0];if(!(R.minzoom&&p.zoom<R.minzoom||R.maxzoom&&p.zoom>=R.maxzoom||R.layout&&"none"===R.layout.visibility)){for(var I=0,k=A;I<k.length;I+=1){k[I].recalculate(p.zoom)}(m[R.id]=R.createBucket({index:y,layers:A,zoom:p.zoom,overscaling:p.overscaling,collisionBoxArray:p.collisionBoxArray,symbolQuadsArray:p.symbolQuadsArray,symbolInstancesArray:p.symbolInstancesArray})).populate(E,g),v.bucketLayerIDs[y]=A.map(function(t){return t.id}),y++}}}}var P=function(t){p.status="done";var e=[];h(null,{buckets:i(c.values(m),e),featureIndex:v.serialize(e),collisionTile:t.serialize(e),collisionBoxArray:p.collisionBoxArray.serialize(),symbolInstancesArray:p.symbolInstancesArray.serialize(),symbolQuadsArray:p.symbolQuadsArray.serialize()},e)};this.symbolBuckets=[];for(var N=e.symbolOrder.length-1;N>=0;N--){var C=m[e.symbolOrder[N]];C&&p.symbolBuckets.push(C)}if(0===this.symbolBuckets.length)return P(new a(this.angle,this.pitch,this.collisionBoxArray));var D=0,j=Object.keys(g.iconDependencies),L=c.mapObject(g.glyphDependencies,function(t){return Object.keys(t).map(Number)}),F=function(t){if(t)return h(t);if(D++,2===D){for(var e=new a(p.angle,p.pitch,p.collisionBoxArray),n=0,i=p.symbolBuckets;n<i.length;n+=1){var o=i[n];r(o,p.zoom),o.prepare(L,j),o.place(e,p.showCollisionBoxes)}P(e)}};Object.keys(L).length?n.send("getGlyphs",{uid:this.uid,stacks:L},function(t,e){L=e,F(t)}):F(),j.length?n.send("getIcons",{icons:j},function(t,e){j=e,F(t)}):F()},h.prototype.redoPlacement=function(t,e,n){var o=this;if(this.angle=t,this.pitch=e,"done"!==this.status)return{};for(var s=new a(this.angle,this.pitch,this.collisionBoxArray),u=0,c=this.symbolBuckets;u<c.length;u+=1){var l=c[u];r(l,o.zoom),l.place(s,n)}var f=[];return{result:{buckets:i(this.symbolBuckets,f),collisionTile:s.serialize(f)},transferables:f}},e.exports=h},{"../data/feature_index":603,"../symbol/collision_box":669,"../symbol/collision_tile":671,"../symbol/symbol_instances":680,"../symbol/symbol_quads":681,"../util/dictionary_coder":706,"../util/util":720}],650:[function(t,e,n){"use strict";var r=function(){this.n=0,this.times=[]};r.prototype.stopped=function(){return this.times=this.times.filter(function(t){return t.time>=(new Date).getTime()}),!this.times.length},r.prototype.set=function(t){return this.times.push({id:this.n,time:t+(new Date).getTime()}),this.n++},r.prototype.cancel=function(t){this.times=this.times.filter(function(e){return e.id!==t})},e.exports=r},{}],651:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("../util/ajax"),o=t("../util/browser"),a=t("../util/mapbox").normalizeSpriteURL,s=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.pixelRatio=1,this.sdf=!1},u=function(t){function e(e,n){var r=this;t.call(this),this.base=e,this.retina=o.devicePixelRatio>1,this.setEventedParent(n);var s=this.retina?"@2x":"";i.getJSON(a(e,s,".json"),function(t,e){if(t)return void r.fire("error",{error:t});r.data=e,r.imgData&&r.fire("data",{dataType:"style"})}),i.getImage(a(e,s,".png"),function(t,e){if(t)return void r.fire("error",{error:t});r.imgData=o.getImageData(e);for(var n=0;n<r.imgData.length;n+=4){var i=r.imgData[n+3]/255;r.imgData[n+0]*=i,r.imgData[n+1]*=i,r.imgData[n+2]*=i}r.width=e.width,r.data&&r.fire("data",{dataType:"style"})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toJSON=function(){return this.base},e.prototype.loaded=function(){return!(!this.data||!this.imgData)},e.prototype.resize=function(){var t=this;if(o.devicePixelRatio>1!==this.retina){var n=new e(this.base);n.on("data",function(){t.data=n.data,t.imgData=n.imgData,t.width=n.width,t.retina=n.retina})}},e.prototype.getSpritePosition=function(t){if(!this.loaded())return new s;var e=this.data&&this.data[t];return e&&this.imgData?e:new s},e}(r);e.exports=u},{"../util/ajax":700,"../util/browser":701,"../util/evented":709,"../util/mapbox":716}],652:[function(t,e,n){"use strict";var r=t("./style_spec"),i=t("../util/util"),o=t("../util/evented"),a=t("./validate_style"),s=t("./style_declaration"),u=t("./style_transition"),c=function(t){function e(e){t.call(this),this.properties=["anchor","color","position","intensity"],this._specifications=r.light,this.set(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.set=function(t){var e=this;if(!this._validate(a.light,t)){this._declarations={},this._transitions={},this._transitionOptions={},this.calculated={},t=i.extend({anchor:this._specifications.anchor.default,color:this._specifications.color.default,position:this._specifications.position.default,intensity:this._specifications.intensity.default},t);for(var n=0,r=this.properties;n<r.length;n+=1){var o=r[n];e._declarations[o]=new s(e._specifications[o],t[o])}return this}},e.prototype.getLight=function(){return{anchor:this.getLightProperty("anchor"),color:this.getLightProperty("color"),position:this.getLightProperty("position"),intensity:this.getLightProperty("intensity")}},e.prototype.getLightProperty=function(t){return i.endsWith(t,"-transition")?this._transitionOptions[t]:this._declarations[t]&&this._declarations[t].value},e.prototype.getLightValue=function(t,e){if("position"===t){var n=this._transitions[t].calculate(e),r=i.sphericalToCartesian(n);return{x:r[0],y:r[1],z:r[2]}}return this._transitions[t].calculate(e)},e.prototype.setLight=function(t){var e=this;if(!this._validate(a.light,t))for(var n in t){var r=t[n];i.endsWith(n,"-transition")?e._transitionOptions[n]=r:null===r||void 0===r?delete e._declarations[n]:e._declarations[n]=new s(e._specifications[n],r)}},e.prototype.recalculate=function(t){var e=this;for(var n in this._declarations)e.calculated[n]=e.getLightValue(n,{zoom:t})},e.prototype._applyLightDeclaration=function(t,e,n,r,o){var a=n.transition?this._transitions[t]:void 0,c=this._specifications[t];if(null!==e&&void 0!==e||(e=new s(c,c.default)),!a||a.declaration.json!==e.json){var l=i.extend({duration:300,delay:0},r,this.getLightProperty(t+"-transition")),f=this._transitions[t]=new u(c,e,a,l);f.instant()||(f.loopID=o.set(f.endTime-Date.now())),a&&o.cancel(a.loopID)}},e.prototype.updateLightTransitions=function(t,e,n){var r,i=this;for(r in this._declarations)i._applyLightDeclaration(r,i._declarations[r],t,e,n)},e.prototype._validate=function(t,e){return a.emitErrors(this,t.call(a,i.extend({value:e,style:{glyphs:!0,sprite:!0},styleSpec:r})))},e}(o);e.exports=c},{"../util/evented":709,"../util/util":720,"./style_declaration":655,"./style_spec":663,"./style_transition":664,"./validate_style":665}],653:[function(t,e,n){"use strict";var r=t("csscolorparser").parseCSSColor,i=t("../util/util"),o=t("mapbox-gl-function"),a={};e.exports=function t(e){if(e&&o.isFunctionDefinition(e))return e.stops?i.extend({},e,{stops:e.stops.map(function(e){return[e[0],t(e[1])]})}):e;if("string"==typeof e){if(!a[e]){var n=r(e);if(!n)throw new Error("Invalid color "+e);a[e]=[n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]]}return a[e]}if(Array.isArray(e))return e;throw new Error("Invalid color "+e)}},{"../util/util":720,csscolorparser:350,"mapbox-gl-function":725}],654:[function(t,e,n){"use strict";var r=t("../util/evented"),i=t("./style_layer"),o=t("./image_sprite"),a=t("./light"),s=t("../symbol/glyph_source"),u=t("../symbol/sprite_atlas"),c=t("../render/line_atlas"),l=t("../util/util"),f=t("../util/ajax"),h=t("../util/mapbox"),p=t("../util/browser"),d=t("../util/dispatcher"),v=t("./animation_loop"),m=t("./validate_style"),y=t("../source/source"),g=t("../source/query_features"),_=t("../source/source_cache"),b=t("./style_spec"),w=t("mapbox-gl-function"),x=t("../global_worker_pool"),E=t("mapbox-gl-style-spec/lib/deref"),T=t("mapbox-gl-style-spec/lib/diff"),S=t("../source/rtl_text_plugin"),M=l.pick(T.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition"]),O=l.pick(T.operations,["setCenter","setZoom","setBearing","setPitch"]),A=function(t){function e(e,n,r){var i=this;t.call(this),this.map=n,this.animationLoop=n&&n.animationLoop||new v,this.dispatcher=new d(x(),this),this.spriteAtlas=new u(1024,1024),this.lineAtlas=new c(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,l.bindAll(["_redoPlacement"],this),this._resetUpdates(),r=l.extend({validate:"string"!=typeof e||!h.isMapboxURL(e)},r),this.setEventedParent(n),this.fire("dataloading",{dataType:"style"});var a=this;S.registerForPluginAvailability(function(t){a.dispatcher.broadcast("loadRTLTextPlugin",t,S.errorCallback);for(var e in a.sourceCaches)a.sourceCaches[e].reload()});var y=function(t,e){if(t)return void i.fire("error",{error:t});if(!r.validate||!m.emitErrors(i,m(e))){i._loaded=!0,i.stylesheet=e,i.updateClasses();for(var n in e.sources)i.addSource(n,e.sources[n],r);e.sprite&&(i.sprite=new o(e.sprite,i)),i.glyphSource=new s(e.glyphs),i._resolve(),i.fire("data",{dataType:"style"}),i.fire("style.load")}};"string"==typeof e?f.getJSON(h.normalizeStyleURL(e),y):p.frame(y.bind(this,null,e)),this.on("source.load",function(t){var e=i.sourceCaches[t.sourceId].getSource();if(e&&e.vectorLayerIds)for(var n in i._layers){var r=i._layers[n];r.source===e.id&&i._validateLayer(r)}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._validateLayer=function(t){var e=this.sourceCaches[t.source];if(t.sourceLayer&&e){var n=e.getSource();("geojson"===n.type||n.vectorLayerIds&&n.vectorLayerIds.indexOf(t.sourceLayer)===-1)&&this.fire("error",{error:new Error('Source layer "'+t.sourceLayer+'" does not exist on source "'+n.id+'" as specified by style layer "'+t.id+'"')})}},e.prototype.loaded=function(){var t=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this.sourceCaches)if(!t.sourceCaches[e].loaded())return!1;return!(this.sprite&&!this.sprite.loaded())},e.prototype._resolve=function(){var t=this,e=E(this.stylesheet.layers);this._order=e.map(function(t){return t.id}),this._layers={};for(var n=0,r=e;n<r.length;n+=1){var o=r[n];o=i.create(o),o.setEventedParent(t,{layer:{id:o.id}}),t._layers[o.id]=o}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new a(this.stylesheet.light)},e.prototype._serializeLayers=function(t){var e=this;return t.map(function(t){return e._layers[t].serialize()})},e.prototype._applyClasses=function(t,e){var n=this;if(this._loaded){t=t||[],e=e||{transition:!0};var r=this.stylesheet.transition||{},i=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in i){var a=n._layers[o],s=n._updatedPaintProps[o];if(n._updatedAllPaintProps||s.all)a.updatePaintTransitions(t,e,r,n.animationLoop,n.zoomHistory);else for(var u in s)n._layers[o].updatePaintTransition(u,t,e,r,n.animationLoop,n.zoomHistory)}this.light.updateLightTransitions(e,r,this.animationLoop)}},e.prototype._recalculate=function(t){var e=this;if(this._loaded){for(var n in this.sourceCaches)e.sourceCaches[n].used=!1;this._updateZoomHistory(t);for(var r=0,i=this._order;r<i.length;r+=1){var o=i[r],a=e._layers[o];a.recalculate(t),!a.isHidden(t)&&a.source&&(e.sourceCaches[a.source].used=!0)}this.light.recalculate(t);Math.floor(this.z)!==Math.floor(t)&&this.animationLoop.set(300),this.z=t}},e.prototype._updateZoomHistory=function(t){var e=this.zoomHistory;void 0===e.lastIntegerZoom&&(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=0,e.lastZoom=t),Math.floor(e.lastZoom)<Math.floor(t)?(e.lastIntegerZoom=Math.floor(t),e.lastIntegerZoomTime=Date.now()):Math.floor(e.lastZoom)>Math.floor(t)&&(e.lastIntegerZoom=Math.floor(t+1),e.lastIntegerZoomTime=Date.now()),e.lastZoom=t},e.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},e.prototype.update=function(t,e){var n=this;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(r.length||i.length||this._updatedSymbolOrder)&&this._updateWorkerLayers(r,i);for(var o in this._updatedSources){var a=n._updatedSources[o];"reload"===a?n._reloadSource(o):"clear"===a&&n._clearSource(o)}this._applyClasses(t,e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},e.prototype._updateWorkerLayers=function(t,e){var n=this,r=this._updatedSymbolOrder?this._order.filter(function(t){return"symbol"===n._layers[t].type}):null;this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(t),removedIds:e,symbolOrder:r})},e.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSymbolOrder=!1,this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},e.prototype.setState=function(t){var e=this;if(this._checkLoaded(),m.emitErrors(this,m(t)))return!1;t=l.extend({},t),t.layers=E(t.layers);var n=T(this.serialize(),t).filter(function(t){return!(t.command in O)});if(0===n.length)return!1;var r=n.filter(function(t){return!(t.command in M)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(t){return t.command}).join(", ")+".");return n.forEach(function(t){"setTransition"!==t.command&&e[t.command].apply(e,t.args)}),this.stylesheet=t,!0},e.prototype.addSource=function(t,e,n){if(this._checkLoaded(),void 0!==this.sourceCaches[t])throw new Error("There is already a source with this ID");if(!e.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(e)+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(e.type)>=0&&this._validate(m.source,"sources."+t,e,null,n))){var r=this.sourceCaches[t]=new _(t,e,this.dispatcher);r.style=this,r.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:r.serialize(),sourceId:t}}),r.onAdd(this.map),this._changed=!0}},e.prototype.removeSource=function(t){if(this._checkLoaded(),void 0===this.sourceCaches[t])throw new Error("There is no source with this ID");var e=this.sourceCaches[t];delete this.sourceCaches[t],delete this._updatedSources[t],e.setEventedParent(null),e.clearTiles(),e.onRemove&&e.onRemove(this.map),this._changed=!0},e.prototype.getSource=function(t){return this.sourceCaches[t]&&this.sourceCaches[t].getSource()},e.prototype.addLayer=function(t,e,n){this._checkLoaded();var r=t.id;if("object"==typeof t.source&&(this.addSource(r,t.source),t=l.extend(t,{source:r})),!this._validate(m.layer,"layers."+r,t,{arrayIndex:-1},n)){var o=i.create(t);this._validateLayer(o),o.setEventedParent(this,{layer:{id:r}});var a=e?this._order.indexOf(e):this._order.length;if(this._order.splice(a,0,r),this._layers[r]=o,this._removedLayers[r]&&o.source){var s=this._removedLayers[r];delete this._removedLayers[r],this._updatedSources[o.source]=s.type!==o.type?"clear":"reload"}this._updateLayer(o),"symbol"===o.type&&(this._updatedSymbolOrder=!0),this.updateClasses(r)}},e.prototype.moveLayer=function(t,e){this._checkLoaded(),this._changed=!0;var n=this._layers[t];if(!n)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be moved.")});var r=this._order.indexOf(t);this._order.splice(r,1);var i=e?this._order.indexOf(e):this._order.length;this._order.splice(i,0,t),"symbol"===n.type&&(this._updatedSymbolOrder=!0,n.source&&!this._updatedSources[n.source]&&(this._updatedSources[n.source]="reload"))},e.prototype.removeLayer=function(t){this._checkLoaded();var e=this._layers[t];if(!e)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be removed.")});e.setEventedParent(null);var n=this._order.indexOf(t);this._order.splice(n,1),"symbol"===e.type&&(this._updatedSymbolOrder=!0),this._changed=!0,this._removedLayers[t]=e,delete this._layers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t]},e.prototype.getLayer=function(t){return this._layers[t]},e.prototype.setLayerZoomRange=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);if(!r)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===e&&r.maxzoom===n||(null!=e&&(r.minzoom=e),null!=n&&(r.maxzoom=n),this._updateLayer(r))},e.prototype.setFilter=function(t,e){this._checkLoaded();var n=this.getLayer(t);if(!n)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be filtered.")});null!==e&&void 0!==e&&this._validate(m.filter,"layers."+n.id+".filter",e)||l.deepEqual(n.filter,e)||(n.filter=l.clone(e),this._updateLayer(n))},e.prototype.getFilter=function(t){return l.clone(this.getLayer(t).filter)},e.prototype.setLayoutProperty=function(t,e,n){this._checkLoaded();var r=this.getLayer(t);if(!r)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")});l.deepEqual(r.getLayoutProperty(e),n)||(r.setLayoutProperty(e,n),this._updateLayer(r))},e.prototype.getLayoutProperty=function(t,e){return this.getLayer(t).getLayoutProperty(e)},e.prototype.setPaintProperty=function(t,e,n,r){this._checkLoaded();var i=this.getLayer(t);if(!i)return void this.fire("error",{error:new Error("The layer '"+t+"' does not exist in the map's style and cannot be styled.")});if(!l.deepEqual(i.getPaintProperty(e,r),n)){var o=i.isPaintValueFeatureConstant(e);i.setPaintProperty(e,n,r);!(n&&w.isFunctionDefinition(n)&&"$zoom"!==n.property&&void 0!==n.property)&&o||this._updateLayer(i),this.updateClasses(t,e)}},e.prototype.getPaintProperty=function(t,e,n){return this.getLayer(t).getPaintProperty(e,n)},e.prototype.getTransition=function(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},e.prototype.updateClasses=function(t,e){if(this._changed=!0,t){var n=this._updatedPaintProps;n[t]||(n[t]={}),n[t][e||"all"]=!0}else this._updatedAllPaintProps=!0},e.prototype.serialize=function(){var t=this;return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,function(t){return t.serialize()}),layers:this._order.map(function(e){return t._layers[e].serialize()})},function(t){return void 0!==t})},e.prototype._updateLayer=function(t){this._updatedLayers[t.id]=!0,t.source&&!this._updatedSources[t.source]&&(this._updatedSources[t.source]="reload"),this._changed=!0},e.prototype._flattenRenderedFeatures=function(t){for(var e=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=e._order[r],o=0,a=t;o<a.length;o+=1){var s=a[o],u=s[i];if(u)for(var c=0,l=u;c<l.length;c+=1){var f=l[c];n.push(f)}}return n},e.prototype.queryRenderedFeatures=function(t,e,n,r){var i=this;e&&e.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",e.filter);var o={};if(e&&e.layers)for(var a=0,s=e.layers;a<s.length;a+=1){var u=s[a],c=i._layers[u];if(!c)return void i.fire("error",{error:"The layer '"+u+"' does not exist in the map's style and cannot be queried for features."});o[c.source]=!0}var l=[];for(var f in this.sourceCaches)if(!e.layers||o[f]){var h=g.rendered(i.sourceCaches[f],i._layers,t,e,n,r);l.push(h)}return this._flattenRenderedFeatures(l)},e.prototype.querySourceFeatures=function(t,e){e&&e.filter&&this._validate(m.filter,"querySourceFeatures.filter",e.filter);var n=this.sourceCaches[t];return n?g.source(n,e):[]},e.prototype.addSourceType=function(t,e,n){return y.getType(t)?n(new Error('A source type called "'+t+'" already exists.')):(y.setType(t,e),e.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:t,url:e.workerSourceURL},n):n(null,null))},e.prototype.getLight=function(){return this.light.getLight()},e.prototype.setLight=function(t,e){this._checkLoaded();var n=this.light.getLight(),r=!1;for(var i in t)if(!l.deepEqual(t[i],n[i])){r=!0;break}if(r){var o=this.stylesheet.transition||{};this.light.setLight(t),this.light.updateLightTransitions(e||{transition:!0},o,this.animationLoop)}},e.prototype._validate=function(t,e,n,r,i){return(!i||i.validate!==!1)&&m.emitErrors(this,t.call(m,l.extend({key:e,style:this.serialize(),value:n,styleSpec:b},r)))},e.prototype._remove=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].clearTiles();this.dispatcher.remove()},e.prototype._clearSource=function(t){this.sourceCaches[t].clearTiles()},e.prototype._reloadSource=function(t){this.sourceCaches[t].reload()},e.prototype._updateSources=function(t){var e=this;for(var n in this.sourceCaches)e.sourceCaches[n].update(t)},e.prototype._redoPlacement=function(){var t=this;for(var e in this.sourceCaches)t.sourceCaches[e].redoPlacement()},e.prototype.getIcons=function(t,e,n){var r=this,i=function(){r.spriteAtlas.setSprite(r.sprite),r.spriteAtlas.addIcons(e.icons,n)};this.sprite.loaded()?i():this.sprite.on("data",i)},e.prototype.getGlyphs=function(t,e,n){function r(t,e,r){t&&console.error(t),s[r]=e,a--,0===a&&n(null,s)}var i=this,o=e.stacks,a=Object.keys(o).length,s={};for(var u in o)i.glyphSource.getSimpleGlyphs(u,o[u],e.uid,r)},e}(r);e.exports=A},{"../global_worker_pool":613,"../render/line_atlas":626,"../source/query_features":638,"../source/rtl_text_plugin":640,"../source/source":641,"../source/source_cache":642,"../symbol/glyph_source":674,"../symbol/sprite_atlas":679,"../util/ajax":700,"../util/browser":701,"../util/dispatcher":707,"../util/evented":709,"../util/mapbox":716,"../util/util":720,"./animation_loop":650,"./image_sprite":651,"./light":652,"./style_layer":656,"./style_spec":663,"./validate_style":665,"mapbox-gl-function":725,"mapbox-gl-style-spec/lib/deref":726,"mapbox-gl-style-spec/lib/diff":727}],655:[function(t,e,n){"use strict";var r=t("mapbox-gl-function"),i=t("./parse_color"),o=t("../util/util"),a=function(t,e){var n=this;this.value=o.clone(e),this.isFunction=r.isFunctionDefinition(e),this.json=JSON.stringify(this.value),this.minimum=t.minimum,this.isColor="color"===t.type;var a=this.isColor&&this.value?i(this.value):e,s=t.default;if(s&&"color"===t.type&&(s=i(s)),this.function=r[t.function||"piecewise-constant"](a,s),this.isFeatureConstant=this.function.isFeatureConstant,this.isZoomConstant=this.function.isZoomConstant,!this.isFeatureConstant&&!this.isZoomConstant){this.stopZoomLevels=[];for(var u=[],c=0,l=this.value.stops;c<l.length;c+=1){var f=l[c],h=f[0].zoom;n.stopZoomLevels.indexOf(h)<0&&(n.stopZoomLevels.push(h),u.push([h,u.length]))}this.functionInterpolationT=r.interpolated({stops:u,base:e.base,colorSpace:e.colorSpace})}};a.prototype.calculate=function(t,e){var n=this.function(t&&t.zoom,e||{});return this.isColor&&n?i(n):void 0!==this.minimum&&n<this.minimum?this.minimum:n},a.prototype.calculateInterpolationT=function(t,e){return this.functionInterpolationT(t&&t.zoom,e||{})},e.exports=a},{"../util/util":720,"./parse_color":653,"mapbox-gl-function":725}],656:[function(t,e,n){"use strict";function r(t){return t.value}var i=t("../util/util"),o=t("./style_transition"),a=t("./style_declaration"),s=t("./style_spec"),u=t("./validate_style"),c=t("./parse_color"),l=t("../util/evented"),f=function(t){function e(e){var n=this;t.call(this),this.id=e.id,this.metadata=e.metadata,this.type=e.type,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.paint={},this.layout={},this._paintSpecifications=s["paint_"+this.type],this._layoutSpecifications=s["layout_"+this.type],this._paintTransitions={},this._paintTransitionOptions={},this._paintDeclarations={},this._layoutDeclarations={},this._layoutFunctions={};var r,i,o={validate:!1};for(var a in e){var u=a.match(/^paint(?:\.(.*))?$/);if(u){var c=u[1]||"";for(r in e[a])n.setPaintProperty(r,e[a][r],c,o)}}for(i in e.layout)n.setLayoutProperty(i,e.layout[i],o);for(r in this._paintSpecifications)n.paint[r]=n.getPaintValue(r);for(i in this._layoutSpecifications)n._updateLayoutValue(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setLayoutProperty=function(t,e,n){if(null==e)delete this._layoutDeclarations[t];else{var r="layers."+this.id+".layout."+t;if(this._validate(u.layoutProperty,r,t,e,n))return;this._layoutDeclarations[t]=new a(this._layoutSpecifications[t],e)}this._updateLayoutValue(t)},e.prototype.getLayoutProperty=function(t){return this._layoutDeclarations[t]&&this._layoutDeclarations[t].value},e.prototype.getLayoutValue=function(t,e,n){var r=this._layoutSpecifications[t],i=this._layoutDeclarations[t];return i?i.calculate(e,n):r.default},e.prototype.setPaintProperty=function(t,e,n,r){var o="layers."+this.id+(n?'["paint.'+n+'"].':".paint.")+t;if(i.endsWith(t,"-transition"))if(this._paintTransitionOptions[n||""]||(this._paintTransitionOptions[n||""]={}),null===e||void 0===e)delete this._paintTransitionOptions[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintTransitionOptions[n||""][t]=e}else if(this._paintDeclarations[n||""]||(this._paintDeclarations[n||""]={}),null===e||void 0===e)delete this._paintDeclarations[n||""][t];else{if(this._validate(u.paintProperty,o,t,e,r))return;this._paintDeclarations[n||""][t]=new a(this._paintSpecifications[t],e)}},e.prototype.getPaintProperty=function(t,e){return e=e||"",i.endsWith(t,"-transition")?this._paintTransitionOptions[e]&&this._paintTransitionOptions[e][t]:this._paintDeclarations[e]&&this._paintDeclarations[e][t]&&this._paintDeclarations[e][t].value},e.prototype.getPaintValue=function(t,e,n){var r=this._paintSpecifications[t],i=this._paintTransitions[t];return i?i.calculate(e,n):"color"===r.type&&r.default?c(r.default):r.default},e.prototype.getPaintValueStopZoomLevels=function(t){var e=this._paintTransitions[t];return e?e.declaration.stopZoomLevels:[]},e.prototype.getPaintInterpolationT=function(t,e){return this._paintTransitions[t].declaration.calculateInterpolationT(e)},e.prototype.isPaintValueFeatureConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isFeatureConstant},e.prototype.isLayoutValueFeatureConstant=function(t){var e=this._layoutDeclarations[t];return!e||e.isFeatureConstant},e.prototype.isPaintValueZoomConstant=function(t){var e=this._paintTransitions[t];return!e||e.declaration.isZoomConstant},e.prototype.isHidden=function(t){return!!(this.minzoom&&t<this.minzoom)||(!!(this.maxzoom&&t>=this.maxzoom)||"none"===this.layout.visibility)},e.prototype.updatePaintTransitions=function(t,e,n,r,o){for(var a=this,s=i.extend({},this._paintDeclarations[""]),u=0;u<t.length;u++)i.extend(s,a._paintDeclarations[t[u]]);var c;for(c in s)a._applyPaintDeclaration(c,s[c],e,n,r,o);for(c in this._paintTransitions)c in s||a._applyPaintDeclaration(c,null,e,n,r,o)},e.prototype.updatePaintTransition=function(t,e,n,r,i,o){for(var a=this,s=this._paintDeclarations[""][t],u=0;u<e.length;u++){var c=a._paintDeclarations[e[u]];c&&c[t]&&(s=c[t])}this._applyPaintDeclaration(t,s,n,r,i,o)},e.prototype.recalculate=function(t){var e=this;for(var n in this._paintTransitions)e.paint[n]=e.getPaintValue(n,{zoom:t});for(var r in this._layoutFunctions)e.layout[r]=e.getLayoutValue(r,{zoom:t})},e.prototype.serialize=function(){var t=this,e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:i.mapObject(this._layoutDeclarations,r)};for(var n in this._paintDeclarations){e[""===n?"paint":"paint."+n]=i.mapObject(t._paintDeclarations[n],r)}return i.filterObject(e,function(t,e){return void 0!==t&&!("layout"===e&&!Object.keys(t).length)})},e.prototype._applyPaintDeclaration=function(t,e,n,r,s,u){var c=n.transition?this._paintTransitions[t]:void 0,l=this._paintSpecifications[t];if(null!==e&&void 0!==e||(e=new a(l,l.default)),!c||c.declaration.json!==e.json){var f=i.extend({duration:300,delay:0},r,this.getPaintProperty(t+"-transition")),h=this._paintTransitions[t]=new o(l,e,c,f,u);h.instant()||(h.loopID=s.set(h.endTime-Date.now())),c&&s.cancel(c.loopID)}},e.prototype._updateLayoutValue=function(t){var e=this._layoutDeclarations[t];e&&e.isFunction?this._layoutFunctions[t]=!0:(delete this._layoutFunctions[t],this.layout[t]=this.getLayoutValue(t))},e.prototype._validate=function(t,e,n,r,i){return(!i||i.validate!==!1)&&u.emitErrors(this,t.call(u,{key:e,layerType:this.type,objectKey:n,value:r,styleSpec:s,style:{glyphs:!0,sprite:!0}}))},e}(l);e.exports=f;var h={circle:t("./style_layer/circle_style_layer"),fill:t("./style_layer/fill_style_layer"),"fill-extrusion":t("./style_layer/fill_extrusion_style_layer"),line:t("./style_layer/line_style_layer"),symbol:t("./style_layer/symbol_style_layer")};f.create=function(t){return new(h[t.type]||f)(t)}},{"../util/evented":709,"../util/util":720,"./parse_color":653,"./style_declaration":655,"./style_layer/circle_style_layer":657,"./style_layer/fill_extrusion_style_layer":658,"./style_layer/fill_style_layer":659,"./style_layer/line_style_layer":660,"./style_layer/symbol_style_layer":661,"./style_spec":663,"./style_transition":664,"./validate_style":665}],657:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/circle_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/circle_bucket":594,"../style_layer":656}],658:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_extrusion_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=t.prototype.getPaintValue.call(this,e,n,r);return"fill-extrusion-color"===e&&i&&(i[3]=1),i},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/fill_extrusion_bucket":596,"../style_layer":656}],659:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/fill_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=this;if("fill-outline-color"===e){if(void 0===this.getPaintProperty("fill-outline-color"))return t.prototype.getPaintValue.call(this,"fill-color",n,r);for(var o=this._paintTransitions["fill-outline-color"];o;){if(!(o&&o.declaration&&o.declaration.value))return t.prototype.getPaintValue.call(i,"fill-color",n,r);o=o.oldTransition}}return t.prototype.getPaintValue.call(this,e,n,r)},e.prototype.getPaintValueStopZoomLevels=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintValueStopZoomLevels.call(this,"fill-color"):t.prototype.getPaintValueStopZoomLevels.call(this,e)},e.prototype.getPaintInterpolationT=function(e,n){
return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.getPaintInterpolationT.call(this,"fill-color",n):t.prototype.getPaintInterpolationT.call(this,e,n)},e.prototype.isPaintValueFeatureConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueFeatureConstant.call(this,"fill-color"):t.prototype.isPaintValueFeatureConstant.call(this,e)},e.prototype.isPaintValueZoomConstant=function(e){return"fill-outline-color"===e&&void 0===this.getPaintProperty("fill-outline-color")?t.prototype.isPaintValueZoomConstant.call(this,"fill-color"):t.prototype.isPaintValueZoomConstant.call(this,e)},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/fill_bucket":595,"../style_layer":656}],660:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/line_bucket"),o=t("../../util/util"),a=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getPaintValue=function(e,n,r){var i=t.prototype.getPaintValue.call(this,e,n,r);if(i&&"line-dasharray"===e){var a=this.getPaintValue("line-width",o.extend({},n,{zoom:Math.floor(n.zoom)}),r);i.fromScale*=a,i.toScale*=a}return i},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=a},{"../../data/bucket/line_bucket":597,"../../util/util":720,"../style_layer":656}],661:[function(t,e,n){"use strict";var r=t("../style_layer"),i=t("../../data/bucket/symbol_bucket"),o=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLayoutValue=function(e,n,r){var i=t.prototype.getLayoutValue.call(this,e,n,r);if("auto"!==i)return i;switch(e){case"text-rotation-alignment":case"icon-rotation-alignment":return"line"===this.getLayoutValue("symbol-placement",n,r)?"map":"viewport";case"text-pitch-alignment":return this.getLayoutValue("text-rotation-alignment",n,r);default:return i}},e.prototype.createBucket=function(t){return new i(t)},e}(r);e.exports=o},{"../../data/bucket/symbol_bucket":598,"../style_layer":656}],662:[function(t,e,n){"use strict";var r=t("./style_layer"),i=t("../util/util"),o=t("feature-filter"),a=t("mapbox-gl-style-spec/lib/group_by_layout"),s=function(t){t&&this.replace(t)};s.prototype.replace=function(t){var e=this;this.symbolOrder=[];for(var n=0,r=t;n<r.length;n+=1){var i=r[n];"symbol"===i.type&&e.symbolOrder.push(i.id)}this._layerConfigs={},this._layers={},this.update(t,[])},s.prototype.update=function(t,e,n){for(var s=this,u=0,c=t;u<c.length;u+=1){var l=c[u];s._layerConfigs[l.id]=l;var f=s._layers[l.id]=r.create(l);f.updatePaintTransitions({},{transition:!1}),f.filter=o(f.filter)}for(var h=0,p=e;h<p.length;h+=1){var d=p[h];delete s._layerConfigs[d],delete s._layers[d]}n&&(this.symbolOrder=n),this.familiesBySource={};for(var v=a(i.values(this._layerConfigs)),m=0,y=v;m<y.length;m+=1){var g=y[m],_=g.map(function(t){return s._layers[t.id]}),b=_[0];if(!b.layout||"none"!==b.layout.visibility){var w=b.source||"",x=s.familiesBySource[w];x||(x=s.familiesBySource[w]={});var E=b.sourceLayer||"_geojsonTileLayer",T=x[E];T||(T=x[E]=[]),T.push(_)}}},e.exports=s},{"../util/util":720,"./style_layer":656,"feature-filter":447,"mapbox-gl-style-spec/lib/group_by_layout":729}],663:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/reference/latest.min")},{"mapbox-gl-style-spec/reference/latest.min":752}],664:[function(t,e,n){"use strict";function r(t,e,n){if(void 0!==t&&void 0!==e)return{from:t.to,fromScale:t.toScale,to:e.to,toScale:e.toScale,t:n}}var i=t("../util/util"),o=t("../util/interpolate"),a={lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0},s=function(t,e,n,i,s){this.declaration=e,this.startTime=this.endTime=(new Date).getTime(),this.oldTransition=n,this.duration=i.duration||0,this.delay=i.delay||0,this.zoomTransitioned="piecewise-constant"===t.function&&t.transition,this.interp=this.zoomTransitioned?r:o[t.type],this.zoomHistory=s||a,this.instant()||(this.endTime=this.startTime+this.duration+this.delay),n&&n.endTime<=this.startTime&&delete n.oldTransition};s.prototype.instant=function(){return!this.oldTransition||!this.interp||0===this.duration&&0===this.delay},s.prototype.calculate=function(t,e,n){var r=this._calculateTargetValue(t,e);if(this.instant())return r;if(n=n||Date.now(),n>=this.endTime)return r;var o=this.oldTransition.calculate(t,e,this.startTime),a=i.easeCubicInOut((n-this.startTime-this.delay)/this.duration);return this.interp(o,r,a)},s.prototype._calculateTargetValue=function(t,e){if(!this.zoomTransitioned)return this.declaration.calculate(t,e);var n=t.zoom,r=this.zoomHistory.lastIntegerZoom,i=n>r?2:.5,a=this.declaration.calculate({zoom:n>r?n-1:n+1},e),s=this.declaration.calculate({zoom:n},e),u=Math.min((Date.now()-this.zoomHistory.lastIntegerZoomTime)/this.duration,1),c=Math.abs(n-r),l=o(u,1,c);return void 0!==a&&void 0!==s?{from:a,fromScale:i,to:s,toScale:1,t:l}:void 0},e.exports=s},{"../util/interpolate":712,"../util/util":720}],665:[function(t,e,n){"use strict";e.exports=t("mapbox-gl-style-spec/lib/validate_style.min"),e.exports.emitErrors=function(t,e){if(e&&e.length){for(var n=0;n<e.length;n++)t.fire("error",{error:new Error(e[n].message)});return!0}return!1}},{"mapbox-gl-style-spec/lib/validate_style.min":751}],666:[function(t,e,n){"use strict";var r=t("point-geometry"),i=function(t){function e(e,n,r,i){t.call(this,e,n),this.angle=r,void 0!==i&&(this.segment=i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y,this.angle,this.segment)},e}(r);e.exports=i},{"point-geometry":784}],667:[function(t,e,n){"use strict";function r(t,e,n,r,i){if(void 0===e.segment)return!0;for(var o=e,a=e.segment+1,s=0;s>-n/2;){if(a--,a<0)return!1;s-=t[a].dist(o),o=t[a]}s+=t[a].dist(t[a+1]),a++;for(var u=[],c=0;s<n/2;){var l=t[a-1],f=t[a],h=t[a+1];if(!h)return!1;var p=l.angleTo(f)-f.angleTo(h);for(p=Math.abs((p+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:p}),c+=p;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=f.dist(h)}return!0}e.exports=r},{}],668:[function(t,e,n){"use strict";function r(t,e,n,r,o){for(var a=[],s=0;s<t.length;s++)for(var u,c=t[s],l=0;l<c.length-1;l++){var f=c[l],h=c[l+1];f.x<e&&h.x<e||(f.x<e?f=new i(e,f.y+(h.y-f.y)*((e-f.x)/(h.x-f.x)))._round():h.x<e&&(h=new i(e,f.y+(h.y-f.y)*((e-f.x)/(h.x-f.x)))._round()),f.y<n&&h.y<n||(f.y<n?f=new i(f.x+(h.x-f.x)*((n-f.y)/(h.y-f.y)),n)._round():h.y<n&&(h=new i(f.x+(h.x-f.x)*((n-f.y)/(h.y-f.y)),n)._round()),f.x>=r&&h.x>=r||(f.x>=r?f=new i(r,f.y+(h.y-f.y)*((r-f.x)/(h.x-f.x)))._round():h.x>=r&&(h=new i(r,f.y+(h.y-f.y)*((r-f.x)/(h.x-f.x)))._round()),f.y>=o&&h.y>=o||(f.y>=o?f=new i(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round():h.y>=o&&(h=new i(f.x+(h.x-f.x)*((o-f.y)/(h.y-f.y)),o)._round()),u&&f.equals(u[u.length-1])||(u=[f],a.push(u)),u.push(h)))))}return a}var i=t("point-geometry");e.exports=r},{"point-geometry":784}],669:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=t("point-geometry"),o=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Float32",name:"maxScale"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"bbox0"},{type:"Int16",name:"bbox1"},{type:"Int16",name:"bbox2"},{type:"Int16",name:"bbox3"},{type:"Float32",name:"placementScale"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":718,"point-geometry":784}],670:[function(t,e,n){"use strict";var r=function(t,e,n,r,i,o,a,s,u,c,l){var f=a.top*s-u,h=a.bottom*s+u,p=a.left*s-u,d=a.right*s+u;if(this.boxStartIndex=t.length,c){var v=h-f,m=d-p;if(v>0)if(v=Math.max(10*s,v),l){var y=e[n.segment+1].sub(e[n.segment])._unit()._mult(m),g=[n.sub(y),n.add(y)];this._addLineCollisionBoxes(t,g,n,0,m,v,r,i,o)}else this._addLineCollisionBoxes(t,e,n,n.segment,m,v,r,i,o)}else t.emplaceBack(n.x,n.y,p,f,d,h,1/0,r,i,o,0,0,0,0,0);this.boxEndIndex=t.length};r.prototype._addLineCollisionBoxes=function(t,e,n,r,i,o,a,s,u){var c=o/2,l=Math.floor(i/c),f=-o/2,h=this.boxes,p=n,d=r+1,v=f;do{if(d--,d<0)return h;v-=e[d].dist(p),p=e[d]}while(v>-i/2);for(var m=e[d].dist(e[d+1]),y=0;y<l;y++){for(var g=-i/2+y*c;v+m<g;){if(v+=m,d++,d+1>=e.length)return h;m=e[d].dist(e[d+1])}var _=g-v,b=e[d],w=e[d+1],x=w.sub(b)._unit()._mult(_)._add(b)._round(),E=Math.max(Math.abs(g-f)-c/2,0),T=i/2/E;t.emplaceBack(x.x,x.y,-o/2,-o/2,o/2,o/2,T,a,s,u,0,0,0,0,0)}return h},e.exports=r},{}],671:[function(t,e,n){"use strict";var r=t("point-geometry"),i=t("../data/extent"),o=t("grid-index"),a=t("../util/intersection_tests"),s=function(t,e,n){if("object"==typeof t){var r=t;n=e,t=r.angle,e=r.pitch,this.grid=new o(r.grid),this.ignoredGrid=new o(r.ignoredGrid)}else this.grid=new o(i,12,6),this.ignoredGrid=new o(i,12,0);this.minScale=.5,this.maxScale=2,this.angle=t,this.pitch=e;var a=Math.sin(t),s=Math.cos(t);if(this.rotationMatrix=[s,-a,a,s],this.reverseRotationMatrix=[s,a,-a,s],this.yStretch=1/Math.cos(e/180*Math.PI),this.yStretch=Math.pow(this.yStretch,1.3),this.collisionBoxArray=n,0===n.length){n.emplaceBack();n.emplaceBack(0,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),n.emplaceBack(i,0,0,-32767,0,32767,32767,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,0,-32767,0,32767,0,32767,0,0,0,0,0,0,0,0,0),n.emplaceBack(0,i,-32767,0,32767,0,32767,0,0,0,0,0,0,0,0,0)}this.tempCollisionBox=n.get(0),this.edges=[n.get(1),n.get(2),n.get(3),n.get(4)]};s.prototype.serialize=function(t){var e=this.grid.toArrayBuffer(),n=this.ignoredGrid.toArrayBuffer();return t&&(t.push(e),t.push(n)),{angle:this.angle,pitch:this.pitch,grid:e,ignoredGrid:n}},s.prototype.placeCollisionFeature=function(t,e,n){for(var i=this,o=this.collisionBoxArray,a=this.minScale,s=this.rotationMatrix,u=this.yStretch,c=t.boxStartIndex;c<t.boxEndIndex;c++){var l=o.get(c),f=l.anchorPoint._matMult(s),h=f.x,p=f.y,d=h+l.x1,v=p+l.y1*u,m=h+l.x2,y=p+l.y2*u;if(l.bbox0=d,l.bbox1=v,l.bbox2=m,l.bbox3=y,!e)for(var g=i.grid.query(d,v,m,y),_=0;_<g.length;_++){var b=o.get(g[_]),w=b.anchorPoint._matMult(s);if(a=i.getPlacementScale(a,f,l,w,b),a>=i.maxScale)return a}if(n){var x;if(i.angle){var E=i.reverseRotationMatrix,T=new r(l.x1,l.y1).matMult(E),S=new r(l.x2,l.y1).matMult(E),M=new r(l.x1,l.y2).matMult(E),O=new r(l.x2,l.y2).matMult(E);x=i.tempCollisionBox,x.anchorPointX=l.anchorPoint.x,x.anchorPointY=l.anchorPoint.y,x.x1=Math.min(T.x,S.x,M.x,O.x),x.y1=Math.min(T.y,S.x,M.x,O.x),x.x2=Math.max(T.x,S.x,M.x,O.x),x.y2=Math.max(T.y,S.x,M.x,O.x),x.maxScale=l.maxScale}else x=l;for(var A=0;A<this.edges.length;A++){var R=i.edges[A];if(a=i.getPlacementScale(a,l.anchorPoint,x,R.anchorPoint,R),a>=i.maxScale)return a}}}return a},s.prototype.queryRenderedSymbols=function(t,e){var n={},i=[];if(0===t.length||0===this.grid.length&&0===this.ignoredGrid.length)return i;for(var o=this.collisionBoxArray,s=this.rotationMatrix,u=this.yStretch,c=[],l=1/0,f=1/0,h=-(1/0),p=-(1/0),d=0;d<t.length;d++)for(var v=t[d],m=0;m<v.length;m++){var y=v[m].matMult(s);l=Math.min(l,y.x),f=Math.min(f,y.y),h=Math.max(h,y.x),p=Math.max(p,y.y),c.push(y)}for(var g=this.grid.query(l,f,h,p),_=this.ignoredGrid.query(l,f,h,p),b=0;b<_.length;b++)g.push(_[b]);for(var w=Math.pow(2,Math.ceil(Math.log(e)/Math.LN2*10)/10),x=0;x<g.length;x++){var E=o.get(g[x]),T=E.sourceLayerIndex,S=E.featureIndex;if(void 0===n[T]&&(n[T]={}),!n[T][S]&&!(w<E.placementScale||w>E.maxScale)){var M=E.anchorPoint.matMult(s),O=M.x+E.x1/e,A=M.y+E.y1/e*u,R=M.x+E.x2/e,I=M.y+E.y2/e*u,k=[new r(O,A),new r(R,A),new r(R,I),new r(O,I)];a.polygonIntersectsPolygon(c,k)&&(n[T][S]=!0,i.push(g[x]))}}return i},s.prototype.getPlacementScale=function(t,e,n,r,i){var o=e.x-r.x,a=e.y-r.y,s=(i.x1-n.x2)/o,u=(i.x2-n.x1)/o,c=(i.y1-n.y2)*this.yStretch/a,l=(i.y2-n.y1)*this.yStretch/a;(isNaN(s)||isNaN(u))&&(s=u=1),(isNaN(c)||isNaN(l))&&(c=l=1);var f=Math.min(Math.max(s,u),Math.max(c,l)),h=i.maxScale,p=n.maxScale;return f>h&&(f=h),f>p&&(f=p),f>t&&f>=i.placementScale&&(t=f),t},s.prototype.insertCollisionFeature=function(t,e,n){for(var r=this,i=n?this.ignoredGrid:this.grid,o=this.collisionBoxArray,a=t.boxStartIndex;a<t.boxEndIndex;a++){var s=o.get(a);s.placementScale=e,e<r.maxScale&&i.insert(a,s.bbox0,s.bbox1,s.bbox2,s.bbox3)}},e.exports=s},{"../data/extent":602,"../util/intersection_tests":713,"grid-index":483,"point-geometry":784}],672:[function(t,e,n){"use strict";function r(t,e,n,r,o,a,s,u,c){var l=r?.6*a*s:0,f=Math.max(r?r.right-r.left:0,o?o.right-o.left:0),h=0===t[0].x||t[0].x===c||0===t[0].y||t[0].y===c;e-f*s<e/4&&(e=f*s+e/4);var p=2*a;return i(t,h?e/2*u%e:(f/2+p)*s*u%e,e,l,n,f*s,h,!1,c)}function i(t,e,n,r,u,c,l,f,h){for(var p=c/2,d=0,v=0;v<t.length-1;v++)d+=t[v].dist(t[v+1]);for(var m=0,y=e-n,g=[],_=0;_<t.length-1;_++){for(var b=t[_],w=t[_+1],x=b.dist(w),E=w.angleTo(b);y+n<m+x;){y+=n;var T=(y-m)/x,S=o(b.x,w.x,T),M=o(b.y,w.y,T);if(S>=0&&S<h&&M>=0&&M<h&&y-p>=0&&y+p<=d){var O=new a(S,M,E,_)._round();r&&!s(t,O,c,r,u)||g.push(O)}}m+=x}return f||g.length||l||(g=i(t,m/2,n,r,u,c,l,!0,h)),g}var o=t("../util/interpolate"),a=t("../symbol/anchor"),s=t("./check_max_angle");e.exports=r},{"../symbol/anchor":666,"../util/interpolate":712,"./check_max_angle":667}],673:[function(t,e,n){"use strict";var r=t("shelf-pack"),i=t("../util/util"),o=function(){this.width=128,this.height=128,this.bin=new r(this.width,this.height),this.index={},this.ids={},this.data=new Uint8Array(this.width*this.height)};o.prototype.getGlyphs=function(){var t,e,n,r={};for(var i in this.ids)t=i.split("#"),e=t[0],n=t[1],r[e]||(r[e]=[]),r[e].push(n);return r},o.prototype.getRects=function(){var t,e,n,r=this,i={};for(var o in this.ids)t=o.split("#"),e=t[0],n=t[1],i[e]||(i[e]={}),i[e][n]=r.index[o];return i},o.prototype.addGlyph=function(t,e,n,r){var o=this;if(!n)return null;var a=e+"#"+n.id;if(this.index[a])return this.ids[a].indexOf(t)<0&&this.ids[a].push(t),this.index[a];if(!n.bitmap)return null;var s=n.width+2*r,u=n.height+2*r,c=s+2,l=u+2;c+=4-c%4,l+=4-l%4;var f=this.bin.packOne(c,l);if(f||(this.resize(),f=this.bin.packOne(c,l)),!f)return i.warnOnce("glyph bitmap overflow"),null;this.index[a]=f,this.ids[a]=[t];for(var h=this.data,p=n.bitmap,d=0;d<u;d++)for(var v=o.width*(f.y+d+1)+f.x+1,m=s*d,y=0;y<s;y++)h[v+y]=p[m+y];return this.dirty=!0,f},o.prototype.resize=function(){var t=this,e=this.width,n=this.height;if(!(e>=2048||n>=2048)){this.texture&&(this.gl&&this.gl.deleteTexture(this.texture),this.texture=null),this.width*=4,this.height*=4,this.bin.resize(this.width,this.height);for(var r=new ArrayBuffer(this.width*this.height),i=0;i<n;i++){var o=new Uint8Array(t.data.buffer,n*i,e);new Uint8Array(r,n*i*4,e).set(o)}this.data=new Uint8Array(r)}},o.prototype.bind=function(t){this.gl=t,this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,null))},o.prototype.updateTexture=function(t){this.bind(t),this.dirty&&(t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data),this.dirty=!1)},e.exports=o},{"../util/util":720,"shelf-pack":966}],674:[function(t,e,n){"use strict";function r(t,e,n,r){return r=r||"abc",n.replace("{s}",r[t.length%r.length]).replace("{fontstack}",t).replace("{range}",e)}var i=t("../util/mapbox").normalizeGlyphsURL,o=t("../util/ajax"),a=t("../util/verticalize_punctuation"),s=t("../util/glyphs"),u=t("../symbol/glyph_atlas"),c=t("pbf"),l=function(t,e,n){this.advance=t.advance,this.left=t.left-n-1,this.top=t.top+n+1,this.rect=e},f=function(t){this.url=t&&i(t),this.atlases={},this.stacks={},this.loading={}};f.prototype.getSimpleGlyphs=function(t,e,n,r){var i=this;void 0===this.stacks[t]&&(this.stacks[t]={}),void 0===this.atlases[t]&&(this.atlases[t]=new u);for(var o={},s=this.stacks[t],c=this.atlases[t],f={},h=0,p=function(e){var r=Math.floor(e/256);if(s[r]){var i=s[r].glyphs[e],a=c.addGlyph(n,t,i,3);i&&(o[e]=new l(i,a,3))}else void 0===f[r]&&(f[r]=[],h++),f[r].push(e)},d=0;d<e.length;d++){var v=e[d],m=String.fromCharCode(v);p(v),a.lookup[m]&&p(a.lookup[m].charCodeAt(0))}h||r(void 0,o,t);var y=function(e,a,s){if(!e)for(var u=i.stacks[t][a]=s.stacks[0],p=0;p<f[a].length;p++){var d=f[a][p],v=u.glyphs[d],m=c.addGlyph(n,t,v,3);v&&(o[d]=new l(v,m,3))}h--,h||r(void 0,o,t)};for(var g in f)i.loadRange(t,g,y)},f.prototype.loadRange=function(t,e,n){if(256*e>65535)return n("glyphs > 65535 not supported");void 0===this.loading[t]&&(this.loading[t]={});var i=this.loading[t];if(i[e])i[e].push(n);else{i[e]=[n];var a=256*e+"-"+(256*e+255),u=r(t,a,this.url);o.getArrayBuffer(u,function(t,n){for(var r=!t&&new s(new c(n.data)),o=0;o<i[e].length;o++)i[e][o](t,e,r);delete i[e]})}},f.prototype.getGlyphAtlas=function(t){return this.atlases[t]},e.exports=f},{"../symbol/glyph_atlas":673,"../util/ajax":700,"../util/glyphs":711,"../util/mapbox":716,"../util/verticalize_punctuation":722,pbf:762}],675:[function(t,e,n){"use strict";e.exports=function(t){function e(e){s.push(t[e]),u++}function n(t,e,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(t,e,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(t,e,n){var r=n?e[0][e[0].length-1]:e[0][0];return t+":"+r.x+":"+r.y}for(var o={},a={},s=[],u=0,c=0;c<t.length;c++){var l=t[c],f=l.geometry,h=l.text;if(h){var p=i(h,f),d=i(h,f,!0);if(p in a&&d in o&&a[p]!==o[d]){var v=r(p,d,f),m=n(p,d,s[v].geometry);delete o[p],delete a[d],a[i(h,s[m].geometry,!0)]=m,s[v].geometry=null}else p in a?n(p,d,f):d in o?r(p,d,f):(e(c),o[p]=u-1,a[d]=u-1)}else e(c)}return s.filter(function(t){return t.geometry})}},{}],676:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,c,l){this.anchorPoint=t,this.tl=e,this.tr=n,this.bl=r,this.br=i,this.tex=o,this.anchorAngle=a,this.glyphAngle=s,this.minScale=u,this.maxScale=c,this.writingMode=l}function i(t,e,n,i,o,a,u,c,l){var f,h,p,d,v=e.image.rect,m=o.layout,y=e.left-1,g=y+v.w/e.image.pixelRatio,_=e.top-1,b=_+v.h/e.image.pixelRatio;if("none"!==m["icon-text-fit"]&&u){var w=g-y,x=b-_,E=m["text-size"]/24,T=u.left*E,S=u.right*E,M=u.top*E,O=u.bottom*E,A=S-T,R=O-M,I=m["icon-text-fit-padding"][0],k=m["icon-text-fit-padding"][1],P=m["icon-text-fit-padding"][2],N=m["icon-text-fit-padding"][3],C="width"===m["icon-text-fit"]?.5*(R-x):0,D="height"===m["icon-text-fit"]?.5*(A-w):0,j="width"===m["icon-text-fit"]||"both"===m["icon-text-fit"]?A:w,L="height"===m["icon-text-fit"]||"both"===m["icon-text-fit"]?R:x;f=new s(T+D-N,M+C-I),h=new s(T+D+k+j,M+C-I),p=new s(T+D+k+j,M+C+P+L),d=new s(T+D-N,M+C+P+L)}else f=new s(y,_),h=new s(g,_),p=new s(g,b),d=new s(y,b);var F=o.getLayoutValue("icon-rotate",c,l)*Math.PI/180;if(a){var U=i[t.segment];if(t.y===U.y&&t.x===U.x&&t.segment+1<i.length){var z=i[t.segment+1];F+=Math.atan2(t.y-z.y,t.x-z.x)+Math.PI}else F+=Math.atan2(t.y-U.y,t.x-U.x)}if(F){var B=Math.sin(F),V=Math.cos(F),G=[V,-B,B,V];f=f.matMult(G),h=h.matMult(G),d=d.matMult(G),p=p.matMult(G)}return[new r(new s(t.x,t.y),f,h,d,p,e.image.rect,0,0,.5,1/0)]}function o(t,e,n,i,o,u){for(var c=o.layout["text-rotate"]*Math.PI/180,l=o.layout["text-keep-upright"],f=e.positionedGlyphs,h=[],p=0;p<f.length;p++){var d=f[p],v=d.glyph;if(v){var m=v.rect;if(m){var y,g=(d.x+v.advance/2)*n,_=.5;u?(y=[],_=a(y,t,g,i,t.segment,!0),l&&(_=Math.min(_,a(y,t,g,i,t.segment,!1)))):y=[{anchorPoint:new s(t.x,t.y),offset:0,angle:0,maxScale:1/0,minScale:.5}];var b=d.x+v.left,w=d.y-v.top,x=b+m.w,E=w+m.h,T=new s(d.x,v.advance/2),S=new s(b,w),M=new s(x,w),O=new s(b,E),A=new s(x,E);0!==d.angle&&(S._sub(T)._rotate(d.angle)._add(T),M._sub(T)._rotate(d.angle)._add(T),O._sub(T)._rotate(d.angle)._add(T),A._sub(T)._rotate(d.angle)._add(T));for(var R=0;R<y.length;R++){var I=y[R],k=S,P=M,N=O,C=A;if(c){var D=Math.sin(c),j=Math.cos(c),L=[j,-D,D,j];k=k.matMult(L),P=P.matMult(L),N=N.matMult(L),C=C.matMult(L)}var F=Math.max(I.minScale,_),U=(t.angle+I.offset+2*Math.PI)%(2*Math.PI),z=(I.angle+I.offset+2*Math.PI)%(2*Math.PI);h.push(new r(I.anchorPoint,k,P,N,C,m,U,z,F,I.maxScale,e.writingMode))}}}}return h}function a(t,e,n,r,i,o){var a=!o;n<0&&(o=!o),o&&i++;var u=new s(e.x,e.y),c=r[i],l=1/0;n=Math.abs(n);for(;;){var f=u.dist(c),h=n/f,p=Math.atan2(c.y-u.y,c.x-u.x);if(o||(p+=Math.PI),t.push({anchorPoint:u,offset:a?Math.PI:0,minScale:h,maxScale:l,angle:(p+2*Math.PI)%(2*Math.PI)}),h<=.5)break;for(u=c;u.equals(c);)if(i+=o?1:-1,c=r[i],!c)return h;var d=c.sub(u)._unit();u=u.sub(d._mult(f)),l=h}return.5}var s=t("point-geometry");e.exports={getIconQuads:i,getGlyphQuads:o,SymbolQuad:r}},{"point-geometry":784}],677:[function(t,e,n){"use strict";var r=t("../util/token");e.exports=function(t,e){var n=r(t.properties,e["text-field"]);if(n){n=n.toString();var i=e["text-transform"];return"uppercase"===i?n=n.toLocaleUpperCase():"lowercase"===i&&(n=n.toLocaleLowerCase()),n}}},{"../util/token":719}],678:[function(t,e,n){"use strict";function r(t,e,n,r,i){this.codePoint=t,this.x=e,this.y=n,this.glyph=r||null,this.angle=i}function i(t,e,n,r,i,o,a){this.positionedGlyphs=t,this.text=e,this.top=n,this.bottom=r,this.left=i,this.right=o,this.writingMode=a}function o(t,e){for(var n=[],r=0,i=0,o=e;i<o.length;i+=1){var a=o[i];n.push(t.substring(r,a)),r=a}return r<t.length&&n.push(t.substring(r,t.length)),n}function a(t,e,n,r,a,s,u,c,l,f,d){var v=t.trim();d===w.vertical&&(v=_(v));var m,y=[],g=new i(y,v,l[1],l[1],l[0],l[0],d);return m=b.processBidirectionalText?b.processBidirectionalText(v,h(v,c,n,e)):o(v,h(v,c,n,e)),p(g,e,m,r,a,s,u,l,d,c,f),!!y.length&&g}function s(t,e,n,r){var i=0;for(var o in t){var a=r[t.charCodeAt(o)];a&&(i+=a.advance+e)}return i/Math.max(1,Math.ceil(i/n))}function u(t,e,n,r){var i=Math.pow(t-e,2);return r?t<e?i/2:2*i:i+Math.abs(n)*n}function c(t,e){var n=0;return 10===t&&(n-=1e4),40!==t&&65288!==t||(n+=50),41!==e&&65289!==e||(n+=50),n}function l(t,e,n,r,i,o){for(var a=null,s=u(e,n,i,o),c=0,l=r;c<l.length;c+=1){var f=l[c],h=e-f.x,p=u(h,n,i,o)+f.badness;p<=s&&(a=f,s=p)}return{index:t,x:e,priorBreak:a,badness:s}}function f(t){return t?f(t.priorBreak).concat(t.index):[]}function h(t,e,n,r){if(!n)return[];if(!t)return[];for(var i=[],o=s(t,e,n,r),a=0,u=0;u<t.length;u++){var h=t.charCodeAt(u),p=r[h];p&&!x[h]&&(a+=p.advance+e),u<t.length-1&&(E[h]||g.charAllowsIdeographicBreaking(h))&&i.push(l(u+1,a,o,i,c(h,t.charCodeAt(u+1)),!1))}return f(l(t.length,a,o,i,0,!0))}function p(t,e,n,i,o,a,s,u,c,l,f){var h=0,p=-17,m=0,y=t.positionedGlyphs;for(var _ in n){var b=n[_].trim();if(b.length){for(var x=y.length,E=0;E<b.length;E++){var T=b.charCodeAt(E),S=e[T];S&&(g.charHasUprightVerticalOrientation(T)&&c!==w.horizontal?(y.push(new r(T,h,0,S,-Math.PI/2)),h+=f+l):(y.push(new r(T,h,p,S,0)),h+=S.advance+l))}if(y.length!==x){var M=h-l;m=Math.max(M,m),d(y,e,x,y.length-1,s)}h=0,p+=i}else p+=i}v(y,s,o,a,m,i,n.length,u);var O=n.length*i;t.top+=-a*O,t.bottom=t.top+O,t.left+=-o*m,t.right=t.left+m}function d(t,e,n,r,i){if(i)for(var o=e[t[r].codePoint].advance,a=(t[r].x+o)*i,s=n;s<=r;s++)t[s].x-=a}function v(t,e,n,r,i,o,a,s){for(var u=(e-n)*i+s[0],c=(-r*a+.5)*o+s[1],l=0;l<t.length;l++)t[l].x+=u,t[l].y+=c}function m(t,e){if(!t||!t.rect)return null;var n=e[0],r=e[1],i=n-t.width/2,o=i+t.width,a=r-t.height/2;return new y(t,a,a+t.height,i,o)}function y(t,e,n,r,i){this.image=t,this.top=e,this.bottom=n,this.left=r,this.right=i}var g=t("../util/script_detection"),_=t("../util/verticalize_punctuation"),b=t("../source/rtl_text_plugin"),w={horizontal:1,vertical:2};e.exports={shapeText:a,shapeIcon:m,WritingMode:w};var x={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},E={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0}},{"../source/rtl_text_plugin":640,"../util/script_detection":717,"../util/verticalize_punctuation":722}],679:[function(t,e,n){"use strict";function r(t,e,n,r,i,o,a,s,u,c,l){var f,h,p=r*e+n,d=s*o+a;if(l)for(d-=o,h=-1;h<=c;h++,p=((h+c)%c+r)*e+n,d+=o)for(f=-1;f<=u;f++)i[d+f]=t[p+(f+u)%u];else for(h=0;h<c;h++,p+=e,d+=o)for(f=0;f<u;f++)i[d+f]=t[p+f]}var i=t("shelf-pack"),o=t("../util/browser"),a=t("../util/util"),s=function(t,e,n,r,i){this.rect=t,this.width=e,this.height=n,this.sdf=r,this.pixelRatio=i},u=function(t,e){this.width=t,this.height=e,this.bin=new i(t,e),this.images={},this.data=!1,this.texture=0,this.filter=0,this.pixelRatio=1,this.dirty=!0};u.prototype.allocateImage=function(t,e){t/=this.pixelRatio,e/=this.pixelRatio;var n=t+2+(4-(t+2)%4),r=e+2+(4-(e+2)%4),i=this.bin.packOne(n,r);return i?i:(a.warnOnce("SpriteAtlas out of space."),null)},u.prototype.getImage=function(t,e){if(this.images[t])return this.images[t];if(!this.sprite)return null;var n=this.sprite.getSpritePosition(t);if(!n.width||!n.height)return null;var r=this.allocateImage(n.width,n.height);if(!r)return null;var i=new s(r,n.width/n.pixelRatio,n.height/n.pixelRatio,n.sdf,n.pixelRatio/this.pixelRatio);return this.images[t]=i,this.copy(r,n,e),i},u.prototype.getPosition=function(t,e){var n=this.getImage(t,e),r=n&&n.rect;if(!r)return null;var i=n.width*n.pixelRatio,o=n.height*n.pixelRatio;return{size:[n.width,n.height],tl:[(r.x+1)/this.width,(r.y+1)/this.height],br:[(r.x+1+i)/this.width,(r.y+1+o)/this.height]}},u.prototype.allocate=function(){var t=this;if(!this.data){var e=Math.floor(this.width*this.pixelRatio),n=Math.floor(this.height*this.pixelRatio);this.data=new Uint32Array(e*n);for(var r=0;r<this.data.length;r++)t.data[r]=0}},u.prototype.copy=function(t,e,n){if(this.sprite.imgData){var i=new Uint32Array(this.sprite.imgData.buffer);this.allocate();var o=this.data;r(i,this.sprite.width,e.x,e.y,o,this.width*this.pixelRatio,(t.x+1)*this.pixelRatio,(t.y+1)*this.pixelRatio,e.width,e.height,n),this.dirty=!0}},u.prototype.setSprite=function(t){t&&(this.pixelRatio=o.devicePixelRatio>1?2:1,this.canvas&&(this.canvas.width=this.width*this.pixelRatio,this.canvas.height=this.height*this.pixelRatio)),this.sprite=t},u.prototype.addIcons=function(t,e){for(var n=this,r=0;r<t.length;r++)n.getImage(t[r]);e(null,this.images)},u.prototype.bind=function(t,e){var n=!1;this.texture?t.bindTexture(t.TEXTURE_2D,this.texture):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n=!0);var r=e?t.LINEAR:t.NEAREST;r!==this.filter&&(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r),this.filter=r),this.dirty&&(this.allocate(),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width*this.pixelRatio,this.height*this.pixelRatio,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width*this.pixelRatio,this.height*this.pixelRatio,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(this.data.buffer)),this.dirty=!1)},e.exports=u},{"../util/browser":701,"../util/util":720,"shelf-pack":966}],680:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=t("point-geometry"),o=r({members:[{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"glyphQuadStartIndex"},{type:"Uint16",name:"glyphQuadEndIndex"},{type:"Uint16",name:"iconQuadStartIndex"},{type:"Uint16",name:"iconQuadEndIndex"},{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int8",name:"index"},{type:"Uint8",name:"writingModes"}]});Object.defineProperty(o.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),e.exports=o},{"../util/struct_array":718,"point-geometry":784}],681:[function(t,e,n){"use strict";var r=t("../util/struct_array"),i=t("point-geometry"),o=t("./quads").SymbolQuad,a=r({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"tlX"},{type:"Float32",name:"tlY"},{type:"Float32",name:"trX"},{type:"Float32",name:"trY"},{type:"Float32",name:"blX"},{type:"Float32",name:"blY"},{type:"Float32",name:"brX"},{type:"Float32",name:"brY"},{type:"Int16",name:"texH"},{type:"Int16",name:"texW"},{type:"Int16",name:"texX"},{type:"Int16",name:"texY"},{type:"Float32",name:"anchorAngle"},{type:"Float32",name:"glyphAngle"},{type:"Float32",name:"maxScale"},{type:"Float32",name:"minScale"},{type:"Uint8",name:"writingMode"}]});Object.defineProperty(a.prototype.StructType.prototype,"anchorPoint",{get:function(){return new i(this.anchorPointX,this.anchorPointY)}}),Object.defineProperty(a.prototype.StructType.prototype,"SymbolQuad",{get:function(){return new o(this.anchorPoint,new i(this.tlX,this.tlY),new i(this.trX,this.trY),new i(this.blX,this.blY),new i(this.brX,this.brY),{x:this.texX,y:this.texY,h:this.texH,w:this.texW,height:this.texH,width:this.texW},this.anchorAngle,this.glyphAngle,this.minScale,this.maxScale,this.writingMode)}}),e.exports=a},{"../util/struct_array":718,"./quads":676,"point-geometry":784}],682:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("point-geometry"),o={scrollZoom:t("./handler/scroll_zoom"),boxZoom:t("./handler/box_zoom"),dragRotate:t("./handler/drag_rotate"),dragPan:t("./handler/drag_pan"),keyboard:t("./handler/keyboard"),doubleClickZoom:t("./handler/dblclick_zoom"),touchZoomRotate:t("./handler/touch_zoom_rotate")};e.exports=function(t,e){function n(t){y("mouseout",t)}function a(e){t.stop(),x=r.mousePos(_,e),y("mousedown",e),w=!0}function s(e){var n=t.dragRotate&&t.dragRotate.isActive();b&&!n&&y("contextmenu",b),b=null,w=!1,y("mouseup",e)}function u(e){if(!(t.dragPan&&t.dragPan.isActive()||t.dragRotate&&t.dragRotate.isActive())){for(var n=e.toElement||e.target;n&&n!==_;)n=n.parentNode;n===_&&y("mousemove",e)}}function c(e){t.stop(),g("touchstart",e),!e.touches||e.touches.length>1||(E?(clearTimeout(E),E=null,y("dblclick",e)):E=setTimeout(p,300))}function l(t){g("touchmove",t)}function f(t){g("touchend",t)}function h(t){g("touchcancel",t)}function p(){E=null}function d(t){r.mousePos(_,t).equals(x)&&y("click",t)}function v(t){y("dblclick",t),t.preventDefault()}function m(e){var n=t.dragRotate&&t.dragRotate.isActive();w||n?w&&(b=e):y("contextmenu",e),e.preventDefault()}function y(e,n){var i=r.mousePos(_,n);return t.fire(e,{lngLat:t.unproject(i),point:i,originalEvent:n})}function g(e,n){var o=r.touchPos(_,n),a=o.reduce(function(t,e,n,r){return t.add(e.div(r.length))},new i(0,0));return t.fire(e,{lngLat:t.unproject(a),point:a,lngLats:o.map(function(e){return t.unproject(e)},this),points:o,originalEvent:n})}var _=t.getCanvasContainer(),b=null,w=!1,x=null,E=null;for(var T in o)t[T]=new o[T](t,e),e.interactive&&e[T]&&t[T].enable(e[T]);_.addEventListener("mouseout",n,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("mouseup",s,!1),_.addEventListener("mousemove",u,!1),_.addEventListener("touchstart",c,!1),_.addEventListener("touchend",f,!1),_.addEventListener("touchmove",l,!1),_.addEventListener("touchcancel",h,!1),_.addEventListener("click",d,!1),_.addEventListener("dblclick",v,!1),_.addEventListener("contextmenu",m,!1)}},{"../util/dom":708,"./handler/box_zoom":688,"./handler/dblclick_zoom":689,"./handler/drag_pan":690,"./handler/drag_rotate":691,"./handler/keyboard":692,"./handler/scroll_zoom":693,"./handler/touch_zoom_rotate":694,"point-geometry":784}],683:[function(t,e,n){"use strict"
;var r=t("../util/util"),i=t("../util/interpolate"),o=t("../util/browser"),a=t("../geo/lng_lat"),s=t("../geo/lng_lat_bounds"),u=t("point-geometry"),c=t("../util/evented"),l=function(t){function e(e,n){t.call(this),this.moving=!1,this.transform=e,this._bearingSnap=n.bearingSnap}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getCenter=function(){return this.transform.center},e.prototype.setCenter=function(t,e){return this.jumpTo({center:t},e),this},e.prototype.panBy=function(t,e,n){return this.panTo(this.transform.center,r.extend({offset:u.convert(t).mult(-1)},e),n),this},e.prototype.panTo=function(t,e,n){return this.easeTo(r.extend({center:t},e),n)},e.prototype.getZoom=function(){return this.transform.zoom},e.prototype.setZoom=function(t,e){return this.jumpTo({zoom:t},e),this},e.prototype.zoomTo=function(t,e,n){return this.easeTo(r.extend({zoom:t},e),n)},e.prototype.zoomIn=function(t,e){return this.zoomTo(this.getZoom()+1,t,e),this},e.prototype.zoomOut=function(t,e){return this.zoomTo(this.getZoom()-1,t,e),this},e.prototype.getBearing=function(){return this.transform.bearing},e.prototype.setBearing=function(t,e){return this.jumpTo({bearing:t},e),this},e.prototype.rotateTo=function(t,e,n){return this.easeTo(r.extend({bearing:t},e),n)},e.prototype.resetNorth=function(t,e){return this.rotateTo(0,r.extend({duration:1e3},t),e),this},e.prototype.snapToNorth=function(t,e){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(t,e):this},e.prototype.getPitch=function(){return this.transform.pitch},e.prototype.setPitch=function(t,e){return this.jumpTo({pitch:t},e),this},e.prototype.fitBounds=function(t,e,n){e=r.extend({padding:0,offset:[0,0],maxZoom:this.getMaxZoom()},e),t=s.convert(t);var i=u.convert(e.offset),o=this.transform,a=o.project(t.getNorthWest()),c=o.project(t.getSouthEast()),l=c.sub(a),f=(o.width-2*e.padding-2*Math.abs(i.x))/l.x,h=(o.height-2*e.padding-2*Math.abs(i.y))/l.y;return e.center=o.unproject(a.add(c).div(2)),e.zoom=Math.min(o.scaleZoom(o.scale*Math.min(f,h)),e.maxZoom),e.bearing=0,e.linear?this.easeTo(e,n):this.flyTo(e,n)},e.prototype.jumpTo=function(t,e){this.stop();var n=this.transform,r=!1,i=!1,o=!1;return"zoom"in t&&n.zoom!==+t.zoom&&(r=!0,n.zoom=+t.zoom),"center"in t&&(n.center=a.convert(t.center)),"bearing"in t&&n.bearing!==+t.bearing&&(i=!0,n.bearing=+t.bearing),"pitch"in t&&n.pitch!==+t.pitch&&(o=!0,n.pitch=+t.pitch),this.fire("movestart",e).fire("move",e),r&&this.fire("zoomstart",e).fire("zoom",e).fire("zoomend",e),i&&this.fire("rotate",e),o&&this.fire("pitch",e),this.fire("moveend",e)},e.prototype.easeTo=function(t,e){var n=this;this.stop(),t=r.extend({offset:[0,0],duration:500,easing:r.ease},t);var o,s,c=this.transform,l=u.convert(t.offset),f=this.getZoom(),h=this.getBearing(),p=this.getPitch(),d="zoom"in t?+t.zoom:f,v="bearing"in t?this._normalizeBearing(t.bearing,h):h,m="pitch"in t?+t.pitch:p;"center"in t?(o=a.convert(t.center),s=c.centerPoint.add(l)):"around"in t?(o=a.convert(t.around),s=c.locationPoint(o)):(s=c.centerPoint.add(l),o=c.pointLocation(s));var y=c.locationPoint(o);return t.animate===!1&&(t.duration=0),this.zooming=d!==f,this.rotating=h!==v,this.pitching=m!==p,t.smoothEasing&&0!==t.duration&&(t.easing=this._smoothOutEasing(t.duration)),t.noMoveStart||(this.moving=!0,this.fire("movestart",e)),this.zooming&&this.fire("zoomstart",e),clearTimeout(this._onEaseEnd),this._ease(function(t){this.zooming&&(c.zoom=i(f,d,t)),this.rotating&&(c.bearing=i(h,v,t)),this.pitching&&(c.pitch=i(p,m,t)),c.setLocationAtPoint(o,y.add(s.sub(y)._mult(t))),this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){t.delayEndEvents?n._onEaseEnd=setTimeout(n._easeToEnd.bind(n,e),t.delayEndEvents):n._easeToEnd(e)},t),this},e.prototype._easeToEnd=function(t){var e=this.zooming;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,e&&this.fire("zoomend",t),this.fire("moveend",t)},e.prototype.flyTo=function(t,e){function n(t){var e=(T*T-E*E+(t?-1:1)*A*A*S*S)/(2*(t?T:E)*A*S);return Math.log(Math.sqrt(e*e+1)-e)}function o(t){return(Math.exp(t)-Math.exp(-t))/2}function s(t){return(Math.exp(t)+Math.exp(-t))/2}function c(t){return o(t)/s(t)}this.stop(),t=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},t);var l=this.transform,f=u.convert(t.offset),h=this.getZoom(),p=this.getBearing(),d=this.getPitch(),v="center"in t?a.convert(t.center):this.getCenter(),m="zoom"in t?+t.zoom:h,y="bearing"in t?this._normalizeBearing(t.bearing,p):p,g="pitch"in t?+t.pitch:d;Math.abs(l.center.lng)+Math.abs(v.lng)>180&&(l.center.lng>0&&v.lng<0?v.lng+=360:l.center.lng<0&&v.lng>0&&(v.lng-=360));var _=l.zoomScale(m-h),b=l.point,w="center"in t?l.project(v).sub(f.div(_)):b,x=t.curve,E=Math.max(l.width,l.height),T=E/_,S=w.sub(b).mag();if("minZoom"in t){var M=r.clamp(Math.min(t.minZoom,h,m),l.minZoom,l.maxZoom),O=E/l.zoomScale(M-h);x=Math.sqrt(O/S*2)}var A=x*x,R=n(0),I=function(t){return s(R)/s(R+x*t)},k=function(t){return E*((s(R)*c(R+x*t)-o(R))/A)/S},P=(n(1)-R)/x;if(Math.abs(S)<1e-6){if(Math.abs(E-T)<1e-6)return this.easeTo(t);var N=T<E?-1:1;P=Math.abs(Math.log(T/E))/x,k=function(){return 0},I=function(t){return Math.exp(N*x*t)}}if("duration"in t)t.duration=+t.duration;else{var C="screenSpeed"in t?+t.screenSpeed/x:+t.speed;t.duration=1e3*P/C}return this.moving=!0,this.zooming=!0,p!==y&&(this.rotating=!0),d!==g&&(this.pitching=!0),this.fire("movestart",e),this.fire("zoomstart",e),this._ease(function(t){var n=t*P,r=k(n),o=1/I(n);l.zoom=h+l.scaleZoom(o),l.center=l.unproject(b.add(w.sub(b).mult(r)).mult(o)),this.rotating&&(l.bearing=i(p,y,t)),this.pitching&&(l.pitch=i(d,g,t)),this.fire("move",e),this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},function(){this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,this.fire("zoomend",e),this.fire("moveend",e)},t),this},e.prototype.isEasing=function(){return!!this._abortFn},e.prototype.isMoving=function(){return this.moving},e.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},e.prototype._ease=function(t,e,n){this._finishFn=e,this._abortFn=o.timed(function(e){t.call(this,n.easing(e)),1===e&&this._finishEase()},n.animate===!1?0:n.duration,this)},e.prototype._finishEase=function(){delete this._abortFn;var t=this._finishFn;delete this._finishFn,t.call(this)},e.prototype._normalizeBearing=function(t,e){t=r.wrap(t,-180,180);var n=Math.abs(t-e);return Math.abs(t-360-e)<n&&(t-=360),Math.abs(t+360-e)<n&&(t+=360),t},e.prototype._smoothOutEasing=function(t){var e=r.ease;if(this._prevEase){var n=this._prevEase,i=(Date.now()-n.start)/n.duration,o=n.easing(i+.01)-n.easing(i),a=.27/Math.sqrt(o*o+1e-4)*.01,s=Math.sqrt(.0729-a*a);e=r.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:t,easing:e},e},e}(c);e.exports=l},{"../geo/lng_lat":610,"../geo/lng_lat_bounds":611,"../util/browser":701,"../util/evented":709,"../util/interpolate":712,"../util/util":720,"point-geometry":784}],684:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=function(t){this.options=t,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};o.prototype.getDefaultPosition=function(){return"bottom-right"},o.prototype.onAdd=function(t){var e=this.options&&this.options.compact;return this._map=t,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),e&&this._container.classList.add("compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("data",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===e&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},o.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("data",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},o.prototype._updateEditLink=function(){if(this._editLink||(this._editLink=this._container.querySelector(".mapbox-improve-map")),this._editLink){var t=this._map.getCenter();this._editLink.href="https://www.mapbox.com/map-feedback/#/"+t.lng+"/"+t.lat+"/"+Math.round(this._map.getZoom()+1)}},o.prototype._updateData=function(t){"source"===t.dataType&&(this._updateAttributions(),this._updateEditLink())},o.prototype._updateAttributions=function(){if(this._map.style){var t=[],e=this._map.style.sourceCaches;for(var n in e){var r=e[n].getSource();r.attribution&&t.indexOf(r.attribution)<0&&t.push(r.attribution)}t.sort(function(t,e){return t.length-e.length}),t=t.filter(function(e,n){for(var r=n+1;r<t.length;r++)if(t[r].indexOf(e)>=0)return!1;return!0}),this._container.innerHTML=t.join(" | "),this._editLink=null}},o.prototype._updateCompact=function(){var t=this._map.getCanvasContainer().offsetWidth<=640;this._container.classList[t?"add":"remove"]("compact")},e.exports=o},{"../../util/dom":708,"../../util/util":720}],685:[function(t,e,n){"use strict";function r(t){void 0!==i?t(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(e){i="denied"!==e.state,t(i)}):(i=!!s.navigator.geolocation,t(i))}var i,o=t("../../util/evented"),a=t("../../util/dom"),s=t("../../util/window"),u=t("../../util/util"),c={enableHighAccuracy:!1,timeout:6e3},l=function(t){function e(e){t.call(this),this.options=e||{},u.bindAll(["_onSuccess","_onError","_finish","_setupUI"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onAdd=function(t){return this._map=t,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},e.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map=void 0},e.prototype._onSuccess=function(t){this._map.jumpTo({center:[t.coords.longitude,t.coords.latitude],zoom:17,bearing:0,pitch:0}),this.fire("geolocate",t),this._finish()},e.prototype._onError=function(t){this.fire("error",t),this._finish()},e.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},e.prototype._setupUI=function(t){t!==!1&&(this._container.addEventListener("contextmenu",function(t){return t.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.watchPosition&&this._geolocateButton.setAttribute("aria-pressed",!1),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)))},e.prototype._onClickGeolocate=function(){var t=u.extend(c,this.options&&this.options.positionOptions||{});this.options.watchPosition?void 0!==this._geolocationWatchID?(this._geolocateButton.classList.remove("watching"),this._geolocateButton.setAttribute("aria-pressed",!1),s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0):(this._geolocateButton.classList.add("watching"),this._geolocateButton.setAttribute("aria-pressed",!0),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)):(s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,t),this._timeoutId=setTimeout(this._finish,1e4))},e}(o);e.exports=l},{"../../util/dom":708,"../../util/evented":709,"../../util/util":720,"../../util/window":703}],686:[function(t,e,n){"use strict";function r(t){return new o.MouseEvent(t.type,{button:2,buttons:2,bubbles:!0,cancelable:!0,detail:t.detail,view:t.view,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,movementX:t.movementX,movementY:t.movementY,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey})}var i=t("../../util/dom"),o=t("../../util/window"),a=t("../../util/util"),s="mapboxgl-ctrl",u=function(){a.bindAll(["_rotateCompassArrow"],this)};u.prototype._rotateCompassArrow=function(){var t="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=t},u.prototype.onAdd=function(t){return this._map=t,this._container=i.create("div",s+" "+s+"-group",t.getContainer()),this._container.addEventListener("contextmenu",this._onContextMenu.bind(this)),this._zoomInButton=this._createButton(s+"-icon "+s+"-zoom-in","Zoom In",t.zoomIn.bind(t)),this._zoomOutButton=this._createButton(s+"-icon "+s+"-zoom-out","Zoom Out",t.zoomOut.bind(t)),this._compass=this._createButton(s+"-icon "+s+"-compass","Reset North",t.resetNorth.bind(t)),this._compassArrow=i.create("span","arrow",this._compass),this._compass.addEventListener("mousedown",this._onCompassDown.bind(this)),this._onCompassMove=this._onCompassMove.bind(this),this._onCompassUp=this._onCompassUp.bind(this),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._container},u.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("rotate",this._rotateCompassArrow),this._map=void 0},u.prototype._onContextMenu=function(t){t.preventDefault()},u.prototype._onCompassDown=function(t){0===t.button&&(i.disableDrag(),o.document.addEventListener("mousemove",this._onCompassMove),o.document.addEventListener("mouseup",this._onCompassUp),this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._onCompassMove=function(t){0===t.button&&(this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._onCompassUp=function(t){0===t.button&&(o.document.removeEventListener("mousemove",this._onCompassMove),o.document.removeEventListener("mouseup",this._onCompassUp),i.enableDrag(),this._map.getCanvasContainer().dispatchEvent(r(t)),t.stopPropagation())},u.prototype._createButton=function(t,e,n){var r=i.create("button",t,this._container);return r.type="button",r.setAttribute("aria-label",e),r.addEventListener("click",function(){n()}),r},e.exports=u},{"../../util/dom":708,"../../util/util":720,"../../util/window":703}],687:[function(t,e,n){"use strict";function r(t,e,n){var r=n&&n.maxWidth||100,a=t._container.clientHeight/2,s=o(t.unproject([0,a]),t.unproject([r,a]));if(n&&"imperial"===n.unit){var u=3.2808*s;if(u>5280){i(e,r,u/5280,"mi")}else i(e,r,u,"ft")}else i(e,r,s,"m")}function i(t,e,n,r){var i=a(n),o=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),t.style.width=e*o+"px",t.innerHTML=i+r}function o(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-t.lng)*n);return 6371e3*Math.acos(Math.min(o,1))}function a(t){var e=Math.pow(10,(""+Math.floor(t)).length-1),n=t/e;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,e*n}var s=t("../../util/dom"),u=t("../../util/util"),c=function(t){this.options=t,u.bindAll(["_onMove"],this)};c.prototype.getDefaultPosition=function(){return"bottom-left"},c.prototype._onMove=function(){r(this._map,this._container,this.options)},c.prototype.onAdd=function(t){return this._map=t,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",t.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},c.prototype.onRemove=function(){this._container.parentNode.removeChild(this._container),this._map.off("move",this._onMove),this._map=void 0},e.exports=c},{"../../util/dom":708,"../../util/util":720}],688:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../geo/lng_lat_bounds"),o=t("../../util/util"),a=t("../../util/window"),s=function(t){this._map=t,this._el=t.getCanvasContainer(),this._container=t.getContainer(),o.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onMouseDown,!1),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(t){t.shiftKey&&0===t.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,t),this._active=!0)},s.prototype._onMouseMove=function(t){var e=this._startPos,n=r.mousePos(this._el,t);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",t));var i=Math.min(e.x,n.x),o=Math.max(e.x,n.x),a=Math.min(e.y,n.y),s=Math.max(e.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+a+"px)"),this._box.style.width=o-i+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(t){if(0===t.button){var e=this._startPos,n=r.mousePos(this._el,t),o=(new i).extend(this._map.unproject(e)).extend(this._map.unproject(n));this._finish(),e.x===n.x&&e.y===n.y?this._fireEvent("boxzoomcancel",t):this._map.fitBounds(o,{linear:!0}).fire("boxzoomend",{originalEvent:t,boxZoomBounds:o})}},s.prototype._onKeyDown=function(t){27===t.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",t))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.parentNode.removeChild(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},e.exports=s},{"../../geo/lng_lat_bounds":611,"../../util/dom":708,"../../util/util":720,"../../util/window":703}],689:[function(t,e,n){"use strict";var r=function(t){this._map=t,this._onDblClick=this._onDblClick.bind(this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},r.prototype._onDblClick=function(t){this._map.zoomTo(this._map.getZoom()+(t.originalEvent.shiftKey?-1:1),{around:t.lngLat},t)},e.exports=r},{}],690:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=i.bezier(0,0,.3,1),s=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},s.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(t.touches?(o.document.addEventListener("touchmove",this._onMove),o.document.addEventListener("touchend",this._onTouchEnd)):(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onMouseUp)),this._active=!1,this._startPos=this._pos=r.mousePos(this._el,t),this._inertia=[[Date.now(),this._pos]])},s.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("dragstart",t),this._fireEvent("movestart",t));var e=r.mousePos(this._el,t),n=this._map;n.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),e]),n.transform.setLocationAtPoint(n.transform.pointLocation(this._pos),e),this._fireEvent("drag",t),this._fireEvent("move",t),this._pos=e,t.preventDefault()}},s.prototype._onUp=function(t){var e=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",t),this._drainInertiaBuffer();var n=function(){return e._fireEvent("moveend",t)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],o=r[0],s=i[1].sub(o[1]),u=(i[0]-o[0])/1e3;if(0===u||i[1].equals(o[1]))return void n();var c=s.mult(.3/u),l=c.mag();l>1400&&(l=1400,c._unit()._mult(l));var f=l/750,h=c.mult(-f/2);this._map.panBy(h,{duration:1e3*f,easing:a,noMoveStart:!0},{originalEvent:t})}},s.prototype._onMouseUp=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onMouseUp))},s.prototype._onTouchEnd=function(t){this._ignoreEvent(t)||(this._onUp(t),o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onTouchEnd))},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},s.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragRotate&&e.dragRotate.isActive())return!0;if(t.touches)return t.touches.length>1;if(t.ctrlKey)return!0;return"mousemove"===t.type?t.buttons&!1:0!==t.button},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=s},{"../../util/dom":708,"../../util/util":720,"../../util/window":703}],691:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=i.bezier(0,0,.25,1),s=function(t,e){this._map=t,this._el=t.getCanvasContainer(),this._bearingSnap=e.bearingSnap,this._pitchWithRotate=e.pitchWithRotate!==!1,i.bindAll(["_onDown","_onMove","_onUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},s.prototype._onDown=function(t){this._ignoreEvent(t)||this.isActive()||(o.document.addEventListener("mousemove",this._onMove),o.document.addEventListener("mouseup",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=r.mousePos(this._el,t),this._center=this._map.transform.centerPoint,t.preventDefault())},s.prototype._onMove=function(t){if(!this._ignoreEvent(t)){this.isActive()||(this._active=!0,this._fireEvent("rotatestart",t),this._fireEvent("movestart",t));var e=this._map;e.stop();var n=this._pos,i=r.mousePos(this._el,t),o=.8*(n.x-i.x),a=(n.y-i.y)*-.5,s=e.getBearing()-o,u=e.getPitch()-a,c=this._inertia,l=c[c.length-1];this._drainInertiaBuffer(),c.push([Date.now(),e._normalizeBearing(s,l[1])]),e.transform.bearing=s,this._pitchWithRotate&&(e.transform.pitch=u),this._fireEvent("rotate",t),this._fireEvent("move",t),this._pos=i}},s.prototype._onUp=function(t){var e=this;if(!this._ignoreEvent(t)&&(o.document.removeEventListener("mousemove",this._onMove),o.document.removeEventListener("mouseup",this._onUp),this.isActive())){this._active=!1,this._fireEvent("rotateend",t),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,s=function(){Math.abs(r)<e._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:t}):e._fireEvent("moveend",t)};if(i.length<2)return void s();var u=i[0],c=i[i.length-1],l=i[i.length-2],f=n._normalizeBearing(r,l[1]),h=c[1]-u[1],p=h<0?-1:1,d=(c[0]-u[0])/1e3;if(0===h||0===d)return void s();var v=Math.abs(h*(.25/d));v>180&&(v=180);var m=v/180;f+=p*v*(m/2),Math.abs(n._normalizeBearing(f,0))<this._bearingSnap&&(f=n._normalizeBearing(0,f)),n.rotateTo(f,{duration:1e3*m,easing:a,noMoveStart:!0},{originalEvent:t})}},s.prototype._fireEvent=function(t,e){return this._map.fire(t,{originalEvent:e})},s.prototype._ignoreEvent=function(t){var e=this._map;if(e.boxZoom&&e.boxZoom.isActive())return!0;if(e.dragPan&&e.dragPan.isActive())return!0;if(t.touches)return t.touches.length>1;var n=t.ctrlKey?1:2,r=t.ctrlKey?0:2,i=t.button;return"undefined"!=typeof InstallTrigger&&2===t.button&&t.ctrlKey&&o.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(i=0),"mousemove"===t.type?t.buttons&0===n:i!==r},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>0&&e-t[0][0]>160;)t.shift()},e.exports=s},{"../../util/dom":708,"../../util/util":720,"../../util/window":703}],692:[function(t,e,n){"use strict";function r(t){return t*(2-t)}var i=function(t){this._map=t,this._el=t.getCanvasContainer(),this._onKeyDown=this._onKeyDown.bind(this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},i.prototype._onKeyDown=function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=0,n=0,i=0,o=0,a=0;switch(t.keyCode){case 61:case 107:case 171:case 187:e=1;break;case 189:case 109:case 173:e=-1;break;case 37:t.shiftKey?n=-1:(t.preventDefault(),o=-1);break;case 39:t.shiftKey?n=1:(t.preventDefault(),o=1);break;case 38:t.shiftKey?i=1:(t.preventDefault(),a=-1);break;case 40:t.shiftKey?i=-1:(a=1,t.preventDefault())}var s=this._map,u=s.getZoom(),c={duration:300,delayEndEvents:500,easing:r,zoom:e?Math.round(u)+e*(t.shiftKey?2:1):u,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-o,100*-a],center:s.getCenter()};s.easeTo(c,{originalEvent:t})}},e.exports=i},{}],693:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/browser"),a=t("../../util/window"),s=a.navigator.userAgent.toLowerCase(),u=s.indexOf("firefox")!==-1,c=s.indexOf("safari")!==-1&&s.indexOf("chrom")===-1,l=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onWheel","_onTimeout"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},l.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},l.prototype._onWheel=function(t){var e;"wheel"===t.type?(e=t.deltaY,u&&t.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(e/=o.devicePixelRatio),t.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(e*=40)):"mousewheel"===t.type&&(e=-t.wheelDeltaY,c&&(e/=3));var n=o.now(),i=n-(this._time||0);this._pos=r.mousePos(this._el,t),this._time=n,0!==e&&e%4.000244140625===0?this._type="wheel":0!==e&&Math.abs(e)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=e,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(i*e)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,e+=this._lastValue)),t.shiftKey&&e&&(e/=4),this._type&&this._zoom(-e,t),t.preventDefault()},l.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},l.prototype._zoom=function(t,e){if(0!==t){var n=this._map,r=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==r&&(r=1/r);var i=n.ease?n.ease.to:n.transform.scale,o=n.transform.scaleZoom(i*r);n.zoomTo(o,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?n.getCenter():n.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:e})}},e.exports=l},{"../../util/browser":701,"../../util/dom":708,"../../util/util":720,"../../util/window":703}],694:[function(t,e,n){"use strict";var r=t("../../util/dom"),i=t("../../util/util"),o=t("../../util/window"),a=i.bezier(0,0,.15,1),s=function(t){this._map=t,this._el=t.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(t){this.isEnabled()||(this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=t&&"center"===t.around)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},s.prototype.disableRotation=function(){this._rotationDisabled=!0},s.prototype.enableRotation=function(){this._rotationDisabled=!1},s.prototype._onStart=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]);this._startVec=e.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],o.document.addEventListener("touchmove",this._onMove,!1),o.document.addEventListener("touchend",this._onEnd,!1)}},s.prototype._onMove=function(t){if(2===t.touches.length){var e=r.mousePos(this._el,t.touches[0]),n=r.mousePos(this._el,t.touches[1]),i=e.add(n).div(2),o=e.sub(n),a=o.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*o.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var c={duration:0,around:u.unproject(i)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=u.transform.scaleZoom(this._startScale*a)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,i]),u.easeTo(c,{originalEvent:t})}else{var l=Math.abs(1-a)>.15;Math.abs(s)>4?this._gestureIntent="rotate":l&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=o,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}t.preventDefault()}},s.prototype._onEnd=function(t){o.document.removeEventListener("touchmove",this._onMove),o.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var e=this._inertia,n=this._map;if(e.length<2)return void n.snapToNorth({},{originalEvent:t});var r=e[e.length-1],i=e[0],s=n.transform.scaleZoom(this._startScale*r[1]),u=n.transform.scaleZoom(this._startScale*i[1]),c=s-u,l=(r[0]-i[0])/1e3,f=r[2];if(0===l||s===u)return void n.snapToNorth({},{originalEvent:t});var h=.15*c/l;Math.abs(h)>2.5&&(h=h>0?2.5:-2.5);var p=1e3*Math.abs(h/(12*.15)),d=s+h*p/2e3;d<0&&(d=0),n.easeTo({zoom:d,duration:p,easing:a,around:this._aroundCenter?n.getCenter():n.unproject(f)},{originalEvent:t})},s.prototype._drainInertiaBuffer=function(){for(var t=this._inertia,e=Date.now();t.length>2&&e-t[0][0]>160;)t.shift()},e.exports=s},{"../../util/dom":708,"../../util/util":720,"../../util/window":703}],695:[function(t,e,n){"use strict";var r=t("../util/util"),i=t("../util/window"),o=function(){r.bindAll(["_onHashChange","_updateHash"],this)};o.prototype.addTo=function(t){return this._map=t,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype._onHashChange=function(){var t=i.location.hash.replace("#","").split("/");return t.length>=3&&(this._map.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:+(t[3]||0),pitch:+(t[4]||0)}),!0)},o.prototype._updateHash=function(){var t=this._map.getCenter(),e=this._map.getZoom(),n=this._map.getBearing(),r=this._map.getPitch(),o=Math.max(0,Math.ceil(Math.log(e)/Math.LN2)),a="#"+Math.round(100*e)/100+"/"+t.lat.toFixed(o)+"/"+t.lng.toFixed(o);(n||r)&&(a+="/"+Math.round(10*n)/10),r&&(a+="/"+Math.round(r)),i.history.replaceState("","",a)},e.exports=o},{"../util/util":720,"../util/window":703}],696:[function(t,e,n){"use strict";function r(t){t.parentNode&&t.parentNode.removeChild(t)}
var i=t("../util/util"),o=t("../util/browser"),a=t("../util/window"),s=t("../util/dom"),u=t("../style/style"),c=t("../style/animation_loop"),l=t("../render/painter"),f=t("../geo/transform"),h=t("./hash"),p=t("./bind_handlers"),d=t("./camera"),v=t("../geo/lng_lat"),m=t("../geo/lng_lat_bounds"),y=t("point-geometry"),g=t("./control/attribution_control"),_=t("mapbox-gl-supported"),b={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:20,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0},w=function(t){function e(e){var n=this;e=i.extend({},b,e);var r=new f(e.minZoom,e.maxZoom,e.renderWorldCopies);if(t.call(this,r,e),this._interactive=e.interactive,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=e.preserveDrawingBuffer,this._trackResize=e.trackResize,this._bearingSnap=e.bearingSnap,"string"==typeof e.container){if(this._container=a.document.getElementById(e.container),!this._container)throw new Error("Container '"+e.container+"' not found.")}else this._container=e.container;this.animationLoop=new c,e.maxBounds&&this.setMaxBounds(e.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("moveend",function(){n.animationLoop.set(300),n._rerender()}),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),p(this,e),this._hash=e.hash&&(new h).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),this._classes=[],this.resize(),e.classes&&this.setClasses(e.classes),e.style&&this.setStyle(e.style),e.attributionControl&&this.addControl(new g),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update(this._classes,{transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return e.prototype.addControl=function(t,e){void 0===e&&t.getDefaultPosition&&(e=t.getDefaultPosition()),void 0===e&&(e="top-right");var n=t.onAdd(this),r=this._controlPositions[e];return e.indexOf("bottom")!==-1?r.insertBefore(n,r.firstChild):r.appendChild(n),this},e.prototype.removeControl=function(t){return t.onRemove(this),this},e.prototype.addClass=function(t,e){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0||""===t?this:(this._classes.push(t),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.removeClass=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");var n=this._classes.indexOf(t);return n<0||""===t?this:(this._classes.splice(n,1),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0))},e.prototype.setClasses=function(t,e){i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS.");for(var n={},r=0;r<t.length;r++)""!==t[r]&&(n[t[r]]=!0);return this._classes=Object.keys(n),this._classOptions=e,this.style&&this.style.updateClasses(),this._update(!0)},e.prototype.hasClass=function(t){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes.indexOf(t)>=0},e.prototype.getClasses=function(){return i.warnOnce("Style classes are deprecated and will be removed in an upcoming release of Mapbox GL JS."),this._classes},e.prototype.resize=function(){var t=this._containerDimensions(),e=t[0],n=t[1];this._resizeCanvas(e,n),this.transform.resize(e,n),this.painter.resize(e,n);var r=this.painter.gl,o=r.getParameter(r.MAX_RENDERBUFFER_SIZE)/2;return(this._canvas.width>o||this._canvas.height>o)&&i.warnOnce("Map is larger than maximum size supported by this system ("+o+"px by "+o+"px)."),this.fire("movestart").fire("move").fire("resize").fire("moveend")},e.prototype.getBounds=function(){var t=new m(this.transform.pointLocation(new y(0,this.transform.height)),this.transform.pointLocation(new y(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(t.extend(this.transform.pointLocation(new y(this.transform.size.x,0))),t.extend(this.transform.pointLocation(new y(0,this.transform.size.y)))),t},e.prototype.setMaxBounds=function(t){if(t){var e=m.convert(t);this.transform.lngRange=[e.getWest(),e.getEast()],this.transform.latRange=[e.getSouth(),e.getNorth()],this.transform._constrain(),this._update()}else null!==t&&void 0!==t||(this.transform.lngRange=[],this.transform.latRange=[],this._update());return this},e.prototype.setMinZoom=function(t){if(t=null===t||void 0===t?0:t,t>=0&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t&&this.setZoom(t),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},e.prototype.getMinZoom=function(){return this.transform.minZoom},e.prototype.setMaxZoom=function(t){if(t=null===t||void 0===t?20:t,t>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t&&this.setZoom(t),this;throw new Error("maxZoom must be greater than the current minZoom")},e.prototype.getMaxZoom=function(){return this.transform.maxZoom},e.prototype.project=function(t){return this.transform.locationPoint(v.convert(t))},e.prototype.unproject=function(t){return this.transform.pointLocation(y.convert(t))},e.prototype.queryRenderedFeatures=function(){function t(t){return t instanceof y||Array.isArray(t)}var e,n={};return 2===arguments.length?(e=arguments[0],n=arguments[1]):1===arguments.length&&t(arguments[0])?e=arguments[0]:1===arguments.length&&(n=arguments[0]),this.style.queryRenderedFeatures(this._makeQueryGeometry(e),n,this.transform.zoom,this.transform.angle)},e.prototype._makeQueryGeometry=function(t){var e=this;void 0===t&&(t=[y.convert([0,0]),y.convert([this.transform.width,this.transform.height])]);var n;if(t instanceof y||"number"==typeof t[0])n=[y.convert(t)];else{var r=[y.convert(t[0]),y.convert(t[1])];n=[r[0],new y(r[1].x,r[0].y),r[1],new y(r[0].x,r[1].y),r[0]]}return n=n.map(function(t){return e.transform.pointCoordinate(t)})},e.prototype.querySourceFeatures=function(t,e){return this.style.querySourceFeatures(t,e)},e.prototype.setStyle=function(t,e){if((!e||e.diff!==!1)&&this.style&&t&&!(t instanceof u)&&"string"!=typeof t)try{return this.style.setState(t)&&this._update(!0),this}catch(t){i.warnOnce("Unable to perform style diff: "+(t.message||t.error||t)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.off("rotate",this.style._redoPlacement),this.off("pitch",this.style._redoPlacement)),t?(t instanceof u?this.style=t:this.style=new u(t,this),this.style.setEventedParent(this,{style:this.style}),this.on("rotate",this.style._redoPlacement),this.on("pitch",this.style._redoPlacement),this):(this.style=null,this)},e.prototype.getStyle=function(){if(this.style)return this.style.serialize()},e.prototype.addSource=function(t,e){return this.style.addSource(t,e),this._update(!0),this},e.prototype.isSourceLoaded=function(t){var e=this.style&&this.style.sourceCaches[t];return void 0===e?void this.fire("error",{error:new Error("There is no source with ID '"+t+"'")}):e.loaded()},e.prototype.addSourceType=function(t,e,n){return this.style.addSourceType(t,e,n)},e.prototype.removeSource=function(t){return this.style.removeSource(t),this._update(!0),this},e.prototype.getSource=function(t){return this.style.getSource(t)},e.prototype.addLayer=function(t,e){return this.style.addLayer(t,e),this._update(!0),this},e.prototype.moveLayer=function(t,e){return this.style.moveLayer(t,e),this._update(!0),this},e.prototype.removeLayer=function(t){return this.style.removeLayer(t),this._update(!0),this},e.prototype.getLayer=function(t){return this.style.getLayer(t)},e.prototype.setFilter=function(t,e){return this.style.setFilter(t,e),this._update(!0),this},e.prototype.setLayerZoomRange=function(t,e,n){return this.style.setLayerZoomRange(t,e,n),this._update(!0),this},e.prototype.getFilter=function(t){return this.style.getFilter(t)},e.prototype.setPaintProperty=function(t,e,n,r){return this.style.setPaintProperty(t,e,n,r),this._update(!0),this},e.prototype.getPaintProperty=function(t,e,n){return this.style.getPaintProperty(t,e,n)},e.prototype.setLayoutProperty=function(t,e,n){return this.style.setLayoutProperty(t,e,n),this._update(!0),this},e.prototype.getLayoutProperty=function(t,e){return this.style.getLayoutProperty(t,e)},e.prototype.setLight=function(t){return this.style.setLight(t),this._update(!0),this},e.prototype.getLight=function(){return this.style.getLight()},e.prototype.getContainer=function(){return this._container},e.prototype.getCanvasContainer=function(){return this._canvasContainer},e.prototype.getCanvas=function(){return this._canvas},e.prototype._containerDimensions=function(){var t=0,e=0;return this._container&&(t=this._container.offsetWidth||400,e=this._container.offsetHeight||300),[t,e]},e.prototype._setupContainer=function(){var t=this._container;t.classList.add("mapboxgl-map");var e=this._canvasContainer=s.create("div","mapboxgl-canvas-container",t);this._interactive&&e.classList.add("mapboxgl-interactive"),this._canvas=s.create("canvas","mapboxgl-canvas",e),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",0),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=s.create("div","mapboxgl-control-container",t),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(t){i[t]=s.create("div","mapboxgl-ctrl-"+t,r)})},e.prototype._resizeCanvas=function(t,e){var n=a.devicePixelRatio||1;this._canvas.width=n*t,this._canvas.height=n*e,this._canvas.style.width=t+"px",this._canvas.style.height=e+"px"},e.prototype._setupPainter=function(){var t=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},_.webGLContextAttributes),e=this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);if(!e)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new l(e,this.transform)},e.prototype._contextLost=function(t){t.preventDefault(),this._frameId&&o.cancelFrame(this._frameId),this.fire("webglcontextlost",{originalEvent:t})},e.prototype._contextRestored=function(t){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:t})},e.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},e.prototype._update=function(t){return this.style?(this._styleDirty=this._styleDirty||t,this._sourcesDirty=!0,this._rerender(),this):this},e.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(this._classes,this._classOptions),this._classOptions=null,this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.animationLoop.stopped()||(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty)&&this._rerender(),this},e.prototype.remove=function(){this._hash&&this._hash.remove(),o.cancelFrame(this._frameId),this.setStyle(null),void 0!==a&&a.removeEventListener("resize",this._onWindowResize,!1);var t=this.painter.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),r(this._canvasContainer),r(this._controlContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},e.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=o.frame(this._render))},e.prototype._onWindowOnline=function(){this._update()},e.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(t){this._showTileBoundaries!==t&&(this._showTileBoundaries=t,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(t){this._showCollisionBoxes!==t&&(this._showCollisionBoxes=t,this.style._redoPlacement())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(t){this._showOverdrawInspector!==t&&(this._showOverdrawInspector=t,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(t){this._repaint=t,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(t){this._vertices=t,this._update()},e.prototype._onData=function(t){this._update("style"===t.dataType),this.fire(t.dataType+"data",t)},e.prototype._onDataLoading=function(t){this.fire(t.dataType+"dataloading",t)},Object.defineProperties(e.prototype,n),e}(d);e.exports=w},{"../geo/lng_lat":610,"../geo/lng_lat_bounds":611,"../geo/transform":612,"../render/painter":627,"../style/animation_loop":650,"../style/style":654,"../util/browser":701,"../util/dom":708,"../util/util":720,"../util/window":703,"./bind_handlers":682,"./camera":683,"./control/attribution_control":684,"./hash":695,"mapbox-gl-supported":591,"point-geometry":784}],697:[function(t,e,n){"use strict";var r=t("../util/dom"),i=t("../geo/lng_lat"),o=t("point-geometry"),a=function(t,e){this._offset=o.convert(e&&e.offset||[0,0]),this._update=this._update.bind(this),this._onMapClick=this._onMapClick.bind(this),t||(t=r.create("div")),t.classList.add("mapboxgl-marker"),this._element=t,this._popup=null};a.prototype.addTo=function(t){return this.remove(),this._map=t,t.getCanvasContainer().appendChild(this._element),t.on("move",this._update),t.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},a.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map=null),r.remove(this._element),this._popup&&this._popup.remove(),this},a.prototype.getLngLat=function(){return this._lngLat},a.prototype.setLngLat=function(t){return this._lngLat=i.convert(t),this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},a.prototype.getElement=function(){return this._element},a.prototype.setPopup=function(t){return this._popup&&(this._popup.remove(),this._popup=null),t&&(this._popup=t,this._popup.setLngLat(this._lngLat)),this},a.prototype._onMapClick=function(t){var e=t.originalEvent.target,n=this._element;this._popup&&(e===n||n.contains(e))&&this.togglePopup()},a.prototype.getPopup=function(){return this._popup},a.prototype.togglePopup=function(){var t=this._popup;t&&(t.isOpen()?t.remove():t.addTo(this._map))},a.prototype._update=function(t){if(this._map){var e=this._map.project(this._lngLat)._add(this._offset);t&&"moveend"!==t.type||(e=e.round()),r.setTransform(this._element,"translate("+e.x+"px, "+e.y+"px)")}},e.exports=a},{"../geo/lng_lat":610,"../util/dom":708,"point-geometry":784}],698:[function(t,e,n){"use strict";function r(t){if(t){if("number"==typeof t){var e=Math.round(Math.sqrt(.5*Math.pow(t,2)));return{top:new c(0,t),"top-left":new c(e,e),"top-right":new c(-e,e),bottom:new c(0,-t),"bottom-left":new c(e,-e),"bottom-right":new c(-e,-e),left:new c(t,0),right:new c(-t,0)}}if(i(t)){var n=c.convert(t);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:c.convert(t.top||[0,0]),"top-left":c.convert(t["top-left"]||[0,0]),"top-right":c.convert(t["top-right"]||[0,0]),bottom:c.convert(t.bottom||[0,0]),"bottom-left":c.convert(t["bottom-left"]||[0,0]),"bottom-right":c.convert(t["bottom-right"]||[0,0]),left:c.convert(t.left||[0,0]),right:c.convert(t.right||[0,0])}}return r(new c(0,0))}function i(t){return t instanceof c||Array.isArray(t)}var o=t("../util/util"),a=t("../util/evented"),s=t("../util/dom"),u=t("../geo/lng_lat"),c=t("point-geometry"),l=t("../util/window"),f={closeButton:!0,closeOnClick:!0},h=function(t){function e(e){t.call(this),this.options=o.extend(Object.create(f),e),o.bindAll(["_update","_onClickClose"],this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addTo=function(t){return this._map=t,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},e.prototype.isOpen=function(){return!!this._map},e.prototype.remove=function(){return this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._container&&(this._container.parentNode.removeChild(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},e.prototype.getLngLat=function(){return this._lngLat},e.prototype.setLngLat=function(t){return this._lngLat=u.convert(t),this._update(),this},e.prototype.setText=function(t){return this.setDOMContent(l.document.createTextNode(t))},e.prototype.setHTML=function(t){var e,n=l.document.createDocumentFragment(),r=l.document.createElement("body");for(r.innerHTML=t;;){if(e=r.firstChild,!e)break;n.appendChild(e)}return this.setDOMContent(n)},e.prototype.setDOMContent=function(t){return this._createContent(),this._content.appendChild(t),this._update(),this},e.prototype._createContent=function(){this._content&&this._content.parentNode&&this._content.parentNode.removeChild(this._content),this._content=s.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=s.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},e.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=s.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=s.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content));var t=this.options.anchor,e=r(this.options.offset),n=this._map.project(this._lngLat).round();if(!t){var i=this._container.offsetWidth,o=this._container.offsetHeight;t=n.y+e.bottom.y<o?["top"]:n.y>this._map.transform.height-o?["bottom"]:[],n.x<i/2?t.push("left"):n.x>this._map.transform.width-i/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var a=n.add(e[t]),u={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},c=this._container.classList;for(var l in u)c.remove("mapboxgl-popup-anchor-"+l);c.add("mapboxgl-popup-anchor-"+t),s.setTransform(this._container,u[t]+" translate("+a.x+"px,"+a.y+"px)")}},e.prototype._onClickClose=function(){this.remove()},e}(a);e.exports=h},{"../geo/lng_lat":610,"../util/dom":708,"../util/evented":709,"../util/util":720,"../util/window":703,"point-geometry":784}],699:[function(t,e,n){"use strict";var r=function(t,e,n){this.target=t,this.parent=e,this.mapId=n,this.callbacks={},this.callbackID=0,this.receive=this.receive.bind(this),this.target.addEventListener("message",this.receive,!1)};r.prototype.send=function(t,e,n,r,i){var o=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[o]=n),this.target.postMessage({targetMapId:i,sourceMapId:this.mapId,type:t,id:String(o),data:e},r)},r.prototype.receive=function(t){var e,n=this,r=t.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var o=function(t,e,r){n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:t?String(t):null,data:e},r)};if("<response>"===r.type)e=this.callbacks[r.id],delete this.callbacks[r.id],e&&e(r.error||null,r.data);else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,r.data,o);else if(void 0!==r.id&&this.parent.getWorkerSource){var a=r.type.split("."),s=this.parent.getWorkerSource(r.sourceMapId,a[0]);s[a[1]](r.data,o)}else this.parent[r.type](r.data)}},r.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},e.exports=r},{}],700:[function(t,e,n){"use strict";function r(t){var e=i.document.createElement("a");return e.href=t,e.protocol===i.document.location.protocol&&e.host===i.document.location.host}var i=t("./window");n.getJSON=function(t,e){var n=new i.XMLHttpRequest;return n.open("GET",t,!0),n.setRequestHeader("Accept","application/json"),n.onerror=function(t){e(t)},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var t;try{t=JSON.parse(n.response)}catch(t){return e(t)}e(null,t)}else e(new Error(n.statusText))},n.send(),n},n.getArrayBuffer=function(t,e){var n=new i.XMLHttpRequest;return n.open("GET",t,!0),n.responseType="arraybuffer",n.onerror=function(t){e(t)},n.onload=function(){if(0===n.response.byteLength&&200===n.status)return e(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?e(null,{data:n.response,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):e(new Error(n.statusText))},n.send(),n};n.getImage=function(t,e){return n.getArrayBuffer(t,function(t,n){if(t)return e(t);var r=new i.Image,o=i.URL||i.webkitURL;r.onload=function(){e(null,r),o.revokeObjectURL(r.src)};var a=new i.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="})},n.getVideo=function(t,e){var n=i.document.createElement("video");n.onloadstart=function(){e(null,n)};for(var o=0;o<t.length;o++){var a=i.document.createElement("source");r(t[o])||(n.crossOrigin="Anonymous"),a.src=t[o],n.appendChild(a)}return n}},{"./window":703}],701:[function(t,e,n){"use strict";var r=t("./window");e.exports.now=function(){return r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date)}();var i=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame;n.frame=function(t){return i(t)};var o=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;n.cancelFrame=function(t){o(t)},n.timed=function(t,r,i){function o(u){a||(u=e.exports.now(),u>=s+r?t.call(i,1):(t.call(i,(u-s)/r),n.frame(o)))}if(!r)return t.call(i,1),null;var a=!1,s=e.exports.now();return n.frame(o),function(){a=!0}},n.getImageData=function(t){var e=r.document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height).data},n.supported=t("mapbox-gl-supported"),n.hardwareConcurrency=r.navigator.hardwareConcurrency||4,Object.defineProperty(n,"devicePixelRatio",{get:function(){return r.devicePixelRatio}}),n.supportsWebp=!1;var a=r.document.createElement("img");a.onload=function(){n.supportsWebp=!0},a.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":703,"mapbox-gl-supported":591}],702:[function(t,e,n){"use strict";var r=t("webworkify"),i=t("../window"),o=i.URL.createObjectURL(new r(t("../../source/worker"),{bare:!0}));e.exports=function(){return new i.Worker(o)}},{"../../source/worker":648,"../window":703,webworkify:989}],703:[function(t,e,n){"use strict";e.exports=self},{}],704:[function(t,e,n){"use strict";function r(t,e){return e.area-t.area}var i=t("quickselect"),o=t("./util").calculateSignedArea;e.exports=function(t,e){var n=t.length;if(n<=1)return[t];for(var a,s,u=[],c=0;c<n;c++){var l=o(t[c]);0!==l&&(t[c].area=Math.abs(l),void 0===s&&(s=l<0),s===l<0?(a&&u.push(a),a=[t[c]]):a.push(t[c]))}if(a&&u.push(a),e>1)for(var f=0;f<u.length;f++)u[f].length<=e||(i(u[f],e,1,u[f].length-1,r),u[f]=u[f].slice(0,e));return u}},{"./util":720,quickselect:786}],705:[function(t,e,n){"use strict";var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};e.exports=r},{}],706:[function(t,e,n){"use strict";var r=function(t){var e=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];e._stringToNumber[r]=n,e._numberToString[n]=r}};r.prototype.encode=function(t){return this._stringToNumber[t]},r.prototype.decode=function(t){return this._numberToString[t]},e.exports=r},{}],707:[function(t,e,n){"use strict";var r=t("./util"),i=t("./actor"),o=function(t,e){var n=this;this.workerPool=t,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var o=this.workerPool.acquire(this.id),a=0;a<o.length;a++){var s=o[a],u=new i(s,e,n.id);u.name="Worker "+a,n.actors.push(u)}};o.prototype.broadcast=function(t,e,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(t,e,r)},n)},o.prototype.send=function(t,e,n,r,i){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(t,e,n,i),r},o.prototype.remove=function(){this.actors.forEach(function(t){t.remove()}),this.actors=[],this.workerPool.release(this.id)},e.exports=o},{"./actor":699,"./util":720}],708:[function(t,e,n){"use strict";function r(t){for(var e=0;e<t.length;e++)if(t[e]in u)return t[e];return t[0]}function i(t){t.preventDefault(),t.stopPropagation(),a.removeEventListener("click",i,!0)}var o=t("point-geometry"),a=t("./window");n.create=function(t,e,n){var r=a.document.createElement(t);return e&&(r.className=e),n&&n.appendChild(r),r};var s,u=a.document.documentElement.style,c=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){c&&(s=u[c],u[c]="none")},n.enableDrag=function(){c&&(u[c]=s)};var l=r(["transform","WebkitTransform"]);n.setTransform=function(t,e){t.style[l]=e},n.suppressClick=function(){a.addEventListener("click",i,!0),a.setTimeout(function(){a.removeEventListener("click",i,!0)},0)},n.mousePos=function(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,new o(e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop)},n.touchPos=function(t,e){for(var n=t.getBoundingClientRect(),r=[],i="touchend"===e.type?e.changedTouches:e.touches,a=0;a<i.length;a++)r.push(new o(i[a].clientX-n.left-t.clientLeft,i[a].clientY-n.top-t.clientTop));return r},n.remove=function(t){t.parentNode&&t.parentNode.removeChild(t)}},{"./window":703,"point-geometry":784}],709:[function(t,e,n){"use strict";var r=t("./util"),i=function(){};i.prototype.on=function(t,e){return this._listeners=this._listeners||{},this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(e),this},i.prototype.off=function(t,e){if(this._listeners&&this._listeners[t]){var n=this._listeners[t].indexOf(e);n!==-1&&this._listeners[t].splice(n,1)}return this},i.prototype.once=function(t,e){var n=this,r=function(i){n.off(t,r),e.call(n,i)};return this.on(t,r),this},i.prototype.fire=function(t,e){var n=this;if(this.listens(t)){e=r.extend({},e,{type:t,target:this});for(var i=this._listeners&&this._listeners[t]?this._listeners[t].slice():[],o=0;o<i.length;o++)i[o].call(n,e);this._eventedParent&&this._eventedParent.fire(t,r.extend({},e,this._eventedParentData))}else r.endsWith(t,"error")&&console.error(e&&e.error||e||"Empty error event");return this},i.prototype.listens=function(t){return this._listeners&&this._listeners[t]||this._eventedParent&&this._eventedParent.listens(t)},i.prototype.setEventedParent=function(t,e){return this._eventedParent=t,this._eventedParentData="function"==typeof e?e():e,this},e.exports=i},{"./util":720}],710:[function(t,e,n){"use strict";function r(t,e){return e.max-t.max}function i(t,e,n,r){this.p=new u(t,e),this.h=n,this.d=o(this.p,r),this.max=this.d+this.h*Math.SQRT2}function o(t,e){for(var n=!1,r=1/0,i=0;i<e.length;i++)for(var o=e[i],a=0,s=o.length,u=s-1;a<s;u=a++){var l=o[a],f=o[u];l.y>t.y!=f.y>t.y&&t.x<(f.x-l.x)*(t.y-l.y)/(f.y-l.y)+l.x&&(n=!n),r=Math.min(r,c(t,l,f))}return(n?1:-1)*Math.sqrt(r)}function a(t){for(var e=0,n=0,r=0,o=t[0],a=0,s=o.length,u=s-1;a<s;u=a++){var c=o[a],l=o[u],f=c.x*l.y-l.x*c.y;n+=(c.x+l.x)*f,r+=(c.y+l.y)*f,e+=3*f}return new i(n/e,r/e,0,t)}var s=t("tinyqueue"),u=t("point-geometry"),c=t("./intersection_tests").distToSegmentSquared;e.exports=function(t,e,n){e=e||1;for(var o,u,c,l,f=t[0],h=0;h<f.length;h++){var p=f[h];(!h||p.x<o)&&(o=p.x),(!h||p.y<u)&&(u=p.y),(!h||p.x>c)&&(c=p.x),(!h||p.y>l)&&(l=p.y)}for(var d=c-o,v=l-u,m=Math.min(d,v),y=m/2,g=new s(null,r),_=o;_<c;_+=m)for(var b=u;b<l;b+=m)g.push(new i(_+y,b+y,y,t));for(var w=a(t),x=g.length;g.length;){var E=g.pop();E.d>w.d&&(w=E,n&&console.log("found best %d after %d probes",Math.round(1e4*E.d)/1e4,x)),E.max-w.d<=e||(y=E.h/2,g.push(new i(E.p.x-y,E.p.y-y,y,t)),g.push(new i(E.p.x+y,E.p.y-y,y,t)),g.push(new i(E.p.x-y,E.p.y+y,y,t)),g.push(new i(E.p.x+y,E.p.y+y,y,t)),x+=4)}return n&&(console.log("num probes: "+x),console.log("best distance: "+w.d)),w.p}},{"./intersection_tests":713,"point-geometry":784,tinyqueue:971}],711:[function(t,e,n){"use strict";function r(t,e){this.stacks=t.readFields(i,[],e)}function i(t,e,n){if(1===t){var r=n.readMessage(o,{glyphs:{}});e.push(r)}}function o(t,e,n){if(1===t)e.name=n.readString();else if(2===t)e.range=n.readString();else if(3===t){var r=n.readMessage(a,{});e.glyphs[r.id]=r}}function a(t,e,n){1===t?e.id=n.readVarint():2===t?e.bitmap=n.readBytes():3===t?e.width=n.readVarint():4===t?e.height=n.readVarint():5===t?e.left=n.readSVarint():6===t?e.top=n.readSVarint():7===t&&(e.advance=n.readVarint())}e.exports=r},{}],712:[function(t,e,n){"use strict";function r(t,e,n){return t*(1-n)+e*n}e.exports=r,r.number=r,r.vec2=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n)]},r.color=function(t,e,n){return[r(t[0],e[0],n),r(t[1],e[1],n),r(t[2],e[2],n),r(t[3],e[3],n)]},r.array=function(t,e,n){return t.map(function(t,i){return r(t,e[i],n)})}},{}],713:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)if(p(e,t[n]))return!0;for(var r=0;r<e.length;r++)if(p(t,e[r]))return!0;return!!u(t,e)}function i(t,e,n){for(var r=0;r<t.length;r++)for(var i=t[r],o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];if(p(i,u))return!0;if(l(u,i,n))return!0}return!1}function o(t,e){if(1===t.length&&1===t[0].length)return h(e,t[0][0]);for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)if(h(t,r[i]))return!0;for(var o=0;o<t.length;o++){for(var a=t[o],s=0;s<a.length;s++)if(h(e,a[s]))return!0;for(var c=0;c<e.length;c++)if(u(a,e[c]))return!0}return!1}function a(t,e,n){for(var r=0;r<e.length;r++)for(var i=e[r],o=0;o<t.length;o++){var a=t[o];if(a.length>=3)for(var u=0;u<i.length;u++)if(p(a,i[u]))return!0;if(s(a,i,n))return!0}return!1}function s(t,e,n){if(t.length>1){if(u(t,e))return!0;for(var r=0;r<e.length;r++)if(l(e[r],t,n))return!0}for(var i=0;i<t.length;i++)if(l(t[i],e,n))return!0;return!1}function u(t,e){if(0===t.length||0===e.length)return!1
;for(var n=0;n<t.length-1;n++)for(var r=t[n],i=t[n+1],o=0;o<e.length-1;o++){var a=e[o],s=e[o+1];if(c(r,i,a,s))return!0}return!1}function c(t,e,n,r){return d(t,n,r)!==d(e,n,r)&&d(t,e,n)!==d(t,e,r)}function l(t,e,n){var r=n*n;if(1===e.length)return t.distSqr(e[0])<r;for(var i=1;i<e.length;i++){if(f(t,e[i-1],e[i])<r)return!0}return!1}function f(t,e,n){var r=e.distSqr(n);if(0===r)return t.distSqr(e);var i=((t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y))/r;return i<0?t.distSqr(e):i>1?t.distSqr(n):t.distSqr(n.sub(e)._mult(i)._add(e))}function h(t,e){for(var n,r,i,o=!1,a=0;a<t.length;a++){n=t[a];for(var s=0,u=n.length-1;s<n.length;u=s++)r=n[s],i=n[u],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function p(t,e){for(var n=!1,r=0,i=t.length-1;r<t.length;i=r++){var o=t[r],a=t[i];o.y>e.y!=a.y>e.y&&e.x<(a.x-o.x)*(e.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}var d=t("./util").isCounterClockwise;e.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:o,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:r,distToSegmentSquared:f}},{"./util":720}],714:[function(t,e,n){"use strict";var r={"Latin-1 Supplement":function(t){return t>=128&&t<=255},"Hangul Jamo":function(t){return t>=4352&&t<=4607},"Unified Canadian Aboriginal Syllabics":function(t){return t>=5120&&t<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(t){return t>=6320&&t<=6399},"General Punctuation":function(t){return t>=8192&&t<=8303},"Letterlike Symbols":function(t){return t>=8448&&t<=8527},"Number Forms":function(t){return t>=8528&&t<=8591},"Miscellaneous Technical":function(t){return t>=8960&&t<=9215},"Control Pictures":function(t){return t>=9216&&t<=9279},"Optical Character Recognition":function(t){return t>=9280&&t<=9311},"Enclosed Alphanumerics":function(t){return t>=9312&&t<=9471},"Geometric Shapes":function(t){return t>=9632&&t<=9727},"Miscellaneous Symbols":function(t){return t>=9728&&t<=9983},"Miscellaneous Symbols and Arrows":function(t){return t>=11008&&t<=11263},"CJK Radicals Supplement":function(t){return t>=11904&&t<=12031},"Kangxi Radicals":function(t){return t>=12032&&t<=12255},"Ideographic Description Characters":function(t){return t>=12272&&t<=12287},"CJK Symbols and Punctuation":function(t){return t>=12288&&t<=12351},Hiragana:function(t){return t>=12352&&t<=12447},Katakana:function(t){return t>=12448&&t<=12543},Bopomofo:function(t){return t>=12544&&t<=12591},"Hangul Compatibility Jamo":function(t){return t>=12592&&t<=12687},Kanbun:function(t){return t>=12688&&t<=12703},"Bopomofo Extended":function(t){return t>=12704&&t<=12735},"CJK Strokes":function(t){return t>=12736&&t<=12783},"Katakana Phonetic Extensions":function(t){return t>=12784&&t<=12799},"Enclosed CJK Letters and Months":function(t){return t>=12800&&t<=13055},"CJK Compatibility":function(t){return t>=13056&&t<=13311},"CJK Unified Ideographs Extension A":function(t){return t>=13312&&t<=19903},"Yijing Hexagram Symbols":function(t){return t>=19904&&t<=19967},"CJK Unified Ideographs":function(t){return t>=19968&&t<=40959},"Yi Syllables":function(t){return t>=40960&&t<=42127},"Yi Radicals":function(t){return t>=42128&&t<=42191},"Hangul Jamo Extended-A":function(t){return t>=43360&&t<=43391},"Hangul Syllables":function(t){return t>=44032&&t<=55215},"Hangul Jamo Extended-B":function(t){return t>=55216&&t<=55295},"Private Use Area":function(t){return t>=57344&&t<=63743},"CJK Compatibility Ideographs":function(t){return t>=63744&&t<=64255},"Vertical Forms":function(t){return t>=65040&&t<=65055},"CJK Compatibility Forms":function(t){return t>=65072&&t<=65103},"Small Form Variants":function(t){return t>=65104&&t<=65135},"Halfwidth and Fullwidth Forms":function(t){return t>=65280&&t<=65519}};e.exports=r},{}],715:[function(t,e,n){"use strict";var r=function(t,e){this.max=t,this.onRemove=e,this.reset()};r.prototype.reset=function(){var t=this;for(var e in this.data)t.onRemove(t.data[e]);return this.data={},this.order=[],this},r.prototype.add=function(t,e){if(this.has(t))this.order.splice(this.order.indexOf(t),1),this.data[t]=e,this.order.push(t);else if(this.data[t]=e,this.order.push(t),this.order.length>this.max){var n=this.get(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(t){return t in this.data},r.prototype.keys=function(){return this.order},r.prototype.get=function(t){if(!this.has(t))return null;var e=this.data[t];return delete this.data[t],this.order.splice(this.order.indexOf(t),1),e},r.prototype.remove=function(t){if(!this.has(t))return this;var e=this.data[t];return delete this.data[t],this.onRemove(e),this.order.splice(this.order.indexOf(t),1),this},r.prototype.setMaxSize=function(t){var e=this;for(this.max=t;this.order.length>this.max;){var n=e.get(e.order[0]);n&&e.onRemove(n)}return this},e.exports=r},{}],716:[function(t,e,n){"use strict";function r(t,e){var n=a(u.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,!u.REQUIRE_ACCESS_TOKEN)return s(t);if(e=e||u.ACCESS_TOKEN,!e)throw new Error("An API access token is required to use Mapbox GL. "+l);if("s"===e[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+l);return t.params.push("access_token="+e),s(t)}function i(t){return 0===t.indexOf("mapbox:")}function o(t){for(var e=0;e<t.length;e++)0===t[e].indexOf("access_token=tk.")&&(t[e]="access_token="+(u.ACCESS_TOKEN||""))}function a(t){var e=t.match(/^(\w+):\/\/([^\/?]+)(\/[^?]+)?\??(.+)?/);if(!e)throw new Error("Unable to parse URL object");return{protocol:e[1],authority:e[2],path:e[3]||"/",params:e[4]?e[4].split("&"):[]}}function s(t){var e=t.params.length?"?"+t.params.join("&"):"";return t.protocol+"://"+t.authority+t.path+e}var u=t("./config"),c=t("./browser"),l="See https://www.mapbox.com/developers/api/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/styles/v1"+n.path,r(n,e)},n.normalizeGlyphsURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/fonts/v1"+n.path,r(n,e)},n.normalizeSourceURL=function(t,e){if(!i(t))return t;var n=a(t);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,e)},n.normalizeSpriteURL=function(t,e,n,o){var u=a(t);return i(t)?(u.path="/styles/v1"+u.path+"/sprite"+e+n,r(u,o)):(u.path+=""+e+n,s(u))};n.normalizeTileURL=function(t,e,n){if(!e||!i(e))return t;var r=a(t),u=c.devicePixelRatio>=2||512===n?"@2x":"",l=c.supportsWebp?".webp":"$1";return r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,""+u+l),o(r.params),s(r)}},{"./browser":701,"./config":705}],717:[function(t,e,n){"use strict";var r=t("./is_char_in_unicode_block");e.exports.allowsIdeographicBreaking=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},e.exports.allowsVerticalWritingMode=function(t){for(var e=0,r=t;e<r.length;e+=1){var i=r[e];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},e.exports.charAllowsIdeographicBreaking=function(t){return!(t<11904)&&(!!r["Bopomofo Extended"](t)||(!!r.Bopomofo(t)||(!!r["CJK Compatibility Forms"](t)||(!!r["CJK Compatibility Ideographs"](t)||(!!r["CJK Compatibility"](t)||(!!r["CJK Radicals Supplement"](t)||(!!r["CJK Strokes"](t)||(!!r["CJK Symbols and Punctuation"](t)||(!!r["CJK Unified Ideographs Extension A"](t)||(!!r["CJK Unified Ideographs"](t)||(!!r["Enclosed CJK Letters and Months"](t)||(!!r["Halfwidth and Fullwidth Forms"](t)||(!!r.Hiragana(t)||(!!r["Ideographic Description Characters"](t)||(!!r["Kangxi Radicals"](t)||(!!r["Katakana Phonetic Extensions"](t)||(!!r.Katakana(t)||(!!r["Vertical Forms"](t)||(!!r["Yi Radicals"](t)||!!r["Yi Syllables"](t))))))))))))))))))))},n.charHasUprightVerticalOrientation=function(t){return 746===t||747===t||!(t<4352)&&(!!r["Bopomofo Extended"](t)||(!!r.Bopomofo(t)||(!(!r["CJK Compatibility Forms"](t)||t>=65097&&t<=65103)||(!!r["CJK Compatibility Ideographs"](t)||(!!r["CJK Compatibility"](t)||(!!r["CJK Radicals Supplement"](t)||(!!r["CJK Strokes"](t)||(!(!r["CJK Symbols and Punctuation"](t)||t>=12296&&t<=12305||t>=12308&&t<=12319||12336===t)||(!!r["CJK Unified Ideographs Extension A"](t)||(!!r["CJK Unified Ideographs"](t)||(!!r["Enclosed CJK Letters and Months"](t)||(!!r["Hangul Compatibility Jamo"](t)||(!!r["Hangul Jamo Extended-A"](t)||(!!r["Hangul Jamo Extended-B"](t)||(!!r["Hangul Jamo"](t)||(!!r["Hangul Syllables"](t)||(!!r.Hiragana(t)||(!!r["Ideographic Description Characters"](t)||(!!r.Kanbun(t)||(!!r["Kangxi Radicals"](t)||(!!r["Katakana Phonetic Extensions"](t)||(!(!r.Katakana(t)||12540===t)||(!(!r["Halfwidth and Fullwidth Forms"](t)||65288===t||65289===t||65293===t||t>=65306&&t<=65310||65339===t||65341===t||65343===t||t>=65371&&t<=65503||65507===t||t>=65512&&t<=65519)||(!(!r["Small Form Variants"](t)||t>=65112&&t<=65118||t>=65123&&t<=65126)||(!!r["Unified Canadian Aboriginal Syllabics"](t)||(!!r["Unified Canadian Aboriginal Syllabics Extended"](t)||(!!r["Vertical Forms"](t)||(!!r["Yijing Hexagram Symbols"](t)||(!!r["Yi Syllables"](t)||!!r["Yi Radicals"](t))))))))))))))))))))))))))))))},n.charHasNeutralVerticalOrientation=function(t){return!(!r["Latin-1 Supplement"](t)||167!==t&&169!==t&&174!==t&&177!==t&&188!==t&&189!==t&&190!==t&&215!==t&&247!==t)||(!(!r["General Punctuation"](t)||8214!==t&&8224!==t&&8225!==t&&8240!==t&&8241!==t&&8251!==t&&8252!==t&&8258!==t&&8263!==t&&8264!==t&&8265!==t&&8273!==t)||(!!r["Letterlike Symbols"](t)||(!!r["Number Forms"](t)||(!(!r["Miscellaneous Technical"](t)||!(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||9003===t||t>=9085&&t<=9114||t>=9150&&t<=9165||9167===t||t>=9169&&t<=9179||t>=9186&&t<=9215))||(!(!r["Control Pictures"](t)||9251===t)||(!!r["Optical Character Recognition"](t)||(!!r["Enclosed Alphanumerics"](t)||(!!r["Geometric Shapes"](t)||(!(!r["Miscellaneous Symbols"](t)||t>=9754&&t<=9759)||(!(!r["Miscellaneous Symbols and Arrows"](t)||!(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243))||(!!r["CJK Symbols and Punctuation"](t)||(!!r.Katakana(t)||(!!r["Private Use Area"](t)||(!!r["CJK Compatibility Forms"](t)||(!!r["Small Form Variants"](t)||(!!r["Halfwidth and Fullwidth Forms"](t)||(8734===t||8756===t||8757===t||t>=9984&&t<=10087||t>=10102&&t<=10131||65532===t||65533===t)))))))))))))))))},n.charHasRotatedVerticalOrientation=function(t){return!(n.charHasUprightVerticalOrientation(t)||n.charHasNeutralVerticalOrientation(t))}},{"./is_char_in_unicode_block":714}],718:[function(t,e,n){"use strict";function r(t){var e=JSON.stringify(t);if(d[e])return d[e];var n=void 0===t.alignment?1:t.alignment,r=0,a=0,u=["Uint8"],f=t.members.map(function(t){u.indexOf(t.type)<0&&u.push(t.type);var e=o(t.type),s=r=i(r,Math.max(n,e)),c=t.components||1;return a=Math.max(a,e),r+=e*c,{name:t.name,type:t.type,components:c,offset:s}}),v=i(r,Math.max(a,n)),m=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(h);m.prototype.alignment=n,m.prototype.size=v;for(var y=0,g=f;y<g.length;y+=1)for(var _=g[y],b=0;b<_.components;b++){var w=_.name+(1===_.components?"":b);Object.defineProperty(m.prototype,w,{get:c(_,b),set:l(_,b)})}var x=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(p);return x.prototype.members=f,x.prototype.StructType=m,x.prototype.bytesPerElement=v,x.prototype.emplaceBack=s(f,v),x.prototype._usedTypes=u,d[e]=x,x}function i(t,e){return Math.ceil(t/e)*e}function o(t){return f[t].BYTES_PER_ELEMENT}function a(t){return t.toLowerCase()}function s(t,e){for(var n=[],r=[],i="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,u=t;s<u.length;s+=1){var c=u[s],l=o(c.type);n.indexOf(l)<0&&(n.push(l),i+="var o"+l.toFixed(0)+" = i * "+(e/l).toFixed(0)+";\n");for(var f=0;f<c.components;f++){var h="v"+r.length,p="o"+l.toFixed(0)+" + "+(c.offset/l+f).toFixed(0);i+="this."+a(c.type)+"["+p+"] = "+h+";\n",r.push(h)}}return i+="return i;",new Function(r.toString(),i)}function u(t,e){var n="this._pos"+o(t.type).toFixed(0),r=(t.offset/o(t.type)+e).toFixed(0),i=n+" + "+r;return"this._structArray."+a(t.type)+"["+i+"]"}function c(t,e){return new Function("return "+u(t,e)+";")}function l(t,e){return new Function("x",u(t,e)+" = x;")}e.exports=r;var f={Int8:Int8Array,Uint8:Uint8Array,Uint8Clamped:Uint8ClampedArray,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array,Float64:Float64Array},h=function(t,e){this._structArray=t,this._pos1=e*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},p=function(t){this.isTransferred=!1,void 0!==t?(this.arrayBuffer=t.arrayBuffer,this.length=t.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};p.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment,bytesPerElement:this.prototype.bytesPerElement}},p.prototype.serialize=function(t){return this._trim(),t&&(this.isTransferred=!0,t.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},p.prototype.get=function(t){return new this.StructType(this,t)},p.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},p.prototype.resize=function(t){if(this.length=t,t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var e=this.uint8;this._refreshViews(),e&&this.uint8.set(e)}},p.prototype._refreshViews=function(){for(var t=this,e=0,n=this._usedTypes;e<n.length;e+=1){var r=n[e];t[a(r)]=new f[r](t.arrayBuffer)}},p.prototype.toArray=function(t,e){for(var n=this,r=[],i=t;i<e;i++){var o=n.get(i);r.push(o)}return r};var d={}},{}],719:[function(t,e,n){"use strict";function r(t,e){return e.replace(/{([^{}]+)}/g,function(e,n){return n in t?t[n]:""})}e.exports=r},{}],720:[function(t,e,n){"use strict";var r=t("@mapbox/unitbezier"),i=t("../geo/coordinate");t("point-geometry");n.easeCubicInOut=function(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)},n.bezier=function(t,e,n,i){var o=new r(t,e,n,i);return function(t){return o.solve(t)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(t,e,n){return Math.min(n,Math.max(e,t))},n.wrap=function(t,e,n){var r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i},n.asyncAll=function(t,e,n){if(!t.length)return n(null,[]);var r=t.length,i=new Array(t.length),o=null;t.forEach(function(t,a){e(t,function(t,e){t&&(o=t),i[a]=e,0===--r&&n(o,i)})})},n.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},n.keysDifference=function(t,e){var n=[];for(var r in t)r in e||n.push(r);return n},n.extend=function(t,e,n,r){for(var i=arguments,o=1;o<arguments.length;o++){var a=i[o];for(var s in a)t[s]=a[s]}return t},n.pick=function(t,e){for(var n={},r=0;r<e.length;r++){var i=e[r];i in t&&(n[i]=t[i])}return n};var o=1;n.uniqueId=function(){return o++},n.bindAll=function(t,e){t.forEach(function(t){e[t]&&(e[t]=e[t].bind(e))})},n.getCoordinatesCenter=function(t){for(var e=1/0,n=1/0,r=-(1/0),o=-(1/0),a=0;a<t.length;a++)e=Math.min(e,t[a].column),n=Math.min(n,t[a].row),r=Math.max(r,t[a].column),o=Math.max(o,t[a].row);var s=r-e,u=o-n,c=Math.max(s,u);return new i((e+r)/2,(n+o)/2,0).zoomTo(Math.floor(-Math.log(c)/Math.LN2))},n.endsWith=function(t,e){return t.indexOf(e,t.length-e.length)!==-1},n.mapObject=function(t,e,n){var r=this,i={};for(var o in t)i[o]=e.call(n||r,t[o],o,t);return i},n.filterObject=function(t,e,n){var r=this,i={};for(var o in t)e.call(n||r,t[o],o,t)&&(i[o]=t[o]);return i},n.deepEqual=function(t,e){if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n.deepEqual(t[r],e[r]))return!1;return!0}if("object"==typeof t&&null!==t&&null!==e){if("object"!=typeof e)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var i in t)if(!n.deepEqual(t[i],e[i]))return!1;return!0}return t===e},n.clone=function(t){return Array.isArray(t)?t.map(n.clone):"object"==typeof t&&t?n.mapObject(t,n.clone):t},n.arraysIntersect=function(t,e){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>=0)return!0;return!1};var a={};n.warnOnce=function(t){a[t]||("undefined"!=typeof console&&console.warn(t),a[t]=!0)},n.isCounterClockwise=function(t,e,n){return(n.y-t.y)*(e.x-t.x)>(e.y-t.y)*(n.x-t.x)},n.calculateSignedArea=function(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r},n.isClosedPolygon=function(t){if(t.length<4)return!1;var e=t[0],r=t[t.length-1];return!(Math.abs(e.x-r.x)>0||Math.abs(e.y-r.y)>0)&&Math.abs(n.calculateSignedArea(t))>.01},n.sphericalToCartesian=function(t){var e=t[0],n=t[1],r=t[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,[e*Math.cos(n)*Math.sin(r),e*Math.sin(n)*Math.sin(r),e*Math.cos(r)]},n.parseCacheControl=function(t){var e={};if(t.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(t,n,r,i){var o=r||i;return e[n]=!o||o.toLowerCase(),""}),e["max-age"]){var n=parseInt(e["max-age"],10);isNaN(n)?delete e["max-age"]:e["max-age"]=n}return e}},{"../geo/coordinate":609,"@mapbox/unitbezier":48,"point-geometry":784}],721:[function(t,e,n){"use strict";var r=function(t,e,n,r){this.type="Feature",this._vectorTileFeature=t,t._z=e,t._x=n,t._y=r,this.properties=t.properties,null!=t.id&&(this.id=t.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(t){this._geometry=t},r.prototype.toJSON=function(){var t=this,e={geometry:this.geometry};for(var n in this)"_geometry"!==n&&"_vectorTileFeature"!==n&&(e[n]=t[n]);return e},Object.defineProperties(r.prototype,i),e.exports=r},{}],722:[function(t,e,n){"use strict";var r=t("./script_detection");e.exports=function(t){for(var n="",i=0;i<t.length;i++){var o=t.charCodeAt(i+1)||null,a=t.charCodeAt(i-1)||null;n+=(!o||!r.charHasRotatedVerticalOrientation(o)||e.exports.lookup[t[i+1]])&&(!a||!r.charHasRotatedVerticalOrientation(a)||e.exports.lookup[t[i-1]])&&e.exports.lookup[t[i]]?e.exports.lookup[t[i]]:t[i]}return n},e.exports.lookup={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""}},{"./script_detection":717}],723:[function(t,e,n){"use strict";var r=t("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(e){var n=this;if(!this.workers){var i=t("../mapbox-gl").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[e]=!0,this.workers.slice()},i.prototype.release=function(t){delete this.active[t],0===Object.keys(this.active).length&&(this.workers.forEach(function(t){t.terminate()}),this.workers=null)},e.exports=i},{"../mapbox-gl":615,"./web_worker":702}],724:[function(t,e,n){function r(t){return t>f*f*f?Math.pow(t,1/3):t/(3*f*f)+4/29}function i(t){return t>f?t*t*t:3*f*f*(t-4/29)}function o(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function a(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s(t){var e=a(t[0]),n=a(t[1]),i=a(t[2]),o=r((.4124564*e+.3575761*n+.1804375*i)/.95047),s=r((.2126729*e+.7151522*n+.072175*i)/1);return[116*s-16,500*(o-s),200*(s-r((.0193339*e+.119192*n+.9503041*i)/1.08883)),t[3]]}function u(t){var e=(t[0]+16)/116,n=isNaN(t[1])?e:e+t[1]/500,r=isNaN(t[2])?e:e-t[2]/200;return e=1*i(e),n=.95047*i(n),r=1.08883*i(r),[o(3.2404542*n-1.5371385*e-.4985314*r),o(-.969266*n+1.8760108*e+.041556*r),o(.0556434*n-.2040259*e+1.0572252*r),t[3]]}function c(t){var e=s(t),n=e[0],r=e[1],i=e[2],o=Math.atan2(i,r)*p;return[o<0?o+360:o,Math.sqrt(r*r+i*i),n,t[3]]}function l(t){var e=t[0]*h,n=t[1];return u([t[2],Math.cos(e)*n,Math.sin(e)*n,t[3]])}var f=6/29,h=Math.PI/180,p=180/Math.PI;e.exports={lab:{forward:s,reverse:u},hcl:{forward:c,reverse:l}}},{}],725:[function(t,e,n){"use strict";function r(t){return t}function i(t,e){var n;if(h(t)){var c,l=t.stops&&"object"==typeof t.stops[0][0],f=l||void 0!==t.property,d=l||!f,v=t.stops&&typeof(l?t.stops[0][0].property:t.stops[0][0]),m=t.type||e||("string"===v?"categorical":"exponential");if("exponential"===m)c=s;else if("interval"===m)c=a;else if("categorical"===m)c=o;else{if("identity"!==m)throw new Error('Unknown function type "'+m+'"');c=u}var y;if(t.colorSpace&&"rgb"!==t.colorSpace){if(!p[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);var g=p[t.colorSpace];t=JSON.parse(JSON.stringify(t));for(var _=0;_<t.stops.length;_++)t.stops[_]=[t.stops[_][0],g.forward(t.stops[_][1])];y=g.reverse}else y=r;if(l){var b={},w=[];for(_=0;_<t.stops.length;_++){var x=t.stops[_];void 0===b[x[0].zoom]&&(b[x[0].zoom]={zoom:x[0].zoom,type:t.type,property:t.property,stops:[]}),b[x[0].zoom].stops.push([x[0].value,x[1]])}for(var E in b)w.push([b[E].zoom,i(b[E])]);n=function(e,n){return y(s({stops:w,base:t.base},e)(e,n))},n.isFeatureConstant=!1,n.isZoomConstant=!1}else d?(n=function(e){return y(c(t,e))},n.isFeatureConstant=!0,n.isZoomConstant=!1):(n=function(e,n){return y(c(t,n[t.property]))},n.isFeatureConstant=!1,n.isZoomConstant=!0)}else n=function(){return t},n.isFeatureConstant=!0,n.isZoomConstant=!0;return n}function o(t,e){for(var n=0;n<t.stops.length;n++)if(e===t.stops[n][0])return t.stops[n][1];return t.stops[0][1]}function a(t,e){for(var n=0;n<t.stops.length&&!(e<t.stops[n][0]);n++);return t.stops[Math.max(n-1,0)][1]}function s(t,e){for(var n=void 0!==t.base?t.base:1,r=0;;){if(r>=t.stops.length)break;if(e<=t.stops[r][0])break;r++}return 0===r?t.stops[r][1]:r===t.stops.length?t.stops[r-1][1]:c(e,n,t.stops[r-1][0],t.stops[r][0],t.stops[r-1][1],t.stops[r][1])}function u(t,e){return e}function c(t,e,n,r,i,o){return"function"==typeof i?function(){return c(t,e,n,r,i.apply(void 0,arguments),o.apply(void 0,arguments))}:i.length?f(t,e,n,r,i,o):l(t,e,n,r,i,o)}function l(t,e,n,r,i,o){var a,s=r-n,u=t-n;return a=1===e?u/s:(Math.pow(e,u)-1)/(Math.pow(e,s)-1),i*(1-a)+o*a}function f(t,e,n,r,i,o){for(var a=[],s=0;s<i.length;s++)a[s]=l(t,e,n,r,i[s],o[s]);return a}function h(t){return"object"==typeof t&&(t.stops||"identity"===t.type)}var p=t("./color_spaces");e.exports.isFunctionDefinition=h,e.exports.interpolated=function(t){return i(t,"exponential")},e.exports["piecewise-constant"]=function(t){return i(t,"interval")}},{"./color_spaces":724}],726:[function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return o.forEach(function(t){t in e&&(n[t]=e[t])}),n}function i(t){t=t.slice();var e,n=Object.create(null);for(e=0;e<t.length;e++)n[t[e].id]=t[e];for(e=0;e<t.length;e++)"ref"in t[e]&&(t[e]=r(t[e],n[t[e].ref]));return t}var o=t("./util/ref_properties");e.exports=i},{"./util/ref_properties":732}],727:[function(t,e,n){"use strict";function r(t,e,n,r){t=t||{},e=e||{};var i;for(i in t)t.hasOwnProperty(i)&&(e.hasOwnProperty(i)||(n.push({command:l.removeSource,args:[i]}),r[i]=!0));for(i in e)e.hasOwnProperty(i)&&(t.hasOwnProperty(i)?c(t[i],e[i])||(n.push({command:l.removeSource,args:[i]}),n.push({command:l.addSource,args:[i,e[i]]}),r[i]=!0):n.push({command:l.addSource,args:[i,e[i]]}))}function i(t,e,n,r,i,o){t=t||{},e=e||{};var a;for(a in t)t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}));for(a in e)e.hasOwnProperty(a)&&!t.hasOwnProperty(a)&&(c(t[a],e[a])||n.push({command:o,args:[r,a,e[a],i]}))}function o(t){return t.id}function a(t,e){return t[e.id]=e,t}function s(t,e,n){t=t||[],e=e||[];var r,s,u,f,h,p,d,v=t.map(o),m=e.map(o),y=t.reduce(a,{}),g=e.reduce(a,{}),_=v.slice(),b=Object.create(null);for(r=0,s=0;r<v.length;r++)u=v[r],g.hasOwnProperty(u)?s++:(n.push({command:l.removeLayer,args:[u]}),_.splice(_.indexOf(u,s),1));for(r=0,s=0;r<m.length;r++)u=m[m.length-1-r],_[_.length-1-r]!==u&&(y.hasOwnProperty(u)?(n.push({command:l.removeLayer,args:[u]}),_.splice(_.lastIndexOf(u,_.length-s),1)):s++,p=_[_.length-r],n.push({command:l.addLayer,args:[g[u],p]}),_.splice(_.length-r,0,u),b[u]=!0);for(r=0;r<m.length;r++)if(u=m[r],f=y[u],h=g[u],!b[u]&&!c(f,h))if(c(f.source,h.source)&&c(f["source-layer"],h["source-layer"])&&c(f.type,h.type)){i(f.layout,h.layout,n,u,null,l.setLayoutProperty),i(f.paint,h.paint,n,u,null,l.setPaintProperty),c(f.filter,h.filter)||n.push({command:l.setFilter,args:[u,h.filter]}),c(f.minzoom,h.minzoom)&&c(f.maxzoom,h.maxzoom)||n.push({command:l.setLayerZoomRange,args:[u,h.minzoom,h.maxzoom]});for(d in f)f.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(f[d],h[d],n,u,d.slice(6),l.setPaintProperty):c(f[d],h[d])||n.push({command:l.setLayerProperty,args:[u,d,h[d]]}));for(d in h)h.hasOwnProperty(d)&&!f.hasOwnProperty(d)&&"layout"!==d&&"paint"!==d&&"filter"!==d&&"metadata"!==d&&"minzoom"!==d&&"maxzoom"!==d&&(0===d.indexOf("paint.")?i(f[d],h[d],n,u,d.slice(6),l.setPaintProperty):c(f[d],h[d])||n.push({command:l.setLayerProperty,args:[u,d,h[d]]}))}else n.push({command:l.removeLayer,args:[u]}),p=_[_.lastIndexOf(u)+1],n.push({command:l.addLayer,args:[h,p]})}function u(t,e){if(!t)return[{command:l.setStyle,args:[e]}];var n=[];try{if(!c(t.version,e.version))return[{command:l.setStyle,args:[e]}];c(t.center,e.center)||n.push({command:l.setCenter,args:[e.center]}),c(t.zoom,e.zoom)||n.push({command:l.setZoom,args:[e.zoom]}),c(t.bearing,e.bearing)||n.push({command:l.setBearing,args:[e.bearing]}),c(t.pitch,e.pitch)||n.push({command:l.setPitch,args:[e.pitch]}),c(t.sprite,e.sprite)||n.push({command:l.setSprite,args:[e.sprite]}),c(t.glyphs,e.glyphs)||n.push({command:l.setGlyphs,args:[e.glyphs]}),c(t.transition,e.transition)||n.push({command:l.setTransition,args:[e.transition]}),c(t.light,e.light)||n.push({command:l.setLight,args:[e.light]});var i={},o=[];r(t.sources,e.sources,o,i);var a=[];t.layers&&t.layers.forEach(function(t){i[t.source]?n.push({command:l.removeLayer,args:[t.id]}):a.push(t)}),n=n.concat(o),s(a,e.layers,n)}catch(t){console.warn("Unable to compute style diff:",t),n=[{command:l.setStyle,args:[e]}]}return n}var c=t("lodash.isequal"),l={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};e.exports=u,e.exports.operations=l},{"lodash.isequal":504}],728:[function(t,e,n){"use strict";function r(t,e){this.message=(t?t+": ":"")+i.apply(i,Array.prototype.slice.call(arguments,2)),null!==e&&void 0!==e&&e.__line__&&(this.line=e.__line__)}var i=t("util").format;e.exports=r},{util:45}],729:[function(t,e,n){"use strict";function r(t){return a(o.map(function(e){return t[e]}))}function i(t){var e,n,i={};for(e=0;e<t.length;e++){n=r(t[e]);var o=i[n];o||(o=i[n]=[]),o.push(t[e])}var a=[];for(n in i)a.push(i[n]);return a}var o=t("./util/ref_properties"),a=t("fast-stable-stringify");e.exports=i},{"./util/ref_properties":732,"fast-stable-stringify":423}],730:[function(t,e,n){"use strict";e.exports=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}},{}],731:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}},{}],732:[function(t,e,n){"use strict";e.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],733:[function(t,e,n){"use strict";e.exports=function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}},{}],734:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("../util/extend");e.exports=function(e){var n=t("./validate_function"),a=t("./validate_object"),s={"*":function(){return[]},array:t("./validate_array"),boolean:t("./validate_boolean"),number:t("./validate_number"),color:t("./validate_color"),constants:t("./validate_constants"),enum:t("./validate_enum"),filter:t("./validate_filter"),function:t("./validate_function"),layer:t("./validate_layer"),object:t("./validate_object"),source:t("./validate_source"),light:t("./validate_light"),string:t("./validate_string")},u=e.value,c=e.valueSpec,l=e.key,f=e.styleSpec,h=e.style;if("string"===i(u)&&"@"===u[0]){if(f.$version>7)return[new r(l,u,"constants have been deprecated as of v8")];if(!(u in h.constants))return[new r(l,u,'constant "%s" not found',u)];e=o({},e,{value:h.constants[u]})}return c.function&&"object"===i(u)?n(e):c.type&&s[c.type]?s[c.type](e):a(o({},e,{valueSpec:c.type?f[c.type]:c}))}},{"../error/validation_error":728,"../util/extend":730,"../util/get_type":731,"./validate_array":735,"./validate_boolean":736,"./validate_color":737,"./validate_constants":738,"./validate_enum":739,"./validate_filter":740,"./validate_function":741,"./validate_layer":743,"./validate_light":745,"./validate_number":746,"./validate_object":747,"./validate_source":749,"./validate_string":750}],735:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("./validate"),o=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.valueSpec,a=t.style,s=t.styleSpec,u=t.key,c=t.arrayElementValidator||i;if("array"!==r(e))return[new o(u,e,"array expected, %s found",r(e))];if(n.length&&e.length!==n.length)return[new o(u,e,"array length %d expected, length %d found",n.length,e.length)];if(n["min-length"]&&e.length<n["min-length"])return[new o(u,e,"array length at least %d expected, length %d found",n["min-length"],e.length)];var l={type:n.value};s.$version<7&&(l.function=n.function),"object"===r(n.value)&&(l=n.value);for(var f=[],h=0;h<e.length;h++)f=f.concat(c({array:e,arrayIndex:h,value:e[h],valueSpec:l,style:a,styleSpec:s,key:u+"["+h+"]"}));return f}},{"../error/validation_error":728,"../util/get_type":731,"./validate":734}],736:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"boolean"!==o?[new i(n,e,"boolean expected, %s found",o)]:[]}},{"../error/validation_error":728,"../util/get_type":731}],737:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("csscolorparser").parseCSSColor;e.exports=function(t){var e=t.key,n=t.value,a=i(n);return"string"!==a?[new r(e,n,"color expected, %s found",a)]:null===o(n)?[new r(e,n,'color expected, "%s" found',n)]:[]}},{"../error/validation_error":728,"../util/get_type":731,csscolorparser:350}],738:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type");e.exports=function(t){var e=t.key,n=t.value;if(t.styleSpec.$version>7)return n?[new r(e,n,"constants have been deprecated as of v8")]:[];var o=i(n);if("object"!==o)return[new r(e,n,"object expected, %s found",o)];var a=[];for(var s in n)"@"!==s[0]&&a.push(new r(e+"."+s,n[s],'constants must start with "@"'))
;return a}},{"../error/validation_error":728,"../util/get_type":731}],739:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=[];return Array.isArray(o.values)?o.values.indexOf(i(n))===-1&&a.push(new r(e,n,"expected one of [%s], %s found",o.values.join(", "),n)):Object.keys(o.values).indexOf(i(n))===-1&&a.push(new r(e,n,"expected one of [%s], %s found",Object.keys(o.values).join(", "),n)),a}},{"../error/validation_error":728,"../util/unbundle_jsonlint":733}],740:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_enum"),o=t("../util/get_type"),a=t("../util/unbundle_jsonlint");e.exports=function t(e){var n,s=e.value,u=e.key,c=e.styleSpec,l=[];if("array"!==o(s))return[new r(u,s,"array expected, %s found",o(s))];if(s.length<1)return[new r(u,s,"filter array must have at least 1 element")];switch(l=l.concat(i({key:u+"[0]",value:s[0],valueSpec:c.filter_operator,style:e.style,styleSpec:e.styleSpec})),a(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"==s[1]&&l.push(new r(u,s,'"$type" cannot be use with operator "%s"',s[0]));case"==":case"!=":3!=s.length&&l.push(new r(u,s,'filter array for operator "%s" must have 3 elements',s[0]));case"in":case"!in":s.length>=2&&(n=o(s[1]),"string"!==n?l.push(new r(u+"[1]",s[1],"string expected, %s found",n)):"@"===s[1][0]&&l.push(new r(u+"[1]",s[1],"filter key cannot be a constant")));for(var f=2;f<s.length;f++)n=o(s[f]),"$type"==s[1]?l=l.concat(i({key:u+"["+f+"]",value:s[f],valueSpec:c.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"===n&&"@"===s[f][0]?l.push(new r(u+"["+f+"]",s[f],"filter value cannot be a constant")):"string"!==n&&"number"!==n&&"boolean"!==n&&l.push(new r(u+"["+f+"]",s[f],"string, number, or boolean expected, %s found",n));break;case"any":case"all":case"none":for(f=1;f<s.length;f++)l=l.concat(t({key:u+"["+f+"]",value:s[f],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":n=o(s[1]),2!==s.length?l.push(new r(u,s,'filter array for "%s" operator must have 2 elements',s[0])):"string"!==n?l.push(new r(u+"[1]",s[1],"string expected, %s found",n)):"@"===s[1][0]&&l.push(new r(u+"[1]",s[1],"filter key cannot be a constant"))}return l}},{"../error/validation_error":728,"../util/get_type":731,"../util/unbundle_jsonlint":733,"./validate_enum":739}],741:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate"),a=t("./validate_object"),s=t("./validate_array"),u=t("./validate_number"),c=t("../util/unbundle_jsonlint");e.exports=function(t){function e(t){if("identity"===v)return[new r(t.key,t.value,'identity function may not have a "stops" property')];var e=[],o=t.value;return e=e.concat(s({key:t.key,value:o,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:n})),"array"===i(o)&&0===o.length&&e.push(new r(t.key,o,"array must have at least one stop")),e}function n(t){var e=[],n=t.value,s=t.key;if("array"!==i(n))return[new r(s,n,"array expected, %s found",i(n))];if(2!==n.length)return[new r(s,n,"array length %d expected, length %d found",2,n.length)];if(_){if("object"!==i(n[0]))return[new r(s,n,"object expected, %s found",i(n[0]))];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(p&&p>c(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];c(n[0].zoom)!==p&&(p=c(n[0].zoom),h=void 0),e=e.concat(a({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:u,value:l}}))}else e=e.concat(l({key:s+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec}));return e=e.concat(o({key:s+"[1]",value:n[1],valueSpec:d,style:t.style,styleSpec:t.styleSpec})),"number"===i(n[0])&&"piecewise-constant"===d.function&&n[0]%1!==0&&e.push(new r(s+"[0]",n[0],"zoom level for piecewise-constant functions must be an integer")),e}function l(t){var e=i(t.value),n=c(t.value);if(f){if(e!==f)return[new r(t.key,t.value,"%s stop domain type must match previous stop domain type %s",e,f)]}else f=e,v||"string"!==e||(v="categorical");return"number"!==e&&"string"!==e?[new r(t.key,t.value,"property value must be a number or string")]:"number"!==e&&"categorical"!==v?[new r(t.key,t.value,"number expected, %s found",e)]:"categorical"!==v||"number"!==e||isFinite(n)&&Math.floor(n)===n?"number"===e&&void 0!==h&&n<h?[new r(t.key,t.value,"stop domain values must appear in ascending order")]:(h=n,"categorical"===v&&n in m?[new r(t.key,t.value,"stop domain values must be unique")]:(m[n]=!0,[])):[new r(t.key,t.value,"integer expected, found %s",n)]}var f,h,p,d=t.valueSpec,v=c(t.value.type),m={},y="categorical"!==v&&void 0===t.value.property,g=!y,_="array"===i(t.value.stops)&&"array"===i(t.value.stops[0])&&"object"===i(t.value.stops[0][0]),b=a({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:e}});return"identity"===v||t.value.stops||b.push(new r(t.key,t.value,'missing required property "stops"')),"exponential"===v&&"piecewise-constant"===t.valueSpec.function&&b.push(new r(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(g&&!t.valueSpec["property-function"]?b.push(new r(t.key,t.value,"property functions not supported")):y&&!t.valueSpec["zoom-function"]&&b.push(new r(t.key,t.value,"zoom functions not supported"))),"categorical"!==v&&!_||void 0!==t.value.property||b.push(new r(t.key,t.value,'"property" property is required')),b}},{"../error/validation_error":728,"../util/get_type":731,"../util/unbundle_jsonlint":733,"./validate":734,"./validate_array":735,"./validate_number":746,"./validate_object":747}],742:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("./validate_string");e.exports=function(t){var e=t.value,n=t.key,o=i(t);return o.length?o:(e.indexOf("{fontstack}")===-1&&o.push(new r(n,e,'"glyphs" url must include a "{fontstack}" token')),e.indexOf("{range}")===-1&&o.push(new r(n,e,'"glyphs" url must include a "{range}" token')),o)}},{"../error/validation_error":728,"./validate_string":750}],743:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_filter"),s=t("./validate_paint_property"),u=t("./validate_layout_property"),c=t("../util/extend");e.exports=function(t){var e=[],n=t.value,l=t.key,f=t.style,h=t.styleSpec;n.type||n.ref||e.push(new r(l,n,'either "type" or "ref" is required'));var p=i(n.type),d=i(n.ref);if(n.id)for(var v=0;v<t.arrayIndex;v++){var m=f.layers[v];i(m.id)===i(n.id)&&e.push(new r(l,n.id,'duplicate layer id "%s", previously used at line %d',n.id,m.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new r(l,n[t],'"%s" is prohibited for ref layers',t))});var y;f.layers.forEach(function(t){t.id==d&&(y=t)}),y?y.ref?e.push(new r(l,n.ref,"ref cannot reference another ref layer")):p=i(y.type):e.push(new r(l,n.ref,'ref layer "%s" not found',d))}else if("background"!==p)if(n.source){var g=f.sources&&f.sources[n.source];g?"vector"==g.type&&"raster"==p?e.push(new r(l,n.source,'layer "%s" requires a raster source',n.id)):"raster"==g.type&&"raster"!=p?e.push(new r(l,n.source,'layer "%s" requires a vector source',n.id)):"vector"!=g.type||n["source-layer"]||e.push(new r(l,n,'layer "%s" must specify a "source-layer"',n.id)):e.push(new r(l,n.source,'source "%s" not found',n.source))}else e.push(new r(l,n,'missing required property "source"'));return e=e.concat(o({key:l,value:n,valueSpec:h.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return u(c({layerType:p},t))}}})},paint:function(t){return o({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return s(c({layerType:p},t))}}})}}}))}},{"../error/validation_error":728,"../util/extend":730,"../util/unbundle_jsonlint":733,"./validate_filter":740,"./validate_layout_property":744,"./validate_object":747,"./validate_paint_property":748}],744:[function(t,e,n){"use strict";var r=t("./validate"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,u=o["layout_"+t.layerType];if(!u)return[];if(t.valueSpec||u[s]){var c=[];return"symbol"===t.layerType&&("icon-image"===s&&n&&!n.sprite?c.push(new i(e,a,'use of "icon-image" requires a style "sprite" property')):"text-field"===s&&n&&!n.glyphs&&c.push(new i(e,a,'use of "text-field" requires a style "glyphs" property'))),c.concat(r({key:t.key,value:a,valueSpec:t.valueSpec||u[s],style:n,styleSpec:o}))}return[new i(e,a,'unknown property "%s"',s)]}},{"../error/validation_error":728,"./validate":734}],745:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.value,n=t.styleSpec,a=n.light,s=t.style,u=[],c=i(e);if(void 0===e)return u;if("object"!==c)return u=u.concat([new r("light",e,"object expected, %s found",c)]);for(var l in e){var f=l.match(/^(.*)-transition$/);u=f&&a[f[1]]&&a[f[1]].transition?u.concat(o({key:l,value:e[l],valueSpec:n.transition,style:s,styleSpec:n})):a[l]?u.concat(o({key:l,value:e[l],valueSpec:a[l],style:s,styleSpec:n})):u.concat([new r(l,e[l],'unknown property "%s"',l)])}return u}},{"../error/validation_error":728,"../util/get_type":731,"./validate":734}],746:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.value,o=t.valueSpec,a=r(n);return"number"!==a?[new i(e,n,"number expected, %s found",a)]:"minimum"in o&&n<o.minimum?[new i(e,n,"%s is less than the minimum value %s",n,o.minimum)]:"maximum"in o&&n>o.maximum?[new i(e,n,"%s is greater than the maximum value %s",n,o.maximum)]:[]}},{"../error/validation_error":728,"../util/get_type":731}],747:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/get_type"),o=t("./validate");e.exports=function(t){var e=t.key,n=t.value,a=t.valueSpec||{},s=t.objectElementValidators||{},u=t.style,c=t.styleSpec,l=[],f=i(n);if("object"!==f)return[new r(e,n,"object expected, %s found",f)];for(var h in n){var p,d=h.split(".")[0],v=a[d]||a["*"];if(s[d])p=s[d];else if(a[d])p=o;else if(s["*"])p=s["*"];else{if(!a["*"]){l.push(new r(e,n[h],'unknown property "%s"',h));continue}p=o}l=l.concat(p({key:(e?e+".":e)+h,value:n[h],valueSpec:v,style:u,styleSpec:c,object:n,objectKey:h}))}for(d in a)a[d].required&&void 0===a[d].default&&void 0===n[d]&&l.push(new r(e,n,'missing required property "%s"',d));return l}},{"../error/validation_error":728,"../util/get_type":731,"./validate":734}],748:[function(t,e,n){"use strict";var r=t("./validate"),i=t("../error/validation_error");e.exports=function(t){var e=t.key,n=t.style,o=t.styleSpec,a=t.value,s=t.objectKey,u=o["paint_"+t.layerType];if(!u)return[];var c=s.match(/^(.*)-transition$/);return c&&u[c[1]]&&u[c[1]].transition?r({key:e,value:a,valueSpec:o.transition,style:n,styleSpec:o}):t.valueSpec||u[s]?r({key:t.key,value:a,valueSpec:t.valueSpec||u[s],style:n,styleSpec:o}):[new i(e,a,'unknown property "%s"',s)]}},{"../error/validation_error":728,"./validate":734}],749:[function(t,e,n){"use strict";var r=t("../error/validation_error"),i=t("../util/unbundle_jsonlint"),o=t("./validate_object"),a=t("./validate_enum");e.exports=function(t){var e=t.value,n=t.key,s=t.styleSpec,u=t.style;if(!e.type)return[new r(n,e,'"type" is required')];switch(i(e.type)){case"vector":case"raster":var c=[];if(c=c.concat(o({key:n,value:e,valueSpec:s.source_tile,style:t.style,styleSpec:s})),"url"in e)for(var l in e)["type","url","tileSize"].indexOf(l)<0&&c.push(new r(n+"."+l,e[l],'a source with a "url" property may not include a "%s" property',l));return c;case"geojson":return o({key:n,value:e,valueSpec:s.source_geojson,style:u,styleSpec:s});case"video":return o({key:n,value:e,valueSpec:s.source_video,style:u,styleSpec:s});case"image":return o({key:n,value:e,valueSpec:s.source_image,style:u,styleSpec:s});case"canvas":return o({key:n,value:e,valueSpec:s.source_canvas,style:u,styleSpec:s});default:return a({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:u,styleSpec:s})}}},{"../error/validation_error":728,"../util/unbundle_jsonlint":733,"./validate_enum":739,"./validate_object":747}],750:[function(t,e,n){"use strict";var r=t("../util/get_type"),i=t("../error/validation_error");e.exports=function(t){var e=t.value,n=t.key,o=r(e);return"string"!==o?[new i(n,e,"string expected, %s found",o)]:[]}},{"../error/validation_error":728,"../util/get_type":731}],751:[function(t,e,n){"use strict";function r(t,e){e=e||u;var n=[];return n=n.concat(s({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:c,"*":function(){return[]}}})),e.$version>7&&t.constants&&(n=n.concat(a({key:"constants",value:t.constants,style:t,styleSpec:e}))),i(n)}function i(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function o(t){return function(){return i(t.apply(this,arguments))}}var a=t("./validate/validate_constants"),s=t("./validate/validate"),u=t("../reference/latest.min"),c=t("./validate/validate_glyphs_url");r.source=o(t("./validate/validate_source")),r.light=o(t("./validate/validate_light")),r.layer=o(t("./validate/validate_layer")),r.filter=o(t("./validate/validate_filter")),r.paintProperty=o(t("./validate/validate_paint_property")),r.layoutProperty=o(t("./validate/validate_layout_property")),e.exports=r},{"../reference/latest.min":752,"./validate/validate":734,"./validate/validate_constants":738,"./validate/validate_filter":740,"./validate/validate_glyphs_url":742,"./validate/validate_layer":743,"./validate/validate_layout_property":744,"./validate/validate_light":745,"./validate/validate_paint_property":748,"./validate/validate_source":749}],752:[function(t,e,n){e.exports=t("./v8.min.json")},{"./v8.min.json":753}],753:[function(t,e,n){e.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_tile","source_geojson","source_video","source_image","source_canvas"],source_tile:{type:{required:!0,type:"enum",values:{vector:{},raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},ref:{type:"string"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"},"paint.*":{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",
function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],754:[function(t,e,n){e.exports={version:"0.32.1"}},{}],755:[function(t,e,n){"use strict";function r(t){if(!t)return s;for(var e=0;e<t.args.length;++e){var n=t.args[e];0===e?t.args[e]={name:n,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:t.args[e]={name:n,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function i(t){return a({args:t.args,pre:r(t.pre),body:r(t.body),post:r(t.proc),funcName:t.funcName})}function o(t){for(var e=[],n=0;n<t.args.length;++n)e.push("a"+n);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(i(t))}var a=t("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in u){var e=u[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in c){var e=c[t];n[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),n[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var e=l[t];n[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),n[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),n[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<f.length;++t){var e=f[t];n[e]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),n[e+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var t=0;t<h.length;++t){var e=h[t];n[e]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),n[e+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),n[e+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var p=["atan2","pow"];!function(){for(var t=0;t<p.length;++t){var e=p[t];n[e+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),n[e+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),n[e+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),n[e+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),n.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),n.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":351}],756:[function(t,e,n){"use strict";var r=t("ndarray"),i=t("./doConvert.js");e.exports=function(t,e){for(var n=[],o=t,a=1;Array.isArray(o);)n.push(o.length),a*=o.length,o=o[0];return 0===n.length?r():(e||(e=r(new Float64Array(a),n)),i(e,t),e)}},{"./doConvert.js":757,ndarray:758}],757:[function(t,e,n){e.exports=t("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":351}],758:[function(t,e,n){function r(t,e){return t[0]-e[0]}function i(){var t,e=this.stride,n=new Array(e.length);for(t=0;t<n.length;++t)n[t]=[Math.abs(e[t]),t];n.sort(r);var i=new Array(n.length);for(t=0;t<i.length;++t)i[t]=n[t][1];return i}function o(t,e){var n=["View",e,"d",t].join("");e<0&&(n="View_Nil"+t);var r="generic"===t;if(e===-1){var o="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(o);return a()}if(0===e){var o="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",o);return a(f[t][0])}var o=["'use strict'"],s=u(e),c=s.map(function(t){return"i"+t}),l="this.offset+"+s.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=s.map(function(t){return"b"+t}).join(","),p=s.map(function(t){return"c"+t}).join(",");o.push("function "+n+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),e<4?(o.push("function "+n+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),r?o.push("return this.data.set("+l+",v)}"):o.push("return this.data["+l+"]=v}"),o.push("proto.get=function "+n+"_get("+c.join(",")+"){"),r?o.push("return this.data.get("+l+")}"):o.push("return this.data["+l+"]}"),o.push("proto.index=function "+n+"_index(",c.join(),"){return "+l+"}"),o.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+s.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+s.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=s.map(function(t){return"a"+t+"=this.shape["+t+"]"}),v=s.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+v.join(","));for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");o.push("return new "+n+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+s.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+s.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");o.push("return new "+n+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"b"+t}).join(",")+",c)}");for(var y=new Array(e),g=new Array(e),m=0;m<e;++m)y[m]="a[i"+m+"]",g[m]="b[i"+m+"]";o.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+y.join(",")+","+g.join(",")+",this.offset)}"),o.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var m=0;m<e;++m)o.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(t){return"shape["+t+"]"}).join(",")+","+s.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[t],i)}function a(t){if(c(t))return"buffer";if(l)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function s(t,e,n,r){if(void 0===t){var i=f.array[0];return i([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===n){n=new Array(s);for(var u=s-1,c=1;u>=0;--u)n[u]=c,c*=e[u]}if(void 0===r){r=0;for(var u=0;u<s;++u)n[u]<0&&(r-=(e[u]-1)*n[u])}for(var l=a(t),h=f[l];h.length<=s+1;)h.push(o(l,h.length-1));var i=h[s+1];return i(t,e,n,r)}var u=t("iota-array"),c=t("is-buffer"),l="undefined"!=typeof Float64Array,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s},{"iota-array":487,"is-buffer":488}],759:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function i(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}var o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=i()?Object.assign:function(t,e){for(var n,i,u=r(t),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)a.call(n,l)&&(u[l]=n[l]);if(o){i=o(n);for(var f=0;f<i.length;f++)s.call(n,i[f])&&(u[i[f]]=n[i[f]])}}return u}},{}],760:[function(t,e,n){function r(t,e,n,r){function o(t){var e=t.length;if(e<2||e>256||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}var a=0,r=void 0===r?{}:r,s=void 0===r.loop?null:r.loop,u=void 0===r.palette?null:r.palette;if(e<=0||n<=0||e>65535||n>65535)throw"Width/Height invalid.";t[a++]=71,t[a++]=73,t[a++]=70,t[a++]=56,t[a++]=57,t[a++]=97;var c=0,l=0;if(null!==u){for(var f=o(u);f>>=1;)++c;if(f=1<<c,--c,void 0!==r.background){if(l=r.background,l>=f)throw"Background index out of range.";if(0===l)throw"Background index explicitly passed as 0."}}if(t[a++]=255&e,t[a++]=e>>8&255,t[a++]=255&n,t[a++]=n>>8&255,t[a++]=(null!==u?128:0)|c,t[a++]=l,t[a++]=0,null!==u)for(var h=0,p=u.length;h<p;++h){var d=u[h];t[a++]=d>>16&255,t[a++]=d>>8&255,t[a++]=255&d}if(null!==s){if(s<0||s>65535)throw"Loop count invalid.";t[a++]=33,t[a++]=255,t[a++]=11,t[a++]=78,t[a++]=69,t[a++]=84,t[a++]=83,t[a++]=67,t[a++]=65,t[a++]=80,t[a++]=69,t[a++]=50,t[a++]=46,t[a++]=48,t[a++]=3,t[a++]=1,t[a++]=255&s,t[a++]=s>>8&255,t[a++]=0}var v=!1;this.addFrame=function(e,n,r,s,c,l){if(v===!0&&(--a,v=!1),l=void 0===l?{}:l,e<0||n<0||e>65535||n>65535)throw"x/y invalid.";if(r<=0||s<=0||r>65535||s>65535)throw"Width/Height invalid.";if(c.length<r*s)throw"Not enough pixels for the frame size.";var f=!0,h=l.palette;if(void 0!==h&&null!==h||(f=!1,h=u),void 0===h||null===h)throw"Must supply either a local or global palette.";for(var p=o(h),d=0;p>>=1;)++d;p=1<<d;var m=void 0===l.delay?0:l.delay,y=void 0===l.disposal?0:l.disposal;if(y<0||y>3)throw"Disposal out of range.";var g=!1,_=0;if(void 0!==l.transparent&&null!==l.transparent&&(g=!0,_=l.transparent,_<0||_>=p))throw"Transparent color index.";if((0!==y||g||0!==m)&&(t[a++]=33,t[a++]=249,t[a++]=4,t[a++]=y<<2|(g===!0?1:0),t[a++]=255&m,t[a++]=m>>8&255,t[a++]=_,t[a++]=0),t[a++]=44,t[a++]=255&e,t[a++]=e>>8&255,t[a++]=255&n,t[a++]=n>>8&255,t[a++]=255&r,t[a++]=r>>8&255,t[a++]=255&s,t[a++]=s>>8&255,t[a++]=f===!0?128|d-1:0,f===!0)for(var b=0,w=h.length;b<w;++b){var x=h[b];t[a++]=x>>16&255,t[a++]=x>>8&255,t[a++]=255&x}a=i(t,a,d<2?2:d,c)},this.end=function(){return v===!1&&(t[a++]=59,v=!0),a}}function i(t,e,n,r){function i(n){for(;h>=n;)t[e++]=255&p,p>>=8,h-=8,e===a+256&&(t[a]=255,a=e++)}function o(t){p|=t<<h,h+=f,i(8)}t[e++]=n;var a=e++,s=1<<n,u=s-1,c=s+1,l=c+1,f=n+1,h=0,p=0,d=r[0]&u,v={};o(s);for(var m=1,y=r.length;m<y;++m){var g=r[m]&u,_=d<<8|g,b=v[_];if(void 0===b){for(p|=d<<h,h+=f;h>=8;)t[e++]=255&p,p>>=8,h-=8,e===a+256&&(t[a]=255,a=e++);4096===l?(o(s),l=c+1,f=n+1,v={}):(l>=1<<f&&++f,v[_]=l++),d=g}else d=b}return o(d),o(c),i(1),a+1===e?t[a]=0:(t[a]=e-a-1,t[e++]=0),e}function o(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!==(t[e++]+1&253)||97!==t[e++])throw"Invalid GIF 87a/89a header.";var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],o=i>>7,s=7&i,u=1<<s+1;t[e++];t[e++];var c=null;o&&(c=e,e+=3*u);var l=!0,f=[],h=0,p=null,d=0,v=null;for(this.width=n,this.height=r;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){var m=t[e++];if(0===m)break;e+=m}break;case 249:if(4!==t[e++]||0!==t[e+4])throw"Invalid graphics extension block.";var y=t[e++];h=t[e++]|t[e++]<<8,p=t[e++],0===(1&y)&&(p=null),d=y>>2&7,e++;break;case 254:for(;;){var m=t[e++];if(0===m)break;e+=m}break;default:throw"Unknown graphic control label: 0x"+t[e-1].toString(16)}break;case 44:var g=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,x=t[e++],E=x>>7,T=x>>6&1,S=7&x,M=1<<S+1,O=c,A=!1;if(E){var A=!0;O=e,e+=3*M}var R=e;for(e++;;){var m=t[e++];if(0===m)break;e+=m}f.push({x:g,y:_,width:b,height:w,has_local_palette:A,palette_offset:O,data_offset:R,data_length:e-R,transparent_index:p,interlaced:!!T,delay:h,disposal:d});break;case 59:l=!1;break;default:throw"Unknown gif block: 0x"+t[e-1].toString(16)}this.numFrames=function(){return f.length},this.loopCount=function(){return v},this.frameInfo=function(t){if(t<0||t>=f.length)throw"Frame index out of range.";return f[t]},this.decodeAndBlitFrameBGRA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,s=new Uint8Array(o);a(t,i.data_offset,s,o);var u=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=n-l,h=l,p=4*(i.y*n+i.x),d=4*((i.y+i.height)*n+i.x),v=p,m=4*f;i.interlaced===!0&&(m+=4*n*7);for(var y=8,g=0,_=s.length;g<_;++g){var b=s[g];if(0===h&&(v+=m,h=l,v>=d&&(m=4*f+4*n*(y-1),v=p+(l+f)*(y<<1),y>>=1)),b===c)v+=4;else{var w=t[u+3*b],x=t[u+3*b+1],E=t[u+3*b+2];r[v++]=E,r[v++]=x,r[v++]=w,r[v++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,r){var i=this.frameInfo(e),o=i.width*i.height,s=new Uint8Array(o);a(t,i.data_offset,s,o);var u=i.palette_offset,c=i.transparent_index;null===c&&(c=256);var l=i.width,f=n-l,h=l,p=4*(i.y*n+i.x),d=4*((i.y+i.height)*n+i.x),v=p,m=4*f;i.interlaced===!0&&(m+=4*n*7);for(var y=8,g=0,_=s.length;g<_;++g){var b=s[g];if(0===h&&(v+=m,h=l,v>=d&&(m=4*f+4*n*(y-1),v=p+(l+f)*(y<<1),y>>=1)),b===c)v+=4;else{var w=t[u+3*b],x=t[u+3*b+1],E=t[u+3*b+2];r[v++]=w,r[v++]=x,r[v++]=E,r[v++]=255}--h}}}function a(t,e,n,r){for(var i=t[e++],o=1<<i,a=o+1,s=a+1,u=i+1,c=(1<<u)-1,l=0,f=0,h=0,p=t[e++],d=new Int32Array(4096),v=null;;){for(;l<16&&0!==p;)f|=t[e++]<<l,l+=8,1===p?p=t[e++]:--p;if(l<u)break;var m=f&c;if(f>>=u,l-=u,m!==o){if(m===a)break;for(var y=m<s?m:v,g=0,_=y;_>o;)_=d[_]>>8,++g;var b=_;if(h+g+(y!==m?1:0)>r)return void console.log("Warning, gif stream longer than expected.");n[h++]=b,h+=g;var w=h;for(y!==m&&(n[h++]=b),_=y;g--;)_=d[_],n[--w]=255&_,_>>=8;null!==v&&s<4096&&(d[s++]=v<<8|b,s>=c+1&&u<12&&(++u,c=c<<1|1)),v=m}else s=a+1,u=i+1,c=(1<<u)-1,v=null}return h!==r&&console.log("Warning, gif stream shorter than expected."),n}try{n.GifWriter=r,n.GifReader=o}catch(t){}},{}],761:[function(t,e,n){"use strict";function r(t){var e;t&&t.length&&(e=t,t=e.length);var n=new Uint8Array(t||0);return e&&n.set(e),n.readUInt32LE=o.readUInt32LE,n.writeUInt32LE=o.writeUInt32LE,n.readInt32LE=o.readInt32LE,n.writeInt32LE=o.writeInt32LE,n.readFloatLE=o.readFloatLE,n.writeFloatLE=o.writeFloatLE,n.readDoubleLE=o.readDoubleLE,n.writeDoubleLE=o.writeDoubleLE,n.toString=o.toString,n.write=o.write,n.slice=o.slice,n.copy=o.copy,n._isBuffer=!0,n}function i(t){for(var e,n,r=t.length,i=[],o=0;o<r;o++){if(e=t.charCodeAt(o),e>55295&&e<57344){if(!n){e>56319||o+1===r?i.push(239,191,189):n=e;continue}if(e<56320){i.push(239,191,189),n=e;continue}e=n-55296<<10|e-56320|65536,n=null}else n&&(i.push(239,191,189),n=null);e<128?i.push(e):e<2048?i.push(e>>6|192,63&e|128):e<65536?i.push(e>>12|224,e>>6&63|128,63&e|128):i.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}return i}e.exports=r;var o,a,s,u=t("ieee754");o={readUInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},writeUInt32LE:function(t,e){this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24},readInt32LE:function(t){return(this[t]|this[t+1]<<8|this[t+2]<<16)+(this[t+3]<<24)},readFloatLE:function(t){return u.read(this,t,!0,23,4)},readDoubleLE:function(t){return u.read(this,t,!0,52,8)},writeFloatLE:function(t,e){return u.write(this,t,e,!0,23,4)},writeDoubleLE:function(t,e){return u.write(this,t,e,!0,52,8)},toString:function(t,e,n){var r="",i="";e=e||0,n=Math.min(this.length,n||this.length);for(var o=e;o<n;o++){var a=this[o];a<=127?(r+=decodeURIComponent(i)+String.fromCharCode(a),i=""):i+="%"+a.toString(16)}return r+=decodeURIComponent(i)},write:function(t,e){for(var n=t===a?s:i(t),r=0;r<n.length;r++)this[e+r]=n[r]},slice:function(t,e){return this.subarray(t,e)},copy:function(t,e){e=e||0;for(var n=0;n<this.length;n++)t[e+n]=this[n]}},o.writeInt32LE=o.writeUInt32LE,r.byteLength=function(t){return a=t,s=i(t),s.length},r.isBuffer=function(t){return!(!t||!t._isBuffer)}},{ieee754:484}],762:[function(t,e,n){(function(n){"use strict";function r(t){this.buf=m.isBuffer(t)?t:new m(t||0),this.pos=0,this.length=this.buf.length}function i(t,e){var n,r=e.buf;if(n=r[e.pos++],t+=268435456*(127&n),n<128)return t;if(n=r[e.pos++],t+=34359738368*(127&n),n<128)return t;if(n=r[e.pos++],t+=4398046511104*(127&n),n<128)return t;if(n=r[e.pos++],t+=562949953421312*(127&n),n<128)return t;if(n=r[e.pos++],t+=72057594037927940*(127&n),n<128)return t;if(n=r[e.pos++],t+=0x8000000000000000*(127&n),n<128)return t;throw new Error("Expected varint not more than 10 bytes")}function o(t,e){e.realloc(10);for(var n=e.pos+10;t>=1;){if(e.pos>=n)throw new Error("Given varint doesn't fit into 10 bytes");var r=255&t;e.buf[e.pos++]=r|(t>=128?128:0),t/=128}}function a(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=t;i--)n.buf[i+r]=n.buf[i]}function s(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function c(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function l(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}e.exports=r;var m=n.Buffer||t("./buffer");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var y=Math.pow(2,63);r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=this.buf.readUInt32LE(this.pos);return this.pos+=4,t},readSFixed32:function(){var t=this.buf.readInt32LE(this.pos);return this.pos+=4,t},readFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readUInt32LE(this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=this.buf.readUInt32LE(this.pos)+4294967296*this.buf.readInt32LE(this.pos+4);return this.pos+=8,t},readFloat:function(){var t=this.buf.readFloatLE(this.pos);return this.pos+=4,t},readDouble:function(){var t=this.buf.readDoubleLE(this.pos);return this.pos+=8,t},readVarint:function(){var t,e,n=this.buf;return e=n[this.pos++],t=127&e,e<128?t:(e=n[this.pos++],t|=(127&e)<<7,e<128?t:(e=n[this.pos++],t|=(127&e)<<14,e<128?t:(e=n[this.pos++],t|=(127&e)<<21,e<128?t:i(t,this))))},readVarint64:function(){var t=this.pos,e=this.readVarint();if(e<y)return e;for(var n=this.pos-2;255===this.buf[n];)n--;n<t&&(n=t),e=0;for(var r=0;r<n-t+1;r++){var i=127&~this.buf[t+r];e+=r<4?i<<7*r:i*Math.pow(2,7*r)}return-e-1},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.buf.toString("utf8",this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.slice(this.pos,t);return this.pos=t,e},readPackedVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readVarint());return e},readPackedSVarint:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(){for(var t=this.readVarint()+this.pos,e=[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var n=new m(e);this.buf.copy(n),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.slice(0,this.length)},writeFixed32:function(t){this.realloc(4),this.buf.writeUInt32LE(t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),this.buf.writeInt32LE(t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeUInt32LE(Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),this.buf.writeInt32LE(t&-1,this.pos),this.buf.writeInt32LE(Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){if(t=+t,t>268435455)return void o(t,this);this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t);var e=m.byteLength(t);this.writeVarint(e),this.realloc(e),this.buf.write(t,this.pos),this.pos+=e},writeFloat:function(t){this.realloc(4),this.buf.writeFloatLE(t,this.pos),this.pos+=4},writeDouble:function(t){this.realloc(8),this.buf.writeDoubleLE(t,this.pos),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos
;t(e,this);var r=this.pos-n;r>=128&&a(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,s,e)},writePackedSVarint:function(t,e){this.writeMessage(t,u,e)},writePackedBoolean:function(t,e){this.writeMessage(t,f,e)},writePackedFloat:function(t,e){this.writeMessage(t,c,e)},writePackedDouble:function(t,e){this.writeMessage(t,l,e)},writePackedFixed32:function(t,e){this.writeMessage(t,h,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){this.writeMessage(t,d,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./buffer":761}],763:[function(t,e,n){(function(e){"use strict";function r(t,e){function n(){if(i===t.length)throw new Error("Ran out of data");var n=t[i];i++;var o,a,s,u,c,l,f,h;switch(e){default:throw new Error("unrecognised depth");case 16:f=t[i],i++,r.push((n<<8)+f);break;case 4:f=15&n,h=n>>4,r.push(h,f);break;case 2:c=3&n,l=n>>2&3,f=n>>4&3,h=n>>6&3,r.push(h,f,l,c);break;case 1:o=1&n,a=n>>1&1,s=n>>2&1,u=n>>3&1,c=n>>4&1,l=n>>5&1,f=n>>6&1,h=n>>7&1,r.push(h,f,l,c,u,s,a,o)}}var r=[],i=0;return{get:function(t){for(;r.length<t;)n();var e=r.slice(0,t);return r=r.slice(t),e},resetAfterLine:function(){r.length=0},end:function(){if(i!==t.length)throw new Error("extra data found")}}}function i(t,e,n,r,i,o){for(var a=t.width,u=t.height,c=t.index,l=0;l<u;l++)for(var f=0;f<a;f++){for(var h=n(f,l,c),p=0;p<4;p++){var d=s[r][p];if(p===i.length)throw new Error("Ran out of data");e[h+p]=255!==d?i[d+o]:255}o+=r}return o}function o(t,e,n,r,i,o){for(var a=t.width,u=t.height,c=t.index,l=0;l<u;l++){for(var f=0;f<a;f++)for(var h=i.get(r),p=n(f,l,c),d=0;d<4;d++){var v=s[r][d];e[p+d]=255!==v?h[v]:o}i.resetAfterLine()}}var a=t("./interlace"),s={1:{0:0,1:0,2:0,3:255},2:{0:0,1:0,2:0,3:1},3:{0:0,1:1,2:2,3:255},4:{0:0,1:1,2:2,3:3}};n.dataToBitMap=function(t,n){var s=n.width,u=n.height,c=n.depth,l=n.bpp,f=n.interlace;if(8!==c)var h=r(t,c);var p;p=c<=8?new e(s*u*4):new Uint16Array(s*u*4);var d,v,m=Math.pow(2,c)-1,y=0;if(f)d=a.getImagePasses(s,u),v=a.getInterlaceIterator(s,u);else{var g=0;v=function(){var t=g;return g+=4,t},d=[{width:s,height:u}]}for(var _=0;_<d.length;_++)8===c?y=i(d[_],p,v,l,t,y):o(d[_],p,v,l,h,m);if(8===c){if(y!==t.length)throw new Error("extra data found")}else h.end();return p}}).call(this,t("buffer").Buffer)},{"./interlace":773,buffer:8}],764:[function(t,e,n){(function(n){"use strict";var r=t("./constants");e.exports=function(t,e,i,o){var a=o.colorType===r.COLORTYPE_COLOR_ALPHA;if(o.inputHasAlpha&&a)return t;if(!o.inputHasAlpha&&!a)return t;var s=a?4:3,u=new n(e*i*s),c=o.inputHasAlpha?4:3,l=0,f=0,h=o.bgColor||{};void 0===h.red&&(h.red=255),void 0===h.green&&(h.green=255),void 0===h.blue&&(h.blue=255);for(var p=0;p<i;p++)for(var d=0;d<e;d++){var v,m=t[l],y=t[l+1],g=t[l+2];o.inputHasAlpha?(v=t[l+3],a||(v/=255,m=Math.min(Math.max(Math.round((1-v)*h.red+v*m),0),255),y=Math.min(Math.max(Math.round((1-v)*h.green+v*y),0),255),g=Math.min(Math.max(Math.round((1-v)*h.blue+v*g),0),255))):v=255,u[f]=m,u[f+1]=y,u[f+2]=g,a&&(u[f+3]=v),l+=c,f+=s}return u}}).call(this,t("buffer").Buffer)},{"./constants":766,buffer:8}],765:[function(t,e,n){(function(n,r){"use strict";var i=t("util"),o=t("stream"),a=e.exports=function(){o.call(this),this._buffers=[],this._buffered=0,this._reads=[],this._paused=!1,this._encoding="utf8",this.writable=!0};i.inherits(a,o),a.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e}),n.nextTick(function(){this._process(),this._paused&&this._reads.length>0&&(this._paused=!1,this.emit("drain"))}.bind(this))},a.prototype.write=function(t,e){if(!this.writable)return this.emit("error",new Error("Stream not writable")),!1;var n;return n=r.isBuffer(t)?t:new r(t,e||this._encoding),this._buffers.push(n),this._buffered+=n.length,this._process(),this._reads&&0===this._reads.length&&(this._paused=!0),this.writable&&!this._paused},a.prototype.end=function(t,e){t&&this.write(t,e),this.writable=!1,this._buffers&&(0===this._buffers.length?this._end():(this._buffers.push(null),this._process()))},a.prototype.destroySoon=a.prototype.end,a.prototype._end=function(){this._reads.length>0&&this.emit("error",new Error("There are some read requests waitng on finished stream")),this.destroy()},a.prototype.destroy=function(){this._buffers&&(this.writable=!1,this._reads=null,this._buffers=null,this.emit("close"))},a.prototype._processReadAllowingLess=function(t){this._reads.shift();var e=this._buffers[0];e.length>t.length?(this._buffered-=t.length,this._buffers[0]=e.slice(t.length),t.func.call(this,e.slice(0,t.length))):(this._buffered-=e.length,this._buffers.shift(),t.func.call(this,e))},a.prototype._processRead=function(t){this._reads.shift();for(var e=0,n=0,i=new r(t.length);e<t.length;){var o=this._buffers[n++],a=Math.min(o.length,t.length-e);o.copy(i,e,0,a),e+=a,a!==o.length&&(this._buffers[--n]=o.slice(a))}n>0&&this._buffers.splice(0,n),this._buffered-=t.length,t.func.call(this,i)},a.prototype._process=function(){try{for(;this._buffered>0&&this._reads&&this._reads.length>0;){var t=this._reads[0];if(t.allowLess)this._processReadAllowingLess(t);else{if(!(this._buffered>=t.length))break;this._processRead(t)}}this._buffers&&this._buffers.length>0&&null===this._buffers[0]&&this._end()}catch(t){this.emit("error",t)}}}).call(this,t("_process"),t("buffer").Buffer)},{_process:28,buffer:8,stream:40,util:45}],766:[function(t,e,n){"use strict";e.exports={PNG_SIGNATURE:[137,80,78,71,13,10,26,10],TYPE_IHDR:1229472850,TYPE_IEND:1229278788,TYPE_IDAT:1229209940,TYPE_PLTE:1347179589,TYPE_tRNS:1951551059,TYPE_gAMA:1732332865,COLORTYPE_GRAYSCALE:0,COLORTYPE_PALETTE:1,COLORTYPE_COLOR:2,COLORTYPE_ALPHA:4,COLORTYPE_PALETTE_COLOR:3,COLORTYPE_COLOR_ALPHA:6,COLORTYPE_TO_BPP_MAP:{0:1,2:3,3:1,4:2,6:4},GAMMA_DIVISION:1e5}},{}],767:[function(t,e,n){"use strict";var r=[];!function(){for(var t=0;t<256;t++){for(var e=t,n=0;n<8;n++)1&e?e=3988292384^e>>>1:e>>>=1;r[t]=e}}();var i=e.exports=function(){this._crc=-1};i.prototype.write=function(t){for(var e=0;e<t.length;e++)this._crc=r[255&(this._crc^t[e])]^this._crc>>>8;return!0},i.prototype.crc32=function(){return this._crc^-1},i.crc32=function(t){for(var e=-1,n=0;n<t.length;n++)e=r[255&(e^t[n])]^e>>>8;return e^-1}},{}],768:[function(t,e,n){(function(n){"use strict";function r(t,e,n,r,i){t.copy(r,i,e,e+n)}function i(t,e,n){for(var r=0,i=e+n,o=e;o<i;o++)r+=Math.abs(t[o]);return r}function o(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=a>=o?t[e+a-o]:0,u=t[e+a]-s;r[i+a]=u}}function a(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=o>=r?t[e+o-r]:0,s=t[e+o]-a;i+=Math.abs(s)}return i}function s(t,e,n,r,i){for(var o=0;o<n;o++){var a=e>0?t[e+o-n]:0,s=t[e+o]-a;r[i+o]=s}}function u(t,e,n){for(var r=0,i=e+n,o=e;o<i;o++){var a=e>0?t[o-n]:0,s=t[o]-a;r+=Math.abs(s)}return r}function c(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=a>=o?t[e+a-o]:0,u=e>0?t[e+a-n]:0,c=t[e+a]-(s+u>>1);r[i+a]=c}}function l(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=o>=r?t[e+o-r]:0,s=e>0?t[e+o-n]:0,u=t[e+o]-(a+s>>1);i+=Math.abs(u)}return i}function f(t,e,n,r,i,o){for(var a=0;a<n;a++){var s=a>=o?t[e+a-o]:0,u=e>0?t[e+a-n]:0,c=e>0&&a>=o?t[e+a-(n+o)]:0,l=t[e+a]-p(s,u,c);r[i+a]=l}}function h(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=o>=r?t[e+o-r]:0,s=e>0?t[e+o-n]:0,u=e>0&&o>=r?t[e+o-(n+r)]:0,c=t[e+o]-p(a,s,u);i+=Math.abs(c)}return i}var p=t("./paeth-predictor"),d={0:r,1:o,2:s,3:c,4:f},v={0:i,1:a,2:u,3:l,4:h};e.exports=function(t,e,r,i,o){var a;if("filterType"in i&&i.filterType!==-1){if("number"!=typeof i.filterType)throw new Error("unrecognised filter types");a=[i.filterType]}else a=[0,1,2,3,4];for(var s=e*o,u=0,c=0,l=new n((s+1)*r),f=a[0],h=0;h<r;h++){if(a.length>1)for(var p=1/0,m=0;m<a.length;m++){var y=v[a[m]](t,c,s,o);y<p&&(f=a[m],p=y)}l[u]=f,u++,d[f](t,c,s,l,u,o),u+=s,c+=s}return l}}).call(this,t("buffer").Buffer)},{"./paeth-predictor":777,buffer:8}],769:[function(t,e,n){(function(n){"use strict";var r=t("util"),i=t("./chunkstream"),o=t("./filter-parse"),a=e.exports=function(t){i.call(this);var e=[],r=this;this._filter=new o(t,{read:this.read.bind(this),write:function(t){e.push(t)},complete:function(){r.emit("complete",n.concat(e))}}),this._filter.start()};r.inherits(a,i)}).call(this,t("buffer").Buffer)},{"./chunkstream":765,"./filter-parse":771,buffer:8,util:45}],770:[function(t,e,n){(function(e){"use strict";var r=t("./sync-reader"),i=t("./filter-parse");n.process=function(t,n){var o=[],a=new r(t);return new i(n,{read:a.read.bind(a),write:function(t){o.push(t)},complete:function(){}}).start(),a.process(),e.concat(o)}}).call(this,t("buffer").Buffer)},{"./filter-parse":771,"./sync-reader":783,buffer:8}],771:[function(t,e,n){(function(n){"use strict";function r(t,e,n){var r=t*e;return 8!==n&&(r=Math.ceil(r/(8/n))),r}var i=t("./interlace"),o=t("./paeth-predictor"),a=e.exports=function(t,e){var n=t.width,o=t.height,a=t.interlace,s=t.bpp,u=t.depth;if(this.read=e.read,this.write=e.write,this.complete=e.complete,this._imageIndex=0,this._images=[],a)for(var c=i.getImagePasses(n,o),l=0;l<c.length;l++)this._images.push({byteWidth:r(c[l].width,s,u),height:c[l].height,lineIndex:0});else this._images.push({byteWidth:r(n,s,u),height:o,lineIndex:0});8===u?this._xComparison=s:16===u?this._xComparison=2*s:this._xComparison=1};a.prototype.start=function(){this.read(this._images[this._imageIndex].byteWidth+1,this._reverseFilterLine.bind(this))},a.prototype._unFilterType1=function(t,e,n){for(var r=this._xComparison,i=r-1,o=0;o<n;o++){var a=t[1+o],s=o>i?e[o-r]:0;e[o]=a+s}},a.prototype._unFilterType2=function(t,e,n){for(var r=this._lastLine,i=0;i<n;i++){var o=t[1+i],a=r?r[i]:0;e[i]=o+a}},a.prototype._unFilterType3=function(t,e,n){for(var r=this._xComparison,i=r-1,o=this._lastLine,a=0;a<n;a++){var s=t[1+a],u=o?o[a]:0,c=a>i?e[a-r]:0,l=Math.floor((c+u)/2);e[a]=s+l}},a.prototype._unFilterType4=function(t,e,n){for(var r=this._xComparison,i=r-1,a=this._lastLine,s=0;s<n;s++){var u=t[1+s],c=a?a[s]:0,l=s>i?e[s-r]:0,f=s>i&&a?a[s-r]:0,h=o(l,c,f);e[s]=u+h}},a.prototype._reverseFilterLine=function(t){var e,r=t[0],i=this._images[this._imageIndex],o=i.byteWidth;if(0===r)e=t.slice(1,o+1);else switch(e=new n(o),r){case 1:this._unFilterType1(t,e,o);break;case 2:this._unFilterType2(t,e,o);break;case 3:this._unFilterType3(t,e,o);break;case 4:this._unFilterType4(t,e,o);break;default:throw new Error("Unrecognised filter type - "+r)}this.write(e),i.lineIndex++,i.lineIndex>=i.height?(this._lastLine=null,this._imageIndex++,i=this._images[this._imageIndex]):this._lastLine=e,i?this.read(i.byteWidth+1,this._reverseFilterLine.bind(this)):(this._lastLine=null,this.complete())}}).call(this,t("buffer").Buffer)},{"./interlace":773,"./paeth-predictor":777,buffer:8}],772:[function(t,e,n){(function(t){"use strict";function n(t,e,n,r,i){for(var o=0,a=0;a<r;a++)for(var s=0;s<n;s++){var u=i[t[o]];if(!u)throw new Error("index "+t[o]+" not in palette");for(var c=0;c<4;c++)e[o+c]=u[c];o+=4}}function r(t,e,n,r,i){for(var o=0,a=0;a<r;a++)for(var s=0;s<n;s++){var u=!1;if(1===i.length?i[0]===t[o]&&(u=!0):i[0]===t[o]&&i[1]===t[o+1]&&i[2]===t[o+2]&&(u=!0),u)for(var c=0;c<4;c++)e[o+c]=0;o+=4}}function i(t,e,n,r,i){for(var o=Math.pow(2,i)-1,a=0,s=0;s<r;s++)for(var u=0;u<n;u++){for(var c=0;c<4;c++)e[a+c]=Math.floor(255*t[a+c]/o+.5);a+=4}}e.exports=function(e,o){var a=o.depth,s=o.width,u=o.height,c=o.colorType,l=o.transColor,f=o.palette,h=e;return 3===c?n(e,h,s,u,f):(l&&r(e,h,s,u,l),8!==a&&(16===a&&(h=new t(s*u*4)),i(e,h,s,u,a))),h}}).call(this,t("buffer").Buffer)},{buffer:8}],773:[function(t,e,n){"use strict";var r=[{x:[0],y:[0]},{x:[4],y:[0]},{x:[0,4],y:[4]},{x:[2,6],y:[0,4]},{x:[0,2,4,6],y:[2,6]},{x:[1,3,5,7],y:[0,2,4,6]},{x:[0,1,2,3,4,5,6,7],y:[1,3,5,7]}];n.getImagePasses=function(t,e){for(var n=[],i=t%8,o=e%8,a=(t-i)/8,s=(e-o)/8,u=0;u<r.length;u++){for(var c=r[u],l=a*c.x.length,f=s*c.y.length,h=0;h<c.x.length&&c.x[h]<i;h++)l++;for(h=0;h<c.y.length&&c.y[h]<o;h++)f++;l>0&&f>0&&n.push({width:l,height:f,index:u})}return n},n.getInterlaceIterator=function(t){return function(e,n,i){var o=e%r[i].x.length,a=(e-o)/r[i].x.length*8+r[i].x[o],s=n%r[i].y.length;return 4*a+((n-s)/r[i].y.length*8+r[i].y[s])*t*4}}},{}],774:[function(t,e,n){(function(n){"use strict";var r=t("util"),i=t("stream"),o=t("./constants"),a=t("./packer"),s=e.exports=function(t){i.call(this);var e=t||{};this._packer=new a(e),this._deflate=this._packer.createDeflate(),this.readable=!0};r.inherits(s,i),s.prototype.pack=function(t,e,r,i){this.emit("data",new n(o.PNG_SIGNATURE)),this.emit("data",this._packer.packIHDR(e,r)),i&&this.emit("data",this._packer.packGAMA(i));var a=this._packer.filterData(t,e,r);this._deflate.on("error",this.emit.bind(this,"error")),this._deflate.on("data",function(t){this.emit("data",this._packer.packIDAT(t))}.bind(this)),this._deflate.on("end",function(){this.emit("data",this._packer.packIEND()),this.emit("end")}.bind(this)),this._deflate.end(a)}}).call(this,t("buffer").Buffer)},{"./constants":766,"./packer":776,buffer:8,stream:40,util:45}],775:[function(t,e,n){(function(n){"use strict";var r=!0,i=t("zlib");i.deflateSync||(r=!1);var o=t("./constants"),a=t("./packer");e.exports=function(t,e){if(!r)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var s=e||{},u=new a(s),c=[];c.push(new n(o.PNG_SIGNATURE)),c.push(u.packIHDR(t.width,t.height)),t.gamma&&c.push(u.packGAMA(t.gamma));var l=u.filterData(t.data,t.width,t.height),f=i.deflateSync(l,u.getDeflateOptions());if(l=null,!f||!f.length)throw new Error("bad png - invalid compressed data response");return c.push(u.packIDAT(f)),c.push(u.packIEND()),n.concat(c)}}).call(this,t("buffer").Buffer)},{"./constants":766,"./packer":776,buffer:8,zlib:5}],776:[function(t,e,n){(function(n){"use strict";var r=t("./constants"),i=t("./crc"),o=t("./bitpacker"),a=t("./filter-pack"),s=t("zlib"),u=e.exports=function(t){if(this._options=t,t.deflateChunkSize=t.deflateChunkSize||32768,t.deflateLevel=null!=t.deflateLevel?t.deflateLevel:9,t.deflateStrategy=null!=t.deflateStrategy?t.deflateStrategy:3,t.inputHasAlpha=null==t.inputHasAlpha||t.inputHasAlpha,t.deflateFactory=t.deflateFactory||s.createDeflate,t.bitDepth=t.bitDepth||8,t.colorType="number"==typeof t.colorType?t.colorType:r.COLORTYPE_COLOR_ALPHA,t.colorType!==r.COLORTYPE_COLOR&&t.colorType!==r.COLORTYPE_COLOR_ALPHA)throw new Error("option color type:"+t.colorType+" is not supported at present");if(8!==t.bitDepth)throw new Error("option bit depth:"+t.bitDepth+" is not supported at present")};u.prototype.getDeflateOptions=function(){return{chunkSize:this._options.deflateChunkSize,level:this._options.deflateLevel,strategy:this._options.deflateStrategy}},u.prototype.createDeflate=function(){return this._options.deflateFactory(this.getDeflateOptions())},u.prototype.filterData=function(t,e,n){var i=o(t,e,n,this._options),s=r.COLORTYPE_TO_BPP_MAP[this._options.colorType];return a(i,e,n,this._options,s)},u.prototype._packChunk=function(t,e){var r=e?e.length:0,o=new n(r+12);return o.writeUInt32BE(r,0),o.writeUInt32BE(t,4),e&&e.copy(o,8),o.writeInt32BE(i.crc32(o.slice(4,o.length-4)),o.length-4),o},u.prototype.packGAMA=function(t){var e=new n(4);return e.writeUInt32BE(Math.floor(t*r.GAMMA_DIVISION),0),this._packChunk(r.TYPE_gAMA,e)},u.prototype.packIHDR=function(t,e){var i=new n(13);return i.writeUInt32BE(t,0),i.writeUInt32BE(e,4),i[8]=this._options.bitDepth,i[9]=this._options.colorType,i[10]=0,i[11]=0,i[12]=0,this._packChunk(r.TYPE_IHDR,i)},u.prototype.packIDAT=function(t){return this._packChunk(r.TYPE_IDAT,t)},u.prototype.packIEND=function(){return this._packChunk(r.TYPE_IEND,null)}}).call(this,t("buffer").Buffer)},{"./bitpacker":764,"./constants":766,"./crc":767,"./filter-pack":768,buffer:8,zlib:5}],777:[function(t,e,n){"use strict";e.exports=function(t,e,n){var r=t+e-n,i=Math.abs(r-t),o=Math.abs(r-e),a=Math.abs(r-n);return i<=o&&i<=a?t:o<=a?e:n}},{}],778:[function(t,e,n){"use strict";var r=t("util"),i=t("zlib"),o=t("./chunkstream"),a=t("./filter-parse-async"),s=t("./parser"),u=t("./bitmapper"),c=t("./format-normaliser"),l=e.exports=function(t){o.call(this),this._parser=new s(t,{read:this.read.bind(this),error:this._handleError.bind(this),metadata:this._handleMetaData.bind(this),gamma:this.emit.bind(this,"gamma"),palette:this._handlePalette.bind(this),transColor:this._handleTransColor.bind(this),finished:this._finished.bind(this),inflateData:this._inflateData.bind(this)}),this._options=t,this.writable=!0,this._parser.start()};r.inherits(l,o),l.prototype._handleError=function(t){this.emit("error",t),this.writable=!1,this.destroy(),this._inflate&&this._inflate.destroy&&this._inflate.destroy(),this.errord=!0},l.prototype._inflateData=function(t){this._inflate||(this._inflate=i.createInflate(),this._inflate.on("error",this.emit.bind(this,"error")),this._filter.on("complete",this._complete.bind(this)),this._inflate.pipe(this._filter)),this._inflate.write(t)},l.prototype._handleMetaData=function(t){this.emit("metadata",t),this._bitmapInfo=Object.create(t),this._filter=new a(this._bitmapInfo)},l.prototype._handleTransColor=function(t){this._bitmapInfo.transColor=t},l.prototype._handlePalette=function(t){this._bitmapInfo.palette=t},l.prototype._finished=function(){this.errord||(this._inflate?this._inflate.end():this.emit("error","No Inflate block"),this.destroySoon())},l.prototype._complete=function(t){if(!this.errord){try{var e=u.dataToBitMap(t,this._bitmapInfo),n=c(e,this._bitmapInfo);e=null}catch(t){return void this._handleError(t)}this.emit("parsed",n)}}},{"./bitmapper":763,"./chunkstream":765,"./filter-parse-async":769,"./format-normaliser":772,"./parser":780,util:45,zlib:5}],779:[function(t,e,n){(function(n){"use strict";var r=!0,i=t("zlib");i.deflateSync||(r=!1);var o=t("./sync-reader"),a=t("./filter-parse-sync"),s=t("./parser"),u=t("./bitmapper"),c=t("./format-normaliser");e.exports=function(t,e){function l(t){m=t}function f(t){y=t}function h(t){y.transColor=t}function p(t){y.palette=t}function d(t){g=t}function v(t){_.push(t)}if(!r)throw new Error("To use the sync capability of this library in old node versions, please also add a dependency on node-zlb-backport");var m,y,g,_=[],b=new o(t);if(new s(e,{read:b.read.bind(b),error:l,metadata:f,gamma:d,palette:p,transColor:h,inflateData:v}).start(),b.process(),m)throw m;var w=n.concat(_);_.length=0;var x=i.inflateSync(w);if(w=null,!x||!x.length)throw new Error("bad png - invalid inflate data response");var E=a.process(x,y);w=null;var T=u.dataToBitMap(E,y);E=null;var S=c(T,y);return y.data=S,y.gamma=g||0,y}}).call(this,t("buffer").Buffer)},{"./bitmapper":763,"./filter-parse-sync":770,"./format-normaliser":772,"./parser":780,"./sync-reader":783,buffer:8,zlib:5}],780:[function(t,e,n){(function(n){"use strict";var r=t("./constants"),i=t("./crc"),o=e.exports=function(t,e){this._options=t,t.checkCRC=t.checkCRC!==!1,this._hasIHDR=!1,this._hasIEND=!1,this._palette=[],this._colorType=0,this._chunks={},this._chunks[r.TYPE_IHDR]=this._handleIHDR.bind(this),this._chunks[r.TYPE_IEND]=this._handleIEND.bind(this),this._chunks[r.TYPE_IDAT]=this._handleIDAT.bind(this),this._chunks[r.TYPE_PLTE]=this._handlePLTE.bind(this),this._chunks[r.TYPE_tRNS]=this._handleTRNS.bind(this),this._chunks[r.TYPE_gAMA]=this._handleGAMA.bind(this),this.read=e.read,this.error=e.error,this.metadata=e.metadata,this.gamma=e.gamma,this.transColor=e.transColor,this.palette=e.palette,this.parsed=e.parsed,this.inflateData=e.inflateData,this.inflateData=e.inflateData,this.finished=e.finished};o.prototype.start=function(){this.read(r.PNG_SIGNATURE.length,this._parseSignature.bind(this))},o.prototype._parseSignature=function(t){for(var e=r.PNG_SIGNATURE,n=0;n<e.length;n++)if(t[n]!==e[n])return void this.error(new Error("Invalid file signature"));this.read(8,this._parseChunkBegin.bind(this))},o.prototype._parseChunkBegin=function(t){for(var e=t.readUInt32BE(0),o=t.readUInt32BE(4),a="",s=4;s<8;s++)a+=String.fromCharCode(t[s]);var u=Boolean(32&t[4]);return this._hasIHDR||o===r.TYPE_IHDR?(this._crc=new i,this._crc.write(new n(a)),this._chunks[o]?this._chunks[o](e):u?void this.read(e+4,this._skipChunk.bind(this)):void this.error(new Error("Unsupported critical chunk type "+a))):void this.error(new Error("Expected IHDR on beggining"))},o.prototype._skipChunk=function(){this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleChunkEnd=function(){this.read(4,this._parseChunkEnd.bind(this))},o.prototype._parseChunkEnd=function(t){var e=t.readInt32BE(0),n=this._crc.crc32();if(this._options.checkCRC&&n!==e)return void this.error(new Error("Crc error - "+e+" - "+n));this._hasIEND||this.read(8,this._parseChunkBegin.bind(this))},o.prototype._handleIHDR=function(t){this.read(t,this._parseIHDR.bind(this))},o.prototype._parseIHDR=function(t){this._crc.write(t);var e=t.readUInt32BE(0),n=t.readUInt32BE(4),i=t[8],o=t[9],a=t[10],s=t[11],u=t[12];if(8!==i&&4!==i&&2!==i&&1!==i&&16!==i)return void this.error(new Error("Unsupported bit depth "+i));if(!(o in r.COLORTYPE_TO_BPP_MAP))return void this.error(new Error("Unsupported color type"));if(0!==a)return void this.error(new Error("Unsupported compression method"));if(0!==s)return void this.error(new Error("Unsupported filter method"));if(0!==u&&1!==u)return void this.error(new Error("Unsupported interlace method"));this._colorType=o;var c=r.COLORTYPE_TO_BPP_MAP[this._colorType];this._hasIHDR=!0,this.metadata({width:e,height:n,depth:i,interlace:Boolean(u),palette:Boolean(o&r.COLORTYPE_PALETTE),color:Boolean(o&r.COLORTYPE_COLOR),alpha:Boolean(o&r.COLORTYPE_ALPHA),bpp:c,colorType:o}),this._handleChunkEnd()},o.prototype._handlePLTE=function(t){this.read(t,this._parsePLTE.bind(this))},o.prototype._parsePLTE=function(t){this._crc.write(t);for(var e=Math.floor(t.length/3),n=0;n<e;n++)this._palette.push([t[3*n],t[3*n+1],t[3*n+2],255]);this.palette(this._palette),this._handleChunkEnd()},o.prototype._handleTRNS=function(t){this.read(t,this._parseTRNS.bind(this))},o.prototype._parseTRNS=function(t){if(this._crc.write(t),this._colorType===r.COLORTYPE_PALETTE_COLOR){if(0===this._palette.length)return void this.error(new Error("Transparency chunk must be after palette"));if(t.length>this._palette.length)return void this.error(new Error("More transparent colors than palette size"));for(var e=0;e<t.length;e++)this._palette[e][3]=t[e];this.palette(this._palette)}this._colorType===r.COLORTYPE_GRAYSCALE&&this.transColor([t.readUInt16BE(0)]),this._colorType===r.COLORTYPE_COLOR&&this.transColor([t.readUInt16BE(0),t.readUInt16BE(2),t.readUInt16BE(4)]),this._handleChunkEnd()},o.prototype._handleGAMA=function(t){this.read(t,this._parseGAMA.bind(this))},o.prototype._parseGAMA=function(t){this._crc.write(t),this.gamma(t.readUInt32BE(0)/r.GAMMA_DIVISION),this._handleChunkEnd()},o.prototype._handleIDAT=function(t){this.read(-t,this._parseIDAT.bind(this,t))},o.prototype._parseIDAT=function(t,e){if(this._crc.write(e),this._colorType===r.COLORTYPE_PALETTE_COLOR&&0===this._palette.length)throw new Error("Expected palette not found");this.inflateData(e);var n=t-e.length;n>0?this._handleIDAT(n):this._handleChunkEnd()},o.prototype._handleIEND=function(t){this.read(t,this._parseIEND.bind(this))},o.prototype._parseIEND=function(t){this._crc.write(t),this._hasIEND=!0,this._handleChunkEnd(),this.finished&&this.finished()}}).call(this,t("buffer").Buffer)},{"./constants":766,"./crc":767,buffer:8}],781:[function(t,e,n){"use strict";var r=t("./parser-sync"),i=t("./packer-sync");n.read=function(t,e){return r(t,e||{})},n.write=function(t){return i(t)}},{"./packer-sync":775,"./parser-sync":779}],782:[function(t,e,n){(function(e,r){"use strict";var i=t("util"),o=t("stream"),a=t("./parser-async"),s=t("./packer-async"),u=t("./png-sync"),c=n.PNG=function(t){o.call(this),t=t||{},this.width=t.width||0,this.height=t.height||0,this.data=this.width>0&&this.height>0?new r(4*this.width*this.height):null,t.fill&&this.data&&this.data.fill(0),this.gamma=0,this.readable=this.writable=!0,this._parser=new a(t),this._parser.on("error",this.emit.bind(this,"error")),this._parser.on("close",this._handleClose.bind(this)),this._parser.on("metadata",this._metadata.bind(this)),this._parser.on("gamma",this._gamma.bind(this)),this._parser.on("parsed",function(t){this.data=t,this.emit("parsed",t)}.bind(this)),this._packer=new s(t),this._packer.on("data",this.emit.bind(this,"data")),this._packer.on("end",this.emit.bind(this,"end")),this._parser.on("close",this._handleClose.bind(this)),this._packer.on("error",this.emit.bind(this,"error"))};i.inherits(c,o),c.sync=u,c.prototype.pack=function(){return this.data&&this.data.length?(e.nextTick(function(){this._packer.pack(this.data,this.width,this.height,this.gamma)}.bind(this)),this):(this.emit("error","No data provided"),this)},c.prototype.parse=function(t,e){if(e){var n,r;n=function(t){this.removeListener("error",r),this.data=t,e(null,this)}.bind(this),r=function(t){this.removeListener("parsed",n),e(t,null)}.bind(this),this.once("parsed",n),this.once("error",r)}return this.end(t),this},c.prototype.write=function(t){return this._parser.write(t),!0},c.prototype.end=function(t){this._parser.end(t)},c.prototype._metadata=function(t){this.width=t.width,this.height=t.height,this.emit("metadata",t)},c.prototype._gamma=function(t){this.gamma=t},c.prototype._handleClose=function(){this._parser.writable||this._packer.readable||this.emit("close")},c.bitblt=function(t,e,n,r,i,o,a,s){if(n>t.width||r>t.height||n+i>t.width||r+o>t.height)throw new Error("bitblt reading outside image");if(a>e.width||s>e.height||a+i>e.width||s+o>e.height)throw new Error("bitblt writing outside image");for(var u=0;u<o;u++)t.data.copy(e.data,(s+u)*e.width+a<<2,(r+u)*t.width+n<<2,(r+u)*t.width+n+i<<2)},c.prototype.bitblt=function(t,e,n,r,i,o,a){return c.bitblt(this,t,e,n,r,i,o,a),this},c.adjustGamma=function(t){if(t.gamma){for(var e=0;e<t.height;e++)for(var n=0;n<t.width;n++)for(var r=t.width*e+n<<2,i=0;i<3;i++){var o=t.data[r+i]/255;o=Math.pow(o,1/2.2/t.gamma),t.data[r+i]=Math.round(255*o)}t.gamma=0}},c.prototype.adjustGamma=function(){c.adjustGamma(this)}}).call(this,t("_process"),t("buffer").Buffer)},{"./packer-async":774,"./parser-async":778,"./png-sync":781,_process:28,buffer:8,stream:40,util:45}],783:[function(t,e,n){"use strict";var r=e.exports=function(t){this._buffer=t,this._reads=[]};r.prototype.read=function(t,e){this._reads.push({length:Math.abs(t),allowLess:t<0,func:e})},r.prototype.process=function(){for(;this._reads.length>0&&this._buffer.length;){var t=this._reads[0];if(!this._buffer.length||!(this._buffer.length>=t.length||t.allowLess))break;this._reads.shift();var e=this._buffer;this._buffer=e.slice(t.length),t.func.call(this,e.slice(0,t.length))}return this._reads.length>0?new Error("There are some read requests waitng on finished stream"):this._buffer.length>0?new Error("unrecognised content at end of stream"):void 0}},{}],784:[function(t,e,n){"use strict";function r(t,e){this.x=t,this.y=e}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,n=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=n,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=e*this.x-n*this.y,i=n*this.x+e*this.y;return this.x=r,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(t){return t instanceof r?t:Array.isArray(t)?new r(t[0],t[1]):t}},{}],785:[function(t,e,n){"use strict";function r(t,e){return!s(this.props,t)||!s(this.state,e)}function i(t){var e=t.prototype&&t.prototype.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||"a component"}function o(t){return void 0!==t.prototype.shouldComponentUpdate&&a(!1,"Cannot decorate `%s` with @pureRenderDecorator, because it already implements `shouldComponentUpdate().",i(t)),t.prototype.shouldComponentUpdate=r,t}var a=t("fbjs/lib/warning"),s=t("fbjs/lib/shallowEqual");e.exports=o},{"fbjs/lib/shallowEqual":445,"fbjs/lib/warning":446}],786:[function(t,e,n){"use strict";function r(t,e,n,a,s){for(n=n||0,a=a||t.length-1,s=s||o;a>n;){if(a-n>600){var u=a-n+1,c=e-n+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1);r(t,e,Math.max(n,Math.floor(e-c*f/u+h)),Math.min(a,Math.floor(e+(u-c)*f/u+h)),s)}var p=t[e],d=n,v=a;for(i(t,n,e),s(t[a],p)>0&&i(t,n,a);d<v;){for(i(t,d,v),d++,v--;s(t[d],p)<0;)d++;for(;s(t[v],p)>0;)v--}0===s(t[n],p)?i(t,n,v):(v++,i(t,v,a)),v<=e&&(n=v+1),e<=v&&(a=v-1)}}function i(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:t>e?1:0}e.exports=r},{}],787:[function(t,e,n){"use strict";function r(t,e,n){if(!n&&s(e)&&(n=e,e={}),e=e||{},e.hasOwnProperty("isRendered")&&!e.isRendered)return null;i(e),Array.isArray(n)&&1===n.length&&(n=n[0]);var r=l(e,["classSet","isRendered"]);if(!Array.isArray(n))return u.createElement(t,r,n);var a=o(t,r,n);return u.createElement.apply(u,a)}function i(t){var e=t.classSet;if(e){var n=t.className;if(n&&"string"==typeof n){var r=n.match(/\S+/g);if(!r)return;for(var i=0;i<r.length;i++)e[r[i]]=!0}t.className=c(e)}}function o(t,e,n){var r=n.length+2,i=new Array(r);i[0]=t,i[1]=e;for(var o=0;o<n.length;o++){i[o+2]=n[o]}return i}function a(t){return function(e,n){return r(t,e,n)}}function s(t){return"string"==typeof t||"number"==typeof t||Array.isArray(t)}var u=t("react"),c=t("classnames"),l=t("just-omit");e.exports=r;for(var f in u.DOM)u.DOM.hasOwnProperty(f)&&(r[f]=a(f))},{classnames:53,"just-omit":493,react:956}],788:[function(t,e,n){"use strict";e.exports=t("./lib/ReactDOM")},{"./lib/ReactDOM":818}],789:[function(t,e,n){"use strict";var r={Properties:{"aria-current":0,"aria-details":0,"aria-disabled":0,"aria-hidden":0,"aria-invalid":0,
"aria-keyshortcuts":0,"aria-label":0,"aria-roledescription":0,"aria-autocomplete":0,"aria-checked":0,"aria-expanded":0,"aria-haspopup":0,"aria-level":0,"aria-modal":0,"aria-multiline":0,"aria-multiselectable":0,"aria-orientation":0,"aria-placeholder":0,"aria-pressed":0,"aria-readonly":0,"aria-required":0,"aria-selected":0,"aria-sort":0,"aria-valuemax":0,"aria-valuemin":0,"aria-valuenow":0,"aria-valuetext":0,"aria-atomic":0,"aria-busy":0,"aria-live":0,"aria-relevant":0,"aria-dropeffect":0,"aria-grabbed":0,"aria-activedescendant":0,"aria-colcount":0,"aria-colindex":0,"aria-colspan":0,"aria-controls":0,"aria-describedby":0,"aria-errormessage":0,"aria-flowto":0,"aria-labelledby":0,"aria-owns":0,"aria-posinset":0,"aria-rowcount":0,"aria-rowindex":0,"aria-rowspan":0,"aria-setsize":0},DOMAttributeNames:{},DOMPropertyNames:{}};e.exports=r},{}],790:[function(t,e,n){"use strict";var r=t("./ReactDOMComponentTree"),i=t("fbjs/lib/focusNode"),o={focusDOMComponent:function(){i(r.getNodeFromInstance(this))}};e.exports=o},{"./ReactDOMComponentTree":821,"fbjs/lib/focusNode":433}],791:[function(t,e,n){"use strict";function r(){var t=window.opera;return"object"==typeof t&&"function"==typeof t.version&&parseInt(t.version(),10)<=12}function i(t){return(t.ctrlKey||t.altKey||t.metaKey)&&!(t.ctrlKey&&t.altKey)}function o(t){switch(t){case"topCompositionStart":return T.compositionStart;case"topCompositionEnd":return T.compositionEnd;case"topCompositionUpdate":return T.compositionUpdate}}function a(t,e){return"topKeyDown"===t&&229===e.keyCode}function s(t,e){switch(t){case"topKeyUp":return g.indexOf(e.keyCode)!==-1;case"topKeyDown":return 229!==e.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function u(t){var e=t.detail;return"object"==typeof e&&"data"in e?e.data:null}function c(t,e,n,r){var i,c;if(_?i=o(t):M?s(t,n)&&(i=T.compositionEnd):a(t,n)&&(i=T.compositionStart),!i)return null;x&&(M||i!==T.compositionStart?i===T.compositionEnd&&M&&(c=M.getData()):M=v.getPooled(r));var l=m.getPooled(i,e,n,r);if(c)l.data=c;else{var f=u(n);null!==f&&(l.data=f)}return p.accumulateTwoPhaseDispatches(l),l}function l(t,e){switch(t){case"topCompositionEnd":return u(e);case"topKeyPress":return 32!==e.which?null:(S=!0,E);case"topTextInput":var n=e.data;return n===E&&S?null:n;default:return null}}function f(t,e){if(M){if("topCompositionEnd"===t||!_&&s(t,e)){var n=M.getData();return v.release(M),M=null,n}return null}switch(t){case"topPaste":return null;case"topKeyPress":return e.which&&!i(e)?String.fromCharCode(e.which):null;case"topCompositionEnd":return x?null:e.data;default:return null}}function h(t,e,n,r){var i;if(i=w?l(t,n):f(t,n),!i)return null;var o=y.getPooled(T.beforeInput,e,n,r);return o.data=i,p.accumulateTwoPhaseDispatches(o),o}var p=t("./EventPropagators"),d=t("fbjs/lib/ExecutionEnvironment"),v=t("./FallbackCompositionState"),m=t("./SyntheticCompositionEvent"),y=t("./SyntheticInputEvent"),g=[9,13,27,32],_=d.canUseDOM&&"CompositionEvent"in window,b=null;d.canUseDOM&&"documentMode"in document&&(b=document.documentMode);var w=d.canUseDOM&&"TextEvent"in window&&!b&&!r(),x=d.canUseDOM&&(!_||b&&b>8&&b<=11),E=String.fromCharCode(32),T={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:["topBlur","topCompositionEnd","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:["topBlur","topCompositionStart","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:["topBlur","topCompositionUpdate","topKeyDown","topKeyPress","topKeyUp","topMouseDown"]}},S=!1,M=null,O={eventTypes:T,extractEvents:function(t,e,n,r){return[c(t,e,n,r),h(t,e,n,r)]}};e.exports=O},{"./EventPropagators":807,"./FallbackCompositionState":808,"./SyntheticCompositionEvent":872,"./SyntheticInputEvent":876,"fbjs/lib/ExecutionEnvironment":425}],792:[function(t,e,n){"use strict";function r(t,e){return t+e.charAt(0).toUpperCase()+e.substring(1)}var i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(t){o.forEach(function(e){i[r(e,t)]=i[t]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:a};e.exports=s},{}],793:[function(t,e,n){(function(n){"use strict";var r=t("./CSSProperty"),i=t("fbjs/lib/ExecutionEnvironment"),o=t("./ReactInstrumentation"),a=t("fbjs/lib/camelizeStyleName"),s=t("./dangerousStyleValue"),u=t("fbjs/lib/hyphenateStyleName"),c=t("fbjs/lib/memoizeStringOnly"),l=t("fbjs/lib/warning"),f=c(function(t){return u(t)}),h=!1,p="cssFloat";if(i.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(t){h=!0}void 0===document.documentElement.style.cssFloat&&(p="styleFloat")}if("production"!==n.env.NODE_ENV)var v=/^(?:webkit|moz|o)[A-Z]/,m=/;\s*$/,y={},g={},_=!1,b=function(t,e){y.hasOwnProperty(t)&&y[t]||(y[t]=!0,"production"!==n.env.NODE_ENV&&l(!1,"Unsupported style property %s. Did you mean %s?%s",t,a(t),T(e)))},w=function(t,e){y.hasOwnProperty(t)&&y[t]||(y[t]=!0,"production"!==n.env.NODE_ENV&&l(!1,"Unsupported vendor-prefixed style property %s. Did you mean %s?%s",t,t.charAt(0).toUpperCase()+t.slice(1),T(e)))},x=function(t,e,r){g.hasOwnProperty(e)&&g[e]||(g[e]=!0,"production"!==n.env.NODE_ENV&&l(!1,'Style property values shouldn\'t contain a semicolon.%s Try "%s: %s" instead.',T(r),t,e.replace(m,"")))},E=function(t,e,r){_||(_=!0,"production"!==n.env.NODE_ENV&&l(!1,"`NaN` is an invalid value for the `%s` css style property.%s",t,T(r)))},T=function(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""},S=function(t,e,n){var r;n&&(r=n._currentElement._owner),t.indexOf("-")>-1?b(t,r):v.test(t)?w(t,r):m.test(e)&&x(t,e,r),"number"==typeof e&&isNaN(e)&&E(t,e,r)};var M={createMarkupForStyles:function(t,e){var r="";for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];"production"!==n.env.NODE_ENV&&S(i,o,e),null!=o&&(r+=f(i)+":",r+=s(i,o,e)+";")}return r||null},setValueForStyles:function(t,e,i){"production"!==n.env.NODE_ENV&&o.debugTool.onHostOperation({instanceID:i._debugID,type:"update styles",payload:e});var a=t.style;for(var u in e)if(e.hasOwnProperty(u)){"production"!==n.env.NODE_ENV&&S(u,e[u],i);var c=s(u,e[u],i);if("float"!==u&&"cssFloat"!==u||(u=p),c)a[u]=c;else{var l=h&&r.shorthandPropertyExpansions[u];if(l)for(var f in l)a[f]="";else a[u]=""}}}};e.exports=M}).call(this,t("_process"))},{"./CSSProperty":792,"./ReactInstrumentation":850,"./dangerousStyleValue":889,_process:28,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/camelizeStyleName":427,"fbjs/lib/hyphenateStyleName":438,"fbjs/lib/memoizeStringOnly":442,"fbjs/lib/warning":446}],794:[function(t,e,n){(function(n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=t("./reactProdInvariant"),o=t("./PooledClass"),a=t("fbjs/lib/invariant"),s=function(){function t(e){r(this,t),this._callbacks=null,this._contexts=null,this._arg=e}return t.prototype.enqueue=function(t,e){this._callbacks=this._callbacks||[],this._callbacks.push(t),this._contexts=this._contexts||[],this._contexts.push(e)},t.prototype.notifyAll=function(){var t=this._callbacks,e=this._contexts,r=this._arg;if(t&&e){t.length!==e.length&&("production"!==n.env.NODE_ENV?a(!1,"Mismatched list of contexts in callback queue"):i("24")),this._callbacks=null,this._contexts=null;for(var o=0;o<t.length;o++)t[o].call(e[o],r);t.length=0,e.length=0}},t.prototype.checkpoint=function(){return this._callbacks?this._callbacks.length:0},t.prototype.rollback=function(t){this._callbacks&&this._contexts&&(this._callbacks.length=t,this._contexts.length=t)},t.prototype.reset=function(){this._callbacks=null,this._contexts=null},t.prototype.destructor=function(){this.reset()},t}();e.exports=o.addPoolingTo(s)}).call(this,t("_process"))},{"./PooledClass":812,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],795:[function(t,e,n){"use strict";function r(t){var e=t.nodeName&&t.nodeName.toLowerCase();return"select"===e||"input"===e&&"file"===t.type}function i(t){var e=E.getPooled(O.change,R,t,T(t));_.accumulateTwoPhaseDispatches(e),x.batchedUpdates(o,e)}function o(t){g.enqueueEvents(t),g.processEventQueue(!1)}function a(t,e){A=t,R=e,A.attachEvent("onchange",i)}function s(){A&&(A.detachEvent("onchange",i),A=null,R=null)}function u(t,e){if("topChange"===t)return e}function c(t,e,n){"topFocus"===t?(s(),a(e,n)):"topBlur"===t&&s()}function l(t,e){A=t,R=e,I=t.value,k=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(A,"value",C),A.attachEvent?A.attachEvent("onpropertychange",h):A.addEventListener("propertychange",h,!1)}function f(){A&&(delete A.value,A.detachEvent?A.detachEvent("onpropertychange",h):A.removeEventListener("propertychange",h,!1),A=null,R=null,I=null,k=null)}function h(t){if("value"===t.propertyName){var e=t.srcElement.value;e!==I&&(I=e,i(t))}}function p(t,e){if("topInput"===t)return e}function d(t,e,n){"topFocus"===t?(f(),l(e,n)):"topBlur"===t&&f()}function v(t,e){if(("topSelectionChange"===t||"topKeyUp"===t||"topKeyDown"===t)&&A&&A.value!==I)return I=A.value,R}function m(t){return t.nodeName&&"input"===t.nodeName.toLowerCase()&&("checkbox"===t.type||"radio"===t.type)}function y(t,e){if("topClick"===t)return e}var g=t("./EventPluginHub"),_=t("./EventPropagators"),b=t("fbjs/lib/ExecutionEnvironment"),w=t("./ReactDOMComponentTree"),x=t("./ReactUpdates"),E=t("./SyntheticEvent"),T=t("./getEventTarget"),S=t("./isEventSupported"),M=t("./isTextInputElement"),O={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:["topBlur","topChange","topClick","topFocus","topInput","topKeyDown","topKeyUp","topSelectionChange"]}},A=null,R=null,I=null,k=null,P=!1;b.canUseDOM&&(P=S("change")&&(!document.documentMode||document.documentMode>8));var N=!1;b.canUseDOM&&(N=S("input")&&(!document.documentMode||document.documentMode>11));var C={get:function(){return k.get.call(this)},set:function(t){I=""+t,k.set.call(this,t)}},D={eventTypes:O,extractEvents:function(t,e,n,i){var o,a,s=e?w.getNodeFromInstance(e):window;if(r(s)?P?o=u:a=c:M(s)?N?o=p:(o=v,a=d):m(s)&&(o=y),o){var l=o(t,e);if(l){var f=E.getPooled(O.change,l,n,i);return f.type="change",_.accumulateTwoPhaseDispatches(f),f}}a&&a(t,s,e)}};e.exports=D},{"./EventPluginHub":804,"./EventPropagators":807,"./ReactDOMComponentTree":821,"./ReactUpdates":865,"./SyntheticEvent":874,"./getEventTarget":897,"./isEventSupported":905,"./isTextInputElement":906,"fbjs/lib/ExecutionEnvironment":425}],796:[function(t,e,n){(function(n){"use strict";function r(t,e){return Array.isArray(e)&&(e=e[1]),e?e.nextSibling:t.firstChild}function i(t,e,n){l.insertTreeBefore(t,e,n)}function o(t,e,n){Array.isArray(e)?s(t,e[0],e[1],n):y(t,e,n)}function a(t,e){if(Array.isArray(e)){var n=e[1];e=e[0],u(t,e,n),t.removeChild(n)}t.removeChild(e)}function s(t,e,n,r){for(var i=e;;){var o=i.nextSibling;if(y(t,i,r),i===n)break;i=o}}function u(t,e,n){for(;;){var r=e.nextSibling;if(r===n)break;t.removeChild(r)}}function c(t,e,r){var i=t.parentNode,o=t.nextSibling;o===e?r&&y(i,document.createTextNode(r),o):r?(m(o,r),u(i,o,e)):u(i,t,e),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:h.getInstanceFromNode(t)._debugID,type:"replace text",payload:r})}var l=t("./DOMLazyTree"),f=t("./Danger"),h=t("./ReactDOMComponentTree"),p=t("./ReactInstrumentation"),d=t("./createMicrosoftUnsafeLocalFunction"),v=t("./setInnerHTML"),m=t("./setTextContent"),y=d(function(t,e,n){t.insertBefore(e,n)}),g=f.dangerouslyReplaceNodeWithMarkup;"production"!==n.env.NODE_ENV&&(g=function(t,e,n){if(f.dangerouslyReplaceNodeWithMarkup(t,e),0!==n._debugID)p.debugTool.onHostOperation({instanceID:n._debugID,type:"replace with",payload:e.toString()});else{var r=h.getInstanceFromNode(e.node);0!==r._debugID&&p.debugTool.onHostOperation({instanceID:r._debugID,type:"mount",payload:e.toString()})}});var _={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:c,processUpdates:function(t,e){if("production"!==n.env.NODE_ENV)var s=h.getInstanceFromNode(t)._debugID;for(var u=0;u<e.length;u++){var c=e[u];switch(c.type){case"INSERT_MARKUP":i(t,c.content,r(t,c.afterNode)),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:s,type:"insert child",payload:{toIndex:c.toIndex,content:c.content.toString()}});break;case"MOVE_EXISTING":o(t,c.fromNode,r(t,c.afterNode)),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:s,type:"move child",payload:{fromIndex:c.fromIndex,toIndex:c.toIndex}});break;case"SET_MARKUP":v(t,c.content),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:s,type:"replace children",payload:c.content.toString()});break;case"TEXT_CONTENT":m(t,c.content),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:s,type:"replace text",payload:c.content.toString()});break;case"REMOVE_NODE":a(t,c.fromNode),"production"!==n.env.NODE_ENV&&p.debugTool.onHostOperation({instanceID:s,type:"remove child",payload:{fromIndex:c.fromIndex}})}}}};e.exports=_}).call(this,t("_process"))},{"./DOMLazyTree":797,"./Danger":801,"./ReactDOMComponentTree":821,"./ReactInstrumentation":850,"./createMicrosoftUnsafeLocalFunction":888,"./setInnerHTML":910,"./setTextContent":911,_process:28}],797:[function(t,e,n){"use strict";function r(t){if(d){var e=t.node,n=t.children;if(n.length)for(var r=0;r<n.length;r++)v(e,n[r],null);else null!=t.html?f(e,t.html):null!=t.text&&p(e,t.text)}}function i(t,e){t.parentNode.replaceChild(e.node,t),r(e)}function o(t,e){d?t.children.push(e):t.node.appendChild(e.node)}function a(t,e){d?t.html=e:f(t.node,e)}function s(t,e){d?t.text=e:p(t.node,e)}function u(){return this.node.nodeName}function c(t){return{node:t,children:[],html:null,text:null,toString:u}}var l=t("./DOMNamespaces"),f=t("./setInnerHTML"),h=t("./createMicrosoftUnsafeLocalFunction"),p=t("./setTextContent"),d="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),v=h(function(t,e,n){11===e.node.nodeType||1===e.node.nodeType&&"object"===e.node.nodeName.toLowerCase()&&(null==e.node.namespaceURI||e.node.namespaceURI===l.html)?(r(e),t.insertBefore(e.node,n)):(t.insertBefore(e.node,n),r(e))});c.insertTreeBefore=v,c.replaceChildWithTree=i,c.queueChild=o,c.queueHTML=a,c.queueText=s,e.exports=c},{"./DOMNamespaces":798,"./createMicrosoftUnsafeLocalFunction":888,"./setInnerHTML":910,"./setTextContent":911}],798:[function(t,e,n){"use strict";var r={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};e.exports=r},{}],799:[function(t,e,n){(function(n){"use strict";function r(t,e){return(t&e)===e}var i=t("./reactProdInvariant"),o=t("fbjs/lib/invariant"),a={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(t){var e=a,s=t.Properties||{},c=t.DOMAttributeNamespaces||{},l=t.DOMAttributeNames||{},f=t.DOMPropertyNames||{},h=t.DOMMutationMethods||{};t.isCustomAttribute&&u._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var p in s){u.properties.hasOwnProperty(p)&&("production"!==n.env.NODE_ENV?o(!1,"injectDOMPropertyConfig(...): You're trying to inject DOM property '%s' which has already been injected. You may be accidentally injecting the same DOM property config twice, or you may be injecting two configs that have conflicting property names.",p):i("48",p));var d=p.toLowerCase(),v=s[p],m={attributeName:d,attributeNamespace:null,propertyName:p,mutationMethod:null,mustUseProperty:r(v,e.MUST_USE_PROPERTY),hasBooleanValue:r(v,e.HAS_BOOLEAN_VALUE),hasNumericValue:r(v,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:r(v,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:r(v,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(m.hasBooleanValue+m.hasNumericValue+m.hasOverloadedBooleanValue<=1||("production"!==n.env.NODE_ENV?o(!1,"DOMProperty: Value can be one of boolean, overloaded boolean, or numeric value, but not a combination: %s",p):i("50",p)),"production"!==n.env.NODE_ENV&&(u.getPossibleStandardName[d]=p),l.hasOwnProperty(p)){var y=l[p];m.attributeName=y,"production"!==n.env.NODE_ENV&&(u.getPossibleStandardName[y]=p)}c.hasOwnProperty(p)&&(m.attributeNamespace=c[p]),f.hasOwnProperty(p)&&(m.propertyName=f[p]),h.hasOwnProperty(p)&&(m.mutationMethod=h[p]),u.properties[p]=m}}},s=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",u={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:s,ATTRIBUTE_NAME_CHAR:s+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:"production"!==n.env.NODE_ENV?{autofocus:"autoFocus"}:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<u._isCustomAttributeFunctions.length;e++){if((0,u._isCustomAttributeFunctions[e])(t))return!0}return!1},injection:a};e.exports=u}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],800:[function(t,e,n){(function(n){"use strict";function r(t){return!!h.hasOwnProperty(t)||!f.hasOwnProperty(t)&&(l.test(t)?(h[t]=!0,!0):(f[t]=!0,"production"!==n.env.NODE_ENV&&c(!1,"Invalid attribute name: `%s`",t),!1))}function i(t,e){return null==e||t.hasBooleanValue&&!e||t.hasNumericValue&&isNaN(e)||t.hasPositiveNumericValue&&e<1||t.hasOverloadedBooleanValue&&e===!1}var o=t("./DOMProperty"),a=t("./ReactDOMComponentTree"),s=t("./ReactInstrumentation"),u=t("./quoteAttributeValueForBrowser"),c=t("fbjs/lib/warning"),l=new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$"),f={},h={},p={createMarkupForID:function(t){return o.ID_ATTRIBUTE_NAME+"="+u(t)},setAttributeForID:function(t,e){t.setAttribute(o.ID_ATTRIBUTE_NAME,e)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(t){t.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(t,e){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){if(i(n,e))return"";var r=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&e===!0?r+'=""':r+"="+u(e)}return o.isCustomAttribute(t)?null==e?"":t+"="+u(e):null},createMarkupForCustomAttribute:function(t,e){return r(t)&&null!=e?t+"="+u(e):""},setValueForProperty:function(t,e,r){var u=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(u){var c=u.mutationMethod;if(c)c(t,r);else{if(i(u,r))return void this.deleteValueForProperty(t,e);if(u.mustUseProperty)t[u.propertyName]=r;else{var l=u.attributeName,f=u.attributeNamespace;f?t.setAttributeNS(f,l,""+r):u.hasBooleanValue||u.hasOverloadedBooleanValue&&r===!0?t.setAttribute(l,""):t.setAttribute(l,""+r)}}}else if(o.isCustomAttribute(e))return void p.setValueForAttribute(t,e,r);if("production"!==n.env.NODE_ENV){var h={};h[e]=r,s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(t)._debugID,type:"update attribute",payload:h})}},setValueForAttribute:function(t,e,i){if(r(e)&&(null==i?t.removeAttribute(e):t.setAttribute(e,""+i),"production"!==n.env.NODE_ENV)){var o={};o[e]=i,s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(t)._debugID,type:"update attribute",payload:o})}},deleteValueForAttribute:function(t,e){t.removeAttribute(e),"production"!==n.env.NODE_ENV&&s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(t)._debugID,type:"remove attribute",payload:e})},deleteValueForProperty:function(t,e){var r=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(r){var i=r.mutationMethod;if(i)i(t,void 0);else if(r.mustUseProperty){var u=r.propertyName;r.hasBooleanValue?t[u]=!1:t[u]=""}else t.removeAttribute(r.attributeName)}else o.isCustomAttribute(e)&&t.removeAttribute(e);"production"!==n.env.NODE_ENV&&s.debugTool.onHostOperation({instanceID:a.getInstanceFromNode(t)._debugID,type:"remove attribute",payload:e})}};e.exports=p}).call(this,t("_process"))},{"./DOMProperty":799,"./ReactDOMComponentTree":821,"./ReactInstrumentation":850,"./quoteAttributeValueForBrowser":907,_process:28,"fbjs/lib/warning":446}],801:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("./DOMLazyTree"),o=t("fbjs/lib/ExecutionEnvironment"),a=t("fbjs/lib/createNodesFromMarkup"),s=t("fbjs/lib/emptyFunction"),u=t("fbjs/lib/invariant"),c={dangerouslyReplaceNodeWithMarkup:function(t,e){if(o.canUseDOM||("production"!==n.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot render markup in a worker thread. Make sure `window` and `document` are available globally before requiring React when unit testing or use ReactDOMServer.renderToString() for server rendering."):r("56")),e||("production"!==n.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Missing markup."):r("57")),"HTML"===t.nodeName&&("production"!==n.env.NODE_ENV?u(!1,"dangerouslyReplaceNodeWithMarkup(...): Cannot replace markup of the <html> node. This is because browser quirks make this unreliable and/or slow. If you want to render to the root you must use server rendering. See ReactDOMServer.renderToString()."):r("58")),"string"==typeof e){var c=a(e,s)[0];t.parentNode.replaceChild(c,t)}else i.replaceChildWithTree(t,e)}};e.exports=c}).call(this,t("_process"))},{"./DOMLazyTree":797,"./reactProdInvariant":908,_process:28,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/createNodesFromMarkup":430,"fbjs/lib/emptyFunction":431,"fbjs/lib/invariant":439}],802:[function(t,e,n){"use strict";var r=["ResponderEventPlugin","SimpleEventPlugin","TapEventPlugin","EnterLeaveEventPlugin","ChangeEventPlugin","SelectEventPlugin","BeforeInputEventPlugin"];e.exports=r},{}],803:[function(t,e,n){"use strict";var r=t("./EventPropagators"),i=t("./ReactDOMComponentTree"),o=t("./SyntheticMouseEvent"),a={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},s={eventTypes:a,extractEvents:function(t,e,n,s){if("topMouseOver"===t&&(n.relatedTarget||n.fromElement))return null;if("topMouseOut"!==t&&"topMouseOver"!==t)return null;var u;if(s.window===s)u=s;else{var c=s.ownerDocument;u=c?c.defaultView||c.parentWindow:window}var l,f;if("topMouseOut"===t){l=e;var h=n.relatedTarget||n.toElement;f=h?i.getClosestInstanceFromNode(h):null}else l=null,f=e;if(l===f)return null;var p=null==l?u:i.getNodeFromInstance(l),d=null==f?u:i.getNodeFromInstance(f),v=o.getPooled(a.mouseLeave,l,n,s);v.type="mouseleave",v.target=p,v.relatedTarget=d;var m=o.getPooled(a.mouseEnter,f,n,s);return m.type="mouseenter",m.target=d,m.relatedTarget=p,r.accumulateEnterLeaveDispatches(v,m,l,f),[v,m]}};e.exports=s},{"./EventPropagators":807,"./ReactDOMComponentTree":821,"./SyntheticMouseEvent":878}],804:[function(t,e,n){(function(n){"use strict";function r(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}function i(t,e,n){switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":return!(!n.disabled||!r(e));default:return!1}}var o=t("./reactProdInvariant"),a=t("./EventPluginRegistry"),s=t("./EventPluginUtils"),u=t("./ReactErrorUtils"),c=t("./accumulateInto"),l=t("./forEachAccumulated"),f=t("fbjs/lib/invariant"),h={},p=null,d=function(t,e){t&&(s.executeDispatchesInOrder(t,e),t.isPersistent()||t.constructor.release(t))},v=function(t){return d(t,!0)},m=function(t){return d(t,!1)},y=function(t){return"."+t._rootNodeID},g={injection:{injectEventPluginOrder:a.injectEventPluginOrder,injectEventPluginsByName:a.injectEventPluginsByName},putListener:function(t,e,r){"function"!=typeof r&&("production"!==n.env.NODE_ENV?f(!1,"Expected %s listener to be a function, instead got type %s",e,typeof r):o("94",e,typeof r));var i=y(t);(h[e]||(h[e]={}))[i]=r;var s=a.registrationNameModules[e];s&&s.didPutListener&&s.didPutListener(t,e,r)},getListener:function(t,e){var n=h[e];if(i(e,t._currentElement.type,t._currentElement.props))return null;var r=y(t);return n&&n[r]},deleteListener:function(t,e){var n=a.registrationNameModules[e];n&&n.willDeleteListener&&n.willDeleteListener(t,e);var r=h[e];if(r){delete r[y(t)]}},deleteAllListeners:function(t){var e=y(t);for(var n in h)if(h.hasOwnProperty(n)&&h[n][e]){var r=a.registrationNameModules[n];r&&r.willDeleteListener&&r.willDeleteListener(t,n),delete h[n][e]}},extractEvents:function(t,e,n,r){for(var i,o=a.plugins,s=0;s<o.length;s++){var u=o[s];if(u){var l=u.extractEvents(t,e,n,r);l&&(i=c(i,l))}}return i},enqueueEvents:function(t){t&&(p=c(p,t))},processEventQueue:function(t){var e=p;p=null,t?l(e,v):l(e,m),p&&("production"!==n.env.NODE_ENV?f(!1,"processEventQueue(): Additional events were enqueued while processing an event queue. Support for this has not yet been implemented."):o("95")),u.rethrowCaughtError()},__purge:function(){h={}},__getListenerBank:function(){return h}};e.exports=g}).call(this,t("_process"))},{"./EventPluginRegistry":805,"./EventPluginUtils":806,"./ReactErrorUtils":841,"./accumulateInto":885,"./forEachAccumulated":893,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],805:[function(t,e,n){(function(n){"use strict";function r(){if(u)for(var t in c){var e=c[t],r=u.indexOf(t);if(r>-1||("production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject event plugins that do not exist in the plugin ordering, `%s`.",t):a("96",t)),!l.plugins[r]){e.extractEvents||("production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Event plugins must implement an `extractEvents` method, but `%s` does not.",t):a("97",t)),l.plugins[r]=e;var o=e.eventTypes;for(var f in o)i(o[f],e,f)||("production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Failed to publish event `%s` for plugin `%s`.",f,t):a("98",f,t))}}}function i(t,e,r){l.eventNameDispatchConfigs.hasOwnProperty(r)&&("production"!==n.env.NODE_ENV?s(!1,"EventPluginHub: More than one plugin attempted to publish the same event name, `%s`.",r):a("99",r)),l.eventNameDispatchConfigs[r]=t;var i=t.phasedRegistrationNames;if(i){for(var u in i)if(i.hasOwnProperty(u)){var c=i[u];o(c,e,r)}return!0}return!!t.registrationName&&(o(t.registrationName,e,r),!0)}function o(t,e,r){if(l.registrationNameModules[t]&&("production"!==n.env.NODE_ENV?s(!1,"EventPluginHub: More than one plugin attempted to publish the same registration name, `%s`.",t):a("100",t)),l.registrationNameModules[t]=e,l.registrationNameDependencies[t]=e.eventTypes[r].dependencies,"production"!==n.env.NODE_ENV){var i=t.toLowerCase();l.possibleRegistrationNames[i]=t,"onDoubleClick"===t&&(l.possibleRegistrationNames.ondblclick=t)}}var a=t("./reactProdInvariant"),s=t("fbjs/lib/invariant"),u=null,c={},l={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:"production"!==n.env.NODE_ENV?{}:null,injectEventPluginOrder:function(t){u&&("production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject event plugin ordering more than once. You are likely trying to load more than one copy of React."):a("101")),u=Array.prototype.slice.call(t),r()},injectEventPluginsByName:function(t){var e=!1;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];c.hasOwnProperty(i)&&c[i]===o||(c[i]&&("production"!==n.env.NODE_ENV?s(!1,"EventPluginRegistry: Cannot inject two different event plugins using the same name, `%s`.",i):a("102",i)),c[i]=o,e=!0)}e&&r()},getPluginModuleForEvent:function(t){var e=t.dispatchConfig;if(e.registrationName)return l.registrationNameModules[e.registrationName]||null;if(void 0!==e.phasedRegistrationNames){var n=e.phasedRegistrationNames;for(var r in n)if(n.hasOwnProperty(r)){var i=l.registrationNameModules[n[r]];if(i)return i}}return null},_resetEventPlugins:function(){u=null;for(var t in c)c.hasOwnProperty(t)&&delete c[t];l.plugins.length=0;var e=l.eventNameDispatchConfigs;for(var r in e)e.hasOwnProperty(r)&&delete e[r];var i=l.registrationNameModules;for(var o in i)i.hasOwnProperty(o)&&delete i[o];if("production"!==n.env.NODE_ENV){var a=l.possibleRegistrationNames;for(var s in a)a.hasOwnProperty(s)&&delete a[s]}}};e.exports=l}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],806:[function(t,e,n){(function(n){"use strict";function r(t){return"topMouseUp"===t||"topTouchEnd"===t||"topTouchCancel"===t}function i(t){return"topMouseMove"===t||"topTouchMove"===t}function o(t){return"topMouseDown"===t||"topTouchStart"===t}function a(t,e,n,r){var i=t.type||"unknown-event";t.currentTarget=b.getNodeFromInstance(r),e?m.invokeGuardedCallbackWithCatch(i,n,t):m.invokeGuardedCallback(i,n,t),t.currentTarget=null}function s(t,e){var r=t._dispatchListeners,i=t._dispatchInstances;if("production"!==n.env.NODE_ENV&&d(t),Array.isArray(r))for(var o=0;o<r.length&&!t.isPropagationStopped();o++)a(t,e,r[o],i[o]);else r&&a(t,e,r,i);t._dispatchListeners=null,t._dispatchInstances=null}function u(t){var e=t._dispatchListeners,r=t._dispatchInstances;if("production"!==n.env.NODE_ENV&&d(t),Array.isArray(e)){for(var i=0;i<e.length&&!t.isPropagationStopped();i++)if(e[i](t,r[i]))return r[i]}else if(e&&e(t,r))return r;return null}function c(t){var e=u(t);return t._dispatchInstances=null,t._dispatchListeners=null,e}function l(t){"production"!==n.env.NODE_ENV&&d(t);var e=t._dispatchListeners,r=t._dispatchInstances;Array.isArray(e)&&("production"!==n.env.NODE_ENV?y(!1,"executeDirectDispatch(...): Invalid `event`."):v("103")),t.currentTarget=e?b.getNodeFromInstance(r):null;var i=e?e(t):null;return t.currentTarget=null,t._dispatchListeners=null,t._dispatchInstances=null,i}function f(t){return!!t._dispatchListeners}var h,p,d,v=t("./reactProdInvariant"),m=t("./ReactErrorUtils"),y=t("fbjs/lib/invariant"),g=t("fbjs/lib/warning"),_={injectComponentTree:function(t){h=t,"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&g(t&&t.getNodeFromInstance&&t.getInstanceFromNode,"EventPluginUtils.injection.injectComponentTree(...): Injected module is missing getNodeFromInstance or getInstanceFromNode.")},injectTreeTraversal:function(t){p=t,"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&g(t&&t.isAncestor&&t.getLowestCommonAncestor,"EventPluginUtils.injection.injectTreeTraversal(...): Injected module is missing isAncestor or getLowestCommonAncestor.")}}
;"production"!==n.env.NODE_ENV&&(d=function(t){var e=t._dispatchListeners,r=t._dispatchInstances,i=Array.isArray(e),o=i?e.length:e?1:0,a=Array.isArray(r),s=a?r.length:r?1:0;"production"!==n.env.NODE_ENV&&g(a===i&&s===o,"EventPluginUtils: Invalid `event`.")});var b={isEndish:r,isMoveish:i,isStartish:o,executeDirectDispatch:l,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:c,hasDispatches:f,getInstanceFromNode:function(t){return h.getInstanceFromNode(t)},getNodeFromInstance:function(t){return h.getNodeFromInstance(t)},isAncestor:function(t,e){return p.isAncestor(t,e)},getLowestCommonAncestor:function(t,e){return p.getLowestCommonAncestor(t,e)},getParentInstance:function(t){return p.getParentInstance(t)},traverseTwoPhase:function(t,e,n){return p.traverseTwoPhase(t,e,n)},traverseEnterLeave:function(t,e,n,r,i){return p.traverseEnterLeave(t,e,n,r,i)},injection:_};e.exports=b}).call(this,t("_process"))},{"./ReactErrorUtils":841,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446}],807:[function(t,e,n){(function(n){"use strict";function r(t,e,n){return g(t,e.dispatchConfig.phasedRegistrationNames[n])}function i(t,e,i){"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&y(t,"Dispatching inst must not be null");var o=r(t,i,e);o&&(i._dispatchListeners=v(i._dispatchListeners,o),i._dispatchInstances=v(i._dispatchInstances,t))}function o(t){t&&t.dispatchConfig.phasedRegistrationNames&&d.traverseTwoPhase(t._targetInst,i,t)}function a(t){if(t&&t.dispatchConfig.phasedRegistrationNames){var e=t._targetInst,n=e?d.getParentInstance(e):null;d.traverseTwoPhase(n,i,t)}}function s(t,e,n){if(n&&n.dispatchConfig.registrationName){var r=n.dispatchConfig.registrationName,i=g(t,r);i&&(n._dispatchListeners=v(n._dispatchListeners,i),n._dispatchInstances=v(n._dispatchInstances,t))}}function u(t){t&&t.dispatchConfig.registrationName&&s(t._targetInst,null,t)}function c(t){m(t,o)}function l(t){m(t,a)}function f(t,e,n,r){d.traverseEnterLeave(n,r,s,t,e)}function h(t){m(t,u)}var p=t("./EventPluginHub"),d=t("./EventPluginUtils"),v=t("./accumulateInto"),m=t("./forEachAccumulated"),y=t("fbjs/lib/warning"),g=p.getListener,_={accumulateTwoPhaseDispatches:c,accumulateTwoPhaseDispatchesSkipTarget:l,accumulateDirectDispatches:h,accumulateEnterLeaveDispatches:f};e.exports=_}).call(this,t("_process"))},{"./EventPluginHub":804,"./EventPluginUtils":806,"./accumulateInto":885,"./forEachAccumulated":893,_process:28,"fbjs/lib/warning":446}],808:[function(t,e,n){"use strict";function r(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var i=t("object-assign"),o=t("./PooledClass"),a=t("./getTextContentAccessor");i(r.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,n=this._startText,r=n.length,i=this.getText(),o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);var s=e>1?1-e:void 0;return this._fallbackText=i.slice(t,s),this._fallbackText}}),o.addPoolingTo(r),e.exports=r},{"./PooledClass":812,"./getTextContentAccessor":902,"object-assign":759}],809:[function(t,e,n){"use strict";var r=t("./DOMProperty"),i=r.injection.MUST_USE_PROPERTY,o=r.injection.HAS_BOOLEAN_VALUE,a=r.injection.HAS_NUMERIC_VALUE,s=r.injection.HAS_POSITIVE_NUMERIC_VALUE,u=r.injection.HAS_OVERLOADED_BOOLEAN_VALUE,c={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+r.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:i|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:u,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:i|o,muted:i|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:i|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};e.exports=c},{"./DOMProperty":799}],810:[function(t,e,n){"use strict";function r(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function i(t){var e={"=0":"=","=2":":"};return(""+("."===t[0]&&"$"===t[1]?t.substring(2):t.substring(1))).replace(/(=0|=2)/g,function(t){return e[t]})}var o={escape:r,unescape:i};e.exports=o},{}],811:[function(t,e,n){(function(n){"use strict";function r(t){null!=t.checkedLink&&null!=t.valueLink&&("production"!==n.env.NODE_ENV?l(!1,"Cannot provide a checkedLink and a valueLink. If you want to use checkedLink, you probably don't want to use valueLink and vice versa."):s("87"))}function i(t){r(t),(null!=t.value||null!=t.onChange)&&("production"!==n.env.NODE_ENV?l(!1,"Cannot provide a valueLink and a value or onChange event. If you want to use value or onChange, you probably don't want to use valueLink."):s("88"))}function o(t){r(t),(null!=t.checked||null!=t.onChange)&&("production"!==n.env.NODE_ENV?l(!1,"Cannot provide a checkedLink and a checked property or onChange event. If you want to use checked or onChange, you probably don't want to use checkedLink"):s("89"))}function a(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}var s=t("./reactProdInvariant"),u=t("react/lib/React"),c=t("./ReactPropTypesSecret"),l=t("fbjs/lib/invariant"),f=t("fbjs/lib/warning"),h={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},p={value:function(t,e,n){return!t[e]||h[t.type]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(t,e,n){return!t[e]||t.onChange||t.readOnly||t.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:u.PropTypes.func},d={},v={checkPropTypes:function(t,e,r){for(var i in p){if(p.hasOwnProperty(i))var o=p[i](e,i,t,"prop",null,c);if(o instanceof Error&&!(o.message in d)){d[o.message]=!0;var s=a(r);"production"!==n.env.NODE_ENV&&f(!1,"Failed form propType: %s%s",o.message,s)}}},getValue:function(t){return t.valueLink?(i(t),t.valueLink.value):t.value},getChecked:function(t){return t.checkedLink?(o(t),t.checkedLink.value):t.checked},executeOnChange:function(t,e){return t.valueLink?(i(t),t.valueLink.requestChange(e.target.value)):t.checkedLink?(o(t),t.checkedLink.requestChange(e.target.checked)):t.onChange?t.onChange.call(void 0,e):void 0}};e.exports=v}).call(this,t("_process"))},{"./ReactPropTypesSecret":858,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/React":934}],812:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("fbjs/lib/invariant"),o=function(t){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,t),n}return new e(t)},a=function(t,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,t,e),r}return new n(t,e)},s=function(t,e,n){var r=this;if(r.instancePool.length){var i=r.instancePool.pop();return r.call(i,t,e,n),i}return new r(t,e,n)},u=function(t,e,n,r){var i=this;if(i.instancePool.length){var o=i.instancePool.pop();return i.call(o,t,e,n,r),o}return new i(t,e,n,r)},c=function(t){var e=this;t instanceof e||("production"!==n.env.NODE_ENV?i(!1,"Trying to release an instance into a pool of a different type."):r("25")),t.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(t)},l=o,f=function(t,e){var n=t;return n.instancePool=[],n.getPooled=e||l,n.poolSize||(n.poolSize=10),n.release=c,n},h={addPoolingTo:f,oneArgumentPooler:o,twoArgumentPooler:a,threeArgumentPooler:s,fourArgumentPooler:u};e.exports=h}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],813:[function(t,e,n){"use strict";function r(t){return Object.prototype.hasOwnProperty.call(t,v)||(t[v]=p++,f[t[v]]={}),f[t[v]]}var i,o=t("object-assign"),a=t("./EventPluginRegistry"),s=t("./ReactEventEmitterMixin"),u=t("./ViewportMetrics"),c=t("./getVendorPrefixedEventName"),l=t("./isEventSupported"),f={},h=!1,p=0,d={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),m=o({},s,{ReactEventListener:null,injection:{injectReactEventListener:function(t){t.setHandleTopLevel(m.handleTopLevel),m.ReactEventListener=t}},setEnabled:function(t){m.ReactEventListener&&m.ReactEventListener.setEnabled(t)},isEnabled:function(){return!(!m.ReactEventListener||!m.ReactEventListener.isEnabled())},listenTo:function(t,e){for(var n=e,i=r(n),o=a.registrationNameDependencies[t],s=0;s<o.length;s++){var u=o[s];i.hasOwnProperty(u)&&i[u]||("topWheel"===u?l("wheel")?m.ReactEventListener.trapBubbledEvent("topWheel","wheel",n):l("mousewheel")?m.ReactEventListener.trapBubbledEvent("topWheel","mousewheel",n):m.ReactEventListener.trapBubbledEvent("topWheel","DOMMouseScroll",n):"topScroll"===u?l("scroll",!0)?m.ReactEventListener.trapCapturedEvent("topScroll","scroll",n):m.ReactEventListener.trapBubbledEvent("topScroll","scroll",m.ReactEventListener.WINDOW_HANDLE):"topFocus"===u||"topBlur"===u?(l("focus",!0)?(m.ReactEventListener.trapCapturedEvent("topFocus","focus",n),m.ReactEventListener.trapCapturedEvent("topBlur","blur",n)):l("focusin")&&(m.ReactEventListener.trapBubbledEvent("topFocus","focusin",n),m.ReactEventListener.trapBubbledEvent("topBlur","focusout",n)),i.topBlur=!0,i.topFocus=!0):d.hasOwnProperty(u)&&m.ReactEventListener.trapBubbledEvent(u,d[u],n),i[u]=!0)}},trapBubbledEvent:function(t,e,n){return m.ReactEventListener.trapBubbledEvent(t,e,n)},trapCapturedEvent:function(t,e,n){return m.ReactEventListener.trapCapturedEvent(t,e,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var t=document.createEvent("MouseEvent");return null!=t&&"pageX"in t},ensureScrollValueMonitoring:function(){if(void 0===i&&(i=m.supportsEventPageXY()),!i&&!h){var t=u.refreshScrollValues;m.ReactEventListener.monitorScrollValue(t),h=!0}}});e.exports=m},{"./EventPluginRegistry":805,"./ReactEventEmitterMixin":842,"./ViewportMetrics":884,"./getVendorPrefixedEventName":903,"./isEventSupported":905,"object-assign":759}],814:[function(t,e,n){(function(n){"use strict";function r(e,r,o,u){var c=void 0===e[o];"production"!==n.env.NODE_ENV&&(i||(i=t("react/lib/ReactComponentTreeHook")),c||"production"!==n.env.NODE_ENV&&l(!1,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.%s",s.unescape(o),i.getStackAddendumByID(u))),null!=r&&c&&(e[o]=a(r,!0))}var i,o=t("./ReactReconciler"),a=t("./instantiateReactComponent"),s=t("./KeyEscapeUtils"),u=t("./shouldUpdateReactComponent"),c=t("./traverseAllChildren"),l=t("fbjs/lib/warning");void 0!==n&&n.env&&"test"===n.env.NODE_ENV&&(i=t("react/lib/ReactComponentTreeHook"));var f={instantiateChildren:function(t,e,i,o){if(null==t)return null;var a={};return"production"!==n.env.NODE_ENV?c(t,function(t,e,n){return r(t,e,n,o)},a):c(t,r,a),a},updateChildren:function(t,e,n,r,i,s,c,l,f){if(e||t){var h,p;for(h in e)if(e.hasOwnProperty(h)){p=t&&t[h];var d=p&&p._currentElement,v=e[h];if(null!=p&&u(d,v))o.receiveComponent(p,v,i,l),e[h]=p;else{p&&(r[h]=o.getHostNode(p),o.unmountComponent(p,!1));var m=a(v,!0);e[h]=m;var y=o.mountComponent(m,i,s,c,l,f);n.push(y)}}for(h in t)!t.hasOwnProperty(h)||e&&e.hasOwnProperty(h)||(p=t[h],r[h]=o.getHostNode(p),o.unmountComponent(p,!1))}},unmountChildren:function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];o.unmountComponent(r,e)}}};e.exports=f}).call(this,t("_process"))},{"./KeyEscapeUtils":810,"./ReactReconciler":860,"./instantiateReactComponent":904,"./shouldUpdateReactComponent":912,"./traverseAllChildren":913,_process:28,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],815:[function(t,e,n){"use strict";var r=t("./DOMChildrenOperations"),i=t("./ReactDOMIDOperations"),o={processChildrenUpdates:i.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:r.dangerouslyReplaceNodeWithMarkup};e.exports=o},{"./DOMChildrenOperations":796,"./ReactDOMIDOperations":825}],816:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("fbjs/lib/invariant"),o=!1,a={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(t){o&&("production"!==n.env.NODE_ENV?i(!1,"ReactCompositeComponent: injectEnvironment() can only be called once."):r("104")),a.replaceNodeWithMarkup=t.replaceNodeWithMarkup,a.processChildrenUpdates=t.processChildrenUpdates,o=!0}}};e.exports=a}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],817:[function(t,e,n){(function(n){"use strict";function r(t){}function i(t,e){"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV&&E(null===e||e===!1||l.isValidElement(e),"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",t.displayName||t.name||"Component"),"production"!==n.env.NODE_ENV&&E(!t.childContextTypes,"%s(...): childContextTypes cannot be defined on a functional component.",t.displayName||t.name||"Component"))}function o(t){return!(!t.prototype||!t.prototype.isReactComponent)}function a(t){return!(!t.prototype||!t.prototype.isPureReactComponent)}function s(t,e,n){if(0===e)return t();v.debugTool.onBeginLifeCycleTimer(e,n);try{return t()}finally{v.debugTool.onEndLifeCycleTimer(e,n)}}var u=t("./reactProdInvariant"),c=t("object-assign"),l=t("react/lib/React"),f=t("./ReactComponentEnvironment"),h=t("react/lib/ReactCurrentOwner"),p=t("./ReactErrorUtils"),d=t("./ReactInstanceMap"),v=t("./ReactInstrumentation"),m=t("./ReactNodeTypes"),y=t("./ReactReconciler");if("production"!==n.env.NODE_ENV)var g=t("./checkReactTypeSpec");var _=t("fbjs/lib/emptyObject"),b=t("fbjs/lib/invariant"),w=t("fbjs/lib/shallowEqual"),x=t("./shouldUpdateReactComponent"),E=t("fbjs/lib/warning"),T={ImpureClass:0,PureClass:1,StatelessFunctional:2};r.prototype.render=function(){var t=d.get(this)._currentElement.type,e=t(this.props,this.context,this.updater);return i(t,e),e};var S=1,M={construct:function(t){this._currentElement=t,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1,"production"!==n.env.NODE_ENV&&(this._warnedAboutRefsInRender=!1)},mountComponent:function(t,e,c,f){var h=this;this._context=f,this._mountOrder=S++,this._hostParent=e,this._hostContainerInfo=c;var p,v=this._currentElement.props,m=this._processContext(f),y=this._currentElement.type,g=t.getUpdateQueue(),w=o(y),x=this._constructComponent(w,v,m,g);if(w||null!=x&&null!=x.render?a(y)?this._compositeType=T.PureClass:this._compositeType=T.ImpureClass:(p=x,i(y,p),null===x||x===!1||l.isValidElement(x)||("production"!==n.env.NODE_ENV?b(!1,"%s(...): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",y.displayName||y.name||"Component"):u("105",y.displayName||y.name||"Component")),x=new r(y),this._compositeType=T.StatelessFunctional),"production"!==n.env.NODE_ENV){null==x.render&&"production"!==n.env.NODE_ENV&&E(!1,"%s(...): No `render` method found on the returned component instance: you may have forgotten to define `render`.",y.displayName||y.name||"Component");var M=x.props!==v,O=y.displayName||y.name||"Component";"production"!==n.env.NODE_ENV&&E(void 0===x.props||!M,"%s(...): When calling super() in `%s`, make sure to pass up the same props that your component's constructor was passed.",O,O)}x.props=v,x.context=m,x.refs=_,x.updater=g,this._instance=x,d.set(x,this),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV&&E(!x.getInitialState||x.getInitialState.isReactClassApproved||x.state,"getInitialState was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Did you mean to define a state property instead?",this.getName()||"a component"),"production"!==n.env.NODE_ENV&&E(!x.getDefaultProps||x.getDefaultProps.isReactClassApproved,"getDefaultProps was defined on %s, a plain JavaScript class. This is only supported for classes created using React.createClass. Use a static property to define defaultProps instead.",this.getName()||"a component"),"production"!==n.env.NODE_ENV&&E(!x.propTypes,"propTypes was defined as an instance property on %s. Use a static property to define propTypes instead.",this.getName()||"a component"),"production"!==n.env.NODE_ENV&&E(!x.contextTypes,"contextTypes was defined as an instance property on %s. Use a static property to define contextTypes instead.",this.getName()||"a component"),"production"!==n.env.NODE_ENV&&E("function"!=typeof x.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",this.getName()||"A component"),"production"!==n.env.NODE_ENV&&E("function"!=typeof x.componentDidUnmount,"%s has a method called componentDidUnmount(). But there is no such lifecycle method. Did you mean componentWillUnmount()?",this.getName()||"A component"),"production"!==n.env.NODE_ENV&&E("function"!=typeof x.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",this.getName()||"A component"));var A=x.state;void 0===A&&(x.state=A=null),("object"!=typeof A||Array.isArray(A))&&("production"!==n.env.NODE_ENV?b(!1,"%s.state: must be set to an object or null",this.getName()||"ReactCompositeComponent"):u("106",this.getName()||"ReactCompositeComponent")),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var R;return R=x.unstable_handleError?this.performInitialMountWithErrorHandling(p,e,c,t,f):this.performInitialMount(p,e,c,t,f),x.componentDidMount&&("production"!==n.env.NODE_ENV?t.getReactMountReady().enqueue(function(){s(function(){return x.componentDidMount()},h._debugID,"componentDidMount")}):t.getReactMountReady().enqueue(x.componentDidMount,x)),R},_constructComponent:function(t,e,r,i){if("production"===n.env.NODE_ENV)return this._constructComponentWithoutOwner(t,e,r,i);h.current=this;try{return this._constructComponentWithoutOwner(t,e,r,i)}finally{h.current=null}},_constructComponentWithoutOwner:function(t,e,r,i){var o=this._currentElement.type;return t?"production"!==n.env.NODE_ENV?s(function(){return new o(e,r,i)},this._debugID,"ctor"):new o(e,r,i):"production"!==n.env.NODE_ENV?s(function(){return o(e,r,i)},this._debugID,"render"):o(e,r,i)},performInitialMountWithErrorHandling:function(t,e,n,r,i){var o,a=r.checkpoint();try{o=this.performInitialMount(t,e,n,r,i)}catch(s){r.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=r.checkpoint(),this._renderedComponent.unmountComponent(!0),r.rollback(a),o=this.performInitialMount(t,e,n,r,i)}return o},performInitialMount:function(t,e,r,i,o){var a=this._instance,u=0;"production"!==n.env.NODE_ENV&&(u=this._debugID),a.componentWillMount&&("production"!==n.env.NODE_ENV?s(function(){return a.componentWillMount()},u,"componentWillMount"):a.componentWillMount(),this._pendingStateQueue&&(a.state=this._processPendingState(a.props,a.context))),void 0===t&&(t=this._renderValidatedComponent());var c=m.getType(t);this._renderedNodeType=c;var l=this._instantiateReactComponent(t,c!==m.EMPTY);this._renderedComponent=l;var f=y.mountComponent(l,i,e,r,this._processChildContext(o),u);if("production"!==n.env.NODE_ENV&&0!==u){var h=0!==l._debugID?[l._debugID]:[];v.debugTool.onSetChildren(u,h)}return f},getHostNode:function(){return y.getHostNode(this._renderedComponent)},unmountComponent:function(t){if(this._renderedComponent){var e=this._instance;if(e.componentWillUnmount&&!e._calledComponentWillUnmount)if(e._calledComponentWillUnmount=!0,t){var r=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(r,e.componentWillUnmount.bind(e))}else"production"!==n.env.NODE_ENV?s(function(){return e.componentWillUnmount()},this._debugID,"componentWillUnmount"):e.componentWillUnmount();this._renderedComponent&&(y.unmountComponent(this._renderedComponent,t),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,d.remove(e)}},_maskContext:function(t){var e=this._currentElement.type,n=e.contextTypes;if(!n)return _;var r={};for(var i in n)r[i]=t[i];return r},_processContext:function(t){var e=this._maskContext(t);if("production"!==n.env.NODE_ENV){var r=this._currentElement.type;r.contextTypes&&this._checkContextTypes(r.contextTypes,e,"context")}return e},_processChildContext:function(t){var e,r=this._currentElement.type,i=this._instance;if(i.getChildContext)if("production"!==n.env.NODE_ENV){v.debugTool.onBeginProcessingChildContext();try{e=i.getChildContext()}finally{v.debugTool.onEndProcessingChildContext()}}else e=i.getChildContext();if(e){"object"!=typeof r.childContextTypes&&("production"!==n.env.NODE_ENV?b(!1,"%s.getChildContext(): childContextTypes must be defined in order to use getChildContext().",this.getName()||"ReactCompositeComponent"):u("107",this.getName()||"ReactCompositeComponent")),"production"!==n.env.NODE_ENV&&this._checkContextTypes(r.childContextTypes,e,"childContext");for(var o in e)o in r.childContextTypes||("production"!==n.env.NODE_ENV?b(!1,'%s.getChildContext(): key "%s" is not defined in childContextTypes.',this.getName()||"ReactCompositeComponent",o):u("108",this.getName()||"ReactCompositeComponent",o));return c({},t,e)}return t},_checkContextTypes:function(t,e,r){"production"!==n.env.NODE_ENV&&g(t,e,r,this.getName(),null,this._debugID)},receiveComponent:function(t,e,n){var r=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(e,r,t,i,n)},performUpdateIfNecessary:function(t){null!=this._pendingElement?y.receiveComponent(this,this._pendingElement,t,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(t,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(t,e,r,i,o){var a=this._instance;null==a&&("production"!==n.env.NODE_ENV?b(!1,"Attempted to update component `%s` that has already been unmounted (or failed to mount).",this.getName()||"ReactCompositeComponent"):u("136",this.getName()||"ReactCompositeComponent"));var c,l=!1;this._context===o?c=a.context:(c=this._processContext(o),l=!0);var f=e.props,h=r.props;e!==r&&(l=!0),l&&a.componentWillReceiveProps&&("production"!==n.env.NODE_ENV?s(function(){return a.componentWillReceiveProps(h,c)},this._debugID,"componentWillReceiveProps"):a.componentWillReceiveProps(h,c));var p=this._processPendingState(h,c),d=!0;this._pendingForceUpdate||(a.shouldComponentUpdate?d="production"!==n.env.NODE_ENV?s(function(){return a.shouldComponentUpdate(h,p,c)},this._debugID,"shouldComponentUpdate"):a.shouldComponentUpdate(h,p,c):this._compositeType===T.PureClass&&(d=!w(f,h)||!w(a.state,p))),"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&E(void 0!==d,"%s.shouldComponentUpdate(): Returned undefined instead of a boolean value. Make sure to return true or false.",this.getName()||"ReactCompositeComponent"),this._updateBatchNumber=null,d?(this._pendingForceUpdate=!1,this._performComponentUpdate(r,h,p,c,t,o)):(this._currentElement=r,this._context=o,a.props=h,a.state=p,a.context=c)},_processPendingState:function(t,e){var n=this._instance,r=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!r)return n.state;if(i&&1===r.length)return r[0];for(var o=c({},i?r[0]:n.state),a=i?1:0;a<r.length;a++){var s=r[a];c(o,"function"==typeof s?s.call(n,o,t,e):s)}return o},_performComponentUpdate:function(t,e,r,i,o,a){var u,c,l,f=this,h=this._instance,p=Boolean(h.componentDidUpdate);p&&(u=h.props,c=h.state,l=h.context),h.componentWillUpdate&&("production"!==n.env.NODE_ENV?s(function(){return h.componentWillUpdate(e,r,i)},this._debugID,"componentWillUpdate"):h.componentWillUpdate(e,r,i)),this._currentElement=t,this._context=a,h.props=e,h.state=r,h.context=i,this._updateRenderedComponent(o,a),p&&("production"!==n.env.NODE_ENV?o.getReactMountReady().enqueue(function(){s(h.componentDidUpdate.bind(h,u,c,l),f._debugID,"componentDidUpdate")}):o.getReactMountReady().enqueue(h.componentDidUpdate.bind(h,u,c,l),h))},_updateRenderedComponent:function(t,e){var r=this._renderedComponent,i=r._currentElement,o=this._renderValidatedComponent(),a=0;if("production"!==n.env.NODE_ENV&&(a=this._debugID),x(i,o))y.receiveComponent(r,o,t,this._processChildContext(e));else{var s=y.getHostNode(r);y.unmountComponent(r,!1);var u=m.getType(o);this._renderedNodeType=u;var c=this._instantiateReactComponent(o,u!==m.EMPTY);this._renderedComponent=c;var l=y.mountComponent(c,t,this._hostParent,this._hostContainerInfo,this._processChildContext(e),a);if("production"!==n.env.NODE_ENV&&0!==a){var f=0!==c._debugID?[c._debugID]:[];v.debugTool.onSetChildren(a,f)}this._replaceNodeWithMarkup(s,l,r)}},_replaceNodeWithMarkup:function(t,e,n){f.replaceNodeWithMarkup(t,e,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var t,e=this._instance;return t="production"!==n.env.NODE_ENV?s(function(){return e.render()},this._debugID,"render"):e.render(),"production"!==n.env.NODE_ENV&&void 0===t&&e.render._isMockFunction&&(t=null),t},_renderValidatedComponent:function(){var t;if("production"!==n.env.NODE_ENV||this._compositeType!==T.StatelessFunctional){h.current=this;try{t=this._renderValidatedComponentWithoutOwnerOrContext()}finally{h.current=null}}else t=this._renderValidatedComponentWithoutOwnerOrContext();return null===t||t===!1||l.isValidElement(t)||("production"!==n.env.NODE_ENV?b(!1,"%s.render(): A valid React element (or null) must be returned. You may have returned undefined, an array or some other invalid object.",this.getName()||"ReactCompositeComponent"):u("109",this.getName()||"ReactCompositeComponent")),t},attachRef:function(t,e){var r=this.getPublicInstance();null==r&&("production"!==n.env.NODE_ENV?b(!1,"Stateless function components cannot have refs."):u("110"));var i=e.getPublicInstance();if("production"!==n.env.NODE_ENV){var o=e&&e.getName?e.getName():"a component";"production"!==n.env.NODE_ENV&&E(null!=i||e._compositeType!==T.StatelessFunctional,'Stateless function components cannot be given refs (See ref "%s" in %s created by %s). Attempts to access this ref will fail.',t,o,this.getName())}(r.refs===_?r.refs={}:r.refs)[t]=i},detachRef:function(t){delete this.getPublicInstance().refs[t]},getName:function(){var t=this._currentElement.type,e=this._instance&&this._instance.constructor;return t.displayName||e&&e.displayName||t.name||e&&e.name||null},getPublicInstance:function(){var t=this._instance;return this._compositeType===T.StatelessFunctional?null:t},_instantiateReactComponent:null};e.exports=M}).call(this,t("_process"))},{"./ReactComponentEnvironment":816,"./ReactErrorUtils":841,"./ReactInstanceMap":849,"./ReactInstrumentation":850,"./ReactNodeTypes":855,"./ReactReconciler":860,"./checkReactTypeSpec":887,"./reactProdInvariant":908,"./shouldUpdateReactComponent":912,_process:28,"fbjs/lib/emptyObject":432,"fbjs/lib/invariant":439,"fbjs/lib/shallowEqual":445,"fbjs/lib/warning":446,"object-assign":759,"react/lib/React":934,"react/lib/ReactCurrentOwner":939}],818:[function(t,e,n){(function(n){"use strict";var r=t("./ReactDOMComponentTree"),i=t("./ReactDefaultInjection"),o=t("./ReactMount"),a=t("./ReactReconciler"),s=t("./ReactUpdates"),u=t("./ReactVersion"),c=t("./findDOMNode"),l=t("./getHostComponentFromComposite"),f=t("./renderSubtreeIntoContainer"),h=t("fbjs/lib/warning");i.inject();var p={findDOMNode:c,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:u,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:f};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:r.getClosestInstanceFromNode,getNodeFromInstance:function(t){return t._renderedComponent&&(t=l(t)),t?r.getNodeFromInstance(t):null}},Mount:o,Reconciler:a}),"production"!==n.env.NODE_ENV){
if(t("fbjs/lib/ExecutionEnvironment").canUseDOM&&window.top===window.self){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&(navigator.userAgent.indexOf("Chrome")>-1&&navigator.userAgent.indexOf("Edge")===-1||navigator.userAgent.indexOf("Firefox")>-1)){var d=window.location.protocol.indexOf("http")===-1&&navigator.userAgent.indexOf("Firefox")===-1;console.debug("Download the React DevTools "+(d?"and use an HTTP server (instead of a file: URL) ":"")+"for a better development experience: https://fb.me/react-devtools")}var v=function(){};"production"!==n.env.NODE_ENV&&h((v.name||v.toString()).indexOf("testFn")!==-1,"It looks like you're using a minified copy of the development build of React. When deploying React apps to production, make sure to use the production build which skips development warnings and is faster. See https://fb.me/react-minification for more details.");var m=document.documentMode&&document.documentMode<8;"production"!==n.env.NODE_ENV&&h(!m,'Internet Explorer is running in compatibility mode; please add the following tag to your HTML to prevent this from happening: <meta http-equiv="X-UA-Compatible" content="IE=edge" />');for(var y=[Array.isArray,Array.prototype.every,Array.prototype.forEach,Array.prototype.indexOf,Array.prototype.map,Date.now,Function.prototype.bind,Object.keys,String.prototype.trim],g=0;g<y.length;g++)if(!y[g]){"production"!==n.env.NODE_ENV&&h(!1,"One or more ES5 shims expected by React are not available: https://fb.me/react-warning-polyfills");break}}}if("production"!==n.env.NODE_ENV){var _=t("./ReactInstrumentation"),b=t("./ReactDOMUnknownPropertyHook"),w=t("./ReactDOMNullInputValuePropHook"),x=t("./ReactDOMInvalidARIAHook");_.debugTool.addHook(b),_.debugTool.addHook(w),_.debugTool.addHook(x)}e.exports=p}).call(this,t("_process"))},{"./ReactDOMComponentTree":821,"./ReactDOMInvalidARIAHook":827,"./ReactDOMNullInputValuePropHook":828,"./ReactDOMUnknownPropertyHook":835,"./ReactDefaultInjection":838,"./ReactInstrumentation":850,"./ReactMount":853,"./ReactReconciler":860,"./ReactUpdates":865,"./ReactVersion":866,"./findDOMNode":891,"./getHostComponentFromComposite":898,"./renderSubtreeIntoContainer":909,_process:28,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/warning":446}],819:[function(t,e,n){(function(n){"use strict";function r(t){if(t){var e=t._currentElement._owner||null;if(e){var n=e.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function i(t){if("object"==typeof t){if(Array.isArray(t))return"["+t.map(i).join(", ")+"]";var e=[];for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=/^[a-z$_][\w$_]*$/i.test(n)?n:JSON.stringify(n);e.push(r+": "+i(t[n]))}return"{"+e.join(", ")+"}"}return"string"==typeof t?JSON.stringify(t):"function"==typeof t?"[function object]":String(t)}function o(t,e,r){if(null!=t&&null!=e&&!B(t,e)){var o,a=r._tag,s=r._currentElement._owner;s&&(o=s.getName());var u=o+"|"+a;Q.hasOwnProperty(u)||(Q[u]=!0,"production"!==n.env.NODE_ENV&&G(!1,"`%s` was passed a style object that has previously been mutated. Mutating `style` is deprecated. Consider cloning it beforehand. Check the `render` %s. Previous style: %s. Mutated style: %s.",a,s?"of `"+o+"`":"using <"+a+">",i(t),i(e)))}}function a(t,e){e&&(nt[t._tag]&&(null!=e.children||null!=e.dangerouslySetInnerHTML)&&("production"!==n.env.NODE_ENV?U(!1,"%s is a void element tag and must neither have `children` nor use `dangerouslySetInnerHTML`.%s",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":""):y("137",t._tag,t._currentElement._owner?" Check the render method of "+t._currentElement._owner.getName()+".":"")),null!=e.dangerouslySetInnerHTML&&(null!=e.children&&("production"!==n.env.NODE_ENV?U(!1,"Can only set one of `children` or `props.dangerouslySetInnerHTML`."):y("60")),"object"==typeof e.dangerouslySetInnerHTML&&"__html"in e.dangerouslySetInnerHTML||("production"!==n.env.NODE_ENV?U(!1,"`props.dangerouslySetInnerHTML` must be in the form `{__html: ...}`. Please visit https://fb.me/react-invariant-dangerously-set-inner-html for more information."):y("61"))),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV&&G(null==e.innerHTML,"Directly setting property `innerHTML` is not permitted. For more information, lookup documentation on `dangerouslySetInnerHTML`."),"production"!==n.env.NODE_ENV&&G(e.suppressContentEditableWarning||!e.contentEditable||null==e.children,"A component is `contentEditable` and contains `children` managed by React. It is now your responsibility to guarantee that none of those nodes are unexpectedly modified or duplicated. This is probably not intentional."),"production"!==n.env.NODE_ENV&&G(null==e.onFocusIn&&null==e.onFocusOut,"React uses onFocus and onBlur instead of onFocusIn and onFocusOut. All React events are normalized to bubble, so onFocusIn and onFocusOut are not needed/supported by React.")),null!=e.style&&"object"!=typeof e.style&&("production"!==n.env.NODE_ENV?U(!1,"The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.%s",r(t)):y("62",r(t))))}function s(t,e,r,i){if(!(i instanceof j)){"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&G("onScroll"!==e||z("scroll",!0),"This browser doesn't support the `onScroll` event");var o=t._hostContainerInfo;Y(e,o._node&&11===o._node.nodeType?o._node:o._ownerDocument),i.getReactMountReady().enqueue(u,{inst:t,registrationName:e,listener:r})}}function u(){var t=this;S.putListener(t.inst,t.registrationName,t.listener)}function c(){var t=this;I.postMountWrapper(t)}function l(){var t=this;N.postMountWrapper(t)}function f(){var t=this;k.postMountWrapper(t)}function h(){var t=this;t._rootNodeID||("production"!==n.env.NODE_ENV?U(!1,"Must be mounted to trap events"):y("63"));var e=q(t);switch(e||("production"!==n.env.NODE_ENV?U(!1,"trapBubbledEvent(...): Requires node to be rendered."):y("64")),t._tag){case"iframe":case"object":t._wrapperState.listeners=[O.trapBubbledEvent("topLoad","load",e)];break;case"video":case"audio":t._wrapperState.listeners=[];for(var r in $)$.hasOwnProperty(r)&&t._wrapperState.listeners.push(O.trapBubbledEvent(r,$[r],e));break;case"source":t._wrapperState.listeners=[O.trapBubbledEvent("topError","error",e)];break;case"img":t._wrapperState.listeners=[O.trapBubbledEvent("topError","error",e),O.trapBubbledEvent("topLoad","load",e)];break;case"form":t._wrapperState.listeners=[O.trapBubbledEvent("topReset","reset",e),O.trapBubbledEvent("topSubmit","submit",e)];break;case"input":case"select":case"textarea":t._wrapperState.listeners=[O.trapBubbledEvent("topInvalid","invalid",e)]}}function p(){P.postUpdateWrapper(this)}function d(t){ot.call(it,t)||(rt.test(t)||("production"!==n.env.NODE_ENV?U(!1,"Invalid tag: %s",t):y("65",t)),it[t]=!0)}function v(t,e){return t.indexOf("-")>=0||null!=e.is}function m(t){var e=t.type;d(e),this._currentElement=t,this._tag=e.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0,"production"!==n.env.NODE_ENV&&(this._ancestorInfo=null,J.call(this,null))}var y=t("./reactProdInvariant"),g=t("object-assign"),_=t("./AutoFocusUtils"),b=t("./CSSPropertyOperations"),w=t("./DOMLazyTree"),x=t("./DOMNamespaces"),E=t("./DOMProperty"),T=t("./DOMPropertyOperations"),S=t("./EventPluginHub"),M=t("./EventPluginRegistry"),O=t("./ReactBrowserEventEmitter"),A=t("./ReactDOMComponentFlags"),R=t("./ReactDOMComponentTree"),I=t("./ReactDOMInput"),k=t("./ReactDOMOption"),P=t("./ReactDOMSelect"),N=t("./ReactDOMTextarea"),C=t("./ReactInstrumentation"),D=t("./ReactMultiChild"),j=t("./ReactServerRenderingTransaction"),L=t("fbjs/lib/emptyFunction"),F=t("./escapeTextContentForBrowser"),U=t("fbjs/lib/invariant"),z=t("./isEventSupported"),B=t("fbjs/lib/shallowEqual"),V=t("./validateDOMNesting"),G=t("fbjs/lib/warning"),H=A,W=S.deleteListener,q=R.getNodeFromInstance,Y=O.listenTo,X=M.registrationNameModules,Z={string:!0,number:!0},K={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},Q={},J=L;"production"!==n.env.NODE_ENV&&(J=function(t){var e=null!=this._contentDebugID,n=this._debugID,r=-n;if(null==t)return e&&C.debugTool.onUnmountComponent(this._contentDebugID),void(this._contentDebugID=null);V(null,String(t),this,this._ancestorInfo),this._contentDebugID=r,e?(C.debugTool.onBeforeUpdateComponent(r,t),C.debugTool.onUpdateComponent(r)):(C.debugTool.onBeforeMountComponent(r,t,n),C.debugTool.onMountComponent(r),C.debugTool.onSetChildren(n,[r]))});var $={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},tt={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},et={listing:!0,pre:!0,textarea:!0},nt=g({menuitem:!0},tt),rt=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,it={},ot={}.hasOwnProperty,at=1;m.displayName="ReactDOMComponent",m.Mixin={mountComponent:function(t,e,r,i){this._rootNodeID=at++,this._domID=r._idCounter++,this._hostParent=e,this._hostContainerInfo=r;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(h,this);break;case"input":I.mountWrapper(this,o,e),o=I.getHostProps(this,o),t.getReactMountReady().enqueue(h,this);break;case"option":k.mountWrapper(this,o,e),o=k.getHostProps(this,o);break;case"select":P.mountWrapper(this,o,e),o=P.getHostProps(this,o),t.getReactMountReady().enqueue(h,this);break;case"textarea":N.mountWrapper(this,o,e),o=N.getHostProps(this,o),t.getReactMountReady().enqueue(h,this)}a(this,o);var s,u;if(null!=e?(s=e._namespaceURI,u=e._tag):r._tag&&(s=r._namespaceURI,u=r._tag),(null==s||s===x.svg&&"foreignobject"===u)&&(s=x.html),s===x.html&&("svg"===this._tag?s=x.svg:"math"===this._tag&&(s=x.mathml)),this._namespaceURI=s,"production"!==n.env.NODE_ENV){var p;null!=e?p=e._ancestorInfo:r._tag&&(p=r._ancestorInfo),p&&V(this._tag,null,this,p),this._ancestorInfo=V.updatedAncestorInfo(p,this._tag,this)}var d;if(t.useCreateElement){var v,m=r._ownerDocument;if(s===x.html)if("script"===this._tag){var y=m.createElement("div"),g=this._currentElement.type;y.innerHTML="<"+g+"></"+g+">",v=y.removeChild(y.firstChild)}else v=o.is?m.createElement(this._currentElement.type,o.is):m.createElement(this._currentElement.type);else v=m.createElementNS(s,this._currentElement.type);R.precacheNode(this,v),this._flags|=H.hasCachedChildNodes,this._hostParent||T.setAttributeForRoot(v),this._updateDOMProperties(null,o,t);var b=w(v);this._createInitialChildren(t,o,i,b),d=b}else{var E=this._createOpenTagMarkupAndPutListeners(t,o),S=this._createContentMarkup(t,o,i);d=!S&&tt[this._tag]?E+"/>":E+">"+S+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(c,this),o.autoFocus&&t.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"textarea":t.getReactMountReady().enqueue(l,this),o.autoFocus&&t.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"select":o.autoFocus&&t.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"button":o.autoFocus&&t.getReactMountReady().enqueue(_.focusDOMComponent,this);break;case"option":t.getReactMountReady().enqueue(f,this)}return d},_createOpenTagMarkupAndPutListeners:function(t,e){var r="<"+this._currentElement.type;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];if(null!=o)if(X.hasOwnProperty(i))o&&s(this,i,o,t);else{"style"===i&&(o&&("production"!==n.env.NODE_ENV&&(this._previousStyle=o),o=this._previousStyleCopy=g({},e.style)),o=b.createMarkupForStyles(o,this));var a=null;null!=this._tag&&v(this._tag,e)?K.hasOwnProperty(i)||(a=T.createMarkupForCustomAttribute(i,o)):a=T.createMarkupForProperty(i,o),a&&(r+=" "+a)}}return t.renderToStaticMarkup?r:(this._hostParent||(r+=" "+T.createMarkupForRoot()),r+=" "+T.createMarkupForID(this._domID))},_createContentMarkup:function(t,e,r){var i="",o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&(i=o.__html);else{var a=Z[typeof e.children]?e.children:null,s=null!=a?null:e.children;if(null!=a)i=F(a),"production"!==n.env.NODE_ENV&&J.call(this,a);else if(null!=s){var u=this.mountChildren(s,t,r);i=u.join("")}}return et[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(t,e,r,i){var o=e.dangerouslySetInnerHTML;if(null!=o)null!=o.__html&&w.queueHTML(i,o.__html);else{var a=Z[typeof e.children]?e.children:null,s=null!=a?null:e.children;if(null!=a)""!==a&&("production"!==n.env.NODE_ENV&&J.call(this,a),w.queueText(i,a));else if(null!=s)for(var u=this.mountChildren(s,t,r),c=0;c<u.length;c++)w.queueChild(i,u[c])}},receiveComponent:function(t,e,n){var r=this._currentElement;this._currentElement=t,this.updateComponent(e,r,t,n)},updateComponent:function(t,e,n,r){var i=e.props,o=this._currentElement.props;switch(this._tag){case"input":i=I.getHostProps(this,i),o=I.getHostProps(this,o);break;case"option":i=k.getHostProps(this,i),o=k.getHostProps(this,o);break;case"select":i=P.getHostProps(this,i),o=P.getHostProps(this,o);break;case"textarea":i=N.getHostProps(this,i),o=N.getHostProps(this,o)}switch(a(this,o),this._updateDOMProperties(i,o,t),this._updateDOMChildren(i,o,t,r),this._tag){case"input":I.updateWrapper(this);break;case"textarea":N.updateWrapper(this);break;case"select":t.getReactMountReady().enqueue(p,this)}},_updateDOMProperties:function(t,e,r){var i,a,u;for(i in t)if(!e.hasOwnProperty(i)&&t.hasOwnProperty(i)&&null!=t[i])if("style"===i){var c=this._previousStyleCopy;for(a in c)c.hasOwnProperty(a)&&(u=u||{},u[a]="");this._previousStyleCopy=null}else X.hasOwnProperty(i)?t[i]&&W(this,i):v(this._tag,t)?K.hasOwnProperty(i)||T.deleteValueForAttribute(q(this),i):(E.properties[i]||E.isCustomAttribute(i))&&T.deleteValueForProperty(q(this),i);for(i in e){var l=e[i],f="style"===i?this._previousStyleCopy:null!=t?t[i]:void 0;if(e.hasOwnProperty(i)&&l!==f&&(null!=l||null!=f))if("style"===i)if(l?("production"!==n.env.NODE_ENV&&(o(this._previousStyleCopy,this._previousStyle,this),this._previousStyle=l),l=this._previousStyleCopy=g({},l)):this._previousStyleCopy=null,f){for(a in f)!f.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(u=u||{},u[a]="");for(a in l)l.hasOwnProperty(a)&&f[a]!==l[a]&&(u=u||{},u[a]=l[a])}else u=l;else if(X.hasOwnProperty(i))l?s(this,i,l,r):f&&W(this,i);else if(v(this._tag,e))K.hasOwnProperty(i)||T.setValueForAttribute(q(this),i,l);else if(E.properties[i]||E.isCustomAttribute(i)){var h=q(this);null!=l?T.setValueForProperty(h,i,l):T.deleteValueForProperty(h,i)}}u&&b.setValueForStyles(q(this),u,this)},_updateDOMChildren:function(t,e,r,i){var o=Z[typeof t.children]?t.children:null,a=Z[typeof e.children]?e.children:null,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,u=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,c=null!=o?null:t.children,l=null!=a?null:e.children,f=null!=o||null!=s,h=null!=a||null!=u;null!=c&&null==l?this.updateChildren(null,r,i):f&&!h&&(this.updateTextContent(""),"production"!==n.env.NODE_ENV&&C.debugTool.onSetChildren(this._debugID,[])),null!=a?o!==a&&(this.updateTextContent(""+a),"production"!==n.env.NODE_ENV&&J.call(this,a)):null!=u?(s!==u&&this.updateMarkup(""+u),"production"!==n.env.NODE_ENV&&C.debugTool.onSetChildren(this._debugID,[])):null!=l&&("production"!==n.env.NODE_ENV&&J.call(this,null),this.updateChildren(l,r,i))},getHostNode:function(){return q(this)},unmountComponent:function(t){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var e=this._wrapperState.listeners;if(e)for(var r=0;r<e.length;r++)e[r].remove();break;case"html":case"head":case"body":"production"!==n.env.NODE_ENV?U(!1,"<%s> tried to unmount. Because of cross-browser quirks it is impossible to unmount some top-level components (eg <html>, <head>, and <body>) reliably and efficiently. To fix this, have a single top-level component that never unmounts render these elements.",this._tag):y("66",this._tag)}this.unmountChildren(t),R.uncacheNode(this),S.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null,"production"!==n.env.NODE_ENV&&J.call(this,null)},getPublicInstance:function(){return q(this)}},g(m.prototype,m.Mixin,D.Mixin),e.exports=m}).call(this,t("_process"))},{"./AutoFocusUtils":790,"./CSSPropertyOperations":793,"./DOMLazyTree":797,"./DOMNamespaces":798,"./DOMProperty":799,"./DOMPropertyOperations":800,"./EventPluginHub":804,"./EventPluginRegistry":805,"./ReactBrowserEventEmitter":813,"./ReactDOMComponentFlags":820,"./ReactDOMComponentTree":821,"./ReactDOMInput":826,"./ReactDOMOption":829,"./ReactDOMSelect":830,"./ReactDOMTextarea":833,"./ReactInstrumentation":850,"./ReactMultiChild":854,"./ReactServerRenderingTransaction":862,"./escapeTextContentForBrowser":890,"./isEventSupported":905,"./reactProdInvariant":908,"./validateDOMNesting":914,_process:28,"fbjs/lib/emptyFunction":431,"fbjs/lib/invariant":439,"fbjs/lib/shallowEqual":445,"fbjs/lib/warning":446,"object-assign":759}],820:[function(t,e,n){"use strict";var r={hasCachedChildNodes:1};e.exports=r},{}],821:[function(t,e,n){(function(n){"use strict";function r(t,e){return 1===t.nodeType&&t.getAttribute(v)===String(e)||8===t.nodeType&&t.nodeValue===" react-text: "+e+" "||8===t.nodeType&&t.nodeValue===" react-empty: "+e+" "}function i(t){for(var e;e=t._renderedComponent;)t=e;return t}function o(t,e){var n=i(t);n._hostNode=e,e[y]=n}function a(t){var e=t._hostNode;e&&(delete e[y],t._hostNode=null)}function s(t,e){if(!(t._flags&m.hasCachedChildNodes)){var a=t._renderedChildren,s=e.firstChild;t:for(var u in a)if(a.hasOwnProperty(u)){var c=a[u],l=i(c)._domID;if(0!==l){for(;null!==s;s=s.nextSibling)if(r(s,l)){o(c,s);continue t}"production"!==n.env.NODE_ENV?d(!1,"Unable to find element with ID %s.",l):f("32",l)}}t._flags|=m.hasCachedChildNodes}}function u(t){if(t[y])return t[y];for(var e=[];!t[y];){if(e.push(t),!t.parentNode)return null;t=t.parentNode}for(var n,r;t&&(r=t[y]);t=e.pop())n=r,e.length&&s(r,t);return n}function c(t){var e=u(t);return null!=e&&e._hostNode===t?e:null}function l(t){if(void 0===t._hostNode&&("production"!==n.env.NODE_ENV?d(!1,"getNodeFromInstance: Invalid argument."):f("33")),t._hostNode)return t._hostNode;for(var e=[];!t._hostNode;)e.push(t),t._hostParent||("production"!==n.env.NODE_ENV?d(!1,"React DOM tree root should always have a node reference."):f("34")),t=t._hostParent;for(;e.length;t=e.pop())s(t,t._hostNode);return t._hostNode}var f=t("./reactProdInvariant"),h=t("./DOMProperty"),p=t("./ReactDOMComponentFlags"),d=t("fbjs/lib/invariant"),v=h.ID_ATTRIBUTE_NAME,m=p,y="__reactInternalInstance$"+Math.random().toString(36).slice(2),g={getClosestInstanceFromNode:u,getInstanceFromNode:c,getNodeFromInstance:l,precacheChildNodes:s,precacheNode:o,uncacheNode:a};e.exports=g}).call(this,t("_process"))},{"./DOMProperty":799,"./ReactDOMComponentFlags":820,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],822:[function(t,e,n){(function(n){"use strict";function r(t,e){var r={_topLevelWrapper:t,_idCounter:1,_ownerDocument:e?9===e.nodeType?e:e.ownerDocument:null,_node:e,_tag:e?e.nodeName.toLowerCase():null,_namespaceURI:e?e.namespaceURI:null};return"production"!==n.env.NODE_ENV&&(r._ancestorInfo=e?i.updatedAncestorInfo(null,r._tag,null):null),r}var i=t("./validateDOMNesting");e.exports=r}).call(this,t("_process"))},{"./validateDOMNesting":914,_process:28}],823:[function(t,e,n){"use strict";var r=t("object-assign"),i=t("./DOMLazyTree"),o=t("./ReactDOMComponentTree"),a=function(t){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};r(a.prototype,{mountComponent:function(t,e,n,r){var a=n._idCounter++;this._domID=a,this._hostParent=e,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(t.useCreateElement){var u=n._ownerDocument,c=u.createComment(s);return o.precacheNode(this,c),i(c)}return t.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),e.exports=a},{"./DOMLazyTree":797,"./ReactDOMComponentTree":821,"object-assign":759}],824:[function(t,e,n){"use strict";var r={useCreateElement:!0,useFiber:!1};e.exports=r},{}],825:[function(t,e,n){"use strict";var r=t("./DOMChildrenOperations"),i=t("./ReactDOMComponentTree"),o={dangerouslyProcessChildrenUpdates:function(t,e){var n=i.getNodeFromInstance(t);r.processUpdates(n,e)}};e.exports=o},{"./DOMChildrenOperations":796,"./ReactDOMComponentTree":821}],826:[function(t,e,n){(function(n){"use strict";function r(){this._rootNodeID&&b.updateWrapper(this)}function i(t){return"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}function o(t){var e=this._currentElement.props,i=c.executeOnChange(e,t);f.asap(r,this);var o=e.name;if("radio"===e.type&&null!=o){for(var s=l.getNodeFromInstance(this),u=s;u.parentNode;)u=u.parentNode;for(var p=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),d=0;d<p.length;d++){var v=p[d];if(v!==s&&v.form===s.form){var m=l.getInstanceFromNode(v);m||("production"!==n.env.NODE_ENV?h(!1,"ReactDOMInput: Mixing React and non-React radio inputs with the same `name` is not supported."):a("90")),f.asap(r,m)}}}return i}var a=t("./reactProdInvariant"),s=t("object-assign"),u=t("./DOMPropertyOperations"),c=t("./LinkedValueUtils"),l=t("./ReactDOMComponentTree"),f=t("./ReactUpdates"),h=t("fbjs/lib/invariant"),p=t("fbjs/lib/warning"),d=!1,v=!1,m=!1,y=!1,g=!1,_=!1,b={getHostProps:function(t,e){var n=c.getValue(e),r=c.getChecked(e);return s({type:void 0,step:void 0,min:void 0,max:void 0},e,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:t._wrapperState.initialValue,checked:null!=r?r:t._wrapperState.initialChecked,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){if("production"!==n.env.NODE_ENV){c.checkPropTypes("input",e,t._currentElement._owner);var r=t._currentElement._owner;void 0===e.valueLink||d||("production"!==n.env.NODE_ENV&&p(!1,"`valueLink` prop on `input` is deprecated; set `value` and `onChange` instead."),d=!0),void 0===e.checkedLink||v||("production"!==n.env.NODE_ENV&&p(!1,"`checkedLink` prop on `input` is deprecated; set `value` and `onChange` instead."),v=!0),void 0===e.checked||void 0===e.defaultChecked||y||("production"!==n.env.NODE_ENV&&p(!1,"%s contains an input of type %s with both checked and defaultChecked props. Input elements must be either controlled or uncontrolled (specify either the checked prop, or the defaultChecked prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",r&&r.getName()||"A component",e.type),y=!0),void 0===e.value||void 0===e.defaultValue||m||("production"!==n.env.NODE_ENV&&p(!1,"%s contains an input of type %s with both value and defaultValue props. Input elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled input element and remove one of these props. More info: https://fb.me/react-controlled-components",r&&r.getName()||"A component",e.type),m=!0)}var a=e.defaultValue;t._wrapperState={initialChecked:null!=e.checked?e.checked:e.defaultChecked,initialValue:null!=e.value?e.value:a,listeners:null,onChange:o.bind(t)},"production"!==n.env.NODE_ENV&&(t._wrapperState.controlled=i(e))},updateWrapper:function(t){var e=t._currentElement.props;if("production"!==n.env.NODE_ENV){var r=i(e),o=t._currentElement._owner;t._wrapperState.controlled||!r||_||("production"!==n.env.NODE_ENV&&p(!1,"%s is changing an uncontrolled input of type %s to be controlled. Input elements should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",o&&o.getName()||"A component",e.type),_=!0),!t._wrapperState.controlled||r||g||("production"!==n.env.NODE_ENV&&p(!1,"%s is changing a controlled input of type %s to be uncontrolled. Input elements should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled input element for the lifetime of the component. More info: https://fb.me/react-controlled-components",o&&o.getName()||"A component",e.type),g=!0)}var a=e.checked;null!=a&&u.setValueForProperty(l.getNodeFromInstance(t),"checked",a||!1);var s=l.getNodeFromInstance(t),f=c.getValue(e);if(null!=f){var h=""+f;h!==s.value&&(s.value=h)}else null==e.value&&null!=e.defaultValue&&s.defaultValue!==""+e.defaultValue&&(s.defaultValue=""+e.defaultValue),null==e.checked&&null!=e.defaultChecked&&(s.defaultChecked=!!e.defaultChecked)},postMountWrapper:function(t){var e=t._currentElement.props,n=l.getNodeFromInstance(t);switch(e.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var r=n.name;""!==r&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==r&&(n.name=r)}};e.exports=b}).call(this,t("_process"))},{"./DOMPropertyOperations":800,"./LinkedValueUtils":811,"./ReactDOMComponentTree":821,"./ReactUpdates":865,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"object-assign":759}],827:[function(t,e,n){(function(n){"use strict";function r(t,e,r){if(c.hasOwnProperty(e)&&c[e])return!0;if(l.test(e)){var i=e.toLowerCase(),o=a.getPossibleStandardName.hasOwnProperty(i)?a.getPossibleStandardName[i]:null;if(null==o)return c[e]=!0,!1;if(e!==o)return"production"!==n.env.NODE_ENV&&u(!1,"Unknown ARIA attribute %s. Did you mean %s?%s",e,o,s.getStackAddendumByID(r)),c[e]=!0,!0}return!0}function i(t,e){var i=[];for(var o in e.props){r(e.type,o,t)||i.push(o)}var a=i.map(function(t){return"`"+t+"`"}).join(", ");1===i.length?"production"!==n.env.NODE_ENV&&u(!1,"Invalid aria prop %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",a,e.type,s.getStackAddendumByID(t)):i.length>1&&"production"!==n.env.NODE_ENV&&u(!1,"Invalid aria props %s on <%s> tag. For details, see https://fb.me/invalid-aria-prop%s",a,e.type,s.getStackAddendumByID(t))}function o(t,e){null!=e&&"string"==typeof e.type&&(e.type.indexOf("-")>=0||e.props.is||i(t,e))}var a=t("./DOMProperty"),s=t("react/lib/ReactComponentTreeHook"),u=t("fbjs/lib/warning"),c={},l=new RegExp("^(aria)-["+a.ATTRIBUTE_NAME_CHAR+"]*$"),f={onBeforeMountComponent:function(t,e){"production"!==n.env.NODE_ENV&&o(t,e)},onBeforeUpdateComponent:function(t,e){"production"!==n.env.NODE_ENV&&o(t,e)}};e.exports=f}).call(this,t("_process"))},{"./DOMProperty":799,_process:28,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],828:[function(t,e,n){(function(n){"use strict";function r(t,e){null!=e&&("input"!==e.type&&"textarea"!==e.type&&"select"!==e.type||null==e.props||null!==e.props.value||a||("production"!==n.env.NODE_ENV&&o(!1,"`value` prop on `%s` should not be null. Consider using the empty string to clear the component or `undefined` for uncontrolled components.%s",e.type,i.getStackAddendumByID(t)),a=!0))}var i=t("react/lib/ReactComponentTreeHook"),o=t("fbjs/lib/warning"),a=!1,s={onBeforeMountComponent:function(t,e){r(t,e)},onBeforeUpdateComponent:function(t,e){r(t,e)}};e.exports=s}).call(this,t("_process"))},{_process:28,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],829:[function(t,e,n){(function(n){"use strict";function r(t){var e="";return o.Children.forEach(t,function(t){null!=t&&("string"==typeof t||"number"==typeof t?e+=t:c||(c=!0,"production"!==n.env.NODE_ENV&&u(!1,"Only strings and numbers are supported as <option> children.")))}),e}var i=t("object-assign"),o=t("react/lib/React"),a=t("./ReactDOMComponentTree"),s=t("./ReactDOMSelect"),u=t("fbjs/lib/warning"),c=!1,l={mountWrapper:function(t,e,i){"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&u(null==e.selected,"Use the `defaultValue` or `value` props on <select> instead of setting `selected` on <option>.");var o=null;if(null!=i){var a=i;"optgroup"===a._tag&&(a=a._hostParent),null!=a&&"select"===a._tag&&(o=s.getSelectValueContext(a))}var c=null;if(null!=o){var l;if(l=null!=e.value?e.value+"":r(e.children),c=!1,Array.isArray(o)){for(var f=0;f<o.length;f++)if(""+o[f]===l){c=!0;break}}else c=""+o===l}t._wrapperState={selected:c}},postMountWrapper:function(t){var e=t._currentElement.props;if(null!=e.value){a.getNodeFromInstance(t).setAttribute("value",e.value)}},getHostProps:function(t,e){var n=i({selected:void 0,children:void 0},e);null!=t._wrapperState.selected&&(n.selected=t._wrapperState.selected);var o=r(e.children);return o&&(n.children=o),n}};e.exports=l}).call(this,t("_process"))},{"./ReactDOMComponentTree":821,"./ReactDOMSelect":830,_process:28,"fbjs/lib/warning":446,"object-assign":759,"react/lib/React":934}],830:[function(t,e,n){(function(n){"use strict";function r(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var t=this._currentElement.props,e=c.getValue(t);null!=e&&a(this,Boolean(t.multiple),e)}}function i(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function o(t,e){var r=t._currentElement._owner;c.checkPropTypes("select",e,r),void 0===e.valueLink||p||("production"!==n.env.NODE_ENV&&h(!1,"`valueLink` prop on `select` is deprecated; set `value` and `onChange` instead."),p=!0);for(var o=0;o<v.length;o++){var a=v[o];if(null!=e[a]){var s=Array.isArray(e[a]);e.multiple&&!s?"production"!==n.env.NODE_ENV&&h(!1,"The `%s` prop supplied to <select> must be an array if `multiple` is true.%s",a,i(r)):!e.multiple&&s&&"production"!==n.env.NODE_ENV&&h(!1,"The `%s` prop supplied to <select> must be a scalar value if `multiple` is false.%s",a,i(r))}}}function a(t,e,n){var r,i,o=l.getNodeFromInstance(t).options;if(e){for(r={},i=0;i<n.length;i++)r[""+n[i]]=!0;for(i=0;i<o.length;i++){var a=r.hasOwnProperty(o[i].value);o[i].selected!==a&&(o[i].selected=a)}}else{for(r=""+n,i=0;i<o.length;i++)if(o[i].value===r)return void(o[i].selected=!0);o.length&&(o[0].selected=!0)}}function s(t){var e=this._currentElement.props,n=c.executeOnChange(e,t);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),f.asap(r,this),n}var u=t("object-assign"),c=t("./LinkedValueUtils"),l=t("./ReactDOMComponentTree"),f=t("./ReactUpdates"),h=t("fbjs/lib/warning"),p=!1,d=!1,v=["value","defaultValue"],m={getHostProps:function(t,e){return u({},e,{onChange:t._wrapperState.onChange,value:void 0})},mountWrapper:function(t,e){"production"!==n.env.NODE_ENV&&o(t,e);var r=c.getValue(e);t._wrapperState={pendingUpdate:!1,initialValue:null!=r?r:e.defaultValue,listeners:null,onChange:s.bind(t),wasMultiple:Boolean(e.multiple)},void 0===e.value||void 0===e.defaultValue||d||("production"!==n.env.NODE_ENV&&h(!1,"Select elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled select element and remove one of these props. More info: https://fb.me/react-controlled-components"),d=!0)},
getSelectValueContext:function(t){return t._wrapperState.initialValue},postUpdateWrapper:function(t){var e=t._currentElement.props;t._wrapperState.initialValue=void 0;var n=t._wrapperState.wasMultiple;t._wrapperState.wasMultiple=Boolean(e.multiple);var r=c.getValue(e);null!=r?(t._wrapperState.pendingUpdate=!1,a(t,Boolean(e.multiple),r)):n!==Boolean(e.multiple)&&(null!=e.defaultValue?a(t,Boolean(e.multiple),e.defaultValue):a(t,Boolean(e.multiple),e.multiple?[]:""))}};e.exports=m}).call(this,t("_process"))},{"./LinkedValueUtils":811,"./ReactDOMComponentTree":821,"./ReactUpdates":865,_process:28,"fbjs/lib/warning":446,"object-assign":759}],831:[function(t,e,n){"use strict";function r(t,e,n,r){return t===n&&e===r}function i(t){var e=document.selection,n=e.createRange(),r=n.text.length,i=n.duplicate();i.moveToElementText(t),i.setEndPoint("EndToStart",n);var o=i.text.length;return{start:o,end:o+r}}function o(t){var e=window.getSelection&&window.getSelection();if(!e||0===e.rangeCount)return null;var n=e.anchorNode,i=e.anchorOffset,o=e.focusNode,a=e.focusOffset,s=e.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(t){return null}var u=r(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset),c=u?0:s.toString().length,l=s.cloneRange();l.selectNodeContents(t),l.setEnd(s.startContainer,s.startOffset);var f=r(l.startContainer,l.startOffset,l.endContainer,l.endOffset),h=f?0:l.toString().length,p=h+c,d=document.createRange();d.setStart(n,i),d.setEnd(o,a);var v=d.collapsed;return{start:v?p:h,end:v?h:p}}function a(t,e){var n,r,i=document.selection.createRange().duplicate();void 0===e.end?(n=e.start,r=n):e.start>e.end?(n=e.end,r=e.start):(n=e.start,r=e.end),i.moveToElementText(t),i.moveStart("character",n),i.setEndPoint("EndToStart",i),i.moveEnd("character",r-n),i.select()}function s(t,e){if(window.getSelection){var n=window.getSelection(),r=t[l()].length,i=Math.min(e.start,r),o=void 0===e.end?i:Math.min(e.end,r);if(!n.extend&&i>o){var a=o;o=i,i=a}var s=c(t,i),u=c(t,o);if(s&&u){var f=document.createRange();f.setStart(s.node,s.offset),n.removeAllRanges(),i>o?(n.addRange(f),n.extend(u.node,u.offset)):(f.setEnd(u.node,u.offset),n.addRange(f))}}}var u=t("fbjs/lib/ExecutionEnvironment"),c=t("./getNodeForCharacterOffset"),l=t("./getTextContentAccessor"),f=u.canUseDOM&&"selection"in document&&!("getSelection"in window),h={getOffsets:f?i:o,setOffsets:f?a:s};e.exports=h},{"./getNodeForCharacterOffset":901,"./getTextContentAccessor":902,"fbjs/lib/ExecutionEnvironment":425}],832:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("object-assign"),o=t("./DOMChildrenOperations"),a=t("./DOMLazyTree"),s=t("./ReactDOMComponentTree"),u=t("./escapeTextContentForBrowser"),c=t("fbjs/lib/invariant"),l=t("./validateDOMNesting"),f=function(t){this._currentElement=t,this._stringText=""+t,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null};i(f.prototype,{mountComponent:function(t,e,r,i){if("production"!==n.env.NODE_ENV){var o;null!=e?o=e._ancestorInfo:null!=r&&(o=r._ancestorInfo),o&&l(null,this._stringText,this,o)}var c=r._idCounter++,f=" react-text: "+c+" ";if(this._domID=c,this._hostParent=e,t.useCreateElement){var h=r._ownerDocument,p=h.createComment(f),d=h.createComment(" /react-text "),v=a(h.createDocumentFragment());return a.queueChild(v,a(p)),this._stringText&&a.queueChild(v,a(h.createTextNode(this._stringText))),a.queueChild(v,a(d)),s.precacheNode(this,p),this._closingComment=d,v}var m=u(this._stringText);return t.renderToStaticMarkup?m:"<!--"+f+"-->"+m+"<!-- /react-text -->"},receiveComponent:function(t,e){if(t!==this._currentElement){this._currentElement=t;var n=""+t;if(n!==this._stringText){this._stringText=n;var r=this.getHostNode();o.replaceDelimitedText(r[0],r[1],n)}}},getHostNode:function(){var t=this._commentNodes;if(t)return t;if(!this._closingComment)for(var e=s.getNodeFromInstance(this),i=e.nextSibling;;){if(null==i&&("production"!==n.env.NODE_ENV?c(!1,"Missing closing comment for text component %s",this._domID):r("67",this._domID)),8===i.nodeType&&" /react-text "===i.nodeValue){this._closingComment=i;break}i=i.nextSibling}return t=[this._hostNode,this._closingComment],this._commentNodes=t,t},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),e.exports=f}).call(this,t("_process"))},{"./DOMChildrenOperations":796,"./DOMLazyTree":797,"./ReactDOMComponentTree":821,"./escapeTextContentForBrowser":890,"./reactProdInvariant":908,"./validateDOMNesting":914,_process:28,"fbjs/lib/invariant":439,"object-assign":759}],833:[function(t,e,n){(function(n){"use strict";function r(){this._rootNodeID&&d.updateWrapper(this)}function i(t){var e=this._currentElement.props,n=s.executeOnChange(e,t);return c.asap(r,this),n}var o=t("./reactProdInvariant"),a=t("object-assign"),s=t("./LinkedValueUtils"),u=t("./ReactDOMComponentTree"),c=t("./ReactUpdates"),l=t("fbjs/lib/invariant"),f=t("fbjs/lib/warning"),h=!1,p=!1,d={getHostProps:function(t,e){return null!=e.dangerouslySetInnerHTML&&("production"!==n.env.NODE_ENV?l(!1,"`dangerouslySetInnerHTML` does not make sense on <textarea>."):o("91")),a({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue,onChange:t._wrapperState.onChange})},mountWrapper:function(t,e){"production"!==n.env.NODE_ENV&&(s.checkPropTypes("textarea",e,t._currentElement._owner),void 0===e.valueLink||h||("production"!==n.env.NODE_ENV&&f(!1,"`valueLink` prop on `textarea` is deprecated; set `value` and `onChange` instead."),h=!0),void 0===e.value||void 0===e.defaultValue||p||("production"!==n.env.NODE_ENV&&f(!1,"Textarea elements must be either controlled or uncontrolled (specify either the value prop, or the defaultValue prop, but not both). Decide between using a controlled or uncontrolled textarea and remove one of these props. More info: https://fb.me/react-controlled-components"),p=!0));var r=s.getValue(e),a=r;if(null==r){var u=e.defaultValue,c=e.children;null!=c&&("production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&f(!1,"Use the `defaultValue` or `value` props instead of setting children on <textarea>."),null!=u&&("production"!==n.env.NODE_ENV?l(!1,"If you supply `defaultValue` on a <textarea>, do not pass children."):o("92")),Array.isArray(c)&&(c.length<=1||("production"!==n.env.NODE_ENV?l(!1,"<textarea> can only have at most one child."):o("93")),c=c[0]),u=""+c),null==u&&(u=""),a=u}t._wrapperState={initialValue:""+a,listeners:null,onChange:i.bind(t)}},updateWrapper:function(t){var e=t._currentElement.props,n=u.getNodeFromInstance(t),r=s.getValue(e);if(null!=r){var i=""+r;i!==n.value&&(n.value=i),null==e.defaultValue&&(n.defaultValue=i)}null!=e.defaultValue&&(n.defaultValue=e.defaultValue)},postMountWrapper:function(t){var e=u.getNodeFromInstance(t),n=e.textContent;n===t._wrapperState.initialValue&&(e.value=n)}};e.exports=d}).call(this,t("_process"))},{"./LinkedValueUtils":811,"./ReactDOMComponentTree":821,"./ReactUpdates":865,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"object-assign":759}],834:[function(t,e,n){(function(n){"use strict";function r(t,e){"_hostNode"in t||("production"!==n.env.NODE_ENV?c(!1,"getNodeFromInstance: Invalid argument."):u("33")),"_hostNode"in e||("production"!==n.env.NODE_ENV?c(!1,"getNodeFromInstance: Invalid argument."):u("33"));for(var r=0,i=t;i;i=i._hostParent)r++;for(var o=0,a=e;a;a=a._hostParent)o++;for(;r-o>0;)t=t._hostParent,r--;for(;o-r>0;)e=e._hostParent,o--;for(var s=r;s--;){if(t===e)return t;t=t._hostParent,e=e._hostParent}return null}function i(t,e){"_hostNode"in t||("production"!==n.env.NODE_ENV?c(!1,"isAncestor: Invalid argument."):u("35")),"_hostNode"in e||("production"!==n.env.NODE_ENV?c(!1,"isAncestor: Invalid argument."):u("35"));for(;e;){if(e===t)return!0;e=e._hostParent}return!1}function o(t){return"_hostNode"in t||("production"!==n.env.NODE_ENV?c(!1,"getParentInstance: Invalid argument."):u("36")),t._hostParent}function a(t,e,n){for(var r=[];t;)r.push(t),t=t._hostParent;var i;for(i=r.length;i-- >0;)e(r[i],"captured",n);for(i=0;i<r.length;i++)e(r[i],"bubbled",n)}function s(t,e,n,i,o){for(var a=t&&e?r(t,e):null,s=[];t&&t!==a;)s.push(t),t=t._hostParent;for(var u=[];e&&e!==a;)u.push(e),e=e._hostParent;var c;for(c=0;c<s.length;c++)n(s[c],"bubbled",i);for(c=u.length;c-- >0;)n(u[c],"captured",o)}var u=t("./reactProdInvariant"),c=t("fbjs/lib/invariant");e.exports={isAncestor:i,getLowestCommonAncestor:r,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],835:[function(t,e,n){(function(n){"use strict";function r(t,e){null!=e&&"string"==typeof e.type&&(e.type.indexOf("-")>=0||e.props.is||f(t,e))}var i=t("./DOMProperty"),o=t("./EventPluginRegistry"),a=t("react/lib/ReactComponentTreeHook"),s=t("fbjs/lib/warning");if("production"!==n.env.NODE_ENV)var u={children:!0,dangerouslySetInnerHTML:!0,key:!0,ref:!0,autoFocus:!0,defaultValue:!0,valueLink:!0,defaultChecked:!0,checkedLink:!0,innerHTML:!0,suppressContentEditableWarning:!0,onFocusIn:!0,onFocusOut:!0},c={},l=function(t,e,r){if(i.properties.hasOwnProperty(e)||i.isCustomAttribute(e))return!0;if(u.hasOwnProperty(e)&&u[e]||c.hasOwnProperty(e)&&c[e])return!0;if(o.registrationNameModules.hasOwnProperty(e))return!0;c[e]=!0;var l=e.toLowerCase(),f=i.isCustomAttribute(l)?l:i.getPossibleStandardName.hasOwnProperty(l)?i.getPossibleStandardName[l]:null,h=o.possibleRegistrationNames.hasOwnProperty(l)?o.possibleRegistrationNames[l]:null;return null!=f?("production"!==n.env.NODE_ENV&&s(!1,"Unknown DOM property %s. Did you mean %s?%s",e,f,a.getStackAddendumByID(r)),!0):null!=h&&("production"!==n.env.NODE_ENV&&s(!1,"Unknown event handler property %s. Did you mean `%s`?%s",e,h,a.getStackAddendumByID(r)),!0)};var f=function(t,e){var r=[];for(var i in e.props){l(e.type,i,t)||r.push(i)}var o=r.map(function(t){return"`"+t+"`"}).join(", ");1===r.length?"production"!==n.env.NODE_ENV&&s(!1,"Unknown prop %s on <%s> tag. Remove this prop from the element. For details, see https://fb.me/react-unknown-prop%s",o,e.type,a.getStackAddendumByID(t)):r.length>1&&"production"!==n.env.NODE_ENV&&s(!1,"Unknown props %s on <%s> tag. Remove these props from the element. For details, see https://fb.me/react-unknown-prop%s",o,e.type,a.getStackAddendumByID(t))},h={onBeforeMountComponent:function(t,e){r(t,e)},onBeforeUpdateComponent:function(t,e){r(t,e)}};e.exports=h}).call(this,t("_process"))},{"./DOMProperty":799,"./EventPluginRegistry":805,_process:28,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],836:[function(t,e,n){(function(n){"use strict";function r(t,e,r,i,o,a,s,u){try{e.call(r,i,o,a,s,u)}catch(e){"production"!==n.env.NODE_ENV&&w(E[t],"Exception thrown by hook while handling %s: %s",t,e+"\n"+e.stack),E[t]=!0}}function i(t,e,n,i,o,a){for(var s=0;s<x.length;s++){var u=x[s],c=u[t];c&&r(t,c,u,e,n,i,o,a)}}function o(){g.purgeUnmountedComponents(),y.clearHistory()}function a(t){return t.reduce(function(t,e){var n=g.getOwnerID(e),r=g.getParentID(e);return t[e]={displayName:g.getDisplayName(e),text:g.getText(e),updateCount:g.getUpdateCount(e),childIDs:g.getChildIDs(e),ownerID:n||r&&g.getOwnerID(r)||0,parentID:r},t},{})}function s(){var t=R,e=A,n=y.getHistory();if(0===O)return R=0,A=[],void o();if(e.length||n.length){var r=g.getRegisteredIDs();S.push({duration:b()-t,measurements:e||[],operations:n||[],treeSnapshot:a(r)})}o(),R=b(),A=[]}function u(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&0===t||t||"production"!==n.env.NODE_ENV&&w(!1,"ReactDebugTool: debugID may not be empty.")}function c(t,e){0!==O&&(N&&!C&&("production"!==n.env.NODE_ENV&&w(!1,"There is an internal error in the React performance measurement code. Did not expect %s timer to start while %s timer is still in progress for %s instance.",e,N||"no",t===I?"the same":"another"),C=!0),k=b(),P=0,I=t,N=e)}function l(t,e){0!==O&&(N===e||C||("production"!==n.env.NODE_ENV&&w(!1,"There is an internal error in the React performance measurement code. We did not expect %s timer to stop while %s timer is still in progress for %s instance. Please report this as a bug in React.",e,N||"no",t===I?"the same":"another"),C=!0),T&&A.push({timerType:e,instanceID:t,duration:b()-k-P}),k=0,P=0,I=null,N=null)}function f(){var t={startTime:k,nestedFlushStartTime:b(),debugID:I,timerType:N};M.push(t),k=0,P=0,I=null,N=null}function h(){var t=M.pop(),e=t.startTime,n=t.nestedFlushStartTime,r=t.debugID,i=t.timerType,o=b()-n;k=e,P+=o,I=r,N=i}function p(t){if(!T||!j)return!1;var e=g.getElement(t);return null!=e&&"object"==typeof e&&!("string"==typeof e.type)}function d(t,e){if(p(t)){var n=t+"::"+e;D=b(),performance.mark(n)}}function v(t,e){if(p(t)){var n=t+"::"+e,r=g.getDisplayName(t)||"Unknown";if(b()-D>.1){var i=r+" ["+e+"]";performance.measure(i,n)}performance.clearMarks(n),performance.clearMeasures(i)}}var m=t("./ReactInvalidSetStateWarningHook"),y=t("./ReactHostOperationHistoryHook"),g=t("react/lib/ReactComponentTreeHook"),_=t("fbjs/lib/ExecutionEnvironment"),b=t("fbjs/lib/performanceNow"),w=t("fbjs/lib/warning"),x=[],E={},T=!1,S=[],M=[],O=0,A=[],R=0,I=null,k=0,P=0,N=null,C=!1,D=0,j="undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&"function"==typeof performance.clearMeasures,L={addHook:function(t){x.push(t)},removeHook:function(t){for(var e=0;e<x.length;e++)x[e]===t&&(x.splice(e,1),e--)},isProfiling:function(){return T},beginProfiling:function(){T||(T=!0,S.length=0,s(),L.addHook(y))},endProfiling:function(){T&&(T=!1,s(),L.removeHook(y))},getFlushHistory:function(){return S},onBeginFlush:function(){O++,s(),f(),i("onBeginFlush")},onEndFlush:function(){s(),O--,h(),i("onEndFlush")},onBeginLifeCycleTimer:function(t,e){u(t),i("onBeginLifeCycleTimer",t,e),d(t,e),c(t,e)},onEndLifeCycleTimer:function(t,e){u(t),l(t,e),v(t,e),i("onEndLifeCycleTimer",t,e)},onBeginProcessingChildContext:function(){i("onBeginProcessingChildContext")},onEndProcessingChildContext:function(){i("onEndProcessingChildContext")},onHostOperation:function(t){u(t.instanceID),i("onHostOperation",t)},onSetState:function(){i("onSetState")},onSetChildren:function(t,e){u(t),e.forEach(u),i("onSetChildren",t,e)},onBeforeMountComponent:function(t,e,n){u(t),u(n,!0),i("onBeforeMountComponent",t,e,n),d(t,"mount")},onMountComponent:function(t){u(t),v(t,"mount"),i("onMountComponent",t)},onBeforeUpdateComponent:function(t,e){u(t),i("onBeforeUpdateComponent",t,e),d(t,"update")},onUpdateComponent:function(t){u(t),v(t,"update"),i("onUpdateComponent",t)},onBeforeUnmountComponent:function(t){u(t),i("onBeforeUnmountComponent",t),d(t,"unmount")},onUnmountComponent:function(t){u(t),v(t,"unmount"),i("onUnmountComponent",t)},onTestEvent:function(){i("onTestEvent")}};L.addDevtool=L.addHook,L.removeDevtool=L.removeHook,L.addHook(m),L.addHook(g);var F=_.canUseDOM&&window.location.href||"";/[?&]react_perf\b/.test(F)&&L.beginProfiling(),e.exports=L}).call(this,t("_process"))},{"./ReactHostOperationHistoryHook":846,"./ReactInvalidSetStateWarningHook":851,_process:28,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/performanceNow":444,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],837:[function(t,e,n){"use strict";function r(){this.reinitializeTransaction()}var i=t("object-assign"),o=t("./ReactUpdates"),a=t("./Transaction"),s=t("fbjs/lib/emptyFunction"),u={initialize:s,close:function(){h.isBatchingUpdates=!1}},c={initialize:s,close:o.flushBatchedUpdates.bind(o)},l=[c,u];i(r.prototype,a,{getTransactionWrappers:function(){return l}});var f=new r,h={isBatchingUpdates:!1,batchedUpdates:function(t,e,n,r,i,o){var a=h.isBatchingUpdates;return h.isBatchingUpdates=!0,a?t(e,n,r,i,o):f.perform(t,null,e,n,r,i,o)}};e.exports=h},{"./ReactUpdates":865,"./Transaction":883,"fbjs/lib/emptyFunction":431,"object-assign":759}],838:[function(t,e,n){"use strict";function r(){E||(E=!0,g.EventEmitter.injectReactEventListener(y),g.EventPluginHub.injectEventPluginOrder(s),g.EventPluginUtils.injectComponentTree(h),g.EventPluginUtils.injectTreeTraversal(d),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:x,EnterLeaveEventPlugin:u,ChangeEventPlugin:a,SelectEventPlugin:w,BeforeInputEventPlugin:o}),g.HostComponent.injectGenericComponentClass(f),g.HostComponent.injectTextComponentClass(v),g.DOMProperty.injectDOMPropertyConfig(i),g.DOMProperty.injectDOMPropertyConfig(c),g.DOMProperty.injectDOMPropertyConfig(b),g.EmptyComponent.injectEmptyComponentFactory(function(t){return new p(t)}),g.Updates.injectReconcileTransaction(_),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(l))}var i=t("./ARIADOMPropertyConfig"),o=t("./BeforeInputEventPlugin"),a=t("./ChangeEventPlugin"),s=t("./DefaultEventPluginOrder"),u=t("./EnterLeaveEventPlugin"),c=t("./HTMLDOMPropertyConfig"),l=t("./ReactComponentBrowserEnvironment"),f=t("./ReactDOMComponent"),h=t("./ReactDOMComponentTree"),p=t("./ReactDOMEmptyComponent"),d=t("./ReactDOMTreeTraversal"),v=t("./ReactDOMTextComponent"),m=t("./ReactDefaultBatchingStrategy"),y=t("./ReactEventListener"),g=t("./ReactInjection"),_=t("./ReactReconcileTransaction"),b=t("./SVGDOMPropertyConfig"),w=t("./SelectEventPlugin"),x=t("./SimpleEventPlugin"),E=!1;e.exports={inject:r}},{"./ARIADOMPropertyConfig":789,"./BeforeInputEventPlugin":791,"./ChangeEventPlugin":795,"./DefaultEventPluginOrder":802,"./EnterLeaveEventPlugin":803,"./HTMLDOMPropertyConfig":809,"./ReactComponentBrowserEnvironment":815,"./ReactDOMComponent":819,"./ReactDOMComponentTree":821,"./ReactDOMEmptyComponent":823,"./ReactDOMTextComponent":832,"./ReactDOMTreeTraversal":834,"./ReactDefaultBatchingStrategy":837,"./ReactEventListener":843,"./ReactInjection":847,"./ReactReconcileTransaction":859,"./SVGDOMPropertyConfig":867,"./SelectEventPlugin":868,"./SimpleEventPlugin":869}],839:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;e.exports=r},{}],840:[function(t,e,n){"use strict";var r,i={injectEmptyComponentFactory:function(t){r=t}},o={create:function(t){return r(t)}};o.injection=i,e.exports=o},{}],841:[function(t,e,n){(function(t){"use strict";function n(t,e,n){try{e(n)}catch(t){null===r&&(r=t)}}var r=null,i={invokeGuardedCallback:n,invokeGuardedCallbackWithCatch:n,rethrowCaughtError:function(){if(r){var t=r;throw r=null,t}}};if("production"!==t.env.NODE_ENV&&"undefined"!=typeof window&&"function"==typeof window.dispatchEvent&&"undefined"!=typeof document&&"function"==typeof document.createEvent){var o=document.createElement("react");i.invokeGuardedCallback=function(t,e,n){var r=e.bind(null,n),i="react-"+t;o.addEventListener(i,r,!1);var a=document.createEvent("Event");a.initEvent(i,!1,!1),o.dispatchEvent(a),o.removeEventListener(i,r,!1)}}e.exports=i}).call(this,t("_process"))},{_process:28}],842:[function(t,e,n){"use strict";function r(t){i.enqueueEvents(t),i.processEventQueue(!1)}var i=t("./EventPluginHub"),o={handleTopLevel:function(t,e,n,o){r(i.extractEvents(t,e,n,o))}};e.exports=o},{"./EventPluginHub":804}],843:[function(t,e,n){"use strict";function r(t){for(;t._hostParent;)t=t._hostParent;var e=f.getNodeFromInstance(t),n=e.parentNode;return f.getClosestInstanceFromNode(n)}function i(t,e){this.topLevelType=t,this.nativeEvent=e,this.ancestors=[]}function o(t){var e=p(t.nativeEvent),n=f.getClosestInstanceFromNode(e),i=n;do t.ancestors.push(i),i=i&&r(i);while(i);for(var o=0;o<t.ancestors.length;o++)n=t.ancestors[o],v._handleTopLevel(t.topLevelType,n,t.nativeEvent,p(t.nativeEvent))}function a(t){t(d(window))}var s=t("object-assign"),u=t("fbjs/lib/EventListener"),c=t("fbjs/lib/ExecutionEnvironment"),l=t("./PooledClass"),f=t("./ReactDOMComponentTree"),h=t("./ReactUpdates"),p=t("./getEventTarget"),d=t("fbjs/lib/getUnboundedScrollPosition");s(i.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),l.addPoolingTo(i,l.twoArgumentPooler);var v={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:c.canUseDOM?window:null,setHandleTopLevel:function(t){v._handleTopLevel=t},setEnabled:function(t){v._enabled=!!t},isEnabled:function(){return v._enabled},trapBubbledEvent:function(t,e,n){return n?u.listen(n,e,v.dispatchEvent.bind(null,t)):null},trapCapturedEvent:function(t,e,n){return n?u.capture(n,e,v.dispatchEvent.bind(null,t)):null},monitorScrollValue:function(t){var e=a.bind(null,t);u.listen(window,"scroll",e)},dispatchEvent:function(t,e){if(v._enabled){var n=i.getPooled(t,e);try{h.batchedUpdates(o,n)}finally{i.release(n)}}}};e.exports=v},{"./PooledClass":812,"./ReactDOMComponentTree":821,"./ReactUpdates":865,"./getEventTarget":897,"fbjs/lib/EventListener":424,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/getUnboundedScrollPosition":436,"object-assign":759}],844:[function(t,e,n){"use strict";var r={logTopLevelRenders:!1};e.exports=r},{}],845:[function(t,e,n){(function(n){"use strict";function r(t){return u||("production"!==n.env.NODE_ENV?s(!1,"There is no registered component for the tag %s",t.type):a("111",t.type)),new u(t)}function i(t){return new c(t)}function o(t){return t instanceof c}var a=t("./reactProdInvariant"),s=t("fbjs/lib/invariant"),u=null,c=null,l={injectGenericComponentClass:function(t){u=t},injectTextComponentClass:function(t){c=t}},f={createInternalComponent:r,createInstanceForText:i,isTextComponent:o,injection:l};e.exports=f}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],846:[function(t,e,n){"use strict";var r=[],i={onHostOperation:function(t){r.push(t)},clearHistory:function(){i._preventClearing||(r=[])},getHistory:function(){return r}};e.exports=i},{}],847:[function(t,e,n){"use strict";var r=t("./DOMProperty"),i=t("./EventPluginHub"),o=t("./EventPluginUtils"),a=t("./ReactComponentEnvironment"),s=t("./ReactEmptyComponent"),u=t("./ReactBrowserEventEmitter"),c=t("./ReactHostComponent"),l=t("./ReactUpdates"),f={Component:a.injection,DOMProperty:r.injection,EmptyComponent:s.injection,EventPluginHub:i.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:l.injection};e.exports=f},{"./DOMProperty":799,"./EventPluginHub":804,"./EventPluginUtils":806,"./ReactBrowserEventEmitter":813,"./ReactComponentEnvironment":816,"./ReactEmptyComponent":840,"./ReactHostComponent":845,"./ReactUpdates":865}],848:[function(t,e,n){"use strict";function r(t){return o(document.documentElement,t)}var i=t("./ReactDOMSelection"),o=t("fbjs/lib/containsNode"),a=t("fbjs/lib/focusNode"),s=t("fbjs/lib/getActiveElement"),u={hasSelectionCapabilities:function(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&"text"===t.type||"textarea"===e||"true"===t.contentEditable)},getSelectionInformation:function(){var t=s();return{focusedElem:t,selectionRange:u.hasSelectionCapabilities(t)?u.getSelection(t):null}},restoreSelection:function(t){var e=s(),n=t.focusedElem,i=t.selectionRange;e!==n&&r(n)&&(u.hasSelectionCapabilities(n)&&u.setSelection(n,i),a(n))},getSelection:function(t){var e;if("selectionStart"in t)e={start:t.selectionStart,end:t.selectionEnd};else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===t&&(e={start:-n.moveStart("character",-t.value.length),end:-n.moveEnd("character",-t.value.length)})}else e=i.getOffsets(t);return e||{start:0,end:0}},setSelection:function(t,e){var n=e.start,r=e.end;if(void 0===r&&(r=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(r,t.value.length);else if(document.selection&&t.nodeName&&"input"===t.nodeName.toLowerCase()){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",r-n),o.select()}else i.setOffsets(t,e)}};e.exports=u},{"./ReactDOMSelection":831,"fbjs/lib/containsNode":428,"fbjs/lib/focusNode":433,"fbjs/lib/getActiveElement":434}],849:[function(t,e,n){"use strict";var r={remove:function(t){t._reactInternalInstance=void 0},get:function(t){return t._reactInternalInstance},has:function(t){return void 0!==t._reactInternalInstance},set:function(t,e){t._reactInternalInstance=e}};e.exports=r},{}],850:[function(t,e,n){(function(n){"use strict";var r=null;if("production"!==n.env.NODE_ENV){r=t("./ReactDebugTool")}e.exports={debugTool:r}}).call(this,t("_process"))},{"./ReactDebugTool":836,_process:28}],851:[function(t,e,n){(function(n){"use strict";var r=t("fbjs/lib/warning");if("production"!==n.env.NODE_ENV)var i=!1,o=function(){"production"!==n.env.NODE_ENV&&r(!i,"setState(...): Cannot call setState() inside getChildContext()")};var a={onBeginProcessingChildContext:function(){i=!0},onEndProcessingChildContext:function(){i=!1},onSetState:function(){o()}};e.exports=a}).call(this,t("_process"))},{_process:28,"fbjs/lib/warning":446}],852:[function(t,e,n){"use strict";var r=t("./adler32"),i=/^<\!\-\-/,o={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(t){var e=r(t);return i.test(t)?t:t.replace(/\/?>/," "+o.CHECKSUM_ATTR_NAME+'="'+e+'"$&')},canReuseMarkup:function(t,e){var n=e.getAttribute(o.CHECKSUM_ATTR_NAME);return n=n&&parseInt(n,10),r(t)===n}};e.exports=o},{"./adler32":886}],853:[function(t,e,n){(function(n){"use strict";function r(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++)if(t.charAt(r)!==e.charAt(r))return r;return t.length===e.length?-1:n}function i(t){return t?9===t.nodeType?t.documentElement:t.firstChild:null}function o(t){return t.getAttribute&&t.getAttribute(L)||""}function a(t,e,n,r,i){var o;if(T.logTopLevelRenders){var a=t._currentElement.props.child,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var u=A.mountComponent(t,n,null,x(t,e),i,0);o&&console.timeEnd(o),t._renderedComponent._topLevelWrapper=t,V._mountImageIntoNode(u,e,t,r,n)}function s(t,e,n,r){var i=I.ReactReconcileTransaction.getPooled(!n&&E.useCreateElement);i.perform(a,null,t,e,i,n,r),I.ReactReconcileTransaction.release(i)}function u(t,e,r){for("production"!==n.env.NODE_ENV&&M.debugTool.onBeginFlush(),A.unmountComponent(t,r),"production"!==n.env.NODE_ENV&&M.debugTool.onEndFlush(),9===e.nodeType&&(e=e.documentElement);e.lastChild;)e.removeChild(e.lastChild)}function c(t){var e=i(t);if(e){var n=w.getInstanceFromNode(e);return!(!n||!n._hostParent)}}function l(t){var e=i(t);return!(!e||!h(e)||w.getInstanceFromNode(e))}function f(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function h(t){return f(t)&&(t.hasAttribute(F)||t.hasAttribute(L))}function p(t){var e=i(t),n=e&&w.getInstanceFromNode(e);return n&&!n._hostParent?n:null}function d(t){var e=p(t);return e?e._hostContainerInfo._topLevelWrapper:null}var v=t("./reactProdInvariant"),m=t("./DOMLazyTree"),y=t("./DOMProperty"),g=t("react/lib/React"),_=t("./ReactBrowserEventEmitter"),b=t("react/lib/ReactCurrentOwner"),w=t("./ReactDOMComponentTree"),x=t("./ReactDOMContainerInfo"),E=t("./ReactDOMFeatureFlags"),T=t("./ReactFeatureFlags"),S=t("./ReactInstanceMap"),M=t("./ReactInstrumentation"),O=t("./ReactMarkupChecksum"),A=t("./ReactReconciler"),R=t("./ReactUpdateQueue"),I=t("./ReactUpdates"),k=t("fbjs/lib/emptyObject"),P=t("./instantiateReactComponent"),N=t("fbjs/lib/invariant"),C=t("./setInnerHTML"),D=t("./shouldUpdateReactComponent"),j=t("fbjs/lib/warning"),L=y.ID_ATTRIBUTE_NAME,F=y.ROOT_ATTRIBUTE_NAME,U={},z=1,B=function(){this.rootID=z++};B.prototype.isReactComponent={},"production"!==n.env.NODE_ENV&&(B.displayName="TopLevelWrapper"),B.prototype.render=function(){return this.props.child},B.isReactTopLevelWrapper=!0;var V={TopLevelWrapper:B,_instancesByReactRootID:U,scrollMonitor:function(t,e){e()},_updateRootComponent:function(t,e,n,r,i){return V.scrollMonitor(r,function(){R.enqueueElementInternal(t,e,n),i&&R.enqueueCallbackInternal(t,i)}),t},_renderNewRootComponent:function(t,e,r,i){"production"!==n.env.NODE_ENV&&j(null==b.current,"_renderNewRootComponent(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",b.current&&b.current.getName()||"ReactCompositeComponent"),f(e)||("production"!==n.env.NODE_ENV?N(!1,"_registerComponent(...): Target container is not a DOM element."):v("37")),_.ensureScrollValueMonitoring();var o=P(t,!1);return I.batchedUpdates(s,o,e,r,i),U[o._instance.rootID]=o,o},renderSubtreeIntoContainer:function(t,e,r,i){return null!=t&&S.has(t)||("production"!==n.env.NODE_ENV?N(!1,"parentComponent must be a valid React Component"):v("38")),V._renderSubtreeIntoContainer(t,e,r,i)},_renderSubtreeIntoContainer:function(t,e,r,a){R.validateCallback(a,"ReactDOM.render"),g.isValidElement(e)||("production"!==n.env.NODE_ENV?N(!1,"ReactDOM.render(): Invalid component element.%s","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":""):v("39","string"==typeof e?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof e?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=e&&void 0!==e.props?" This may be caused by unintentionally loading two independent copies of React.":"")),"production"!==n.env.NODE_ENV&&j(!r||!r.tagName||"BODY"!==r.tagName.toUpperCase(),"render(): Rendering components directly into document.body is discouraged, since its children are often manipulated by third-party scripts and browser extensions. This may lead to subtle reconciliation issues. Try rendering into a container element created for your app.");var s,u=g.createElement(B,{child:e});if(t){var l=S.get(t);s=l._processChildContext(l._context)}else s=k;var f=d(r);if(f){if(D(f._currentElement.props.child,e)){var h=f._renderedComponent.getPublicInstance(),p=a&&function(){a.call(h)};return V._updateRootComponent(f,u,s,r,p),h}V.unmountComponentAtNode(r)}var m=i(r),y=m&&!!o(m),_=c(r);if("production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV&&j(!_,"render(...): Replacing React-rendered children with a new root component. If you intended to update the children of this node, you should instead have the existing children update their state and render the new components instead of calling ReactDOM.render."),!y||m.nextSibling))for(var b=m;b;){if(o(b)){"production"!==n.env.NODE_ENV&&j(!1,"render(): Target node has markup rendered by React, but there are unrelated nodes as well. This is most commonly caused by white-space inserted around server-rendered markup.");break}b=b.nextSibling}var w=y&&!f&&!_,x=V._renderNewRootComponent(u,r,w,s)._renderedComponent.getPublicInstance();return a&&a.call(x),x},render:function(t,e,n){return V._renderSubtreeIntoContainer(null,t,e,n)},unmountComponentAtNode:function(t){"production"!==n.env.NODE_ENV&&j(null==b.current,"unmountComponentAtNode(): Render methods should be a pure function of props and state; triggering nested component updates from render is not allowed. If necessary, trigger nested updates in componentDidUpdate. Check the render method of %s.",b.current&&b.current.getName()||"ReactCompositeComponent"),f(t)||("production"!==n.env.NODE_ENV?N(!1,"unmountComponentAtNode(...): Target container is not a DOM element."):v("40")),"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&j(!l(t),"unmountComponentAtNode(): The node you're attempting to unmount was rendered by another copy of React.");var e=d(t);if(!e){var r=c(t),i=1===t.nodeType&&t.hasAttribute(F)
;return"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&j(!r,"unmountComponentAtNode(): The node you're attempting to unmount was rendered by React and is not a top-level container. %s",i?"You may have accidentally passed in a React root node instead of its container.":"Instead, have the parent component update its state and rerender in order to remove this component."),!1}return delete U[e._instance.rootID],I.batchedUpdates(u,e,t,!1),!0},_mountImageIntoNode:function(t,e,o,a,s){if(f(e)||("production"!==n.env.NODE_ENV?N(!1,"mountComponentIntoNode(...): Target container is not valid."):v("41")),a){var u=i(e);if(O.canReuseMarkup(t,u))return void w.precacheNode(o,u);var c=u.getAttribute(O.CHECKSUM_ATTR_NAME);u.removeAttribute(O.CHECKSUM_ATTR_NAME);var l=u.outerHTML;u.setAttribute(O.CHECKSUM_ATTR_NAME,c);var h=t;if("production"!==n.env.NODE_ENV){var p;1===e.nodeType?(p=document.createElement("div"),p.innerHTML=t,h=p.innerHTML):(p=document.createElement("iframe"),document.body.appendChild(p),p.contentDocument.write(t),h=p.contentDocument.documentElement.outerHTML,document.body.removeChild(p))}var d=r(h,l),y=" (client) "+h.substring(d-20,d+20)+"\n (server) "+l.substring(d-20,d+20);9===e.nodeType&&("production"!==n.env.NODE_ENV?N(!1,"You're trying to render a component to the document using server rendering but the checksum was invalid. This usually means you rendered a different component type or props on the client from the one on the server, or your render() methods are impure. React cannot handle this case due to cross-browser quirks by rendering at the document root. You should look for environment dependent code in your components and ensure the props are the same client and server side:\n%s",y):v("42",y)),"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&j(!1,"React attempted to reuse markup in a container but the checksum was invalid. This generally means that you are using server rendering and the markup generated on the server was not what the client was expecting. React injected new markup to compensate which works but you have lost many of the benefits of server rendering. Instead, figure out why the markup being generated is different on the client or server:\n%s",y)}if(9===e.nodeType&&("production"!==n.env.NODE_ENV?N(!1,"You're trying to render a component to the document but you didn't use server rendering. We can't do this without using server rendering due to cross-browser quirks. See ReactDOMServer.renderToString() for server rendering."):v("43")),s.useCreateElement){for(;e.lastChild;)e.removeChild(e.lastChild);m.insertTreeBefore(e,t,null)}else C(e,t),w.precacheNode(o,e.firstChild);if("production"!==n.env.NODE_ENV){var g=w.getInstanceFromNode(e.firstChild);0!==g._debugID&&M.debugTool.onHostOperation({instanceID:g._debugID,type:"mount",payload:t.toString()})}}};e.exports=V}).call(this,t("_process"))},{"./DOMLazyTree":797,"./DOMProperty":799,"./ReactBrowserEventEmitter":813,"./ReactDOMComponentTree":821,"./ReactDOMContainerInfo":822,"./ReactDOMFeatureFlags":824,"./ReactFeatureFlags":844,"./ReactInstanceMap":849,"./ReactInstrumentation":850,"./ReactMarkupChecksum":852,"./ReactReconciler":860,"./ReactUpdateQueue":864,"./ReactUpdates":865,"./instantiateReactComponent":904,"./reactProdInvariant":908,"./setInnerHTML":910,"./shouldUpdateReactComponent":912,_process:28,"fbjs/lib/emptyObject":432,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/React":934,"react/lib/ReactCurrentOwner":939}],854:[function(t,e,n){(function(n){"use strict";function r(t,e,n){return{type:"INSERT_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:n,afterNode:e}}function i(t,e,n){return{type:"MOVE_EXISTING",content:null,fromIndex:t._mountIndex,fromNode:v.getHostNode(t),toIndex:n,afterNode:e}}function o(t,e){return{type:"REMOVE_NODE",content:null,fromIndex:t._mountIndex,fromNode:e,toIndex:null,afterNode:null}}function a(t){return{type:"SET_MARKUP",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(t){return{type:"TEXT_CONTENT",content:t,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function u(t,e){return e&&(t=t||[],t.push(e)),t}function c(t,e){f.processChildrenUpdates(t,e)}var l=t("./reactProdInvariant"),f=t("./ReactComponentEnvironment"),h=t("./ReactInstanceMap"),p=t("./ReactInstrumentation"),d=t("react/lib/ReactCurrentOwner"),v=t("./ReactReconciler"),m=t("./ReactChildReconciler"),y=t("fbjs/lib/emptyFunction"),g=t("./flattenChildren"),_=t("fbjs/lib/invariant"),b=y;if("production"!==n.env.NODE_ENV){var w=function(t){if(!t._debugID){var e;(e=h.get(t))&&(t=e)}return t._debugID};b=function(t){var e=w(this);0!==e&&p.debugTool.onSetChildren(e,t?Object.keys(t).map(function(e){return t[e]._debugID}):[])}}var x={Mixin:{_reconcilerInstantiateChildren:function(t,e,r){if("production"!==n.env.NODE_ENV){var i=w(this);if(this._currentElement)try{return d.current=this._currentElement._owner,m.instantiateChildren(t,e,r,i)}finally{d.current=null}}return m.instantiateChildren(t,e,r)},_reconcilerUpdateChildren:function(t,e,r,i,o,a){var s,u=0;if("production"!==n.env.NODE_ENV&&(u=w(this),this._currentElement)){try{d.current=this._currentElement._owner,s=g(e,u)}finally{d.current=null}return m.updateChildren(t,s,r,i,o,this,this._hostContainerInfo,a,u),s}return s=g(e,u),m.updateChildren(t,s,r,i,o,this,this._hostContainerInfo,a,u),s},mountChildren:function(t,e,r){var i=this._reconcilerInstantiateChildren(t,e,r);this._renderedChildren=i;var o=[],a=0;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s],c=0;"production"!==n.env.NODE_ENV&&(c=w(this));var l=v.mountComponent(u,e,this,this._hostContainerInfo,r,c);u._mountIndex=a++,o.push(l)}return"production"!==n.env.NODE_ENV&&b.call(this,i),o},updateTextContent:function(t){var e=this._renderedChildren;m.unmountChildren(e,!1);for(var r in e)e.hasOwnProperty(r)&&("production"!==n.env.NODE_ENV?_(!1,"updateTextContent called on non-empty component."):l("118"));c(this,[s(t)])},updateMarkup:function(t){var e=this._renderedChildren;m.unmountChildren(e,!1);for(var r in e)e.hasOwnProperty(r)&&("production"!==n.env.NODE_ENV?_(!1,"updateTextContent called on non-empty component."):l("118"));c(this,[a(t)])},updateChildren:function(t,e,n){this._updateChildren(t,e,n)},_updateChildren:function(t,e,r){var i=this._renderedChildren,o={},a=[],s=this._reconcilerUpdateChildren(i,t,a,o,e,r);if(s||i){var l,f=null,h=0,p=0,d=0,m=null;for(l in s)if(s.hasOwnProperty(l)){var y=i&&i[l],g=s[l];y===g?(f=u(f,this.moveChild(y,m,h,p)),p=Math.max(y._mountIndex,p),y._mountIndex=h):(y&&(p=Math.max(y._mountIndex,p)),f=u(f,this._mountChildAtIndex(g,a[d],m,h,e,r)),d++),h++,m=v.getHostNode(g)}for(l in o)o.hasOwnProperty(l)&&(f=u(f,this._unmountChild(i[l],o[l])));f&&c(this,f),this._renderedChildren=s,"production"!==n.env.NODE_ENV&&b.call(this,s)}},unmountChildren:function(t){var e=this._renderedChildren;m.unmountChildren(e,t),this._renderedChildren=null},moveChild:function(t,e,n,r){if(t._mountIndex<r)return i(t,e,n)},createChild:function(t,e,n){return r(n,e,t._mountIndex)},removeChild:function(t,e){return o(t,e)},_mountChildAtIndex:function(t,e,n,r,i,o){return t._mountIndex=r,this.createChild(t,n,e)},_unmountChild:function(t,e){var n=this.removeChild(t,e);return t._mountIndex=null,n}}};e.exports=x}).call(this,t("_process"))},{"./ReactChildReconciler":814,"./ReactComponentEnvironment":816,"./ReactInstanceMap":849,"./ReactInstrumentation":850,"./ReactReconciler":860,"./flattenChildren":892,"./reactProdInvariant":908,_process:28,"fbjs/lib/emptyFunction":431,"fbjs/lib/invariant":439,"react/lib/ReactCurrentOwner":939}],855:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("react/lib/React"),o=t("fbjs/lib/invariant"),a={HOST:0,COMPOSITE:1,EMPTY:2,getType:function(t){return null===t||t===!1?a.EMPTY:i.isValidElement(t)?"function"==typeof t.type?a.COMPOSITE:a.HOST:void("production"!==n.env.NODE_ENV?o(!1,"Unexpected node: %s",t):r("26",t))}};e.exports=a}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"react/lib/React":934}],856:[function(t,e,n){(function(n){"use strict";function r(t){return!(!t||"function"!=typeof t.attachRef||"function"!=typeof t.detachRef)}var i=t("./reactProdInvariant"),o=t("fbjs/lib/invariant"),a={addComponentAsRefTo:function(t,e,a){r(a)||("production"!==n.env.NODE_ENV?o(!1,"addComponentAsRefTo(...): Only a ReactOwner can have refs. You might be adding a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):i("119")),a.attachRef(e,t)},removeComponentAsRefFrom:function(t,e,a){r(a)||("production"!==n.env.NODE_ENV?o(!1,"removeComponentAsRefFrom(...): Only a ReactOwner can have refs. You might be removing a ref to a component that was not created inside a component's `render` method, or you have multiple copies of React loaded (details: https://fb.me/react-refs-must-have-owner)."):i("120"));var s=a.getPublicInstance();s&&s.refs[e]===t.getPublicInstance()&&a.detachRef(e)}};e.exports=a}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],857:[function(t,e,n){(function(t){"use strict";var n={};"production"!==t.env.NODE_ENV&&(n={prop:"prop",context:"context",childContext:"child context"}),e.exports=n}).call(this,t("_process"))},{_process:28}],858:[function(t,e,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},{}],859:[function(t,e,n){(function(n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=t}var i=t("object-assign"),o=t("./CallbackQueue"),a=t("./PooledClass"),s=t("./ReactBrowserEventEmitter"),u=t("./ReactInputSelection"),c=t("./ReactInstrumentation"),l=t("./Transaction"),f=t("./ReactUpdateQueue"),h={initialize:u.getSelectionInformation,close:u.restoreSelection},p={initialize:function(){var t=s.isEnabled();return s.setEnabled(!1),t},close:function(t){s.setEnabled(t)}},d={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},v=[h,p,d];"production"!==n.env.NODE_ENV&&v.push({initialize:c.debugTool.onBeginFlush,close:c.debugTool.onEndFlush});var m={getTransactionWrappers:function(){return v},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return f},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(t){this.reactMountReady.rollback(t)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};i(r.prototype,l,m),a.addPoolingTo(r),e.exports=r}).call(this,t("_process"))},{"./CallbackQueue":794,"./PooledClass":812,"./ReactBrowserEventEmitter":813,"./ReactInputSelection":848,"./ReactInstrumentation":850,"./ReactUpdateQueue":864,"./Transaction":883,_process:28,"object-assign":759}],860:[function(t,e,n){(function(n){"use strict";function r(){i.attachRefs(this,this._currentElement)}var i=t("./ReactRef"),o=t("./ReactInstrumentation"),a=t("fbjs/lib/warning"),s={mountComponent:function(t,e,i,a,s,u){"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onBeforeMountComponent(t._debugID,t._currentElement,u);var c=t.mountComponent(e,i,a,s,u);return t._currentElement&&null!=t._currentElement.ref&&e.getReactMountReady().enqueue(r,t),"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onMountComponent(t._debugID),c},getHostNode:function(t){return t.getHostNode()},unmountComponent:function(t,e){"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onBeforeUnmountComponent(t._debugID),i.detachRefs(t,t._currentElement),t.unmountComponent(e),"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onUnmountComponent(t._debugID)},receiveComponent:function(t,e,a,s){var u=t._currentElement;if(e!==u||s!==t._context){"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onBeforeUpdateComponent(t._debugID,e);var c=i.shouldUpdateRefs(u,e);c&&i.detachRefs(t,u),t.receiveComponent(e,a,s),c&&t._currentElement&&null!=t._currentElement.ref&&a.getReactMountReady().enqueue(r,t),"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onUpdateComponent(t._debugID)}},performUpdateIfNecessary:function(t,e,r){if(t._updateBatchNumber!==r)return void("production"!==n.env.NODE_ENV&&a(null==t._updateBatchNumber||t._updateBatchNumber===r+1,"performUpdateIfNecessary: Unexpected batch number (current %s, pending %s)",r,t._updateBatchNumber));"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onBeforeUpdateComponent(t._debugID,t._currentElement),t.performUpdateIfNecessary(e),"production"!==n.env.NODE_ENV&&0!==t._debugID&&o.debugTool.onUpdateComponent(t._debugID)}};e.exports=s}).call(this,t("_process"))},{"./ReactInstrumentation":850,"./ReactRef":861,_process:28,"fbjs/lib/warning":446}],861:[function(t,e,n){"use strict";function r(t,e,n){"function"==typeof t?t(e.getPublicInstance()):o.addComponentAsRefTo(e,t,n)}function i(t,e,n){"function"==typeof t?t(null):o.removeComponentAsRefFrom(e,t,n)}var o=t("./ReactOwner"),a={};a.attachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&r(n,t,e._owner)}},a.shouldUpdateRefs=function(t,e){var n=null,r=null;null!==t&&"object"==typeof t&&(n=t.ref,r=t._owner);var i=null,o=null;return null!==e&&"object"==typeof e&&(i=e.ref,o=e._owner),n!==i||"string"==typeof i&&o!==r},a.detachRefs=function(t,e){if(null!==e&&"object"==typeof e){var n=e.ref;null!=n&&i(n,t,e._owner)}},e.exports=a},{"./ReactOwner":856}],862:[function(t,e,n){(function(n){"use strict";function r(t){this.reinitializeTransaction(),this.renderToStaticMarkup=t,this.useCreateElement=!1,this.updateQueue=new u(this)}var i=t("object-assign"),o=t("./PooledClass"),a=t("./Transaction"),s=t("./ReactInstrumentation"),u=t("./ReactServerUpdateQueue"),c=[];"production"!==n.env.NODE_ENV&&c.push({initialize:s.debugTool.onBeginFlush,close:s.debugTool.onEndFlush});var l={enqueue:function(){}},f={getTransactionWrappers:function(){return c},getReactMountReady:function(){return l},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};i(r.prototype,a,f),o.addPoolingTo(r),e.exports=r}).call(this,t("_process"))},{"./PooledClass":812,"./ReactInstrumentation":850,"./ReactServerUpdateQueue":863,"./Transaction":883,_process:28,"object-assign":759}],863:[function(t,e,n){(function(n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if("production"!==n.env.NODE_ENV){var r=t.constructor;"production"!==n.env.NODE_ENV&&a(!1,"%s(...): Can only update a mounting component. This usually means you called %s() outside componentWillMount() on the server. This is a no-op. Please check the code for the %s component.",e,e,r&&(r.displayName||r.name)||"ReactClass")}}var o=t("./ReactUpdateQueue"),a=t("fbjs/lib/warning"),s=function(){function t(e){r(this,t),this.transaction=e}return t.prototype.isMounted=function(t){return!1},t.prototype.enqueueCallback=function(t,e,n){this.transaction.isInTransaction()&&o.enqueueCallback(t,e,n)},t.prototype.enqueueForceUpdate=function(t){this.transaction.isInTransaction()?o.enqueueForceUpdate(t):i(t,"forceUpdate")},t.prototype.enqueueReplaceState=function(t,e){this.transaction.isInTransaction()?o.enqueueReplaceState(t,e):i(t,"replaceState")},t.prototype.enqueueSetState=function(t,e){this.transaction.isInTransaction()?o.enqueueSetState(t,e):i(t,"setState")},t}();e.exports=s}).call(this,t("_process"))},{"./ReactUpdateQueue":864,_process:28,"fbjs/lib/warning":446}],864:[function(t,e,n){(function(n){"use strict";function r(t){l.enqueueUpdate(t)}function i(t){var e=typeof t;if("object"!==e)return e;var n=t.constructor&&t.constructor.name||e,r=Object.keys(t);return r.length>0&&r.length<20?n+" (keys: "+r.join(", ")+")":n}function o(t,e){var r=u.get(t);if(!r){if("production"!==n.env.NODE_ENV){var i=t.constructor;"production"!==n.env.NODE_ENV&&h(!e,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",e,e,i&&(i.displayName||i.name)||"ReactClass")}return null}return"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&h(null==s.current,"%s(...): Cannot update during an existing state transition (such as within `render` or another component's constructor). Render methods should be a pure function of props and state; constructor side-effects are an anti-pattern, but can be moved to `componentWillMount`.",e),r}var a=t("./reactProdInvariant"),s=t("react/lib/ReactCurrentOwner"),u=t("./ReactInstanceMap"),c=t("./ReactInstrumentation"),l=t("./ReactUpdates"),f=t("fbjs/lib/invariant"),h=t("fbjs/lib/warning"),p={isMounted:function(t){if("production"!==n.env.NODE_ENV){var e=s.current;null!==e&&("production"!==n.env.NODE_ENV&&h(e._warnedAboutRefsInRender,"%s is accessing isMounted inside its render() function. render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0)}var r=u.get(t);return!!r&&!!r._renderedComponent},enqueueCallback:function(t,e,n){p.validateCallback(e,n);var i=o(t);if(!i)return null;i._pendingCallbacks?i._pendingCallbacks.push(e):i._pendingCallbacks=[e],r(i)},enqueueCallbackInternal:function(t,e){t._pendingCallbacks?t._pendingCallbacks.push(e):t._pendingCallbacks=[e],r(t)},enqueueForceUpdate:function(t){var e=o(t,"forceUpdate");e&&(e._pendingForceUpdate=!0,r(e))},enqueueReplaceState:function(t,e){var n=o(t,"replaceState");n&&(n._pendingStateQueue=[e],n._pendingReplaceState=!0,r(n))},enqueueSetState:function(t,e){"production"!==n.env.NODE_ENV&&(c.debugTool.onSetState(),"production"!==n.env.NODE_ENV&&h(null!=e,"setState(...): You passed an undefined or null state object; instead, use forceUpdate()."));var i=o(t,"setState");if(i){(i._pendingStateQueue||(i._pendingStateQueue=[])).push(e),r(i)}},enqueueElementInternal:function(t,e,n){t._pendingElement=e,t._context=n,r(t)},validateCallback:function(t,e){t&&"function"!=typeof t&&("production"!==n.env.NODE_ENV?f(!1,"%s(...): Expected the last optional `callback` argument to be a function. Instead received: %s.",e,i(t)):a("122",e,i(t)))}};e.exports=p}).call(this,t("_process"))},{"./ReactInstanceMap":849,"./ReactInstrumentation":850,"./ReactUpdates":865,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/ReactCurrentOwner":939}],865:[function(t,e,n){(function(n){"use strict";function r(){A.ReactReconcileTransaction&&x||("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates: must inject a reconcile transaction class and batching strategy"):l("123"))}function i(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=h.getPooled(),this.reconcileTransaction=A.ReactReconcileTransaction.getPooled(!0)}function o(t,e,n,i,o,a){return r(),x.batchedUpdates(t,e,n,i,o,a)}function a(t,e){return t._mountOrder-e._mountOrder}function s(t){var e=t.dirtyComponentsLength;e!==g.length&&("production"!==n.env.NODE_ENV?y(!1,"Expected flush transaction's stored dirty-components length (%s) to match dirty-components array length (%s).",e,g.length):l("124",e,g.length)),g.sort(a),_++;for(var r=0;r<e;r++){var i=g[r],o=i._pendingCallbacks;i._pendingCallbacks=null;var s;if(d.logTopLevelRenders){var u=i;i._currentElement.type.isReactTopLevelWrapper&&(u=i._renderedComponent),s="React update: "+u.getName(),console.time(s)}if(v.performUpdateIfNecessary(i,t.reconcileTransaction,_),s&&console.timeEnd(s),o)for(var c=0;c<o.length;c++)t.callbackQueue.enqueue(o[c],i.getPublicInstance())}}function u(t){if(r(),!x.isBatchingUpdates)return void x.batchedUpdates(u,t);g.push(t),null==t._updateBatchNumber&&(t._updateBatchNumber=_+1)}function c(t,e){x.isBatchingUpdates||("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates.asap: Can't enqueue an asap callback in a context whereupdates are not being batched."):l("125")),b.enqueue(t,e),w=!0}var l=t("./reactProdInvariant"),f=t("object-assign"),h=t("./CallbackQueue"),p=t("./PooledClass"),d=t("./ReactFeatureFlags"),v=t("./ReactReconciler"),m=t("./Transaction"),y=t("fbjs/lib/invariant"),g=[],_=0,b=h.getPooled(),w=!1,x=null,E={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),M()):g.length=0}},T={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},S=[E,T];f(i.prototype,m,{getTransactionWrappers:function(){return S},destructor:function(){this.dirtyComponentsLength=null,h.release(this.callbackQueue),this.callbackQueue=null,A.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(t,e,n){return m.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,t,e,n)}}),p.addPoolingTo(i);var M=function(){for(;g.length||w;){if(g.length){var t=i.getPooled();t.perform(s,null,t),i.release(t)}if(w){w=!1;var e=b;b=h.getPooled(),e.notifyAll(),h.release(e)}}},O={injectReconcileTransaction:function(t){t||("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates: must provide a reconcile transaction class"):l("126")),A.ReactReconcileTransaction=t},injectBatchingStrategy:function(t){t||("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates: must provide a batching strategy"):l("127")),"function"!=typeof t.batchedUpdates&&("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates: must provide a batchedUpdates() function"):l("128")),"boolean"!=typeof t.isBatchingUpdates&&("production"!==n.env.NODE_ENV?y(!1,"ReactUpdates: must provide an isBatchingUpdates boolean attribute"):l("129")),x=t}},A={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:u,flushBatchedUpdates:M,injection:O,asap:c};e.exports=A}).call(this,t("_process"))},{"./CallbackQueue":794,"./PooledClass":812,"./ReactFeatureFlags":844,"./ReactReconciler":860,"./Transaction":883,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"object-assign":759}],866:[function(t,e,n){"use strict";e.exports="15.4.2"},{}],867:[function(t,e,n){"use strict";var r={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},i={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:r.xlink,xlinkArcrole:r.xlink,xlinkHref:r.xlink,xlinkRole:r.xlink,xlinkShow:r.xlink,xlinkTitle:r.xlink,xlinkType:r.xlink,xmlBase:r.xml,xmlLang:r.xml,xmlSpace:r.xml},DOMAttributeNames:{}};Object.keys(i).forEach(function(t){o.Properties[t]=0,i[t]&&(o.DOMAttributeNames[t]=i[t])}),e.exports=o},{}],868:[function(t,e,n){"use strict";function r(t){if("selectionStart"in t&&u.hasSelectionCapabilities(t))return{start:t.selectionStart,end:t.selectionEnd};if(window.getSelection){var e=window.getSelection();return{anchorNode:e.anchorNode,anchorOffset:e.anchorOffset,focusNode:e.focusNode,focusOffset:e.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function i(t,e){if(g||null==v||v!==l())return null;var n=r(v);if(!y||!h(y,n)){y=n;var i=c.getPooled(d.select,m,t,e);return i.type="select",i.target=v,o.accumulateTwoPhaseDispatches(i),i}return null}var o=t("./EventPropagators"),a=t("fbjs/lib/ExecutionEnvironment"),s=t("./ReactDOMComponentTree"),u=t("./ReactInputSelection"),c=t("./SyntheticEvent"),l=t("fbjs/lib/getActiveElement"),f=t("./isTextInputElement"),h=t("fbjs/lib/shallowEqual"),p=a.canUseDOM&&"documentMode"in document&&document.documentMode<=11,d={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:["topBlur","topContextMenu","topFocus","topKeyDown","topKeyUp","topMouseDown","topMouseUp","topSelectionChange"]}},v=null,m=null,y=null,g=!1,_=!1,b={eventTypes:d,extractEvents:function(t,e,n,r){if(!_)return null;var o=e?s.getNodeFromInstance(e):window;switch(t){case"topFocus":(f(o)||"true"===o.contentEditable)&&(v=o,m=e,y=null);break;case"topBlur":v=null,m=null,y=null;break;case"topMouseDown":g=!0;break;case"topContextMenu":case"topMouseUp":return g=!1,i(n,r);case"topSelectionChange":if(p)break;case"topKeyDown":case"topKeyUp":return i(n,r)}return null},didPutListener:function(t,e,n){"onSelect"===e&&(_=!0)}};e.exports=b},{"./EventPropagators":807,"./ReactDOMComponentTree":821,"./ReactInputSelection":848,"./SyntheticEvent":874,"./isTextInputElement":906,"fbjs/lib/ExecutionEnvironment":425,"fbjs/lib/getActiveElement":434,"fbjs/lib/shallowEqual":445}],869:[function(t,e,n){(function(n){"use strict";function r(t){return"."+t._rootNodeID}function i(t){return"button"===t||"input"===t||"select"===t||"textarea"===t}var o=t("./reactProdInvariant"),a=t("fbjs/lib/EventListener"),s=t("./EventPropagators"),u=t("./ReactDOMComponentTree"),c=t("./SyntheticAnimationEvent"),l=t("./SyntheticClipboardEvent"),f=t("./SyntheticEvent"),h=t("./SyntheticFocusEvent"),p=t("./SyntheticKeyboardEvent"),d=t("./SyntheticMouseEvent"),v=t("./SyntheticDragEvent"),m=t("./SyntheticTouchEvent"),y=t("./SyntheticTransitionEvent"),g=t("./SyntheticUIEvent"),_=t("./SyntheticWheelEvent"),b=t("fbjs/lib/emptyFunction"),w=t("./getEventCharCode"),x=t("fbjs/lib/invariant"),E={},T={};["abort","animationEnd","animationIteration","animationStart","blur","canPlay","canPlayThrough","click","contextMenu","copy","cut","doubleClick","drag","dragEnd","dragEnter","dragExit","dragLeave","dragOver","dragStart","drop","durationChange","emptied","encrypted","ended","error","focus","input","invalid","keyDown","keyPress","keyUp","load","loadedData","loadedMetadata","loadStart","mouseDown","mouseMove","mouseOut","mouseOver","mouseUp","paste","pause","play","playing","progress","rateChange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeUpdate","touchCancel","touchEnd","touchMove","touchStart","transitionEnd","volumeChange","waiting","wheel"].forEach(function(t){var e=t[0].toUpperCase()+t.slice(1),n="on"+e,r="top"+e,i={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[r]};E[t]=i,T[r]=i});var S={},M={eventTypes:E,extractEvents:function(t,e,r,i){var a=T[t];if(!a)return null;var u;switch(t){case"topAbort":case"topCanPlay":case"topCanPlayThrough":case"topDurationChange":case"topEmptied":case"topEncrypted":case"topEnded":case"topError":case"topInput":case"topInvalid":case"topLoad":case"topLoadedData":case"topLoadedMetadata":case"topLoadStart":case"topPause":case"topPlay":case"topPlaying":case"topProgress":case"topRateChange":case"topReset":case"topSeeked":case"topSeeking":case"topStalled":case"topSubmit":case"topSuspend":case"topTimeUpdate":case"topVolumeChange":case"topWaiting":u=f;break;case"topKeyPress":if(0===w(r))return null;case"topKeyDown":case"topKeyUp":u=p;break;case"topBlur":case"topFocus":u=h;break;case"topClick":
if(2===r.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":u=d;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":u=v;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":u=m;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":u=c;break;case"topTransitionEnd":u=y;break;case"topScroll":u=g;break;case"topWheel":u=_;break;case"topCopy":case"topCut":case"topPaste":u=l}u||("production"!==n.env.NODE_ENV?x(!1,"SimpleEventPlugin: Unhandled event type, `%s`.",t):o("86",t));var b=u.getPooled(a,e,r,i);return s.accumulateTwoPhaseDispatches(b),b},didPutListener:function(t,e,n){if("onClick"===e&&!i(t._tag)){var o=r(t),s=u.getNodeFromInstance(t);S[o]||(S[o]=a.listen(s,"click",b))}},willDeleteListener:function(t,e){if("onClick"===e&&!i(t._tag)){var n=r(t);S[n].remove(),delete S[n]}}};e.exports=M}).call(this,t("_process"))},{"./EventPropagators":807,"./ReactDOMComponentTree":821,"./SyntheticAnimationEvent":870,"./SyntheticClipboardEvent":871,"./SyntheticDragEvent":873,"./SyntheticEvent":874,"./SyntheticFocusEvent":875,"./SyntheticKeyboardEvent":877,"./SyntheticMouseEvent":878,"./SyntheticTouchEvent":879,"./SyntheticTransitionEvent":880,"./SyntheticUIEvent":881,"./SyntheticWheelEvent":882,"./getEventCharCode":894,"./reactProdInvariant":908,_process:28,"fbjs/lib/EventListener":424,"fbjs/lib/emptyFunction":431,"fbjs/lib/invariant":439}],870:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o={animationName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticEvent":874}],871:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};i.augmentClass(r,o),e.exports=r},{"./SyntheticEvent":874}],872:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o={data:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticEvent":874}],873:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticMouseEvent"),o={dataTransfer:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticMouseEvent":878}],874:[function(t,e,n){(function(n){"use strict";function r(t,e,r,i){"production"!==n.env.NODE_ENV&&(delete this.nativeEvent,delete this.preventDefault,delete this.stopPropagation),this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=r;var o=this.constructor.Interface;for(var a in o)if(o.hasOwnProperty(a)){"production"!==n.env.NODE_ENV&&delete this[a];var u=o[a];u?this[a]=u(r):"target"===a?this.target=i:this[a]=r[a]}return(null!=r.defaultPrevented?r.defaultPrevented:r.returnValue===!1)?this.isDefaultPrevented=s.thatReturnsTrue:this.isDefaultPrevented=s.thatReturnsFalse,this.isPropagationStopped=s.thatReturnsFalse,this}function i(t,e){function r(t){return o(a?"setting the method":"setting the property","This is effectively a no-op"),t}function i(){return o(a?"accessing the method":"accessing the property",a?"This is a no-op function":"This is set to null"),e}function o(e,r){"production"!==n.env.NODE_ENV&&u(!1,"This synthetic event is reused for performance reasons. If you're seeing this, you're %s `%s` on a released/nullified synthetic event. %s. If you must keep the original synthetic event around, use event.persist(). See https://fb.me/react-event-pooling for more information.",e,t,r)}var a="function"==typeof e;return{configurable:!0,set:r,get:i}}var o=t("object-assign"),a=t("./PooledClass"),s=t("fbjs/lib/emptyFunction"),u=t("fbjs/lib/warning"),c=!1,l="function"==typeof Proxy,f=["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"],h={type:null,target:null,currentTarget:s.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};o(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=s.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=s.thatReturnsTrue)},persist:function(){this.isPersistent=s.thatReturnsTrue},isPersistent:s.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)"production"!==n.env.NODE_ENV?Object.defineProperty(this,e,i(e,t[e])):this[e]=null;for(var r=0;r<f.length;r++)this[f[r]]=null;"production"!==n.env.NODE_ENV&&(Object.defineProperty(this,"nativeEvent",i("nativeEvent",null)),Object.defineProperty(this,"preventDefault",i("preventDefault",s)),Object.defineProperty(this,"stopPropagation",i("stopPropagation",s)))}}),r.Interface=h,"production"!==n.env.NODE_ENV&&l&&(r=new Proxy(r,{construct:function(t,e){return this.apply(t,Object.create(t.prototype),e)},apply:function(t,e,r){return new Proxy(t.apply(e,r),{set:function(t,e,r){return"isPersistent"===e||t.constructor.Interface.hasOwnProperty(e)||f.indexOf(e)!==-1||("production"!==n.env.NODE_ENV&&u(c||t.isPersistent(),"This synthetic event is reused for performance reasons. If you're seeing this, you're adding a new property in the synthetic event object. The property is never released. See https://fb.me/react-event-pooling for more information."),c=!0),t[e]=r,!0}})}})),r.augmentClass=function(t,e){var n=this,r=function(){};r.prototype=n.prototype;var i=new r;o(i,t.prototype),t.prototype=i,t.prototype.constructor=t,t.Interface=o({},n.Interface,e),t.augmentClass=n.augmentClass,a.addPoolingTo(t,a.fourArgumentPooler)},a.addPoolingTo(r,a.fourArgumentPooler),e.exports=r}).call(this,t("_process"))},{"./PooledClass":812,_process:28,"fbjs/lib/emptyFunction":431,"fbjs/lib/warning":446,"object-assign":759}],875:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticUIEvent"),o={relatedTarget:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticUIEvent":881}],876:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o={data:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticEvent":874}],877:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticUIEvent"),o=t("./getEventCharCode"),a=t("./getEventKey"),s=t("./getEventModifierState"),u={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(t){return"keypress"===t.type?o(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?o(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}};i.augmentClass(r,u),e.exports=r},{"./SyntheticUIEvent":881,"./getEventCharCode":894,"./getEventKey":895,"./getEventModifierState":896}],878:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticUIEvent"),o=t("./ViewportMetrics"),a=t("./getEventModifierState"),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(t){var e=t.button;return"which"in t?e:2===e?2:4===e?1:0},buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},pageX:function(t){return"pageX"in t?t.pageX:t.clientX+o.currentScrollLeft},pageY:function(t){return"pageY"in t?t.pageY:t.clientY+o.currentScrollTop}};i.augmentClass(r,s),e.exports=r},{"./SyntheticUIEvent":881,"./ViewportMetrics":884,"./getEventModifierState":896}],879:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticUIEvent"),o=t("./getEventModifierState"),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};i.augmentClass(r,a),e.exports=r},{"./SyntheticUIEvent":881,"./getEventModifierState":896}],880:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o={propertyName:null,elapsedTime:null,pseudoElement:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticEvent":874}],881:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticEvent"),o=t("./getEventTarget"),a={view:function(t){if(t.view)return t.view;var e=o(t);if(e.window===e)return e;var n=e.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(t){return t.detail||0}};i.augmentClass(r,a),e.exports=r},{"./SyntheticEvent":874,"./getEventTarget":897}],882:[function(t,e,n){"use strict";function r(t,e,n,r){return i.call(this,t,e,n,r)}var i=t("./SyntheticMouseEvent"),o={deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null};i.augmentClass(r,o),e.exports=r},{"./SyntheticMouseEvent":878}],883:[function(t,e,n){(function(n){"use strict";var r=t("./reactProdInvariant"),i=t("fbjs/lib/invariant"),o={},a={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(t,e,o,a,s,u,c,l){this.isInTransaction()&&("production"!==n.env.NODE_ENV?i(!1,"Transaction.perform(...): Cannot initialize a transaction when there is already an outstanding transaction."):r("27"));var f,h;try{this._isInTransaction=!0,f=!0,this.initializeAll(0),h=t.call(e,o,a,s,u,c,l),f=!1}finally{try{if(f)try{this.closeAll(0)}catch(t){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return h},initializeAll:function(t){for(var e=this.transactionWrappers,n=t;n<e.length;n++){var r=e[n];try{this.wrapperInitData[n]=o,this.wrapperInitData[n]=r.initialize?r.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o)try{this.initializeAll(n+1)}catch(t){}}}},closeAll:function(t){this.isInTransaction()||("production"!==n.env.NODE_ENV?i(!1,"Transaction.closeAll(): Cannot close transaction when none are open."):r("28"));for(var e=this.transactionWrappers,a=t;a<e.length;a++){var s,u=e[a],c=this.wrapperInitData[a];try{s=!0,c!==o&&u.close&&u.close.call(this,c),s=!1}finally{if(s)try{this.closeAll(a+1)}catch(t){}}}this.wrapperInitData.length=0}};e.exports=a}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],884:[function(t,e,n){"use strict";var r={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(t){r.currentScrollLeft=t.x,r.currentScrollTop=t.y}};e.exports=r},{}],885:[function(t,e,n){(function(n){"use strict";function r(t,e){return null==e&&("production"!==n.env.NODE_ENV?o(!1,"accumulateInto(...): Accumulated items must not be null or undefined."):i("30")),null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}var i=t("./reactProdInvariant"),o=t("fbjs/lib/invariant");e.exports=r}).call(this,t("_process"))},{"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439}],886:[function(t,e,n){"use strict";function r(t){for(var e=1,n=0,r=0,i=t.length,o=i&-4;r<o;){for(var a=Math.min(r+4096,o);r<a;r+=4)n+=(e+=t.charCodeAt(r))+(e+=t.charCodeAt(r+1))+(e+=t.charCodeAt(r+2))+(e+=t.charCodeAt(r+3));e%=65521,n%=65521}for(;r<i;r++)n+=e+=t.charCodeAt(r);return e%=65521,n%=65521,e|n<<16}e.exports=r},{}],887:[function(t,e,n){(function(n){"use strict";function r(e,r,f,h,p,d){for(var v in e)if(e.hasOwnProperty(v)){var m;try{"function"!=typeof e[v]&&("production"!==n.env.NODE_ENV?u(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",h||"React class",a[f],v):o("84",h||"React class",a[f],v)),m=e[v](r,v,h,f,null,s)}catch(t){m=t}if("production"!==n.env.NODE_ENV&&c(!m||m instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",h||"React class",a[f],v,typeof m),m instanceof Error&&!(m.message in l)){l[m.message]=!0;var y="";"production"!==n.env.NODE_ENV&&(i||(i=t("react/lib/ReactComponentTreeHook")),null!==d?y=i.getStackAddendumByID(d):null!==p&&(y=i.getCurrentStackAddendum(p))),"production"!==n.env.NODE_ENV&&c(!1,"Failed %s type: %s%s",f,m.message,y)}}}var i,o=t("./reactProdInvariant"),a=t("./ReactPropTypeLocationNames"),s=t("./ReactPropTypesSecret"),u=t("fbjs/lib/invariant"),c=t("fbjs/lib/warning");void 0!==n&&n.env&&"test"===n.env.NODE_ENV&&(i=t("react/lib/ReactComponentTreeHook"));var l={};e.exports=r}).call(this,t("_process"))},{"./ReactPropTypeLocationNames":857,"./ReactPropTypesSecret":858,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],888:[function(t,e,n){"use strict";var r=function(t){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t};e.exports=r},{}],889:[function(t,e,n){(function(n){"use strict";function r(t,e,r){if(null==e||"boolean"==typeof e||""===e)return"";if(isNaN(e)||0===e||a.hasOwnProperty(t)&&a[t])return""+e;if("string"==typeof e){if("production"!==n.env.NODE_ENV&&r&&"0"!==e){var i=r._currentElement._owner,u=i?i.getName():null;u&&!s[u]&&(s[u]={});var c=!1;if(u){var l=s[u];c=l[t],c||(l[t]=!0)}c||"production"!==n.env.NODE_ENV&&o(!1,"a `%s` tag (owner: `%s`) was passed a numeric string value for CSS property `%s` (value: `%s`) which will be treated as a unitless number in a future version of React.",r._currentElement.type,u||"unknown",t,e)}e=e.trim()}return e+"px"}var i=t("./CSSProperty"),o=t("fbjs/lib/warning"),a=i.isUnitlessNumber,s={};e.exports=r}).call(this,t("_process"))},{"./CSSProperty":792,_process:28,"fbjs/lib/warning":446}],890:[function(t,e,n){"use strict";function r(t){var e=""+t,n=o.exec(e);if(!n)return e;var r,i="",a=0,s=0;for(a=n.index;a<e.length;a++){switch(e.charCodeAt(a)){case 34:r="&quot;";break;case 38:r="&amp;";break;case 39:r="&#x27;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}s!==a&&(i+=e.substring(s,a)),s=a+1,i+=r}return s!==a?i+e.substring(s,a):i}function i(t){return"boolean"==typeof t||"number"==typeof t?""+t:r(t)}var o=/["'&<>]/;e.exports=i},{}],891:[function(t,e,n){(function(n){"use strict";function r(t){if("production"!==n.env.NODE_ENV){var e=o.current;null!==e&&("production"!==n.env.NODE_ENV&&l(e._warnedAboutRefsInRender,"%s is accessing findDOMNode inside its render(). render() should be a pure function of props and state. It should never access something that requires stale data from the previous render, such as refs. Move this logic to componentDidMount and componentDidUpdate instead.",e.getName()||"A component"),e._warnedAboutRefsInRender=!0)}if(null==t)return null;if(1===t.nodeType)return t;var r=s.get(t);if(r)return r=u(r),r?a.getNodeFromInstance(r):null;"function"==typeof t.render?"production"!==n.env.NODE_ENV?c(!1,"findDOMNode was called on an unmounted component."):i("44"):"production"!==n.env.NODE_ENV?c(!1,"Element appears to be neither ReactComponent nor DOMNode (keys: %s)",Object.keys(t)):i("45",Object.keys(t))}var i=t("./reactProdInvariant"),o=t("react/lib/ReactCurrentOwner"),a=t("./ReactDOMComponentTree"),s=t("./ReactInstanceMap"),u=t("./getHostComponentFromComposite"),c=t("fbjs/lib/invariant"),l=t("fbjs/lib/warning");e.exports=r}).call(this,t("_process"))},{"./ReactDOMComponentTree":821,"./ReactInstanceMap":849,"./getHostComponentFromComposite":898,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/ReactCurrentOwner":939}],892:[function(t,e,n){(function(n){"use strict";function r(e,r,i,s){if(e&&"object"==typeof e){var c=e,l=void 0===c[i];"production"!==n.env.NODE_ENV&&(o||(o=t("react/lib/ReactComponentTreeHook")),l||"production"!==n.env.NODE_ENV&&u(!1,"flattenChildren(...): Encountered two children with the same key, `%s`. Child keys must be unique; when two children share a key, only the first child will be used.%s",a.unescape(i),o.getStackAddendumByID(s))),l&&null!=r&&(c[i]=r)}}function i(t,e){if(null==t)return t;var i={};return"production"!==n.env.NODE_ENV?s(t,function(t,n,i){return r(t,n,i,e)},i):s(t,r,i),i}var o,a=t("./KeyEscapeUtils"),s=t("./traverseAllChildren"),u=t("fbjs/lib/warning");void 0!==n&&n.env&&"test"===n.env.NODE_ENV&&(o=t("react/lib/ReactComponentTreeHook")),e.exports=i}).call(this,t("_process"))},{"./KeyEscapeUtils":810,"./traverseAllChildren":913,_process:28,"fbjs/lib/warning":446,"react/lib/ReactComponentTreeHook":938}],893:[function(t,e,n){"use strict";function r(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}e.exports=r},{}],894:[function(t,e,n){"use strict";function r(t){var e,n=t.keyCode;return"charCode"in t?(e=t.charCode,0===e&&13===n&&(e=13)):e=n,e>=32||13===e?e:0}e.exports=r},{}],895:[function(t,e,n){"use strict";function r(t){if(t.key){var e=o[t.key]||t.key;if("Unidentified"!==e)return e}if("keypress"===t.type){var n=i(t);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===t.type||"keyup"===t.type?a[t.keyCode]||"Unidentified":""}var i=t("./getEventCharCode"),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};e.exports=r},{"./getEventCharCode":894}],896:[function(t,e,n){"use strict";function r(t){var e=this,n=e.nativeEvent;if(n.getModifierState)return n.getModifierState(t);var r=o[t];return!!r&&!!n[r]}function i(t){return r}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};e.exports=i},{}],897:[function(t,e,n){"use strict";function r(t){var e=t.target||t.srcElement||window;return e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}e.exports=r},{}],898:[function(t,e,n){"use strict";function r(t){for(var e;(e=t._renderedNodeType)===i.COMPOSITE;)t=t._renderedComponent;return e===i.HOST?t._renderedComponent:e===i.EMPTY?null:void 0}var i=t("./ReactNodeTypes");e.exports=r},{"./ReactNodeTypes":855}],899:[function(t,e,n){"use strict";function r(t){var e=t&&(i&&t[i]||t["@@iterator"]);if("function"==typeof e)return e}var i="function"==typeof Symbol&&Symbol.iterator;e.exports=r},{}],900:[function(t,e,n){"use strict";function r(){return i++}var i=1;e.exports=r},{}],901:[function(t,e,n){"use strict";function r(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function i(t){for(;t;){if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function o(t,e){for(var n=r(t),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,o<=e&&a>=e)return{node:n,offset:e-o};o=a}n=r(i(n))}}e.exports=o},{}],902:[function(t,e,n){"use strict";function r(){return!o&&i.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var i=t("fbjs/lib/ExecutionEnvironment"),o=null;e.exports=r},{"fbjs/lib/ExecutionEnvironment":425}],903:[function(t,e,n){"use strict";function r(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n["ms"+t]="MS"+e,n["O"+t]="o"+e.toLowerCase(),n}function i(t){if(s[t])return s[t];if(!a[t])return t;var e=a[t];for(var n in e)if(e.hasOwnProperty(n)&&n in u)return s[t]=e[n];return""}var o=t("fbjs/lib/ExecutionEnvironment"),a={animationend:r("Animation","AnimationEnd"),animationiteration:r("Animation","AnimationIteration"),animationstart:r("Animation","AnimationStart"),transitionend:r("Transition","TransitionEnd")},s={},u={};o.canUseDOM&&(u=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),e.exports=i},{"fbjs/lib/ExecutionEnvironment":425}],904:[function(t,e,n){(function(n){"use strict";function r(t){if(t){var e=t.getName();if(e)return" Check the render method of `"+e+"`."}return""}function i(t){return"function"==typeof t&&void 0!==t.prototype&&"function"==typeof t.prototype.mountComponent&&"function"==typeof t.prototype.receiveComponent}function o(t,e){var s;if(null===t||t===!1)s=c.create(o);else if("object"==typeof t){var u=t,v=u.type;if("function"!=typeof v&&"string"!=typeof v){var m="";"production"!==n.env.NODE_ENV&&(void 0===v||"object"==typeof v&&null!==v&&0===Object.keys(v).length)&&(m+=" You likely forgot to export your component from the file it's defined in."),m+=r(u._owner),"production"!==n.env.NODE_ENV?h(!1,"Element type is invalid: expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==v?v:typeof v,m):a("130",null==v?v:typeof v,m)}"string"==typeof u.type?s=l.createInternalComponent(u):i(u.type)?(s=new u.type(u),s.getHostNode||(s.getHostNode=s.getNativeNode)):s=new d(u)}else"string"==typeof t||"number"==typeof t?s=l.createInstanceForText(t):"production"!==n.env.NODE_ENV?h(!1,"Encountered invalid React node of type %s",typeof t):a("131",typeof t);return"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&p("function"==typeof s.mountComponent&&"function"==typeof s.receiveComponent&&"function"==typeof s.getHostNode&&"function"==typeof s.unmountComponent,"Only React Components can be mounted."),s._mountIndex=0,s._mountImage=null,"production"!==n.env.NODE_ENV&&(s._debugID=e?f():0),"production"!==n.env.NODE_ENV&&Object.preventExtensions&&Object.preventExtensions(s),s}var a=t("./reactProdInvariant"),s=t("object-assign"),u=t("./ReactCompositeComponent"),c=t("./ReactEmptyComponent"),l=t("./ReactHostComponent"),f=t("./getNextDebugID"),h=t("fbjs/lib/invariant"),p=t("fbjs/lib/warning"),d=function(t){this.construct(t)};s(d.prototype,u,{_instantiateReactComponent:o}),e.exports=o}).call(this,t("_process"))},{"./ReactCompositeComponent":817,"./ReactEmptyComponent":840,"./ReactHostComponent":845,"./getNextDebugID":900,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"object-assign":759}],905:[function(t,e,n){"use strict";function r(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var a=document.createElement("div");a.setAttribute(n,"return;"),r="function"==typeof a[n]}return!r&&i&&"wheel"===t&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var i,o=t("fbjs/lib/ExecutionEnvironment");o.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),e.exports=r},{"fbjs/lib/ExecutionEnvironment":425}],906:[function(t,e,n){"use strict";function r(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!i[t.type]:"textarea"===e}var i={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};e.exports=r},{}],907:[function(t,e,n){"use strict";function r(t){return'"'+i(t)+'"'}var i=t("./escapeTextContentForBrowser");e.exports=r},{"./escapeTextContentForBrowser":890}],908:[function(t,e,n){"use strict";function r(t){for(var e=arguments.length-1,n="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,r=0;r<e;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var i=new Error(n);throw i.name="Invariant Violation",i.framesToPop=1,i}e.exports=r},{}],909:[function(t,e,n){"use strict";var r=t("./ReactMount");e.exports=r.renderSubtreeIntoContainer},{"./ReactMount":853}],910:[function(t,e,n){"use strict";var r,i=t("fbjs/lib/ExecutionEnvironment"),o=t("./DOMNamespaces"),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,u=t("./createMicrosoftUnsafeLocalFunction"),c=u(function(t,e){if(t.namespaceURI!==o.svg||"innerHTML"in t)t.innerHTML=e;else{r=r||document.createElement("div"),r.innerHTML="<svg>"+e+"</svg>";for(var n=r.firstChild;n.firstChild;)t.appendChild(n.firstChild)}});if(i.canUseDOM){var l=document.createElement("div");l.innerHTML=" ",""===l.innerHTML&&(c=function(t,e){if(t.parentNode&&t.parentNode.replaceChild(t,t),a.test(e)||"<"===e[0]&&s.test(e)){t.innerHTML=String.fromCharCode(65279)+e;var n=t.firstChild;1===n.data.length?t.removeChild(n):n.deleteData(0,1)}else t.innerHTML=e}),l=null}e.exports=c},{"./DOMNamespaces":798,"./createMicrosoftUnsafeLocalFunction":888,"fbjs/lib/ExecutionEnvironment":425}],911:[function(t,e,n){"use strict";var r=t("fbjs/lib/ExecutionEnvironment"),i=t("./escapeTextContentForBrowser"),o=t("./setInnerHTML"),a=function(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e};r.canUseDOM&&("textContent"in document.documentElement||(a=function(t,e){if(3===t.nodeType)return void(t.nodeValue=e);o(t,i(e))})),e.exports=a},{"./escapeTextContentForBrowser":890,"./setInnerHTML":910,"fbjs/lib/ExecutionEnvironment":425}],912:[function(t,e,n){"use strict";function r(t,e){var n=null===t||t===!1,r=null===e||e===!1;if(n||r)return n===r;var i=typeof t,o=typeof e;return"string"===i||"number"===i?"string"===o||"number"===o:"object"===o&&t.type===e.type&&t.key===e.key}e.exports=r},{}],913:[function(t,e,n){(function(n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?f.escape(t.key):e.toString(36)}function i(t,e,o,d){var v=typeof t;if("undefined"!==v&&"boolean"!==v||(t=null),null===t||"string"===v||"number"===v||"object"===v&&t.$$typeof===u)return o(d,t,""===e?"."+r(t,0):e),1;var m,y,g=0,_=""===e?".":e+":";if(Array.isArray(t))for(var b=0;b<t.length;b++)m=t[b],y=_+r(m,b),g+=i(m,y,o,d);else{var w=c(t);if(w){var x,E=w.call(t);if(w!==t.entries)for(var T=0;!(x=E.next()).done;)m=x.value,y=_+r(m,T++),g+=i(m,y,o,d);else{if("production"!==n.env.NODE_ENV){var S="";if(s.current){var M=s.current.getName();M&&(S=" Check the render method of `"+M+"`.")}"production"!==n.env.NODE_ENV&&h(p,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead.%s",S),p=!0}for(;!(x=E.next()).done;){var O=x.value;O&&(m=O[1],y=_+f.escape(O[0])+":"+r(m,0),g+=i(m,y,o,d))}}}else if("object"===v){var A="";if("production"!==n.env.NODE_ENV&&(A=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",t._isReactElement&&(A=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),s.current)){var R=s.current.getName();R&&(A+=" Check the render method of `"+R+"`.")}var I=String(t);"production"!==n.env.NODE_ENV?l(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===I?"object with keys {"+Object.keys(t).join(", ")+"}":I,A):a("31","[object Object]"===I?"object with keys {"+Object.keys(t).join(", ")+"}":I,A)}}return g}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=t("./reactProdInvariant"),s=t("react/lib/ReactCurrentOwner"),u=t("./ReactElementSymbol"),c=t("./getIteratorFn"),l=t("fbjs/lib/invariant"),f=t("./KeyEscapeUtils"),h=t("fbjs/lib/warning"),p=!1;e.exports=o}).call(this,t("_process"))},{"./KeyEscapeUtils":810,"./ReactElementSymbol":839,"./getIteratorFn":899,"./reactProdInvariant":908,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"react/lib/ReactCurrentOwner":939}],914:[function(t,e,n){(function(n){"use strict";var r=t("object-assign"),i=t("fbjs/lib/emptyFunction"),o=t("fbjs/lib/warning"),a=i;if("production"!==n.env.NODE_ENV){var s=["address","applet","area","article","aside","base","basefont","bgsound","blockquote","body","br","button","caption","center","col","colgroup","dd","details","dir","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","isindex","li","link","listing","main","marquee","menu","menuitem","meta","nav","noembed","noframes","noscript","object","ol","p","param","plaintext","pre","script","section","select","source","style","summary","table","tbody","td","template","textarea","tfoot","th","thead","title","tr","track","ul","wbr","xmp"],u=["applet","caption","html","table","td","th","marquee","object","template","foreignObject","desc","title"],c=u.concat(["button"]),l=["dd","dt","li","option","optgroup","p","rp","rt"],f={current:null,formTag:null,aTagInScope:null,buttonTagInScope:null,nobrTagInScope:null,pTagInButtonScope:null,listItemTagAutoclosing:null,dlItemTagAutoclosing:null},h=function(t,e,n){var i=r({},t||f),o={tag:e,instance:n};return u.indexOf(e)!==-1&&(i.aTagInScope=null,i.buttonTagInScope=null,i.nobrTagInScope=null),c.indexOf(e)!==-1&&(i.pTagInButtonScope=null),s.indexOf(e)!==-1&&"address"!==e&&"div"!==e&&"p"!==e&&(i.listItemTagAutoclosing=null,i.dlItemTagAutoclosing=null),i.current=o,"form"===e&&(i.formTag=o),"a"===e&&(i.aTagInScope=o),"button"===e&&(i.buttonTagInScope=o),"nobr"===e&&(i.nobrTagInScope=o),"p"===e&&(i.pTagInButtonScope=o),"li"===e&&(i.listItemTagAutoclosing=o),"dd"!==e&&"dt"!==e||(i.dlItemTagAutoclosing=o),i},p=function(t,e){switch(e){case"select":return"option"===t||"optgroup"===t||"#text"===t;case"optgroup":return"option"===t||"#text"===t;case"option":return"#text"===t;case"tr":return"th"===t||"td"===t||"style"===t||"script"===t||"template"===t;case"tbody":case"thead":case"tfoot":return"tr"===t||"style"===t||"script"===t||"template"===t;case"colgroup":return"col"===t||"template"===t;case"table":return"caption"===t||"colgroup"===t||"tbody"===t||"tfoot"===t||"thead"===t||"style"===t||"script"===t||"template"===t;case"head":return"base"===t||"basefont"===t||"bgsound"===t||"link"===t||"meta"===t||"title"===t||"noscript"===t||"noframes"===t||"style"===t||"script"===t||"template"===t;case"html":return"head"===t||"body"===t;case"#document":return"html"===t}switch(t){case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return"h1"!==e&&"h2"!==e&&"h3"!==e&&"h4"!==e&&"h5"!==e&&"h6"!==e;case"rp":case"rt":return l.indexOf(e)===-1;case"body":case"caption":case"col":case"colgroup":case"frame":case"head":case"html":case"tbody":case"td":case"tfoot":case"th":case"thead":case"tr":return null==e}return!0},d=function(t,e){switch(t){case"address":case"article":case"aside":case"blockquote":case"center":case"details":case"dialog":case"dir":case"div":case"dl":case"fieldset":case"figcaption":case"figure":case"footer":case"header":case"hgroup":case"main":case"menu":case"nav":case"ol":case"p":case"section":case"summary":case"ul":case"pre":case"listing":case"table":case"hr":case"xmp":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return e.pTagInButtonScope;case"form":return e.formTag||e.pTagInButtonScope;case"li":return e.listItemTagAutoclosing;case"dd":case"dt":return e.dlItemTagAutoclosing
;case"button":return e.buttonTagInScope;case"a":return e.aTagInScope;case"nobr":return e.nobrTagInScope}return null},v=function(t){if(!t)return[];var e=[];do e.push(t);while(t=t._currentElement._owner);return e.reverse(),e},m={};a=function(t,e,r,i){i=i||f;var a=i.current,s=a&&a.tag;null!=e&&("production"!==n.env.NODE_ENV&&o(null==t,"validateDOMNesting: when childText is passed, childTag should be null"),t="#text");var u=p(t,s)?null:a,c=u?null:d(t,i),l=u||c;if(l){var h,y=l.tag,g=l.instance,_=r&&r._currentElement._owner,b=g&&g._currentElement._owner,w=v(_),x=v(b),E=Math.min(w.length,x.length),T=-1;for(h=0;h<E&&w[h]===x[h];h++)T=h;var S=w.slice(T+1).map(function(t){return t.getName()||"(unknown)"}),M=x.slice(T+1).map(function(t){return t.getName()||"(unknown)"}),O=[].concat(T!==-1?w[T].getName()||"(unknown)":[],M,y,c?["..."]:[],S,t).join(" > "),A=!!u+"|"+t+"|"+y+"|"+O;if(m[A])return;m[A]=!0;var R=t,I="";if("#text"===t?/\S/.test(e)?R="Text nodes":(R="Whitespace text nodes",I=" Make sure you don't have any extra whitespace between tags on each line of your source code."):R="<"+t+">",u){var k="";"table"===y&&"tr"===t&&(k+=" Add a <tbody> to your code to match the DOM tree generated by the browser."),"production"!==n.env.NODE_ENV&&o(!1,"validateDOMNesting(...): %s cannot appear as a child of <%s>.%s See %s.%s",R,y,I,O,k)}else"production"!==n.env.NODE_ENV&&o(!1,"validateDOMNesting(...): %s cannot appear as a descendant of <%s>. See %s.",R,y,O)}},a.updatedAncestorInfo=h,a.isTagValidInContext=function(t,e){e=e||f;var n=e.current;return p(t,n&&n.tag)&&!d(t,e)}}e.exports=a}).call(this,t("_process"))},{_process:28,"fbjs/lib/emptyFunction":431,"fbjs/lib/warning":446,"object-assign":759}],915:[function(t,e,n){"use strict";var r=t("react"),i=t("immutable"),o=t("global/window"),a=t("global/document"),s=t("r-dom"),u=t("webgl-heatmap"),c=t("viewport-mercator-project"),l=t("scale-color-perceptual/hex/viridis.json");e.exports=r.createClass({displayName:"HeatmapOverlay",propTypes:{width:r.PropTypes.number.isRequired,height:r.PropTypes.number.isRequired,longitude:r.PropTypes.number.isRequired,latitude:r.PropTypes.number.isRequired,zoom:r.PropTypes.number.isRequired,locations:r.PropTypes.oneOfType([r.PropTypes.array,r.PropTypes.instanceOf(i.List)]),lngLatAccessor:r.PropTypes.func.isRequired,intensityAccessor:r.PropTypes.func.isRequired,sizeAccessor:r.PropTypes.func.isRequired,gradientColors:r.PropTypes.instanceOf(i.List).isRequired},getDefaultProps:function(){return{lngLatAccessor:function(t){return[t.longitude,t.latitude]},intensityAccessor:function(t){return.1},sizeAccessor:function(t){return 40},gradientColors:i.List(l)}},_prevGradientColors:null,_gradientTexture:null,componentDidMount:function(){this._update()},componentDidUpdate:function(){this._update()},componentWillUnmount:function(){this._heatmap=null},_getGradientTexture:function(){if(this._prevGradientColors===this.props.gradientColors)return this._gradientTexture;var t=a.createElement("canvas");t.width=String(512),t.height=String(10);var e=t.getContext("2d"),n=e.createLinearGradient(0,5,512,5),r=this.props.gradientColors;r.forEach(function(t,e){var i=e/(r.size-1);n.addColorStop(i,t)}),e.fillStyle=n,e.fillRect(0,0,512,10);var i=new o.Image;return i.src=t.toDataURL("image/png"),i},_redraw:function(){var t=c(this.props);this._heatmap.clear(),this._heatmap.adjustSize(),this.props.locations.forEach(function(e){var n=this.props.sizeAccessor(e),r=this.props.intensityAccessor(e),i=t.project(this.props.lngLatAccessor(e));this._heatmap.addPoint(i[0],i[1],n,r)},this),this._heatmap.update(),this._heatmap.display()},_update:function(){var t=this._getGradientTexture();this._gradientTexture!==t&&(this._heatmap=new u({canvas:this.refs.overlay,intensityToAlpha:!0,alphaRange:[0,.1],gradientTexture:t}),this._gradientTexture=t),this._redraw(),this._prevGradientColors=this.props.gradientColors},render:function(){var t=o.devicePixelRatio||1;return s.canvas({ref:"overlay",width:this.props.width*t,height:this.props.height*t,style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})}})},{"global/document":481,"global/window":482,immutable:485,"r-dom":787,react:956,"scale-color-perceptual/hex/viridis.json":965,"viewport-mercator-project":977,"webgl-heatmap":987}],916:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("bowser"),o=r(i),a=o.default.webkit||o.default.blink?"-webkit-":o.default.gecko?"-moz-":"";n.default={DEFAULTS:{},MAPBOX_API_ACCESS_TOKEN:null,CURSOR:{GRABBING:a+"grabbing",GRAB:a+"grab",POINTER:"pointer"}}},{bowser:51}],917:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return t&&t.__esModule?t:{default:t}}var o=t("./map.react"),a=i(o),s=t("./overlays"),u=r(s),c=t("./utils/fit-bounds"),l=i(c);e.exports=a.default,e.exports.fitBounds=l.default,Object.assign(e.exports,u)},{"./map.react":919,"./overlays":924,"./utils/fit-bounds":928}],918:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function u(){}function c(t,e){var n=t.getBoundingClientRect();return e=e.touches?e.touches[0]:e,[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}function l(t,e){for(var n=[],r=t.getBoundingClientRect(),i=f(e),o=0;o<i.length;o++)n.push([i[o].clientX-r.left-t.clientLeft,i[o].clientY-r.top-t.clientTop]);return n}function f(t){var e=t.type;return"touchend"===e||"touchcancel"===e?t.changedTouches:t.touches}function h(t){var e=t.reduce(function(t,e){return[t[0]+e[0],t[1]+e[1]]},[0,0]);return[e[0]/t.length,e[1]/t.length]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var p,d,v,m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=t("react"),g=r(y),_=t("autobind-decorator"),b=r(_),w=t("global/document"),x=r(w),E=t("global/window"),T=r(E),S=void 0!==T.default.navigator?T.default.navigator.userAgent.toLowerCase():"",M=S.indexOf("firefox")!==-1,O=(v=d=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={didDrag:!1,isFunctionKeyPressed:!1,startPos:null,pos:null,mouseWheelPos:null},n}return a(e,t),m(e,[{key:"_getMousePos",value:function(t){return c(this.refs.container,t)}},{key:"_getTouchPos",value:function(t){return h(l(this.refs.container,t))}},{key:"_isFunctionKeyPressed",value:function(t){return Boolean(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}},{key:"_onMouseDown",value:function(t){var e=this._getMousePos(t);this.setState({didDrag:!1,startPos:e,pos:e,isFunctionKeyPressed:this._isFunctionKeyPressed(t)}),this.props.onMouseDown({pos:e}),x.default.addEventListener("mousemove",this._onMouseDrag,!1),x.default.addEventListener("mouseup",this._onMouseUp,!1)}},{key:"_onTouchStart",value:function(t){var e=this._getTouchPos(t);this.setState({didDrag:!1,startPos:e,pos:e,isFunctionKeyPressed:this._isFunctionKeyPressed(t)}),this.props.onTouchStart({pos:e}),x.default.addEventListener("touchmove",this._onTouchDrag,!1),x.default.addEventListener("touchend",this._onTouchEnd,!1)}},{key:"_onMouseDrag",value:function(t){var e=this._getMousePos(t);if(this.setState({pos:e,didDrag:!0}),this.state.isFunctionKeyPressed){var n=this.state.startPos;this.props.onMouseRotate({pos:e,startPos:n})}else this.props.onMouseDrag({pos:e})}},{key:"_onTouchDrag",value:function(t){var e=this._getTouchPos(t);if(this.setState({pos:e,didDrag:!0}),this.state.isFunctionKeyPressed){var n=this.state.startPos;this.props.onTouchRotate({pos:e,startPos:n})}else this.props.onTouchDrag({pos:e});t.preventDefault()}},{key:"_onMouseUp",value:function(t){x.default.removeEventListener("mousemove",this._onMouseDrag,!1),x.default.removeEventListener("mouseup",this._onMouseUp,!1);var e=this._getMousePos(t);this.setState({pos:e}),this.props.onMouseUp({pos:e}),this.state.didDrag||this.props.onMouseClick({pos:e})}},{key:"_onTouchEnd",value:function(t){x.default.removeEventListener("touchmove",this._onTouchDrag,!1),x.default.removeEventListener("touchend",this._onTouchEnd,!1);var e=this._getTouchPos(t);this.setState({pos:e}),this.props.onTouchEnd({pos:e}),this.state.didDrag||this.props.onTouchTap({pos:e})}},{key:"_onMouseMove",value:function(t){var e=this._getMousePos(t);this.props.onMouseMove({pos:e})}},{key:"_onWheel",value:function(t){t.preventDefault();var e=t.deltaY;M&&t.deltaMode===T.default.WheelEvent.DOM_DELTA_PIXEL&&(e/=T.default.devicePixelRatio),t.deltaMode===T.default.WheelEvent.DOM_DELTA_LINE&&(e*=40);var n=this.state.mouseWheelType,r=this.state.mouseWheelTimeout,i=this.state.mouseWheelLastValue,o=this.state.mouseWheelTime,a=(T.default.performance||Date).now(),s=a-(o||0),u=this._getMousePos(t);o=a,0!==e&&e%4.000244140625===0?(n="wheel",e=Math.floor(e/4)):0!==e&&Math.abs(e)<4?n="trackpad":s>400?(n=null,i=e,r=T.default.setTimeout(function(){this._zoom(-this.state.mouseWheelLastValue,this.state.mouseWheelPos),this.setState({mouseWheelType:"wheel"})}.bind(this),40)):this._type||(n=Math.abs(s*e)<200?"trackpad":"wheel",r&&(T.default.clearTimeout(r),r=null,e+=i)),t.shiftKey&&e&&(e/=4),n&&this._zoom(-e,u),this.setState({mouseWheelTime:o,mouseWheelPos:u,mouseWheelType:n,mouseWheelTimeout:r,mouseWheelLastValue:i})}},{key:"_zoom",value:function(t,e){var n=2/(1+Math.exp(-Math.abs(t/100)));t<0&&0!==n&&(n=1/n),this.props.onZoom({pos:e,scale:n}),T.default.clearTimeout(this._zoomEndTimeout),this._zoomEndTimeout=T.default.setTimeout(function(){this.props.onZoomEnd()}.bind(this),200)}},{key:"render",value:function(){return g.default.createElement("div",{ref:"container",onMouseMove:this._onMouseMove,onMouseDown:this._onMouseDown,onTouchStart:this._onTouchStart,onContextMenu:this._onMouseDown,onWheel:this._onWheel,style:{width:this.props.width,height:this.props.height,position:"relative"}},this.props.children)}}]),e}(y.Component),d.displayName="Interactions",d.propTypes={width:y.PropTypes.number.isRequired,height:y.PropTypes.number.isRequired,onMouseDown:y.PropTypes.func,onMouseDrag:y.PropTypes.func,onMouseRotate:y.PropTypes.func,onMouseUp:y.PropTypes.func,onMouseMove:y.PropTypes.func,onMouseClick:y.PropTypes.func,onTouchStart:y.PropTypes.func,onTouchDrag:y.PropTypes.func,onTouchRotate:y.PropTypes.func,onTouchEnd:y.PropTypes.func,onTouchTap:y.PropTypes.func,onZoom:y.PropTypes.func,onZoomEnd:y.PropTypes.func},d.defaultProps={onMouseDown:u,onMouseDrag:u,onMouseRotate:u,onMouseUp:u,onMouseMove:u,onMouseClick:u,onTouchStart:u,onTouchDrag:u,onTouchRotate:u,onTouchEnd:u,onTouchTap:u,onZoom:u,onZoomEnd:u},p=v,s(p.prototype,"_onMouseDown",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onMouseDown"),p.prototype),s(p.prototype,"_onTouchStart",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onTouchStart"),p.prototype),s(p.prototype,"_onMouseDrag",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onMouseDrag"),p.prototype),s(p.prototype,"_onTouchDrag",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onTouchDrag"),p.prototype),s(p.prototype,"_onMouseUp",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onMouseUp"),p.prototype),s(p.prototype,"_onTouchEnd",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onTouchEnd"),p.prototype),s(p.prototype,"_onMouseMove",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onMouseMove"),p.prototype),s(p.prototype,"_onWheel",[b.default],Object.getOwnPropertyDescriptor(p.prototype,"_onWheel"),p.prototype),p);n.default=O},{"autobind-decorator":49,"global/document":481,"global/window":482,react:956}],919:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function c(){}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l,f,h,p,d=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},m=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),y=t("react"),g=r(y),_=t("autobind-decorator"),b=r(_),w=t("pure-render-decorator"),x=r(w),E=t("mapbox-gl"),T=r(E),S=t("d3-selection"),M=t("immutable"),O=r(M),A=t("assert"),R=r(A),I=t("./map-interactions.react"),k=r(I),P=t("./config"),N=r(P),C=t("./utils/style-utils"),D=t("./utils/diff-styles"),j=r(D),L=t("./utils/transform"),F={latitude:y.PropTypes.number.isRequired,longitude:y.PropTypes.number.isRequired,zoom:y.PropTypes.number.isRequired,maxZoom:y.PropTypes.number,mapStyle:y.PropTypes.oneOfType([y.PropTypes.string,y.PropTypes.instanceOf(O.default.Map)]),mapboxApiAccessToken:y.PropTypes.string,onChangeViewport:y.PropTypes.func,width:y.PropTypes.number.isRequired,height:y.PropTypes.number.isRequired,isDragging:y.PropTypes.bool,startDragLngLat:y.PropTypes.array,onHoverFeatures:y.PropTypes.func,ignoreEmptyFeatures:y.PropTypes.bool,attributionControl:y.PropTypes.bool,onClick:y.PropTypes.func,onClickFeatures:y.PropTypes.func,clickRadius:y.PropTypes.number,preserveDrawingBuffer:y.PropTypes.bool,preventStyleDiffing:y.PropTypes.bool,perspectiveEnabled:y.PropTypes.bool,bearing:y.PropTypes.number,pitch:y.PropTypes.number,altitude:y.PropTypes.number,onLoad:y.PropTypes.func},U={mapStyle:"mapbox://styles/mapbox/light-v9",onChangeViewport:null,mapboxApiAccessToken:N.default.DEFAULTS.MAPBOX_API_ACCESS_TOKEN,preserveDrawingBuffer:!1,attributionControl:!0,ignoreEmptyFeatures:!0,bearing:0,pitch:0,altitude:1.5,clickRadius:15,maxZoom:20},z=(0,x.default)((p=h=function(t){function e(t){o(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={isSupported:T.default.supported(),isDragging:!1,isHovering:!1,startDragLngLat:null,startBearing:null,startPitch:null},n._queryParams={},T.default.accessToken=t.mapboxApiAccessToken,n.state.isSupported||(n.componentDidMount=c,n.componentWillReceiveProps=c,n.componentDidUpdate=c),n}return s(e,t),m(e,null,[{key:"supported",value:function(){return T.default.supported()}}]),m(e,[{key:"componentDidMount",value:function(){var t=this,e=O.default.Map.isMap(this.props.mapStyle)?this.props.mapStyle.toJS():this.props.mapStyle,n=new T.default.Map({container:this.refs.mapboxMap,center:[this.props.longitude,this.props.latitude],zoom:this.props.zoom,maxZoom:this.props.maxZoom,pitch:this.props.pitch,bearing:this.props.bearing,style:e,interactive:!1,preserveDrawingBuffer:this.props.preserveDrawingBuffer});this.props.onLoad&&n.once("load",function(){return t.props.onLoad()}),(0,S.select)(n.getCanvas()).style("outline","none"),this._map=n,this._updateMapViewport({},this.props),this._callOnChangeViewport(n.transform),this._updateQueryParams(e)}},{key:"componentWillReceiveProps",value:function(t){this._updateStateFromProps(this.props,t),this._updateMapViewport(this.props,t),this._updateMapStyle(this.props,t),this.setState({width:this.props.width,height:this.props.height})}},{key:"componentDidUpdate",value:function(){this._updateMapSize(this.state,this.props)}},{key:"componentWillUnmount",value:function(){this._map&&this._map.remove()}},{key:"_getMap",value:function(){return this._map}},{key:"_getCursor",value:function(){return this.props.onChangeViewport||this.props.onClickFeature||this.props.onHoverFeatures?this.props.isDragging?N.default.CURSOR.GRABBING:this.state.isHovering?N.default.CURSOR.POINTER:N.default.CURSOR.GRAB:"inherit"}},{key:"_updateStateFromProps",value:function(t,e){T.default.accessToken=e.mapboxApiAccessToken,this.setState({startDragLngLat:e.startDragLngLat})}},{key:"_updateQueryParams",value:function(t){var e=(0,C.getInteractiveLayerIds)(t);this._queryParams=0===e.length?{}:{layers:e}}},{key:"_updateSource",value:function(t,e){var n=e.source.toJS();if("geojson"===n.type){var r=t.getSource(e.id);if("geojson"===r.type){var i=r.workerOptions;if(!(void 0!==n.maxzoom&&n.maxzoom!==i.geojsonVtOptions.maxZoom||void 0!==n.buffer&&n.buffer!==i.geojsonVtOptions.buffer||void 0!==n.tolerance&&n.tolerance!==i.geojsonVtOptions.tolerance||void 0!==n.cluster&&n.cluster!==i.cluster||void 0!==n.clusterRadius&&n.clusterRadius!==i.superclusterOptions.radius||void 0!==n.clusterMaxZoom&&n.clusterMaxZoom!==i.superclusterOptions.maxZoom))return void r.setData(n.data)}}t.removeSource(e.id),t.addSource(e.id,n)}},{key:"_setDiffStyle",value:function(t,e){function n(t){return t.map(function(){return!0}).delete("layers").delete("sources").toJS()}function r(){var n=Object.keys(i),r=Object.keys(o);return n.length!==r.length||!!r.some(function(n){return t.get(n)!==e.get(n)})}var i=t&&n(t)||{},o=n(e),a=this._map;if(!t||r())return void a.setStyle(e.toJS());var s=(0,j.default)(t,e),u=s.sourcesDiff,c=s.layersDiff;if(c.updates.some(function(t){return t.layer.get("ref")}))return void a.setStyle(e.toJS());var l=!0,f=!1,h=void 0;try{for(var p,d=u.enter[Symbol.iterator]();!(l=(p=d.next()).done);l=!0){var v=p.value;a.addSource(v.id,v.source.toJS())}}catch(t){f=!0,h=t}finally{try{!l&&d.return&&d.return()}finally{if(f)throw h}}var m=!0,y=!1,g=void 0;try{for(var _,b=u.update[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var w=_.value;this._updateSource(a,w)}}catch(t){y=!0,g=t}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}var x=!0,E=!1,T=void 0;try{for(var S,M=u.exit[Symbol.iterator]();!(x=(S=M.next()).done);x=!0){var O=S.value;a.removeSource(O.id)}}catch(t){E=!0,T=t}finally{try{!x&&M.return&&M.return()}finally{if(E)throw T}}var A=!0,R=!1,I=void 0;try{for(var k,P=c.exiting[Symbol.iterator]();!(A=(k=P.next()).done);A=!0){var N=k.value;a.style.getLayer(N.id)&&a.removeLayer(N.id)}}catch(t){R=!0,I=t}finally{try{!A&&P.return&&P.return()}finally{if(R)throw I}}var C=!0,D=!1,L=void 0;try{for(var F,U=c.updates[Symbol.iterator]();!(C=(F=U.next()).done);C=!0){var z=F.value;z.enter||a.removeLayer(z.id),a.addLayer(z.layer.toJS(),z.before)}}catch(t){D=!0,L=t}finally{try{!C&&U.return&&U.return()}finally{if(D)throw L}}}},{key:"_updateMapStyle",value:function(t,e){var n=e.mapStyle,r=t.mapStyle;n!==r&&(O.default.Map.isMap(n)?this.props.preventStyleDiffing?this._map.setStyle(n.toJS()):this._setDiffStyle(r,n):this._map.setStyle(n),this._updateQueryParams(n))}},{key:"_updateMapViewport",value:function(t,e){(e.latitude!==t.latitude||e.longitude!==t.longitude||e.zoom!==t.zoom||e.pitch!==t.pitch||e.zoom!==t.bearing||e.altitude!==t.altitude)&&(this._map.jumpTo({center:[e.longitude,e.latitude],zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.altitude!==t.altitude&&(this._map.transform.altitude=e.altitude))}},{key:"_updateMapSize",value:function(t,e){(t.width!==e.width||t.height!==e.height)&&(this._map.resize(),this._callOnChangeViewport(this._map.transform))}},{key:"_calculateNewPitchAndBearing",value:function(t){var e=t.pos,n=t.startPos,r=t.startBearing,i=t.startPitch,o=e[0]-n[0],a=r+180*o/this.props.width,s=i,u=e[1]-n[1];if(u>0){if(Math.abs(this.props.height-n[1])>20){var c=u/(this.props.height-n[1]);s=1.2*(1-c)*i}}else if(u<0&&n[1]>20){var l=1-e[1]/n[1];s=i+l*(60-i)}return{pitch:Math.max(Math.min(s,60),0),bearing:a}}},{key:"_callOnChangeViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.props.onChangeViewport&&this.props.onChangeViewport(v({latitude:t.center.lat,longitude:(0,L.mod)(t.center.lng+180,360)-180,zoom:t.zoom,pitch:t.pitch,bearing:(0,L.mod)(t.bearing+180,360)-180,isDragging:this.props.isDragging,startDragLngLat:this.props.startDragLngLat,startBearing:this.props.startBearing,startPitch:this.props.startPitch},e))}},{key:"_onTouchStart",value:function(t){this._onMouseDown(t)}},{key:"_onTouchDrag",value:function(t){this._onMouseDrag(t)}},{key:"_onTouchRotate",value:function(t){this._onMouseRotate(t)}},{key:"_onTouchEnd",value:function(t){this._onMouseUp(t)}},{key:"_onTouchTap",value:function(t){this._onMouseClick(t)}},{key:"_onMouseDown",value:function(t){var e=t.pos,n=this._map.transform,r=(0,L.unprojectFromTransform)(n,new(Function.prototype.bind.apply(E.Point,[null].concat(i(e))))),o=r.lng,a=r.lat;this._callOnChangeViewport(n,{isDragging:!0,startDragLngLat:[o,a],startBearing:n.bearing,startPitch:n.pitch})}},{key:"_onMouseDrag",value:function(t){var e=t.pos;if(this.props.onChangeViewport){(0,R.default)(this.props.startDragLngLat,"`startDragLngLat` prop is required for mouse drag behavior to calculate where to position the map.");var n=(0,L.cloneTransform)(this._map.transform),r=d(this.props.startDragLngLat,2),o=r[0],a=r[1];n.setLocationAtPoint({lng:o,lat:a},new(Function.prototype.bind.apply(E.Point,[null].concat(i(e))))),this._callOnChangeViewport(n,{isDragging:!0})}}},{key:"_onMouseRotate",value:function(t){var e=t.pos,n=t.startPos;if(this.props.onChangeViewport&&this.props.perspectiveEnabled){var r=this.props,i=r.startBearing,o=r.startPitch;(0,R.default)("number"==typeof i,"`startBearing` prop is required for mouse rotate behavior"),(0,R.default)("number"==typeof o,"`startPitch` prop is required for mouse rotate behavior");var a=this._calculateNewPitchAndBearing({pos:e,startPos:n,startBearing:i,startPitch:o}),s=a.pitch,u=a.bearing,c=(0,L.cloneTransform)(this._map.transform);c.bearing=u,c.pitch=s,this._callOnChangeViewport(c,{isDragging:!0})}}},{key:"_onMouseMove",value:function(t){var e=t.pos;if(this.props.onHoverFeatures){var n=this._map.queryRenderedFeatures(new(Function.prototype.bind.apply(E.Point,[null].concat(i(e)))),this._queryParams);!n.length&&this.props.ignoreEmptyFeatures||(this.setState({isHovering:n.length>0}),this.props.onHoverFeatures(n))}}},{key:"_onMouseUp",value:function(t){this._callOnChangeViewport(this._map.transform,{isDragging:!1,startDragLngLat:null,startBearing:null,startPitch:null})}},{key:"_onMouseClick",value:function(t){var e=t.pos;if(this.props.onClickFeatures||this.props.onClick){if(this.props.onClick){var n=new(Function.prototype.bind.apply(E.Point,[null].concat(i(e)))),r=this._map.unproject(n);this.props.onClick(r,n)}if(this.props.onClickFeatures){var o=this.props.clickRadius,a=[[e[0]-o,e[1]-o],[e[0]+o,e[1]+o]],s=this._map.queryRenderedFeatures(a,this._queryParams);if(!s.length&&this.props.ignoreEmptyFeatures)return;this.props.onClickFeatures(s)}}}},{key:"_onZoom",value:function(t){var e=t.pos,n=t.scale,r=new(Function.prototype.bind.apply(E.Point,[null].concat(i(e)))),o=(0,L.cloneTransform)(this._map.transform),a=(0,L.unprojectFromTransform)(o,r);o.zoom=o.scaleZoom(this._map.transform.scale*n),o.setLocationAtPoint(a,r),this._callOnChangeViewport(o,{isDragging:!0})}},{key:"_onZoomEnd",value:function(){this._callOnChangeViewport(this._map.transform,{isDragging:!1})}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.width,r=t.height,i=t.style,o=v({},i,{width:n,height:r,cursor:this._getCursor()}),a=[g.default.createElement("div",{key:"map",ref:"mapboxMap",style:o,className:e}),g.default.createElement("div",{key:"overlays",className:"overlays",style:{position:"absolute",left:0,top:0}},this.props.children)];return this.state.isSupported&&this.props.onChangeViewport&&(a=g.default.createElement(k.default,{onMouseDown:this._onMouseDown,onMouseDrag:this._onMouseDrag,onMouseRotate:this._onMouseRotate,onMouseUp:this._onMouseUp,onMouseMove:this._onMouseMove,onMouseClick:this._onMouseClick,onTouchStart:this._onTouchStart,onTouchDrag:this._onTouchDrag,onTouchRotate:this._onTouchRotate,onTouchEnd:this._onTouchEnd,onTouchTap:this._onTouchTap,onZoom:this._onZoom,onZoomEnd:this._onZoomEnd,width:this.props.width,height:this.props.height},a)),g.default.createElement("div",{style:v({},this.props.style,{width:this.props.width,height:this.props.height,position:"relative"})},a)}}]),e}(y.Component),h.propTypes=F,h.defaultProps=U,f=p,u(f.prototype,"_onTouchStart",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onTouchStart"),f.prototype),u(f.prototype,"_onTouchDrag",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onTouchDrag"),f.prototype),u(f.prototype,"_onTouchRotate",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onTouchRotate"),f.prototype),u(f.prototype,"_onTouchEnd",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onTouchEnd"),f.prototype),u(f.prototype,"_onTouchTap",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onTouchTap"),f.prototype),u(f.prototype,"_onMouseDown",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseDown"),f.prototype),u(f.prototype,"_onMouseDrag",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseDrag"),f.prototype),u(f.prototype,"_onMouseRotate",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseRotate"),f.prototype),u(f.prototype,"_onMouseMove",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseMove"),f.prototype),u(f.prototype,"_onMouseUp",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseUp"),f.prototype),u(f.prototype,"_onMouseClick",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onMouseClick"),f.prototype),u(f.prototype,"_onZoom",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onZoom"),f.prototype),u(f.prototype,"_onZoomEnd",[b.default],Object.getOwnPropertyDescriptor(f.prototype,"_onZoomEnd"),f.prototype),l=f))||l;n.default=z},{"./config":916,"./map-interactions.react":918,"./utils/diff-styles":927,"./utils/style-utils":929,"./utils/transform":930,assert:1,"autobind-decorator":49,"d3-selection":361,immutable:485,"mapbox-gl":615,"pure-render-decorator":785,react:956}],920:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("react"),f=r(l),h=t("viewport-mercator-project"),p=r(h),d=t("global/window"),v=r(d),m=(u=s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),c(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t=v.default.devicePixelRatio||1,e=this.refs.overlay,n=e.getContext("2d");n.save(),n.scale(t,t);var r=(0,p.default)(this.props);this.props.redraw({width:this.props.width,height:this.props.height,ctx:n,project:r.project,unproject:r.unproject,isDragging:this.props.isDragging}),n.restore()}},{key:"render",value:function(){var t=v.default.devicePixelRatio||1;return f.default.createElement("canvas",{ref:"overlay",width:this.props.width*t,height:this.props.height*t,style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",pointerEvents:"none",left:0,top:0}})}}]),e}(l.Component),s.propTypes={width:l.PropTypes.number.isRequired,height:l.PropTypes.number.isRequired,latitude:l.PropTypes.number.isRequired,longitude:l.PropTypes.number.isRequired,zoom:l.PropTypes.number.isRequired,redraw:l.PropTypes.func.isRequired,isDragging:l.PropTypes.bool.isRequired},u);n.default=m},{"global/window":482,react:956,"viewport-mercator-project":977}],921:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("react"),f=r(l),h=t("viewport-mercator-project"),p=r(h),d=t("global/window"),v=r(d),m=t("d3-array"),y=t("d3-scale"),g=t("d3-geo"),_=t("immutable"),b=r(_),w=(u=s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),c(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){function t(t,e){
var n=i.project([t,e]);this.stream.point(n[0],n[1])}var e=v.default.devicePixelRatio,n=this.refs.overlay,r=n.getContext("2d"),i=(0,p.default)(this.props);if(r.save(),r.scale(e,e),r.clearRect(0,0,this.props.width,this.props.height),this.props.renderWhileDragging||!this.props.isDragging){var o=(0,g.geoTransform)({point:t}),a=(0,g.geoPath)().projection(o).context(r);this._drawFeatures(r,a)}r.restore()}},{key:"_drawFeatures",value:function(t,e){var n=this.props.features;if(n){var r=this.props.colorDomain||(0,m.extent)(n.toArray(),this.props.valueAccessor),i=(0,y.scaleLinear)().domain(r).range(this.props.colorRange).clamp(!0),o=!0,a=!1,s=void 0;try{for(var u,c=n[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;t.beginPath(),t.strokeStyle="rgba(255, 255, 255, 0.5)",t.lineWidth="1",t.fillStyle=i(this.props.valueAccessor(l));var f=l.get("geometry");e({type:f.get("type"),coordinates:f.get("coordinates").toJS()}),t.fill(),t.stroke()}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}}}},{key:"render",value:function(){var t=v.default.devicePixelRatio||1;return f.default.createElement("canvas",{ref:"overlay",width:this.props.width*t,height:this.props.height*t,style:{width:this.props.width+"px",height:this.props.height+"px",position:"absolute",pointerEvents:"none",opacity:this.props.globalOpacity,left:0,top:0}})}}]),e}(l.Component),s.propTypes={width:l.PropTypes.number.isRequired,height:l.PropTypes.number.isRequired,latitude:l.PropTypes.number.isRequired,longitude:l.PropTypes.number.isRequired,zoom:l.PropTypes.number.isRequired,isDragging:l.PropTypes.bool.isRequired,renderWhileDragging:l.PropTypes.bool.isRequired,globalOpacity:l.PropTypes.number.isRequired,features:l.PropTypes.instanceOf(b.default.List),colorDomain:l.PropTypes.array,colorRange:l.PropTypes.array.isRequired,valueAccessor:l.PropTypes.func.isRequired},s.defaultProps={renderWhileDragging:!0,globalOpacity:1,colorDomain:null,colorRange:["#FFFFFF","#1FBAD6"],valueAccessor:function(t){return t.get("properties").get("value")}},u);n.default=w},{"d3-array":354,"d3-geo":358,"d3-scale":360,"global/window":482,immutable:485,react:956,"viewport-mercator-project":977}],922:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n,r,i){var o={};return Object.keys(r).forEach(function(t){o[t]=r[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce(function(n,r){return r(t,e,n)||n},o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}function u(){}function c(t,e){var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l,f,h,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=t("react"),m=r(v),y=t("autobind-decorator"),g=r(y),_=t("immutable"),b=r(_),w=t("svg-transform"),x=r(w),E=t("global/document"),T=r(E),S=t("../config"),M=r(S),O=t("viewport-mercator-project"),A=r(O),R=(h=f=function(t){function e(t){i(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={draggedPointKey:null},n}return a(e,t),d(e,[{key:"_onDragStart",value:function(t,e){e.stopPropagation(),T.default.addEventListener("mousemove",this._onDrag,!1),T.default.addEventListener("mouseup",this._onDragEnd,!1),this.setState({draggedPointKey:this.props.keyAccessor(t)})}},{key:"_onDrag",value:function(t){t.stopPropagation();var e=c(this.refs.container,t),n=(0,A.default)(this.props),r=n.unproject(e),i=this.state.draggedPointKey;this.props.onUpdatePoint({key:i,location:r})}},{key:"_onDragEnd",value:function(t){t.stopPropagation(),T.default.removeEventListener("mousemove",this._onDrag,!1),T.default.removeEventListener("mouseup",this._onDragEnd,!1),this.setState({draggedPointKey:null})}},{key:"_addPoint",value:function(t){t.stopPropagation(),t.preventDefault();var e=c(this.refs.container,t),n=(0,A.default)(this.props);this.props.onAddPoint(n.unproject(e))}},{key:"render",value:function(){var t=this,e=this.props,n=e.points,r=e.width,i=e.height,o=e.isDragging,a=e.style,s=(0,A.default)(this.props);return m.default.createElement("svg",{ref:"container",width:r,height:i,style:p({pointerEvents:"all",position:"absolute",left:0,top:0,cursor:o?M.default.CURSOR.GRABBING:M.default.CURSOR.GRAB},a),onContextMenu:this._addPoint},m.default.createElement("g",{style:{cursor:"pointer"}},n.map(function(e,n){var r=s.project(t.props.lngLatAccessor(e));return m.default.createElement("g",{key:n,style:{pointerEvents:"all"},transform:(0,x.default)([{translate:r}]),onMouseDown:t._onDragStart.bind(t,e)},t.props.renderPoint.call(t,e,r))})))}}]),e}(v.Component),f.propTypes={width:v.PropTypes.number.isRequired,height:v.PropTypes.number.isRequired,latitude:v.PropTypes.number.isRequired,longitude:v.PropTypes.number.isRequired,zoom:v.PropTypes.number.isRequired,points:v.PropTypes.instanceOf(b.default.List).isRequired,isDragging:v.PropTypes.bool.isRequired,keyAccessor:v.PropTypes.func.isRequired,lngLatAccessor:v.PropTypes.func.isRequired,onAddPoint:v.PropTypes.func.isRequired,onUpdatePoint:v.PropTypes.func.isRequired,renderPoint:v.PropTypes.func.isRequired},f.defaultProps={keyAccessor:function(t){return t.get("id")},lngLatAccessor:function(t){return t.get("location").toArray()},onAddPoint:u,onUpdatePoint:u,renderPoint:u,isDragging:!1},l=h,s(l.prototype,"_onDragStart",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onDragStart"),l.prototype),s(l.prototype,"_onDrag",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onDrag"),l.prototype),s(l.prototype,"_onDragEnd",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_onDragEnd"),l.prototype),s(l.prototype,"_addPoint",[g.default],Object.getOwnPropertyDescriptor(l.prototype,"_addPoint"),l.prototype),l);n.default=R},{"../config":916,"autobind-decorator":49,"global/document":481,immutable:485,react:956,"svg-transform":969,"viewport-mercator-project":977}],923:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("react"),h=r(f),p=t("viewport-mercator-project"),d=r(p),v=(u=s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.isDragging,i=c({position:"absolute",pointerEvents:"none",left:0,top:0,width:e,height:n},this.props.style),o=(0,d.default)(this.props),a=o.project,s=o.unproject;return h.default.createElement("div",{ref:"overlay",style:i},this.props.redraw({width:e,height:n,project:a,unproject:s,isDragging:r}))}}]),e}(f.Component),s.propTypes={width:f.PropTypes.number.isRequired,height:f.PropTypes.number.isRequired,redraw:f.PropTypes.func.isRequired,isDragging:f.PropTypes.bool.isRequired},u);n.default=v},{react:956,"viewport-mercator-project":977}],924:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./canvas.react");Object.defineProperty(n,"CanvasOverlay",{enumerable:!0,get:function(){return r(i).default}});var o=t("./choropleth.react");Object.defineProperty(n,"ChoroplethOverlay",{enumerable:!0,get:function(){return r(o).default}});var a=t("./draggable-points.react");Object.defineProperty(n,"DraggablePointsOverlay",{enumerable:!0,get:function(){return r(a).default}});var s=t("./html.react");Object.defineProperty(n,"HTMLOverlay",{enumerable:!0,get:function(){return r(s).default}});var u=t("./scatterplot.react");Object.defineProperty(n,"ScatterplotOverlay",{enumerable:!0,get:function(){return r(u).default}});var c=t("./svg.react");Object.defineProperty(n,"SVGOverlay",{enumerable:!0,get:function(){return r(c).default}})},{"./canvas.react":920,"./choropleth.react":921,"./draggable-points.react":922,"./html.react":923,"./scatterplot.react":925,"./svg.react":926}],925:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=Math.pow(10,e);return Math.round(t*n)/n}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u,c,l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("react"),h=r(f),p=t("global/window"),d=r(p),v=t("immutable"),m=r(v),y=t("canvas-composite-types"),g=r(y),_=t("viewport-mercator-project"),b=r(_),w=(c=u=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"componentDidMount",value:function(){this._redraw()}},{key:"componentDidUpdate",value:function(){this._redraw()}},{key:"_redraw",value:function(){var t=this.props,e=t.width,n=t.height,r=t.dotRadius,i=t.dotFill,o=t.compositeOperation,a=t.renderWhileDragging,u=t.isDragging,c=t.locations,l=t.lngLatAccessor,f=(0,b.default)(this.props),h=d.default.devicePixelRatio||1,p=this.refs.overlay,v=p.getContext("2d");if(v.save(),v.scale(h,h),v.clearRect(0,0,e,n),v.globalCompositeOperation=o,(a||!u)&&c){var m=!0,y=!1,g=void 0;try{for(var _,w=c[Symbol.iterator]();!(m=(_=w.next()).done);m=!0){var x=_.value,E=f.project(l(x)),T=[s(E[0],1),s(E[1],1)];T[0]+r>=0&&T[0]-r<e&&T[1]+r>=0&&T[1]-r<n&&(v.fillStyle=i,v.beginPath(),v.arc(T[0],T[1],r,0,2*Math.PI),v.fill())}}catch(t){y=!0,g=t}finally{try{!m&&w.return&&w.return()}finally{if(y)throw g}}}v.restore()}},{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.globalOpacity,i=d.default.devicePixelRatio||1;return h.default.createElement("canvas",{ref:"overlay",width:e*i,height:n*i,style:{width:e+"px",height:n+"px",position:"absolute",pointerEvents:"none",opacity:r,left:0,top:0}})}}]),e}(f.Component),u.propTypes={width:f.PropTypes.number.isRequired,height:f.PropTypes.number.isRequired,latitude:f.PropTypes.number.isRequired,longitude:f.PropTypes.number.isRequired,zoom:f.PropTypes.number.isRequired,isDragging:f.PropTypes.bool.isRequired,locations:f.PropTypes.instanceOf(m.default.List).isRequired,lngLatAccessor:f.PropTypes.func.isRequired,renderWhileDragging:f.PropTypes.bool,globalOpacity:f.PropTypes.number.isRequired,dotRadius:f.PropTypes.number.isRequired,dotFill:f.PropTypes.string.isRequired,compositeOperation:f.PropTypes.oneOf(g.default).isRequired},u.defaultProps={lngLatAccessor:function(t){return[t.get(0),t.get(1)]},renderWhileDragging:!0,dotRadius:4,dotFill:"#1FBAD6",globalOpacity:1,compositeOperation:"source-over"},c);n.default=w},{"canvas-composite-types":52,"global/window":482,immutable:485,react:956,"viewport-mercator-project":977}],926:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s,u,c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t("react"),h=r(f),p=t("viewport-mercator-project"),d=r(p),v=(u=s=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"render",value:function(){var t=this.props,e=t.width,n=t.height,r=t.isDragging,i=c({pointerEvents:"none",position:"absolute",left:0,top:0},this.props.style),o=(0,d.default)(this.props),a=o.project,s=o.unproject;return h.default.createElement("svg",{ref:"overlay",width:e,height:n,style:i},this.props.redraw({width:e,height:n,project:a,unproject:s,isDragging:r}))}}]),e}(f.Component),s.propTypes={width:f.PropTypes.number.isRequired,height:f.PropTypes.number.isRequired,latitude:f.PropTypes.number.isRequired,longitude:f.PropTypes.number.isRequired,zoom:f.PropTypes.number.isRequired,redraw:f.PropTypes.func.isRequired,isDragging:f.PropTypes.bool.isRequired},u);n.default=v},{react:956,"viewport-mercator-project":977}],927:[function(t,e,n){"use strict";function r(t,e){var n=t.get("sources"),r=e.get("sources"),i=[],o=[],a=[],s=n.keySeq().toArray(),u=r.keySeq().toArray(),c=!0,l=!1,f=void 0;try{for(var h,p=s[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var d=h.value,v=r.get(d);v?v.equals(n.get(d))||o.push({id:d,source:r.get(d)}):a.push({id:d,source:n.get(d)})}}catch(t){l=!0,f=t}finally{try{!c&&p.return&&p.return()}finally{if(l)throw f}}var m=!0,y=!1,g=void 0;try{for(var _,b=u[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var w=_.value;n.get(w)||i.push({id:w,source:r.get(w)})}}catch(t){y=!0,g=t}finally{try{!m&&b.return&&b.return()}finally{if(y)throw g}}return{enter:i,update:o,exit:a}}function i(t,e){var n=t.get("layers"),r=e.get("layers"),i=[],o=[],a={},s={};r.forEach(function(t,e){var n=t.get("id"),i=r.get(e+1);s[n]={layer:t,id:n,before:i?i.get("id"):null,enter:!0}}),n.forEach(function(t,e){var r=t.get("id"),i=n.get(e+1);a[r]={layer:t,id:r,before:i?i.get("id"):null},s[r]?s[r].enter=!1:o.push(a[r])});var u=!0,c=!1,l=void 0;try{for(var f,h=r.reverse()[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value,d=p.get("id");a[d]&&a[d].layer.equals(s[d].layer)&&a[d].before===s[d].before||i.push(s[d])}}catch(t){c=!0,l=t}finally{try{!u&&h.return&&h.return()}finally{if(c)throw l}}return{updates:i,exiting:o}}function o(t,e){return{sourcesDiff:r(t,e),layersDiff:i(t,e)}}Object.defineProperty(n,"__esModule",{value:!0}),n.diffSources=r,n.diffLayers=i,n.default=o},{}],928:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.padding,o=void 0===i?0:i,u=new s.LngLatBounds([n[0].reverse(),n[1].reverse()]),c=s.Point.convert([0,0]),l=new a.default;l.width=t,l.height=e;var f=l.project(u.getNorthWest()),h=l.project(u.getSouthEast()),p=h.sub(f),d=(l.width-2*o-2*Math.abs(c.x))/p.x,v=(l.height-2*o-2*Math.abs(c.y))/p.y,m=l.unproject(f.add(h).div(2)),y=l.scaleZoom(l.scale*Math.abs(Math.min(d,v)));return{latitude:m.lat,longitude:m.lng,zoom:y}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var o=t("./transform"),a=r(o),s=t("mapbox-gl")},{"./transform":930,"mapbox-gl":615}],929:[function(t,e,n){"use strict";function r(t){var e=[];return i.Map.isMap(t)&&t.has("layers")?e=t.get("layers").filter(function(t){return t.get("interactive")}).map(function(t){return t.get("id")}).toJS():Array.isArray(t.layers)&&(e=t.layers.filter(function(t){return t.interactive}).map(function(t){return t.id})),e}Object.defineProperty(n,"__esModule",{value:!0}),n.getInteractiveLayerIds=r;var i=t("immutable")},{immutable:485}],930:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){var n=t%e;return n<0?e+n:n}function o(t,e){return t.pointLocation(c.Point.convert(e))}function a(t){var e=new u.default(t._minZoom,t._maxZoom);return e.latRange=t.latRange,e.width=t.width,e.height=t.height,e.zoom=t.zoom,e.center=t.center,e.angle=t.angle,e.altitude=t.altitude,e.pitch=t.pitch,e.bearing=t.bearing,e.altitude=t.altitude,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,n.mod=i,n.unprojectFromTransform=o,n.cloneTransform=a;var s=t("mapbox-gl/js/geo/transform"),u=r(s),c=t("mapbox-gl");n.default=u.default},{"mapbox-gl":615,"mapbox-gl/js/geo/transform":612}],931:[function(t,e,n){e.exports=t("./dist")},{"./dist":917}],932:[function(t,e,n){arguments[4][810][0].apply(n,arguments)},{dup:810}],933:[function(t,e,n){arguments[4][812][0].apply(n,arguments)},{"./reactProdInvariant":954,_process:28,dup:812,"fbjs/lib/invariant":439}],934:[function(t,e,n){(function(n){"use strict";var r=t("object-assign"),i=t("./ReactChildren"),o=t("./ReactComponent"),a=t("./ReactPureComponent"),s=t("./ReactClass"),u=t("./ReactDOMFactories"),c=t("./ReactElement"),l=t("./ReactPropTypes"),f=t("./ReactVersion"),h=t("./onlyChild"),p=t("fbjs/lib/warning"),d=c.createElement,v=c.createFactory,m=c.cloneElement;if("production"!==n.env.NODE_ENV){var y=t("./ReactElementValidator");d=y.createElement,v=y.createFactory,m=y.cloneElement}var g=r;if("production"!==n.env.NODE_ENV){var _=!1;g=function(){return"production"!==n.env.NODE_ENV&&p(_,"React.__spread is deprecated and should not be used. Use Object.assign directly or another helper function with similar semantics. You may be seeing this warning due to your compiler. See https://fb.me/react-spread-deprecation for more details."),_=!0,r.apply(null,arguments)}}var b={Children:{map:i.map,forEach:i.forEach,count:i.count,toArray:i.toArray,only:h},Component:o,PureComponent:a,createElement:d,cloneElement:m,isValidElement:c.isValidElement,PropTypes:l,createClass:s.createClass,createFactory:v,createMixin:function(t){return t},DOM:u,version:f,__spread:g};e.exports=b}).call(this,t("_process"))},{"./ReactChildren":935,"./ReactClass":936,"./ReactComponent":937,"./ReactDOMFactories":940,"./ReactElement":941,"./ReactElementValidator":943,"./ReactPropTypes":946,"./ReactPureComponent":948,"./ReactVersion":949,"./onlyChild":953,_process:28,"fbjs/lib/warning":446,"object-assign":759}],935:[function(t,e,n){"use strict";function r(t){return(""+t).replace(/\/+/g,"$&/")}function i(t,e){this.func=t,this.context=e,this.count=0}function o(t,e,n){var r=t.func,i=t.context;r.call(i,e,t.count++)}function a(t,e,n){if(null==t)return t;var r=i.getPooled(e,n);y(t,o,r),i.release(r)}function s(t,e,n,r){this.result=t,this.keyPrefix=e,this.func=n,this.context=r,this.count=0}function u(t,e,n){var i=t.result,o=t.keyPrefix,a=t.func,s=t.context,u=a.call(s,e,t.count++);Array.isArray(u)?c(u,i,n,m.thatReturnsArgument):null!=u&&(v.isValidElement(u)&&(u=v.cloneAndReplaceKey(u,o+(!u.key||e&&e.key===u.key?"":r(u.key)+"/")+n)),i.push(u))}function c(t,e,n,i,o){var a="";null!=n&&(a=r(n)+"/");var c=s.getPooled(e,a,i,o);y(t,u,c),s.release(c)}function l(t,e,n){if(null==t)return t;var r=[];return c(t,r,null,e,n),r}function f(t,e,n){return null}function h(t,e){return y(t,f,null)}function p(t){var e=[];return c(t,e,null,m.thatReturnsArgument),e}var d=t("./PooledClass"),v=t("./ReactElement"),m=t("fbjs/lib/emptyFunction"),y=t("./traverseAllChildren"),g=d.twoArgumentPooler,_=d.fourArgumentPooler;i.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},d.addPoolingTo(i,g),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},d.addPoolingTo(s,_);var b={forEach:a,map:l,mapIntoWithKeyPrefixInternal:c,count:h,toArray:p};e.exports=b},{"./PooledClass":933,"./ReactElement":941,"./traverseAllChildren":955,"fbjs/lib/emptyFunction":431}],936:[function(t,e,n){(function(n){"use strict";function r(t){return t}function i(t,e,r){for(var i in e)e.hasOwnProperty(i)&&"production"!==n.env.NODE_ENV&&w("function"==typeof e[i],"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",t.displayName||"ReactClass",y[r],i)}function o(t,e){var r=E.hasOwnProperty(e)?E[e]:null;S.hasOwnProperty(e)&&"OVERRIDE_BASE"!==r&&("production"!==n.env.NODE_ENV?b(!1,"ReactClassInterface: You are attempting to override `%s` from your class specification. Ensure that your method names do not overlap with React methods.",e):p("73",e)),t&&"DEFINE_MANY"!==r&&"DEFINE_MANY_MERGED"!==r&&("production"!==n.env.NODE_ENV?b(!1,"ReactClassInterface: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",e):p("74",e))}function a(t,e){if(e){"function"==typeof e&&("production"!==n.env.NODE_ENV?b(!1,"ReactClass: You're attempting to use a component class or function as a mixin. Instead, just use a regular object."):p("75")),m.isValidElement(e)&&("production"!==n.env.NODE_ENV?b(!1,"ReactClass: You're attempting to use a component as a mixin. Instead, just use a regular object."):p("76"));var r=t.prototype,i=r.__reactAutoBindPairs;e.hasOwnProperty("mixins")&&T.mixins(t,e.mixins);for(var a in e)if(e.hasOwnProperty(a)&&"mixins"!==a){var s=e[a],u=r.hasOwnProperty(a);if(o(u,a),T.hasOwnProperty(a))T[a](t,s);else{var f=E.hasOwnProperty(a),h="function"==typeof s,d=h&&!f&&!u&&e.autobind!==!1;if(d)i.push(a,s),r[a]=s;else if(u){var v=E[a];(!f||"DEFINE_MANY_MERGED"!==v&&"DEFINE_MANY"!==v)&&("production"!==n.env.NODE_ENV?b(!1,"ReactClass: Unexpected spec policy %s for key %s when mixing in component specs.",v,a):p("77",v,a)),"DEFINE_MANY_MERGED"===v?r[a]=c(r[a],s):"DEFINE_MANY"===v&&(r[a]=l(r[a],s))}else r[a]=s,"production"!==n.env.NODE_ENV&&"function"==typeof s&&e.displayName&&(r[a].displayName=e.displayName+"_"+a)}}}else if("production"!==n.env.NODE_ENV){var y=typeof e,g="object"===y&&null!==e;"production"!==n.env.NODE_ENV&&w(g,"%s: You're attempting to include a mixin that is either null or not an object. Check the mixins included by the component, as well as any mixins they include themselves. Expected object but got %s.",t.displayName||"ReactClass",null===e?null:y)}}function s(t,e){if(e)for(var r in e){var i=e[r];if(e.hasOwnProperty(r)){var o=r in T;o&&("production"!==n.env.NODE_ENV?b(!1,'ReactClass: You are attempting to define a reserved property, `%s`, that shouldn\'t be on the "statics" key. Define it as an instance property instead; it will still be accessible on the constructor.',r):p("78",r));var a=r in t;a&&("production"!==n.env.NODE_ENV?b(!1,"ReactClass: You are attempting to define `%s` on your component more than once. This conflict may be due to a mixin.",r):p("79",r)),t[r]=i}}}function u(t,e){t&&e&&"object"==typeof t&&"object"==typeof e||("production"!==n.env.NODE_ENV?b(!1,"mergeIntoWithNoDuplicateKeys(): Cannot merge non-objects."):p("80"));for(var r in e)e.hasOwnProperty(r)&&(void 0!==t[r]&&("production"!==n.env.NODE_ENV?b(!1,"mergeIntoWithNoDuplicateKeys(): Tried to merge two objects with the same key: `%s`. This conflict may be due to a mixin; in particular, this may be caused by two getInitialState() or getDefaultProps() methods returning objects with clashing keys.",r):p("81",r)),t[r]=e[r]);return t}function c(t,e){return function(){var n=t.apply(this,arguments),r=e.apply(this,arguments);if(null==n)return r;if(null==r)return n;var i={};return u(i,n),u(i,r),i}}function l(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function f(t,e){var r=e.bind(t);if("production"!==n.env.NODE_ENV){r.__reactBoundContext=t,r.__reactBoundMethod=e,r.__reactBoundArguments=null;var i=t.constructor.displayName,o=r.bind;r.bind=function(a){for(var s=arguments.length,u=Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];if(a!==t&&null!==a)"production"!==n.env.NODE_ENV&&w(!1,"bind(): React component methods may only be bound to the component instance. See %s",i);else if(!u.length)return"production"!==n.env.NODE_ENV&&w(!1,"bind(): You are binding a component method to the component. React does this for you automatically in a high-performance way, so you can safely remove this call. See %s",i),r;var l=o.apply(r,arguments);return l.__reactBoundContext=t,l.__reactBoundMethod=e,l.__reactBoundArguments=u,l}}return r}function h(t){for(var e=t.__reactAutoBindPairs,n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];t[r]=f(t,i)}}var p=t("./reactProdInvariant"),d=t("object-assign"),v=t("./ReactComponent"),m=t("./ReactElement"),y=t("./ReactPropTypeLocationNames"),g=t("./ReactNoopUpdateQueue"),_=t("fbjs/lib/emptyObject"),b=t("fbjs/lib/invariant"),w=t("fbjs/lib/warning"),x=[],E={mixins:"DEFINE_MANY",statics:"DEFINE_MANY",propTypes:"DEFINE_MANY",contextTypes:"DEFINE_MANY",childContextTypes:"DEFINE_MANY",getDefaultProps:"DEFINE_MANY_MERGED",getInitialState:"DEFINE_MANY_MERGED",getChildContext:"DEFINE_MANY_MERGED",render:"DEFINE_ONCE",componentWillMount:"DEFINE_MANY",componentDidMount:"DEFINE_MANY",componentWillReceiveProps:"DEFINE_MANY",shouldComponentUpdate:"DEFINE_ONCE",componentWillUpdate:"DEFINE_MANY",componentDidUpdate:"DEFINE_MANY",componentWillUnmount:"DEFINE_MANY",updateComponent:"OVERRIDE_BASE"},T={displayName:function(t,e){t.displayName=e},mixins:function(t,e){if(e)for(var n=0;n<e.length;n++)a(t,e[n])},childContextTypes:function(t,e){"production"!==n.env.NODE_ENV&&i(t,e,"childContext"),t.childContextTypes=d({},t.childContextTypes,e)},contextTypes:function(t,e){"production"!==n.env.NODE_ENV&&i(t,e,"context"),t.contextTypes=d({},t.contextTypes,e)},getDefaultProps:function(t,e){t.getDefaultProps?t.getDefaultProps=c(t.getDefaultProps,e):t.getDefaultProps=e},propTypes:function(t,e){"production"!==n.env.NODE_ENV&&i(t,e,"prop"),t.propTypes=d({},t.propTypes,e)},statics:function(t,e){s(t,e)},autobind:function(){}},S={replaceState:function(t,e){this.updater.enqueueReplaceState(this,t),e&&this.updater.enqueueCallback(this,e,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},M=function(){};d(M.prototype,v.prototype,S);var O={createClass:function(t){var e=r(function(t,r,i){"production"!==n.env.NODE_ENV&&"production"!==n.env.NODE_ENV&&w(this instanceof e,"Something is calling a React component directly. Use a factory or JSX instead. See: https://fb.me/react-legacyfactory"),this.__reactAutoBindPairs.length&&h(this),this.props=t,this.context=r,this.refs=_,this.updater=i||g,this.state=null;var o=this.getInitialState?this.getInitialState():null;"production"!==n.env.NODE_ENV&&void 0===o&&this.getInitialState._isMockFunction&&(o=null),("object"!=typeof o||Array.isArray(o))&&("production"!==n.env.NODE_ENV?b(!1,"%s.getInitialState(): must return an object or null",e.displayName||"ReactCompositeComponent"):p("82",e.displayName||"ReactCompositeComponent")),this.state=o});e.prototype=new M,e.prototype.constructor=e,e.prototype.__reactAutoBindPairs=[],x.forEach(a.bind(null,e)),a(e,t),e.getDefaultProps&&(e.defaultProps=e.getDefaultProps()),"production"!==n.env.NODE_ENV&&(e.getDefaultProps&&(e.getDefaultProps.isReactClassApproved={}),e.prototype.getInitialState&&(e.prototype.getInitialState.isReactClassApproved={})),e.prototype.render||("production"!==n.env.NODE_ENV?b(!1,"createClass(...): Class specification must implement a `render` method."):p("83")),"production"!==n.env.NODE_ENV&&("production"!==n.env.NODE_ENV&&w(!e.prototype.componentShouldUpdate,"%s has a method called componentShouldUpdate(). Did you mean shouldComponentUpdate()? The name is phrased as a question because the function is expected to return a value.",t.displayName||"A component"),"production"!==n.env.NODE_ENV&&w(!e.prototype.componentWillRecieveProps,"%s has a method called componentWillRecieveProps(). Did you mean componentWillReceiveProps()?",t.displayName||"A component"));for(var i in E)e.prototype[i]||(e.prototype[i]=null);return e},injection:{injectMixin:function(t){x.push(t)}}};e.exports=O}).call(this,t("_process"))},{"./ReactComponent":937,"./ReactElement":941,"./ReactNoopUpdateQueue":944,"./ReactPropTypeLocationNames":945,"./reactProdInvariant":954,_process:28,"fbjs/lib/emptyObject":432,"fbjs/lib/invariant":439,"fbjs/lib/warning":446,"object-assign":759}],937:[function(t,e,n){(function(n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=s,this.updater=n||o}var i=t("./reactProdInvariant"),o=t("./ReactNoopUpdateQueue"),a=t("./canDefineProperty"),s=t("fbjs/lib/emptyObject"),u=t("fbjs/lib/invariant"),c=t("fbjs/lib/warning");if(r.prototype.isReactComponent={},r.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&("production"!==n.env.NODE_ENV?u(!1,"setState(...): takes an object of state variables to update or a function which returns an object of state variables."):i("85")),this.updater.enqueueSetState(this,t),e&&this.updater.enqueueCallback(this,e,"setState")},r.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this),t&&this.updater.enqueueCallback(this,t,"forceUpdate")},"production"!==n.env.NODE_ENV){var l={isMounted:["isMounted","Instead, make sure to clean up subscriptions and pending requests in componentWillUnmount to prevent memory leaks."],replaceState:["replaceState","Refactor your code to use setState instead (see https://github.com/facebook/react/issues/3236)."]},f=function(t,e){a&&Object.defineProperty(r.prototype,t,{get:function(){"production"!==n.env.NODE_ENV&&c(!1,"%s(...) is deprecated in plain JavaScript React classes. %s",e[0],e[1])}})};for(var h in l)l.hasOwnProperty(h)&&f(h,l[h])}e.exports=r}).call(this,t("_process"))},{"./ReactNoopUpdateQueue":944,"./canDefineProperty":950,"./reactProdInvariant":954,_process:28,"fbjs/lib/emptyObject":432,"fbjs/lib/invariant":439,"fbjs/lib/warning":446}],938:[function(t,e,n){(function(n){"use strict";function r(t){
var e=Function.prototype.toString,n=Object.prototype.hasOwnProperty,r=RegExp("^"+e.call(n).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");try{var i=e.call(t);return r.test(i)}catch(t){return!1}}function i(t){var e=c(t);if(e){var n=e.childIDs;l(t),n.forEach(i)}}function o(t,e,n){return"\n    in "+(t||"Unknown")+(e?" (at "+e.fileName.replace(/^.*[\\\/]/,"")+":"+e.lineNumber+")":n?" (created by "+n+")":"")}function a(t){return null==t?"#empty":"string"==typeof t||"number"==typeof t?"#text":"string"==typeof t.type?t.type:t.type.displayName||t.type.name||"Unknown"}function s(t){var e,r=O.getDisplayName(t),i=O.getElement(t),a=O.getOwnerID(t);return a&&(e=O.getDisplayName(a)),"production"!==n.env.NODE_ENV&&g(i,"ReactComponentTreeHook: Missing React element for debugID %s when building stack",t),o(r,i&&i._source,e)}var u,c,l,f,h,p,d,v=t("./reactProdInvariant"),m=t("./ReactCurrentOwner"),y=t("fbjs/lib/invariant"),g=t("fbjs/lib/warning"),_="function"==typeof Array.from&&"function"==typeof Map&&r(Map)&&null!=Map.prototype&&"function"==typeof Map.prototype.keys&&r(Map.prototype.keys)&&"function"==typeof Set&&r(Set)&&null!=Set.prototype&&"function"==typeof Set.prototype.keys&&r(Set.prototype.keys);if(_){var b=new Map,w=new Set;u=function(t,e){b.set(t,e)},c=function(t){return b.get(t)},l=function(t){b.delete(t)},f=function(){return Array.from(b.keys())},h=function(t){w.add(t)},p=function(t){w.delete(t)},d=function(){return Array.from(w.keys())}}else{var x={},E={},T=function(t){return"."+t},S=function(t){return parseInt(t.substr(1),10)};u=function(t,e){x[T(t)]=e},c=function(t){return x[T(t)]},l=function(t){delete x[T(t)]},f=function(){return Object.keys(x).map(S)},h=function(t){E[T(t)]=!0},p=function(t){delete E[T(t)]},d=function(){return Object.keys(E).map(S)}}var M=[],O={onSetChildren:function(t,e){var r=c(t);r||("production"!==n.env.NODE_ENV?y(!1,"Item must have been set"):v("144")),r.childIDs=e;for(var i=0;i<e.length;i++){var o=e[i],a=c(o);a||("production"!==n.env.NODE_ENV?y(!1,"Expected hook events to fire for the child before its parent includes it in onSetChildren()."):v("140")),null==a.childIDs&&"object"==typeof a.element&&null!=a.element&&("production"!==n.env.NODE_ENV?y(!1,"Expected onSetChildren() to fire for a container child before its parent includes it in onSetChildren()."):v("141")),a.isMounted||("production"!==n.env.NODE_ENV?y(!1,"Expected onMountComponent() to fire for the child before its parent includes it in onSetChildren()."):v("71")),null==a.parentID&&(a.parentID=t),a.parentID!==t&&("production"!==n.env.NODE_ENV?y(!1,"Expected onBeforeMountComponent() parent and onSetChildren() to be consistent (%s has parents %s and %s).",o,a.parentID,t):v("142",o,a.parentID,t))}},onBeforeMountComponent:function(t,e,n){u(t,{element:e,parentID:n,text:null,childIDs:[],isMounted:!1,updateCount:0})},onBeforeUpdateComponent:function(t,e){var n=c(t);n&&n.isMounted&&(n.element=e)},onMountComponent:function(t){var e=c(t);e||("production"!==n.env.NODE_ENV?y(!1,"Item must have been set"):v("144")),e.isMounted=!0,0===e.parentID&&h(t)},onUpdateComponent:function(t){var e=c(t);e&&e.isMounted&&e.updateCount++},onUnmountComponent:function(t){var e=c(t);if(e){e.isMounted=!1;0===e.parentID&&p(t)}M.push(t)},purgeUnmountedComponents:function(){if(!O._preventPurging){for(var t=0;t<M.length;t++){i(M[t])}M.length=0}},isMounted:function(t){var e=c(t);return!!e&&e.isMounted},getCurrentStackAddendum:function(t){var e="";if(t){var n=a(t),r=t._owner;e+=o(n,t._source,r&&r.getName())}var i=m.current,s=i&&i._debugID;return e+=O.getStackAddendumByID(s)},getStackAddendumByID:function(t){for(var e="";t;)e+=s(t),t=O.getParentID(t);return e},getChildIDs:function(t){var e=c(t);return e?e.childIDs:[]},getDisplayName:function(t){var e=O.getElement(t);return e?a(e):null},getElement:function(t){var e=c(t);return e?e.element:null},getOwnerID:function(t){var e=O.getElement(t);return e&&e._owner?e._owner._debugID:null},getParentID:function(t){var e=c(t);return e?e.parentID:null},getSource:function(t){var e=c(t),n=e?e.element:null;return null!=n?n._source:null},getText:function(t){var e=O.getElement(t);return"string"==typeof e?e:"number"==typeof e?""+e:null},getUpdateCount:function(t){var e=c(t);return e?e.updateCount:0},getRootIDs:d,getRegisteredIDs:f};e.exports=O}).call(this,t("_process"))},{"./ReactCurrentOwner":939,"./reactProdInvariant":954,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446}],939:[function(t,e,n){"use strict";var r={current:null};e.exports=r},{}],940:[function(t,e,n){(function(n){"use strict";var r=t("./ReactElement"),i=r.createFactory;if("production"!==n.env.NODE_ENV){i=t("./ReactElementValidator").createFactory}var o={a:i("a"),abbr:i("abbr"),address:i("address"),area:i("area"),article:i("article"),aside:i("aside"),audio:i("audio"),b:i("b"),base:i("base"),bdi:i("bdi"),bdo:i("bdo"),big:i("big"),blockquote:i("blockquote"),body:i("body"),br:i("br"),button:i("button"),canvas:i("canvas"),caption:i("caption"),cite:i("cite"),code:i("code"),col:i("col"),colgroup:i("colgroup"),data:i("data"),datalist:i("datalist"),dd:i("dd"),del:i("del"),details:i("details"),dfn:i("dfn"),dialog:i("dialog"),div:i("div"),dl:i("dl"),dt:i("dt"),em:i("em"),embed:i("embed"),fieldset:i("fieldset"),figcaption:i("figcaption"),figure:i("figure"),footer:i("footer"),form:i("form"),h1:i("h1"),h2:i("h2"),h3:i("h3"),h4:i("h4"),h5:i("h5"),h6:i("h6"),head:i("head"),header:i("header"),hgroup:i("hgroup"),hr:i("hr"),html:i("html"),i:i("i"),iframe:i("iframe"),img:i("img"),input:i("input"),ins:i("ins"),kbd:i("kbd"),keygen:i("keygen"),label:i("label"),legend:i("legend"),li:i("li"),link:i("link"),main:i("main"),map:i("map"),mark:i("mark"),menu:i("menu"),menuitem:i("menuitem"),meta:i("meta"),meter:i("meter"),nav:i("nav"),noscript:i("noscript"),object:i("object"),ol:i("ol"),optgroup:i("optgroup"),option:i("option"),output:i("output"),p:i("p"),param:i("param"),picture:i("picture"),pre:i("pre"),progress:i("progress"),q:i("q"),rp:i("rp"),rt:i("rt"),ruby:i("ruby"),s:i("s"),samp:i("samp"),script:i("script"),section:i("section"),select:i("select"),small:i("small"),source:i("source"),span:i("span"),strong:i("strong"),style:i("style"),sub:i("sub"),summary:i("summary"),sup:i("sup"),table:i("table"),tbody:i("tbody"),td:i("td"),textarea:i("textarea"),tfoot:i("tfoot"),th:i("th"),thead:i("thead"),time:i("time"),title:i("title"),tr:i("tr"),track:i("track"),u:i("u"),ul:i("ul"),var:i("var"),video:i("video"),wbr:i("wbr"),circle:i("circle"),clipPath:i("clipPath"),defs:i("defs"),ellipse:i("ellipse"),g:i("g"),image:i("image"),line:i("line"),linearGradient:i("linearGradient"),mask:i("mask"),path:i("path"),pattern:i("pattern"),polygon:i("polygon"),polyline:i("polyline"),radialGradient:i("radialGradient"),rect:i("rect"),stop:i("stop"),svg:i("svg"),text:i("text"),tspan:i("tspan")};e.exports=o}).call(this,t("_process"))},{"./ReactElement":941,"./ReactElementValidator":943,_process:28}],941:[function(t,e,n){(function(n){"use strict";function r(t){if("production"!==n.env.NODE_ENV&&p.call(t,"ref")){var e=Object.getOwnPropertyDescriptor(t,"ref").get;if(e&&e.isReactWarning)return!1}return void 0!==t.ref}function i(t){if("production"!==n.env.NODE_ENV&&p.call(t,"key")){var e=Object.getOwnPropertyDescriptor(t,"key").get;if(e&&e.isReactWarning)return!1}return void 0!==t.key}function o(t,e){var r=function(){s||(s=!0,"production"!==n.env.NODE_ENV&&f(!1,"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",e))};r.isReactWarning=!0,Object.defineProperty(t,"key",{get:r,configurable:!0})}function a(t,e){var r=function(){u||(u=!0,"production"!==n.env.NODE_ENV&&f(!1,"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://fb.me/react-special-props)",e))};r.isReactWarning=!0,Object.defineProperty(t,"ref",{get:r,configurable:!0})}var s,u,c=t("object-assign"),l=t("./ReactCurrentOwner"),f=t("fbjs/lib/warning"),h=t("./canDefineProperty"),p=Object.prototype.hasOwnProperty,d=t("./ReactElementSymbol"),v={key:!0,ref:!0,__self:!0,__source:!0},m=function(t,e,r,i,o,a,s){var u={$$typeof:d,type:t,key:e,ref:r,props:s,_owner:a};return"production"!==n.env.NODE_ENV&&(u._store={},h?(Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(u,"_self",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.defineProperty(u,"_source",{configurable:!1,enumerable:!1,writable:!1,value:o})):(u._store.validated=!1,u._self=i,u._source=o),Object.freeze&&(Object.freeze(u.props),Object.freeze(u))),u};m.createElement=function(t,e,s){var u,c={},f=null,h=null,y=null,g=null;if(null!=e){r(e)&&(h=e.ref),i(e)&&(f=""+e.key),y=void 0===e.__self?null:e.__self,g=void 0===e.__source?null:e.__source;for(u in e)p.call(e,u)&&!v.hasOwnProperty(u)&&(c[u]=e[u])}var _=arguments.length-2;if(1===_)c.children=s;else if(_>1){for(var b=Array(_),w=0;w<_;w++)b[w]=arguments[w+2];"production"!==n.env.NODE_ENV&&Object.freeze&&Object.freeze(b),c.children=b}if(t&&t.defaultProps){var x=t.defaultProps;for(u in x)void 0===c[u]&&(c[u]=x[u])}if("production"!==n.env.NODE_ENV&&(f||h)&&(void 0===c.$$typeof||c.$$typeof!==d)){var E="function"==typeof t?t.displayName||t.name||"Unknown":t;f&&o(c,E),h&&a(c,E)}return m(t,f,h,y,g,l.current,c)},m.createFactory=function(t){var e=m.createElement.bind(null,t);return e.type=t,e},m.cloneAndReplaceKey=function(t,e){return m(t.type,e,t.ref,t._self,t._source,t._owner,t.props)},m.cloneElement=function(t,e,n){var o,a=c({},t.props),s=t.key,u=t.ref,f=t._self,h=t._source,d=t._owner;if(null!=e){r(e)&&(u=e.ref,d=l.current),i(e)&&(s=""+e.key);var y;t.type&&t.type.defaultProps&&(y=t.type.defaultProps);for(o in e)p.call(e,o)&&!v.hasOwnProperty(o)&&(void 0===e[o]&&void 0!==y?a[o]=y[o]:a[o]=e[o])}var g=arguments.length-2;if(1===g)a.children=n;else if(g>1){for(var _=Array(g),b=0;b<g;b++)_[b]=arguments[b+2];a.children=_}return m(t.type,s,u,f,h,d,a)},m.isValidElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===d},e.exports=m}).call(this,t("_process"))},{"./ReactCurrentOwner":939,"./ReactElementSymbol":942,"./canDefineProperty":950,_process:28,"fbjs/lib/warning":446,"object-assign":759}],942:[function(t,e,n){arguments[4][839][0].apply(n,arguments)},{dup:839}],943:[function(t,e,n){(function(n){"use strict";function r(){if(u.current){var t=u.current.getName();if(t)return" Check the render method of `"+t+"`."}return""}function i(t){var e=r();if(!e){var n="string"==typeof t?t:t.displayName||t.name;n&&(e=" Check the top-level render call using <"+n+">.")}return e}function o(t,e){if(t._store&&!t._store.validated&&null==t.key){t._store.validated=!0;var r=v.uniqueKey||(v.uniqueKey={}),o=i(e);if(!r[o]){r[o]=!0;var a="";t&&t._owner&&t._owner!==u.current&&(a=" It was passed a child from "+t._owner.getName()+"."),"production"!==n.env.NODE_ENV&&d(!1,'Each child in an array or iterator should have a unique "key" prop.%s%s See https://fb.me/react-warning-keys for more information.%s',o,a,c.getCurrentStackAddendum(t))}}}function a(t,e){if("object"==typeof t)if(Array.isArray(t))for(var n=0;n<t.length;n++){var r=t[n];l.isValidElement(r)&&o(r,e)}else if(l.isValidElement(t))t._store&&(t._store.validated=!0);else if(t){var i=p(t);if(i&&i!==t.entries)for(var a,s=i.call(t);!(a=s.next()).done;)l.isValidElement(a.value)&&o(a.value,e)}}function s(t){var e=t.type;if("function"==typeof e){var r=e.displayName||e.name;e.propTypes&&f(e.propTypes,t.props,"prop",r,t,null),"function"==typeof e.getDefaultProps&&"production"!==n.env.NODE_ENV&&d(e.getDefaultProps.isReactClassApproved,"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var u=t("./ReactCurrentOwner"),c=t("./ReactComponentTreeHook"),l=t("./ReactElement"),f=t("./checkReactTypeSpec"),h=t("./canDefineProperty"),p=t("./getIteratorFn"),d=t("fbjs/lib/warning"),v={},m={createElement:function(t,e,i){var o="string"==typeof t||"function"==typeof t;if(!o&&"function"!=typeof t&&"string"!=typeof t){var u="";(void 0===t||"object"==typeof t&&null!==t&&0===Object.keys(t).length)&&(u+=" You likely forgot to export your component from the file it's defined in."),u+=r(),"production"!==n.env.NODE_ENV&&d(!1,"React.createElement: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",null==t?t:typeof t,u)}var c=l.createElement.apply(this,arguments);if(null==c)return c;if(o)for(var f=2;f<arguments.length;f++)a(arguments[f],t);return s(c),c},createFactory:function(t){var e=m.createElement.bind(null,t);return e.type=t,"production"!==n.env.NODE_ENV&&h&&Object.defineProperty(e,"type",{enumerable:!1,get:function(){return"production"!==n.env.NODE_ENV&&d(!1,"Factory.type is deprecated. Access the class directly before passing it to createFactory."),Object.defineProperty(this,"type",{value:t}),t}}),e},cloneElement:function(t,e,n){for(var r=l.cloneElement.apply(this,arguments),i=2;i<arguments.length;i++)a(arguments[i],r.type);return s(r),r}};e.exports=m}).call(this,t("_process"))},{"./ReactComponentTreeHook":938,"./ReactCurrentOwner":939,"./ReactElement":941,"./canDefineProperty":950,"./checkReactTypeSpec":951,"./getIteratorFn":952,_process:28,"fbjs/lib/warning":446}],944:[function(t,e,n){(function(n){"use strict";function r(t,e){if("production"!==n.env.NODE_ENV){var r=t.constructor;"production"!==n.env.NODE_ENV&&i(!1,"%s(...): Can only update a mounted or mounting component. This usually means you called %s() on an unmounted component. This is a no-op. Please check the code for the %s component.",e,e,r&&(r.displayName||r.name)||"ReactClass")}}var i=t("fbjs/lib/warning"),o={isMounted:function(t){return!1},enqueueCallback:function(t,e){},enqueueForceUpdate:function(t){r(t,"forceUpdate")},enqueueReplaceState:function(t,e){r(t,"replaceState")},enqueueSetState:function(t,e){r(t,"setState")}};e.exports=o}).call(this,t("_process"))},{_process:28,"fbjs/lib/warning":446}],945:[function(t,e,n){arguments[4][857][0].apply(n,arguments)},{_process:28,dup:857}],946:[function(t,e,n){(function(n){"use strict";function r(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}function i(t){this.message=t,this.stack=""}function o(t){function e(e,o,a,s,u,c,l){if(s=s||"<<anonymous>>",c=c||a,"production"!==n.env.NODE_ENV&&l!==E&&"undefined"!=typeof console){var f=s+":"+a;r[f]||("production"!==n.env.NODE_ENV&&M(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will not work in production with the next major version. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",c,s),r[f]=!0)}if(null==o[a]){var h=x[u];return e?new i(null===o[a]?"The "+h+" `"+c+"` is marked as required in `"+s+"`, but its value is `null`.":"The "+h+" `"+c+"` is marked as required in `"+s+"`, but its value is `undefined`."):null}return t(o,a,s,u,c)}if("production"!==n.env.NODE_ENV)var r={};var o=e.bind(null,!1);return o.isRequired=e.bind(null,!0),o}function a(t){function e(e,n,r,o,a,s){var u=e[n];if(g(u)!==t)return new i("Invalid "+x[o]+" `"+a+"` of type `"+_(u)+"` supplied to `"+r+"`, expected `"+t+"`.");return null}return o(e)}function s(){return o(T.thatReturns(null))}function u(t){function e(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside arrayOf.");var s=e[n];if(!Array.isArray(s)){return new i("Invalid "+x[o]+" `"+a+"` of type `"+g(s)+"` supplied to `"+r+"`, expected an array.")}for(var u=0;u<s.length;u++){var c=t(s,u,r,o,a+"["+u+"]",E);if(c instanceof Error)return c}return null}return o(e)}function c(){function t(t,e,n,r,o){var a=t[e];if(!w.isValidElement(a)){return new i("Invalid "+x[r]+" `"+o+"` of type `"+g(a)+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return o(t)}function l(t){function e(e,n,r,o,a){if(!(e[n]instanceof t)){var s=x[o],u=t.name||"<<anonymous>>";return new i("Invalid "+s+" `"+a+"` of type `"+b(e[n])+"` supplied to `"+r+"`, expected instance of `"+u+"`.")}return null}return o(e)}function f(t){function e(e,n,o,a,s){for(var u=e[n],c=0;c<t.length;c++)if(r(u,t[c]))return null;return new i("Invalid "+x[a]+" `"+s+"` of value `"+u+"` supplied to `"+o+"`, expected one of "+JSON.stringify(t)+".")}return Array.isArray(t)?o(e):("production"!==n.env.NODE_ENV&&M(!1,"Invalid argument supplied to oneOf, expected an instance of array."),T.thatReturnsNull)}function h(t){function e(e,n,r,o,a){if("function"!=typeof t)return new i("Property `"+a+"` of component `"+r+"` has invalid PropType notation inside objectOf.");var s=e[n],u=g(s);if("object"!==u){return new i("Invalid "+x[o]+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected an object.")}for(var c in s)if(s.hasOwnProperty(c)){var l=t(s,c,r,o,a+"."+c,E);if(l instanceof Error)return l}return null}return o(e)}function p(t){function e(e,n,r,o,a){for(var s=0;s<t.length;s++){if(null==(0,t[s])(e,n,r,o,a,E))return null}return new i("Invalid "+x[o]+" `"+a+"` supplied to `"+r+"`.")}return Array.isArray(t)?o(e):("production"!==n.env.NODE_ENV&&M(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),T.thatReturnsNull)}function d(){function t(t,e,n,r,o){if(!m(t[e])){return new i("Invalid "+x[r]+" `"+o+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return o(t)}function v(t){function e(e,n,r,o,a){var s=e[n],u=g(s);if("object"!==u){return new i("Invalid "+x[o]+" `"+a+"` of type `"+u+"` supplied to `"+r+"`, expected `object`.")}for(var c in t){var l=t[c];if(l){var f=l(s,c,r,o,a+"."+c,E);if(f)return f}}return null}return o(e)}function m(t){switch(typeof t){case"number":case"string":case"undefined":return!0;case"boolean":return!t;case"object":if(Array.isArray(t))return t.every(m);if(null===t||w.isValidElement(t))return!0;var e=S(t);if(!e)return!1;var n,r=e.call(t);if(e!==t.entries){for(;!(n=r.next()).done;)if(!m(n.value))return!1}else for(;!(n=r.next()).done;){var i=n.value;if(i&&!m(i[1]))return!1}return!0;default:return!1}}function y(t,e){return"symbol"===t||("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)}function g(t){var e=typeof t;return Array.isArray(t)?"array":t instanceof RegExp?"object":y(e,t)?"symbol":e}function _(t){var e=g(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}function b(t){return t.constructor&&t.constructor.name?t.constructor.name:"<<anonymous>>"}var w=t("./ReactElement"),x=t("./ReactPropTypeLocationNames"),E=t("./ReactPropTypesSecret"),T=t("fbjs/lib/emptyFunction"),S=t("./getIteratorFn"),M=t("fbjs/lib/warning"),O={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:u,element:c(),instanceOf:l,node:d(),objectOf:h,oneOf:f,oneOfType:p,shape:v};i.prototype=Error.prototype,e.exports=O}).call(this,t("_process"))},{"./ReactElement":941,"./ReactPropTypeLocationNames":945,"./ReactPropTypesSecret":947,"./getIteratorFn":952,_process:28,"fbjs/lib/emptyFunction":431,"fbjs/lib/warning":446}],947:[function(t,e,n){arguments[4][858][0].apply(n,arguments)},{dup:858}],948:[function(t,e,n){"use strict";function r(t,e,n){this.props=t,this.context=e,this.refs=u,this.updater=n||s}function i(){}var o=t("object-assign"),a=t("./ReactComponent"),s=t("./ReactNoopUpdateQueue"),u=t("fbjs/lib/emptyObject");i.prototype=a.prototype,r.prototype=new i,r.prototype.constructor=r,o(r.prototype,a.prototype),r.prototype.isPureReactComponent=!0,e.exports=r},{"./ReactComponent":937,"./ReactNoopUpdateQueue":944,"fbjs/lib/emptyObject":432,"object-assign":759}],949:[function(t,e,n){arguments[4][866][0].apply(n,arguments)},{dup:866}],950:[function(t,e,n){(function(t){"use strict";var n=!1;if("production"!==t.env.NODE_ENV)try{Object.defineProperty({},"x",{get:function(){}}),n=!0}catch(t){}e.exports=n}).call(this,t("_process"))},{_process:28}],951:[function(t,e,n){(function(n){"use strict";function r(e,r,f,h,p,d){for(var v in e)if(e.hasOwnProperty(v)){var m;try{"function"!=typeof e[v]&&("production"!==n.env.NODE_ENV?u(!1,"%s: %s type `%s` is invalid; it must be a function, usually from React.PropTypes.",h||"React class",a[f],v):o("84",h||"React class",a[f],v)),m=e[v](r,v,h,f,null,s)}catch(t){m=t}if("production"!==n.env.NODE_ENV&&c(!m||m instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",h||"React class",a[f],v,typeof m),m instanceof Error&&!(m.message in l)){l[m.message]=!0;var y="";"production"!==n.env.NODE_ENV&&(i||(i=t("./ReactComponentTreeHook")),null!==d?y=i.getStackAddendumByID(d):null!==p&&(y=i.getCurrentStackAddendum(p))),"production"!==n.env.NODE_ENV&&c(!1,"Failed %s type: %s%s",f,m.message,y)}}}var i,o=t("./reactProdInvariant"),a=t("./ReactPropTypeLocationNames"),s=t("./ReactPropTypesSecret"),u=t("fbjs/lib/invariant"),c=t("fbjs/lib/warning");void 0!==n&&n.env&&"test"===n.env.NODE_ENV&&(i=t("./ReactComponentTreeHook"));var l={};e.exports=r}).call(this,t("_process"))},{"./ReactComponentTreeHook":938,"./ReactPropTypeLocationNames":945,"./ReactPropTypesSecret":947,"./reactProdInvariant":954,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446}],952:[function(t,e,n){arguments[4][899][0].apply(n,arguments)},{dup:899}],953:[function(t,e,n){(function(n){"use strict";function r(t){return o.isValidElement(t)||("production"!==n.env.NODE_ENV?a(!1,"React.Children.only expected to receive a single React element child."):i("143")),t}var i=t("./reactProdInvariant"),o=t("./ReactElement"),a=t("fbjs/lib/invariant");e.exports=r}).call(this,t("_process"))},{"./ReactElement":941,"./reactProdInvariant":954,_process:28,"fbjs/lib/invariant":439}],954:[function(t,e,n){arguments[4][908][0].apply(n,arguments)},{dup:908}],955:[function(t,e,n){(function(n){"use strict";function r(t,e){return t&&"object"==typeof t&&null!=t.key?f.escape(t.key):e.toString(36)}function i(t,e,o,d){var v=typeof t;if("undefined"!==v&&"boolean"!==v||(t=null),null===t||"string"===v||"number"===v||"object"===v&&t.$$typeof===u)return o(d,t,""===e?"."+r(t,0):e),1;var m,y,g=0,_=""===e?".":e+":";if(Array.isArray(t))for(var b=0;b<t.length;b++)m=t[b],y=_+r(m,b),g+=i(m,y,o,d);else{var w=c(t);if(w){var x,E=w.call(t);if(w!==t.entries)for(var T=0;!(x=E.next()).done;)m=x.value,y=_+r(m,T++),g+=i(m,y,o,d);else{if("production"!==n.env.NODE_ENV){var S="";if(s.current){var M=s.current.getName();M&&(S=" Check the render method of `"+M+"`.")}"production"!==n.env.NODE_ENV&&h(p,"Using Maps as children is not yet fully supported. It is an experimental feature that might be removed. Convert it to a sequence / iterable of keyed ReactElements instead.%s",S),p=!0}for(;!(x=E.next()).done;){var O=x.value;O&&(m=O[1],y=_+f.escape(O[0])+":"+r(m,0),g+=i(m,y,o,d))}}}else if("object"===v){var A="";if("production"!==n.env.NODE_ENV&&(A=" If you meant to render a collection of children, use an array instead or wrap the object using createFragment(object) from the React add-ons.",t._isReactElement&&(A=" It looks like you're using an element created by a different version of React. Make sure to use only one copy of React."),s.current)){var R=s.current.getName();R&&(A+=" Check the render method of `"+R+"`.")}var I=String(t);"production"!==n.env.NODE_ENV?l(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===I?"object with keys {"+Object.keys(t).join(", ")+"}":I,A):a("31","[object Object]"===I?"object with keys {"+Object.keys(t).join(", ")+"}":I,A)}}return g}function o(t,e,n){return null==t?0:i(t,"",e,n)}var a=t("./reactProdInvariant"),s=t("./ReactCurrentOwner"),u=t("./ReactElementSymbol"),c=t("./getIteratorFn"),l=t("fbjs/lib/invariant"),f=t("./KeyEscapeUtils"),h=t("fbjs/lib/warning"),p=!1;e.exports=o}).call(this,t("_process"))},{"./KeyEscapeUtils":932,"./ReactCurrentOwner":939,"./ReactElementSymbol":942,"./getIteratorFn":952,"./reactProdInvariant":954,_process:28,"fbjs/lib/invariant":439,"fbjs/lib/warning":446}],956:[function(t,e,n){"use strict";e.exports=t("./lib/React")},{"./lib/React":934}],957:[function(t,e,n){arguments[4][464][0].apply(n,arguments)},{"./_stream_readable":959,"./_stream_writable":961,_process:28,"core-util-is":349,dup:464,inherits:486}],958:[function(t,e,n){arguments[4][465][0].apply(n,arguments)},{"./_stream_transform":960,"core-util-is":349,dup:465,inherits:486}],959:[function(t,e,n){(function(n){function r(e,n){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(A||(A=t("string_decoder/").StringDecoder),this.decoder=new A(e.encoding),this.encoding=e.encoding)}function i(t){if(!(this instanceof i))return new i(t);this._readableState=new r(t,this),this.readable=!0,M.call(this)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(null===n||void 0===n)e.reading=!1,e.ended||l(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var s=new Error("stream.push() after EOF");t.emit("error",s)}else if(e.endEmitted&&i){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else!e.decoder||i||r||(n=e.decoder.write(n)),e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):(e.reading=!1,e.buffer.push(n)),e.needReadable&&f(t),p(t,e);else i||(e.reading=!1);return a(e)}function a(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function s(t){if(t>=8388608)t=8388608;else{t--;for(var e=1;e<32;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:t<=0?0:(t>e.highWaterMark&&(e.highWaterMark=s(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return T.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,e.length>0?f(t):b(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?n.nextTick(function(){h(t)}):h(t))}function h(t){t.emit("readable")}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function v(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&m(t)}}function m(t){function e(t,e,i){!1===t.write(n)&&r.awaitDrain++}var n,r=t._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=t.read());)if(1===r.pipesCount?e(r.pipes,0,null):w(r.pipes,e),t.emit("data",n),r.awaitDrain>0)return;if(0===r.pipesCount)return r.flowing=!1,void(S.listenerCount(t,"data")>0&&g(t));r.ranOut=!0}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,m(this))}function g(t,e){if(t._readableState.flowing)throw new Error("Cannot switch to old mode now.");var r=e||!1,i=!1;t.readable=!0,t.pipe=M.prototype.pipe,t.on=t.addListener=M.prototype.on,t.on("readable",function(){i=!0;for(var e;!r&&null!==(e=t.read());)t.emit("data",e);null===e&&(i=!1,t._readableState.needReadable=!0)}),t.pause=function(){r=!0,this.emit("pause")},t.resume=function(){r=!1,i?n.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function _(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,a=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(a)n=r.shift();else if(!t||t>=i)n=o?r.join(""):T.concat(r,i),r.length=0;else if(t<r[0].length){var s=r[0];n=s.slice(0,t),r[0]=s.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new T(t);for(var u=0,c=0,l=r.length;c<l&&u<t;c++){var s=r[0],f=Math.min(t-u,s.length);o?n+=s.slice(0,f):s.copy(n,u,0,f),f<s.length?r[0]=s.slice(f):r.shift(),u+=f}}return n}function b(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function w(t,e){for(var n=0,r=t.length;n<r;n++)e(t[n],n)}function x(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}e.exports=i;var E=t("isarray"),T=t("buffer").Buffer;i.ReadableState=r;var S=t("events").EventEmitter;S.listenerCount||(S.listenerCount=function(t,e){return t.listeners(e).length});var M=t("stream"),O=t("core-util-is");O.inherits=t("inherits");var A;O.inherits(i,M),i.prototype.push=function(t,e){var n=this._readableState;return"string"!=typeof t||n.objectMode||(e=e||n.defaultEncoding,e!==n.encoding&&(t=new T(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){return o(this,this._readableState,t,"",!0)},i.prototype.setEncoding=function(e){A||(A=t("string_decoder/").StringDecoder),this._readableState.decoder=new A(e),this._readableState.encoding=e};i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var n,r=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(t=u(t,e),0===t&&e.ended)return n=null,e.length>0&&e.decoder&&(n=_(t,e),e.length-=n.length),0===e.length&&b(this),n;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(r,e)),n=t>0?_(t,e):null,null===n&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&b(this),n},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){t===l&&o()}function i(){t.end()}function o(){t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("drain",d),t.removeListener("error",a),t.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),t._writableState&&!t._writableState.needDrain||d()}function a(e){c(),t.removeListener("error",a),0===S.listenerCount(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",u),c()}function u(){t.removeListener("close",s),c()}function c(){l.unpipe(t)}var l=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1;var h=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,p=h?i:o;f.endEmitted?n.nextTick(p):l.once("end",p),t.on("unpipe",r);var d=v(l);return t.on("drain",d),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(a):t._events.error=[a,t._events.error]:t.on("error",a),t.once("close",s),t.once("finish",u),t.emit("pipe",l),f.flowing||(this.on("readable",y),f.flowing=!0,n.nextTick(function(){m(l)})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),
e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=x(e.pipes,t);return i===-1?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var n=M.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||g(this),"readable"===t&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&f(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){g(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){g(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){r.push(i)||(n=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&void 0===this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));return w(["error","close","destroy","pause","resume"],function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){n&&(n=!1,t.resume())},r},i._fromList=_}).call(this,t("_process"))},{_process:28,buffer:8,"core-util-is":349,events:10,inherits:486,isarray:489,stream:40,"string_decoder/":967}],960:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);s.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){a(e,t)}):a(e)})}function a(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=(t._readableState,t._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var s=t("./_stream_duplex"),u=t("core-util-is");u.inherits=t("inherits"),u.inherits(o,s),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":957,"core-util-is":349,inherits:486}],961:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(t,e){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=t.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");if(!(this instanceof o||this instanceof n))return new o(e);this._writableState=new i(e,this),this.writable=!0,x.call(this)}function a(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function s(t,e,r,i){var o=!0;if(!b.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!e.objectMode){var a=new TypeError("Invalid non-string/buffer chunk");t.emit("error",a),n.nextTick(function(){i(a)}),o=!1}return o}function u(t,e,n){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new b(e,n)),e}function c(t,e,n,i,o){n=u(e,n,i),b.isBuffer(n)&&(i="buffer");var a=e.objectMode?1:n.length;e.length+=a;var s=e.length<e.highWaterMark;return s||(e.needDrain=!0),e.writing?e.buffer.push(new r(n,i,o)):l(t,e,a,n,i,o),s}function l(t,e,n,r,i,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,t._write(r,i,e.onwrite),e.sync=!1}function f(t,e,r,i,o){r?n.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(h(r),e)f(t,r,i,e,o);else{var a=y(t,r);a||r.bufferProcessing||!r.buffer.length||m(t,r),i?n.nextTick(function(){d(t,r,a,o)}):d(t,r,a,o)}}function d(t,e,n,r){n||v(t,e),r(),n&&g(t,e)}function v(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function m(t,e){e.bufferProcessing=!0;for(var n=0;n<e.buffer.length;n++){var r=e.buffer[n],i=r.chunk,o=r.encoding,a=r.callback;if(l(t,e,e.objectMode?1:i.length,i,o,a),e.writing){n++;break}}e.bufferProcessing=!1,n<e.buffer.length?e.buffer=e.buffer.slice(n):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function g(t,e){var n=y(t,e);return n&&(e.finished=!0,t.emit("finish")),n}function _(t,e,r){e.ending=!0,g(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var b=t("buffer").Buffer;o.WritableState=i;var w=t("core-util-is");w.inherits=t("inherits");var x=t("stream");w.inherits(o,x),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return"function"==typeof e&&(n=e,e=null),b.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?a(this,r,n):s(this,r,t,n)&&(i=c(this,r,t,e,n)),i},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),void 0!==t&&null!==t&&this.write(t,e),r.ending||r.finished||_(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":957,_process:28,buffer:8,"core-util-is":349,inherits:486,stream:40}],962:[function(t,e,n){(function(r){var i=t("stream");n=e.exports=t("./lib/_stream_readable.js"),n.Stream=i,n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js"),r.browser||"disable"!==r.env.READABLE_STREAM||(e.exports=t("stream"))}).call(this,t("_process"))},{"./lib/_stream_duplex.js":957,"./lib/_stream_passthrough.js":958,"./lib/_stream_readable.js":959,"./lib/_stream_transform.js":960,"./lib/_stream_writable.js":961,_process:28,stream:40}],963:[function(t,e,n){(function(t,n){!function(n){"use strict";function r(t,e,n,r){var i=e&&e.prototype instanceof o?e:o,a=Object.create(i.prototype),s=new d(r||[]);return a._invoke=l(t,n,s),a}function i(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function a(){}function s(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function c(e){function n(t,r,o,a){var s=i(e[t],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&_.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function r(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof t&&t.domain&&(n=t.domain.bind(n));var o;this._invoke=r}function l(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return m()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=f(s,n);if(u){if(u===S)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=i(t,e,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===S)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}function f(t,e){var n=t.iterator[e.method];if(n===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,f(t,e),"throw"===e.method))return S;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return S}var r=i(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,S;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,S):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function p(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function v(t){if(t){var e=t[w];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(_.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype,_=g.hasOwnProperty,b="function"==typeof Symbol?Symbol:{},w=b.iterator||"@@iterator",x=b.toStringTag||"@@toStringTag",E="object"==typeof e,T=n.regeneratorRuntime;if(T)return void(E&&(e.exports=T));T=n.regeneratorRuntime=E?e.exports:{},T.wrap=r;var S={},M={};M[w]=function(){return this};var O=Object.getPrototypeOf,A=O&&O(O(v([])));A&&A!==g&&_.call(A,w)&&(M=A);var R=s.prototype=o.prototype=Object.create(M);a.prototype=R.constructor=s,s.constructor=a,s[x]=a.displayName="GeneratorFunction",T.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===a||"GeneratorFunction"===(e.displayName||e.name))},T.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,s):(t.__proto__=s,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(R),t},T.awrap=function(t){return{__await:t}},u(c.prototype),T.AsyncIterator=c,T.async=function(t,e,n,i){var o=new c(r(t,e,n,i));return T.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(R),R[x]="Generator",R.toString=function(){return"[object Generator]"},T.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},T.values=v,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(p),!t)for(var e in this)"t"===e.charAt(0)&&_.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=_.call(i,"catchLoc"),s=_.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&_.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,S):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),p(n),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;p(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:v(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=y),S}}}("object"==typeof n?n:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:28}],964:[function(t,e,n){(function(n){"use strict";function r(t,e,n){if(4===t.shape.length)return r(t.pick(n),e,0);if(3===t.shape.length)if(3===t.shape[2])l.assign(c(e,[t.shape[0],t.shape[1],3],[4,4*t.shape[0],1]),t),l.assigns(c(e,[t.shape[0]*t.shape[1]],[4],3),255);else if(4===t.shape[2])l.assign(c(e,[t.shape[0],t.shape[1],4],[4,4*t.shape[0],1]),t);else{if(1!==t.shape[2])return new Error("Incompatible array shape");l.assign(c(e,[t.shape[0],t.shape[1],3],[4,4*t.shape[0],1]),c(t.data,[t.shape[0],t.shape[1],3],[t.stride[0],t.stride[1],0],t.offset)),l.assigns(c(e,[t.shape[0]*t.shape[1]],[4],3),255)}else{if(2!==t.shape.length)return new Error("Incompatible array shape");l.assign(c(e,[t.shape[0],t.shape[1],3],[4,4*t.shape[0],1]),c(t.data,[t.shape[0],t.shape[1],3],[t.stride[0],t.stride[1],0],t.offset)),l.assigns(c(e,[t.shape[0]*t.shape[1]],[4],3),255)}return e}function i(t){var e=f();return e.emit("error",t),e}var o=t("contentstream"),a=t("gif-encoder"),s=t("jpeg-js"),u=t("pngjs-nozlib").PNG,c=t("ndarray"),l=t("ndarray-ops"),f=t("through");e.exports=function(t,e,c){switch(c=c||{},e.toUpperCase()){case"JPG":case".JPG":case"JPEG":case".JPEG":case"JPE":case".JPE":var l=t.shape[0],f=t.shape[1],h=new n(l*f*4);h=r(t,h);var p={data:h,width:l,height:f};return new o(s.encode(p,c.quality).data);case"GIF":case".GIF":var d=4===t.shape.length?t.shape[0]:1,l=4===t.shape.length?t.shape[1]:t.shape[0],f=4===t.shape.length?t.shape[2]:t.shape[1],h=new n(l*f*4),v=new a(l,f);v.writeHeader();for(var m=0;m<d;m++)h=r(t,h,m),v.addFrame(h);return v.finish(),v;case"PNG":case".PNG":var y=new u({width:t.shape[0],height:t.shape[1]}),h=r(t,y.data);return"Error"==typeof h?i(h):(y.data=h,y.pack());case"CANVAS":var g=document.createElement("canvas"),_=g.getContext("2d");g.width=t.shape[0],g.height=t.shape[1];var b=_.getImageData(0,0,g.width,g.height),h=b.data;return h=r(t,h),"Error"==typeof h?i(h):(_.putImageData(b,0,0),g);default:return i(new Error("Unsupported file type: "+e))}}}).call(this,t("buffer").Buffer)},{buffer:8,contentstream:54,"gif-encoder":461,"jpeg-js":490,ndarray:758,"ndarray-ops":755,"pngjs-nozlib":782,through:970}],965:[function(t,e,n){e.exports=["#440154","#440256","#450457","#450559","#46075a","#46085c","#460a5d","#460b5e","#470d60","#470e61","#471063","#471164","#471365","#481467","#481668","#481769","#48186a","#481a6c","#481b6d","#481c6e","#481d6f","#481f70","#482071","#482173","#482374","#482475","#482576","#482677","#482878","#482979","#472a7a","#472c7a","#472d7b","#472e7c","#472f7d","#46307e","#46327e","#46337f","#463480","#453581","#453781","#453882","#443983","#443a83","#443b84","#433d84","#433e85","#423f85","#424086","#424186","#414287","#414487","#404588","#404688","#3f4788","#3f4889","#3e4989","#3e4a89","#3e4c8a","#3d4d8a","#3d4e8a","#3c4f8a","#3c508b","#3b518b","#3b528b","#3a538b","#3a548c","#39558c","#39568c","#38588c","#38598c","#375a8c","#375b8d","#365c8d","#365d8d","#355e8d","#355f8d","#34608d","#34618d","#33628d","#33638d","#32648e","#32658e","#31668e","#31678e","#31688e","#30698e","#306a8e","#2f6b8e","#2f6c8e","#2e6d8e","#2e6e8e","#2e6f8e","#2d708e","#2d718e","#2c718e","#2c728e","#2c738e","#2b748e","#2b758e","#2a768e","#2a778e","#2a788e","#29798e","#297a8e","#297b8e","#287c8e","#287d8e","#277e8e","#277f8e","#27808e","#26818e","#26828e","#26828e","#25838e","#25848e","#25858e","#24868e","#24878e","#23888e","#23898e","#238a8d","#228b8d","#228c8d","#228d8d","#218e8d","#218f8d","#21908d","#21918c","#20928c","#20928c","#20938c","#1f948c","#1f958b","#1f968b","#1f978b","#1f988b","#1f998a","#1f9a8a","#1e9b8a","#1e9c89","#1e9d89","#1f9e89","#1f9f88","#1fa088","#1fa188","#1fa187","#1fa287","#20a386","#20a486","#21a585","#21a685","#22a785","#22a884","#23a983","#24aa83","#25ab82","#25ac82","#26ad81","#27ad81","#28ae80","#29af7f","#2ab07f","#2cb17e","#2db27d","#2eb37c","#2fb47c","#31b57b","#32b67a","#34b679","#35b779","#37b878","#38b977","#3aba76","#3bbb75","#3dbc74","#3fbc73","#40bd72","#42be71","#44bf70","#46c06f","#48c16e","#4ac16d","#4cc26c","#4ec36b","#50c46a","#52c569","#54c568","#56c667","#58c765","#5ac864","#5cc863","#5ec962","#60ca60","#63cb5f","#65cb5e","#67cc5c","#69cd5b","#6ccd5a","#6ece58","#70cf57","#73d056","#75d054","#77d153","#7ad151","#7cd250","#7fd34e","#81d34d","#84d44b","#86d549","#89d548","#8bd646","#8ed645","#90d743","#93d741","#95d840","#98d83e","#9bd93c","#9dd93b","#a0da39","#a2da37","#a5db36","#a8db34","#aadc32","#addc30","#b0dd2f","#b2dd2d","#b5de2b","#b8de29","#bade28","#bddf26","#c0df25","#c2df23","#c5e021","#c8e020","#cae11f","#cde11d","#d0e11c","#d2e21b","#d5e21a","#d8e219","#dae319","#dde318","#dfe318","#e2e418","#e5e419","#e7e419","#eae51a","#ece51b","#efe51c","#f1e51d","#f4e61e","#f6e620","#f8e621","#fbe723","#fde725"]},{}],966:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?e.exports=r():"function"==typeof define&&define.amd?define(r):t.ShelfPack=r()}(this,function(){function t(t,e,n){n=n||{},this.w=t||64,this.h=e||64,this.autoResize=!!n.autoResize,this.shelves=[],this.stats={},this.count=function(t){this.stats[t]=(0|this.stats[t])+1}}function e(t,e,n){this.x=0,this.y=t,this.w=this.free=e,this.h=n}return t.prototype.pack=function(t,e){t=[].concat(t),e=e||{};for(var n,r,i,o=[],a=0;a<t.length;a++)if(n=t[a].w||t[a].width,r=t[a].h||t[a].height,n&&r){if(i=this.packOne(n,r),!i)continue;e.inPlace&&(t[a].x=i.x,t[a].y=i.y),o.push(i)}if(this.shelves.length>0){for(var s=0,u=0,c=0;c<this.shelves.length;c++){var l=this.shelves[c];u+=l.h,s=Math.max(l.w-l.free,s)}this.resize(s,u)}return o},t.prototype.packOne=function(t,n){for(var r,i,o=0,a={shelf:-1,waste:1/0},s=0;s<this.shelves.length;s++){if(r=this.shelves[s],o+=r.h,n===r.h&&t<=r.free)return this.count(n),r.alloc(t,n);n>r.h||t>r.free||n<r.h&&t<=r.free&&(i=r.h-n,i<a.waste&&(a.waste=i,a.shelf=s))}if(a.shelf!==-1)return r=this.shelves[a.shelf],this.count(n),r.alloc(t,n);if(n<=this.h-o&&t<=this.w)return r=new e(o,this.w,n),this.shelves.push(r),this.count(n),r.alloc(t,n);if(this.autoResize){var u,c,l,f;return u=c=this.h,l=f=this.w,(l<=u||t>l)&&(f=2*Math.max(t,l)),(u<l||n>u)&&(c=2*Math.max(n,u)),this.resize(f,c),this.packOne(t,n)}return null},t.prototype.clear=function(){this.shelves=[],this.stats={}},t.prototype.resize=function(t,e){this.w=t,this.h=e;for(var n=0;n<this.shelves.length;n++)this.shelves[n].resize(t);return!0},e.prototype.alloc=function(t,e){if(t>this.free||e>this.h)return null;var n=this.x;return this.x+=t,this.free-=t,{x:n,y:this.y,w:t,h:e,width:t,height:e}},e.prototype.resize=function(t){return this.free+=t-this.w,this.w=t,!0},t})},{}],967:[function(t,e,n){arguments[4][41][0].apply(n,arguments)},{buffer:8,dup:41}],968:[function(t,e,n){"use strict";function r(t){return new i(t)}function i(t){this.options=p(Object.create(this.options),t),this.trees=new Array(this.options.maxZoom+1)}function o(t,e,n,r,i){return{x:t,y:e,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function a(t,e){var n=t.geometry.coordinates;return{x:c(n[0]),y:l(n[1]),zoom:1/0,id:e,parentId:-1}}function s(t){return{type:"Feature",properties:u(t),geometry:{type:"Point",coordinates:[f(t.x),h(t.y)]}}}function u(t){var e=t.numPoints,n=e>=1e4?Math.round(e/1e3)+"k":e>=1e3?Math.round(e/100)/10+"k":e;return p(p({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function c(t){return t/360+.5}function l(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function f(t){return 360*(t-.5)}function h(t){var e=(180-360*t)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function p(t,e){for(var n in e)t[n]=e[n];return t}function d(t){return t.x}function v(t){return t.y}var m=t("kdbush");e.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(t){return t}},load:function(t){var e=this.options.log;e&&console.time("total time");var n="prepare "+t.length+" points";e&&console.time(n),this.points=t;var r=t.map(a);e&&console.timeEnd(n);for(var i=this.options.maxZoom;i>=this.options.minZoom;i--){var o=+Date.now();this.trees[i+1]=m(r,d,v,this.options.nodeSize,Float32Array),r=this._cluster(r,i),e&&console.log("z%d: %d clusters in %dms",i,r.length,+Date.now()-o)}return this.trees[this.options.minZoom]=m(r,d,v,this.options.nodeSize,Float32Array),e&&console.timeEnd("total time"),this},getClusters:function(t,e){for(var n=this.trees[this._limitZoom(e)],r=n.range(c(t[0]),l(t[3]),c(t[2]),l(t[1])),i=[],o=0;o<r.length;o++){var a=n.points[r[o]];i.push(a.numPoints?s(a):this.points[a.id])}return i},getChildren:function(t,e){for(var n=this.trees[e+1].points[t],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=this.trees[e+1].within(n.x,n.y,r),o=[],a=0;a<i.length;a++){var u=this.trees[e+1].points[i[a]];u.parentId===t&&o.push(u.numPoints?s(u):this.points[u.id])}return o},getLeaves:function(t,e,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,t,e,n,r,0),i},getTile:function(t,e,n){var r=this.trees[this._limitZoom(t)],i=Math.pow(2,t),o=this.options.extent,a=this.options.radius,s=a/o,u=(n-s)/i,c=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((e-s)/i,u,(e+1+s)/i,c),r.points,e,n,i,l),0===e&&this._addTileFeatures(r.range(1-s/i,u,1,c),r.points,i,n,i,l),e===i-1&&this._addTileFeatures(r.range(0,u,s/i,c),r.points,-1,n,i,l),l.features.length?l:null},getClusterExpansionZoom:function(t,e){for(;e<this.options.maxZoom;){var n=this.getChildren(t,e);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e},_appendLeaves:function(t,e,n,r,i,o){for(var a=this.getChildren(e,n),s=0;s<a.length;s++){var u=a[s].properties;if(u.cluster?o+u.point_count<=i?o+=u.point_count:o=this._appendLeaves(t,u.cluster_id,n+1,r,i,o):o<i?o++:t.push(a[s]),t.length===r)break}return o},_addTileFeatures:function(t,e,n,r,i,o){for(var a=0;a<t.length;a++){var s=e[t[a]];o.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*i-n)),Math.round(this.options.extent*(s.y*i-r))]],tags:s.numPoints?u(s):this.points[s.id].properties})}},_limitZoom:function(t){return Math.max(this.options.minZoom,Math.min(t,this.options.maxZoom+1))},_cluster:function(t,e){for(var n=[],r=this.options.radius/(this.options.extent*Math.pow(2,e)),i=0;i<t.length;i++){var a=t[i];if(!(a.zoom<=e)){a.zoom=e;var s=this.trees[e+1],u=s.within(a.x,a.y,r),c=a.numPoints||1,l=a.x*c,f=a.y*c,h=null;this.options.reduce&&(h=this.options.initial(),this._accumulate(h,a));for(var p=0;p<u.length;p++){var d=s.points[u[p]];if(e<d.zoom){var v=d.numPoints||1;d.zoom=e,l+=d.x*v,f+=d.y*v,c+=v,d.parentId=i,this.options.reduce&&this._accumulate(h,d)}}1===c?n.push(a):(a.parentId=i,n.push(o(l/c,f/c,c,i,h)))}}return n},_accumulate:function(t,e){var n=e.numPoints?e.properties:this.options.map(this.points[e.id].properties);this.options.reduce(t,n)}}},{kdbush:494}],969:[function(t,e,n){"use strict";e.exports=function t(e){var t=[];return Array.isArray(e)&&e.forEach(function(e){var n=Object.keys(e)[0];t.push(n+"("+e[n]+")")}),t.join(" ")}},{}],970:[function(t,e,n){(function(r){function i(t,e,n){function i(){for(;c.length&&!f.paused;){var t=c.shift();if(null===t)return f.emit("end");f.emit("data",t)}}function a(){f.writable=!1,e.call(f),!f.readable&&f.autoDestroy&&f.destroy()}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var s=!1,u=!1,c=[],l=!1,f=new o;return f.readable=f.writable=!0,f.paused=!1,f.autoDestroy=!(n&&n.autoDestroy===!1),f.write=function(e){return t.call(this,e),!f.paused},f.queue=f.push=function(t){return l?f:(null===t&&(l=!0),c.push(t),i(),f)},f.on("end",function(){f.readable=!1,!f.writable&&f.autoDestroy&&r.nextTick(function(){f.destroy()})}),f.end=function(t){if(!s)return s=!0,arguments.length&&f.write(t),a(),f},f.destroy=function(){if(!u)return u=!0,s=!0,c.length=0,f.writable=f.readable=!1,f.emit("close"),f},f.pause=function(){if(!f.paused)return f.paused=!0,f},f.resume=function(){return f.paused&&(f.paused=!1,f.emit("resume")),i(),f.paused||f.emit("drain"),f},f}var o=t("stream");n=e.exports=i,i.through=i}).call(this,t("_process"))},{_process:28,stream:40}],971:[function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||i,t)for(var n=Math.floor(this.length/2);n>=0;n--)this._down(n)}function i(t,e){return t<e?-1:t>e?1:0}function o(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}e.exports=r,r.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare;t>0;){var r=Math.floor((t-1)/2);if(!(n(e[t],e[r])<0))break;o(e,r,t),t=r}},_down:function(t){for(var e=this.data,n=this.compare,r=this.length;;){var i=2*t+1,a=i+1,s=t;if(i<r&&n(e[i],e[s])<0&&(s=i),a<r&&n(e[a],e[s])<0&&(s=a),s===t)return;o(e,s,t),t=s}}}},{}],972:[function(t,e,n){"use strict";function r(t,e){for(var n=1,r=t.length,i=t[0],o=t[0],a=1;a<r;++a)if(o=i,i=t[a],e(i,o)){if(a===n){n++;continue}t[n++]=i}return t.length=n,t}function i(t){for(var e=1,n=t.length,r=t[0],i=t[0],o=1;o<n;++o,i=r)if(i=r,r=t[o],r!==i){if(o===e){e++;continue}t[e++]=r}return t.length=e,t}function o(t,e,n){return 0===t.length?t:e?(n||t.sort(e),r(t,e)):(n||t.sort(),i(t))}e.exports=o},{}],973:[function(t,e,n){e.exports.VectorTile=t("./lib/vectortile.js"),e.exports.VectorTileFeature=t("./lib/vectortilefeature.js"),e.exports.VectorTileLayer=t("./lib/vectortilelayer.js")},{"./lib/vectortile.js":974,"./lib/vectortilefeature.js":975,"./lib/vectortilelayer.js":976}],974:[function(t,e,n){"use strict";function r(t,e){this.layers=t.readFields(i,{},e)}function i(t,e,n){if(3===t){var r=new o(n,n.readVarint()+n.pos);r.length&&(e[r.name]=r)}}var o=t("./vectortilelayer");e.exports=r},{"./vectortilelayer":976}],975:[function(t,e,n){"use strict";function r(t,e,n,r,o){this.properties={},this.extent=n,this.type=0,this._pbf=t,this._geometry=-1,this._keys=r,this._values=o,t.readFields(i,this,e)}function i(t,e,n){1==t?e.id=n.readVarint():2==t?o(n,e):3==t?e.type=n.readVarint():4==t&&(e._geometry=n.pos)}function o(t,e){for(var n=t.readVarint()+t.pos;t.pos<n;){var r=e._keys[t.readVarint()],i=e._values[t.readVarint()];e.properties[r]=i}}function a(t){var e=t.length;if(e<=1)return[t];for(var n,r,i=[],o=0;o<e;o++){var a=s(t[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[t[o]]):n.push(t[o]))}return n&&i.push(n),i}function s(t){for(var e,n,r=0,i=0,o=t.length,a=o-1;i<o;a=i++)e=t[i],n=t[a],r+=(n.x-e.x)*(e.y+n.y);return r}var u=t("point-geometry");e.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,n=t.readVarint()+t.pos,r=1,i=0,o=0,a=0,s=[];t.pos<n;){if(!i){var c=t.readVarint();r=7&c,i=c>>3}if(i--,1===r||2===r)o+=t.readSVarint(),a+=t.readSVarint(),1===r&&(e&&s.push(e),e=[]),e.push(new u(o,a));else{if(7!==r)throw new Error("unknown command "+r);e&&e.push(e[0].clone())}}return e&&s.push(e),s},r.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,n=1,r=0,i=0,o=0,a=1/0,s=-(1/0),u=1/0,c=-(1/0);t.pos<e;){if(!r){var l=t.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)i+=t.readSVarint(),o+=t.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},r.prototype.toGeoJSON=function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],r=180-360*(n.y+l)/u;t[e]=[360*(n.x+c)/u-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var o,s,u=this.extent*Math.pow(2,n),c=this.extent*t,l=this.extent*e,f=this.loadGeometry(),h=r.types[this.type];switch(this.type){case 1:var p=[];for(o=0;o<f.length;o++)p[o]=f[o][0];f=p,i(f);break;case 2:for(o=0;o<f.length;o++)i(f[o]);break;case 3:for(f=a(f),o=0;o<f.length;o++)for(s=0;s<f[o].length;s++)i(f[o][s])}1===f.length?f=f[0]:h="Multi"+h;var d={type:"Feature",geometry:{type:h,coordinates:f},properties:this.properties};return"id"in this&&(d.id=this.id),d}},{"point-geometry":784}],976:[function(t,e,n){"use strict";function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():5===t?e.extent=n.readVarint():2===t?e._features.push(n.pos):3===t?e._keys.push(n.readString()):4===t&&e._values.push(o(n))}function o(t){for(var e=null,n=t.readVarint()+t.pos;t.pos<n;){var r=t.readVarint()>>3;e=1===r?t.readString():2===r?t.readFloat():3===r?t.readDouble():4===r?t.readVarint64():5===r?t.readVarint():6===r?t.readSVarint():7===r?t.readBoolean():null}return e}var a=t("./vectortilefeature.js");e.exports=r,r.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,e,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":975}],977:[function(t,e,n){"use strict";function r(t){return t*h}function i(t){return t*p}function o(t){function e(t){return[p*(t[0]*h+a)+g,p*(a-c(u(.25*a+.5*(t[1]*h))))+_]}function n(t){var e=t[0]-g,n=t[1]-_,r=e/p-a,o=2*(l(f(a-n/p))-.25*a);return[i(r),i(o)]}function o(n){var r=e(n),i=r[0],o=r[1];return i>=0&&i<=t.width&&o>=0&&o<=t.height}var p=.5*(t.tileSize||512)/a*s(2,t.zoom),d=r(t.longitude),v=r(t.latitude),m=p*(d+a),y=p*(a-c(u(.25*a+.5*v))),g=.5*t.width-m,_=.5*t.height-y;return{project:e,unproject:n,contains:o}}var a=Math.PI,s=Math.pow,u=Math.tan,c=Math.log,l=Math.atan,f=Math.exp,h=a/180,p=180/a;e.exports=o},{}],978:[function(t,e,n){function r(t){var e=[];for(var n in t.layers)e.push(o(t.layers[n]));var r=new l;return f.tile.write({layers:e},r),r.finish()}function i(t){var e={};for(var n in t)e[n]=new h(t[n].features),e[n].name=n;return r({layers:e})}function o(t){for(var e={name:t.name||"",version:t.version||1,extent:t.extent||4096,keys:[],values:[],features:[]},n={},r={},i=0;i<t.length;i++){var o=t.feature(i);o.geometry=u(o.loadGeometry())
;var a=[];for(var s in o.properties){var l=n[s];void 0===l&&(e.keys.push(s),l=e.keys.length-1,n[s]=l);var f=c(o.properties[s]),h=r[f.key];void 0===h&&(e.values.push(f),h=e.values.length-1,r[f.key]=h),a.push(l),a.push(h)}o.tags=a,e.features.push(o)}return e}function a(t,e){return(e<<3)+(7&t)}function s(t){return t<<1^t>>31}function u(t){for(var e=[],n=0,r=0,i=t.length,o=0;o<i;o++){var u=t[o];e.push(a(1,1));for(var c=0;c<u.length;c++){1===c&&e.push(a(2,u.length-1));var l=u[c].x-n,f=u[c].y-r;e.push(s(l),s(f)),n+=l,r+=f}}return e}function c(t){var e,n=typeof t;return"string"===n?e={string_value:t}:"boolean"===n?e={bool_value:t}:"number"===n?e=t%1!==0?{double_value:t}:t<0?{sint_value:t}:{uint_value:t}:(t=JSON.stringify(t),e={string_value:t}),e.key=n+":"+t,e}var l=t("pbf"),f=t("./vector-tile-pb"),h=t("./lib/geojson_wrapper");e.exports=r,e.exports.fromVectorTileJs=r,e.exports.fromGeojsonVt=i,e.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":979,"./vector-tile-pb":980,pbf:762}],979:[function(t,e,n){"use strict";function r(t){this.features=t,this.length=t.length}function i(t){this.id="number"==typeof t.id?t.id:void 0,this.type=t.type,this.rawGeometry=1===t.type?[t.geometry]:t.geometry,this.properties=t.tags,this.extent=4096}var o=t("point-geometry"),a=t("vector-tile").VectorTileFeature;e.exports=r,r.prototype.feature=function(t){return new i(this.features[t])},i.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var e=0;e<t.length;e++){for(var n=t[e],r=[],i=0;i<n.length;i++)r.push(new o(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var t=this.geometry,e=1/0,n=-(1/0),r=1/0,i=-(1/0),o=0;o<t.length;o++)for(var a=t[o],s=0;s<a.length;s++){var u=a[s];e=Math.min(e,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[e,r,n,i]},i.prototype.toGeoJSON=a.prototype.toGeoJSON},{"point-geometry":784,"vector-tile":973}],980:[function(t,e,n){"use strict";function r(t,e){return t.readFields(i,{layers:[]},e)}function i(t,e,n){3===t&&e.layers.push(h(n,n.readVarint()+n.pos))}function o(t,e){var n;if(void 0!==t.layers)for(n=0;n<t.layers.length;n++)e.writeMessage(3,d,t.layers[n])}function a(t,e){return t.readFields(s,{},e)}function s(t,e,n){1===t?e.string_value=n.readString():2===t?e.float_value=n.readFloat():3===t?e.double_value=n.readDouble():4===t?e.int_value=n.readVarint():5===t?e.uint_value=n.readVarint():6===t?e.sint_value=n.readSVarint():7===t&&(e.bool_value=n.readBoolean())}function u(t,e){void 0!==t.string_value&&e.writeStringField(1,t.string_value),void 0!==t.float_value&&e.writeFloatField(2,t.float_value),void 0!==t.double_value&&e.writeDoubleField(3,t.double_value),void 0!==t.int_value&&e.writeVarintField(4,t.int_value),void 0!==t.uint_value&&e.writeVarintField(5,t.uint_value),void 0!==t.sint_value&&e.writeSVarintField(6,t.sint_value),void 0!==t.bool_value&&e.writeBooleanField(7,t.bool_value)}function c(t,e){var n=t.readFields(l,{},e);return void 0===n.type&&(n.type="Unknown"),n}function l(t,e,n){1===t?e.id=n.readVarint():2===t?e.tags=n.readPackedVarint():3===t?e.type=n.readVarint():4===t&&(e.geometry=n.readPackedVarint())}function f(t,e){void 0!==t.id&&e.writeVarintField(1,t.id),void 0!==t.tags&&e.writePackedVarint(2,t.tags),void 0!==t.type&&e.writeVarintField(3,t.type),void 0!==t.geometry&&e.writePackedVarint(4,t.geometry)}function h(t,e){return t.readFields(p,{features:[],keys:[],values:[]},e)}function p(t,e,n){15===t?e.version=n.readVarint():1===t?e.name=n.readString():2===t?e.features.push(c(n,n.readVarint()+n.pos)):3===t?e.keys.push(n.readString()):4===t?e.values.push(a(n,n.readVarint()+n.pos)):5===t&&(e.extent=n.readVarint())}function d(t,e){void 0!==t.version&&e.writeVarintField(15,t.version),void 0!==t.name&&e.writeStringField(1,t.name);var n;if(void 0!==t.features)for(n=0;n<t.features.length;n++)e.writeMessage(2,f,t.features[n]);if(void 0!==t.keys)for(n=0;n<t.keys.length;n++)e.writeStringField(3,t.keys[n]);if(void 0!==t.values)for(n=0;n<t.values.length;n++)e.writeMessage(4,u,t.values[n]);void 0!==t.extent&&e.writeVarintField(5,t.extent)}var v=n.tile={read:r,write:o};v.GeomType={Unknown:0,Point:1,LineString:2,Polygon:3},v.value={read:a,write:u},v.feature={read:c,write:f},v.layer={read:h,write:d}},{}],981:[function(t,e,n){(function(t){WebGLDebugUtils=function(){function e(t){if(null==d){d={},v={};for(var e in t)"number"==typeof t[e]&&(d[t[e]]=e,v[e]=t[e])}}function n(){if(null==d)throw"WebGLDebugUtils.init(ctx) not called"}function r(t){return n(),void 0!==d[t]}function i(t){n();var e=d[t];return void 0!==e?"gl."+e:"/*UNKNOWN WebGL ENUM*/ 0x"+t.toString(16)}function o(t,e,n,r){var o=p[t];if(void 0!==o){var o=o[e];if(void 0!==o&&o[n]){if("object"==typeof o[n]&&void 0!==o[n].enumBitwiseOr){for(var a=o[n].enumBitwiseOr,s=0,u=[],c=0;c<a.length;++c){var l=v[a[c]];0!==(r&l)&&(s|=l,u.push(i(l)))}return s===r?u.join(" | "):i(r)}return i(r)}}return null===r?"null":void 0===r?"undefined":r.toString()}function a(t,e){for(var n="",r=e.length,i=0;i<r;++i)n+=(0==i?"":", ")+o(t,r,i,e[i]);return n}function s(t,e,n){t.__defineGetter__(n,function(){return e[n]}),t.__defineSetter__(n,function(t){e[n]=t})}function u(t,n,r,a){function c(t,e){return function(){r&&r(e,arguments);var i=t[e].apply(t,arguments),o=a.getError();return 0!=o&&(l[o]=!0,n(o,e,arguments)),i}}a=a||t,e(t),n=n||function(t,e,n){for(var r="",a=n.length,s=0;s<a;++s)r+=(0==s?"":", ")+o(e,a,s,n[s]);h("WebGL error "+i(t)+" in "+e+"("+r+")")};var l={},f={};for(var p in t)if("function"==typeof t[p])if("getExtension"!=p)f[p]=c(t,p);else{var d=c(t,p);f[p]=function(){return u(d.apply(t,arguments),n,r,a)}}else s(f,t,p);return f.getError=function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e])return l[e]=!1,e;return t.NO_ERROR},f}function c(t){var e=t.getParameter(t.MAX_VERTEX_ATTRIBS),n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);for(var r=0;r<e;++r)t.disableVertexAttribArray(r),t.vertexAttribPointer(r,4,t.FLOAT,!1,0,0),t.vertexAttrib1f(r,0);t.deleteBuffer(n);for(var i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r=0;r<i;++r)t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_CUBE_MAP,null),t.bindTexture(t.TEXTURE_2D,null);for(t.activeTexture(t.TEXTURE0),t.useProgram(null),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.DITHER),t.disable(t.SCISSOR_TEST),t.blendColor(0,0,0,0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.clearColor(0,0,0,0),t.clearDepth(1),t.clearStencil(-1),t.colorMask(!0,!0,!0,!0),t.cullFace(t.BACK),t.depthFunc(t.LESS),t.depthMask(!0),t.depthRange(0,1),t.frontFace(t.CCW),t.hint(t.GENERATE_MIPMAP_HINT,t.DONT_CARE),t.lineWidth(1),t.pixelStorei(t.PACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_ALIGNMENT,4),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!1),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.UNPACK_COLORSPACE_CONVERSION_WEBGL&&t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.BROWSER_DEFAULT_WEBGL),t.polygonOffset(0,0),t.sampleCoverage(1,!1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilMask(4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.viewport(0,0,t.canvas.width,t.canvas.height),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT);t.getError(););}function l(t){function e(t){return"function"==typeof t?t:function(e){t.handleEvent(e)}}function n(t){var e=t.addEventListener;t.addEventListener=function(n,r,i){switch(n){case"webglcontextlost":E(r);break;case"webglcontextrestored":T(r);break;default:e.apply(t,arguments)}}}function r(){for(var t=Object.keys(x),e=0;e<t.length;++e)delete x[t]}function i(){++_,m||g==_&&t.loseContext()}function o(t,e){var n=t[e];return function(){if(i(),!m){return n.apply(t,arguments)}}}function a(){for(var t=0;t<y.length;++t){var e=y[t];e instanceof WebGLBuffer?f.deleteBuffer(e):e instanceof WebGLFramebuffer?f.deleteFramebuffer(e):e instanceof WebGLProgram?f.deleteProgram(e):e instanceof WebGLRenderbuffer?f.deleteRenderbuffer(e):e instanceof WebGLShader?f.deleteShader(e):e instanceof WebGLTexture&&f.deleteTexture(e)}}function u(t){return{statusMessage:t,preventDefault:function(){b=!0}}}function l(t){for(var e in t)"function"==typeof t[e]?h[e]=o(t,e):s(h,t,e);h.getError=function(){if(i(),!m)for(var t;t=f.getError();)x[t]=!0;for(var t in x)if(x[t])return delete x[t],t;return h.NO_ERROR};for(var n=["createBuffer","createFramebuffer","createProgram","createRenderbuffer","createShader","createTexture"],r=0;r<n.length;++r){var a=n[r];h[a]=function(e){return function(){if(i(),m)return null;var n=e.apply(t,arguments);return n.__webglDebugContextLostId__=v,y.push(n),n}}(t[a])}for(var u=["getActiveAttrib","getActiveUniform","getBufferParameter","getContextAttributes","getAttachedShaders","getFramebufferAttachmentParameter","getParameter","getProgramParameter","getProgramInfoLog","getRenderbufferParameter","getShaderParameter","getShaderInfoLog","getShaderSource","getTexParameter","getUniform","getUniformLocation","getVertexAttrib"],r=0;r<u.length;++r){var a=u[r];h[a]=function(e){return function(){return i(),m?null:e.apply(t,arguments)}}(h[a])}for(var c=["isBuffer","isEnabled","isFramebuffer","isProgram","isRenderbuffer","isShader","isTexture"],r=0;r<c.length;++r){var a=c[r];h[a]=function(e){return function(){return i(),!m&&e.apply(t,arguments)}}(h[a])}return h.checkFramebufferStatus=function(e){return function(){return i(),m?h.FRAMEBUFFER_UNSUPPORTED:e.apply(t,arguments)}}(h.checkFramebufferStatus),h.getAttribLocation=function(e){return function(){return i(),m?-1:e.apply(t,arguments)}}(h.getAttribLocation),h.getVertexAttribOffset=function(e){return function(){return i(),m?0:e.apply(t,arguments)}}(h.getVertexAttribOffset),h.isContextLost=function(){return m},h}var f,h,p=[],d=[],h={},v=1,m=!1,y=[],g=0,_=0,b=!1,w=0,x={};t.getContext=function(e){return function(){var n=e.apply(t,arguments);if(n instanceof WebGLRenderingContext){if(n!=f){if(f)throw"got different context";f=n,h=l(f)}return h}return n}}(t.getContext);var E=function(t){p.push(e(t))},T=function(t){d.push(e(t))};return n(t),t.loseContext=function(){if(!m){for(m=!0,g=0,++v;f.getError(););r(),x[f.CONTEXT_LOST_WEBGL]=!0;var e=u("context lost"),n=p.slice();setTimeout(function(){for(var r=0;r<n.length;++r)n[r](e);w>=0&&setTimeout(function(){t.restoreContext()},w)},0)}},t.restoreContext=function(){m&&d.length&&setTimeout(function(){if(!b)throw"can not restore. webglcontestlost listener did not call event.preventDefault";a(),c(f),m=!1,_=0,b=!1;for(var t=d.slice(),e=u("context restored"),n=0;n<t.length;++n)t[n](e)},0)},t.loseContextInNCalls=function(t){if(m)throw"You can not ask a lost contet to be lost";g=_+t},t.getNumCalls=function(){return _},t.setRestoreTimeout=function(t){w=t},t}"undefined"==typeof window&&(window=t);var f=function(t){window.console&&window.console.log&&window.console.log(t)},h=function(t){window.console&&window.console.error?window.console.error(t):f(t)},p={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:["COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT"]}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},d=null,v=null;return{init:e,mightBeEnum:r,glEnumToString:i,glFunctionArgToString:o,glFunctionArgsToString:a,makeDebugContext:u,makeLostContextSimulatingCanvas:l,resetToInitialState:c}}(),e.exports=WebGLDebugUtils}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],982:[function(t,e,n){"use strict";function r(t){this.gl=t,this.buffer=this.gl.createFramebuffer()}r.prototype.destroy=function(){return this.gl.deleteFRamebuffer(this.buffer)},r.prototype.bind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.buffer),this},r.prototype.unbind=function(){return this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this},r.prototype.check=function(){switch(this.gl.checkFramebufferStatus(this.gl.FRAMEBUFFER)){case this.gl.FRAMEBUFFER_UNSUPPORTED:throw"Framebuffer is unsupported";case this.gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw"Framebuffer incomplete attachment";case this.gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw"Framebuffer incomplete dimensions";case this.gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw"Framebuffer incomplete missing attachment"}return this},r.prototype.color=function(t){return this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,t.target,t.handle,0),this.check(),this},r.prototype.depth=function(t){return this.gl.framebufferRenderbuffer(this.gl.FRAMEBUFFER,this.gl.DEPTH_ATTACHMENT,this.gl.RENDERBUFFER,t.id),this.check(),this},r.prototype.destroy=function(){return this.gl.deleteFramebuffer(this.buffer)},e.exports=r},{}],983:[function(t,e,n){"use strict";function r(t,e,n,r){var u,c,l;for(this.heatmap=t,this.gl=e,this.width=n,this.height=r,this.shader=new i(this.gl,{vertex:"attribute vec4 position, intensity;\nvarying vec2 off, dim;\nvarying float vIntensity;\nuniform vec2 viewport;\n\nvoid main(){\n    dim = abs(position.zw);\n    off = position.zw;\n    vec2 pos = position.xy + position.zw;\n    vIntensity = intensity.x;\n    gl_Position = vec4((pos/viewport)*2.0-1.0, 0.0, 1.0);\n}",fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nvarying vec2 off, dim;\nvarying float vIntensity;\nvoid main(){\n    float falloff = (1.0 - smoothstep(0.0, 1.0, length(off/dim)));\n    float intensity = falloff*vIntensity;\n    gl_FragColor = vec4(intensity);\n}"}),this.clampShader=new i(this.gl,{vertex:o,fragment:a+"uniform float low, high;\nvoid main(){\n    gl_FragColor = vec4(clamp(texture2D(source, texcoord).rgb, low, high), 1.0);\n}"}),this.multiplyShader=new i(this.gl,{vertex:o,fragment:a+"uniform float value;\nvoid main(){\n    gl_FragColor = vec4(texture2D(source, texcoord).rgb*value, 1.0);\n}"}),this.blurShader=new i(this.gl,{vertex:o,fragment:a+"uniform vec2 viewport;\nvoid main(){\n    vec4 result = vec4(0.0);\n    for(int x=-1; x<=1; x++){\n        for(int y=-1; y<=1; y++){\n            vec2 off = vec2(x,y)/viewport;\n            //float factor = 1.0 - smoothstep(0.0, 1.5, length(off));\n            float factor = 1.0;\n            result += vec4(texture2D(source, texcoord+off).rgb*factor, factor);\n        }\n    }\n    gl_FragColor = vec4(result.rgb/result.w, 1.0);\n}"}),this.nodeBack=new s(this.gl,this.width,this.height),this.nodeFront=new s(this.gl,this.width,this.height),this.vertexBuffer=this.gl.createBuffer(),this.vertexSize=8,this.maxPointCount=10240,this.vertexBufferData=new Float32Array(this.maxPointCount*this.vertexSize*6),this.vertexBufferViews=[],u=c=0,l=this.maxPointCount;0<=l?c<l:c>l;u=0<=l?++c:--c)this.vertexBufferViews.push(new Float32Array(this.vertexBufferData.buffer,0,u*this.vertexSize*6));this.bufferIndex=0,this.pointCount=0}var i=t("./heatmap-shader"),o=(t("path"),"attribute vec4 position;\nvarying vec2 texcoord;\nvoid main() {\n  texcoord = position.xy * 0.5 + 0.5;\n  gl_Position = position;\n}"),a="#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nuniform sampler2D source;\nvarying vec2 texcoord;",s=t("./heatmap-node");r.prototype.resize=function(t,e){return this.width=t,this.height=e,this.nodeBack.resize(this.width,this.height),this.nodeFront.resize(this.width,this.height)},r.prototype.update=function(){var t,e;if(this.pointCount>0)return this.gl.enable(this.gl.BLEND),this.nodeFront.use(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexBufferViews[this.pointCount],this.gl.STREAM_DRAW),e=this.shader.attribLocation("position"),t=this.shader.attribLocation("intensity"),this.gl.enableVertexAttribArray(1),this.gl.vertexAttribPointer(e,4,this.gl.FLOAT,!1,32,0),this.gl.vertexAttribPointer(t,4,this.gl.FLOAT,!1,32,16),this.shader.use().vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6*this.pointCount),this.gl.disableVertexAttribArray(1),this.pointCount=0,this.bufferIndex=0,this.nodeFront.end(),this.gl.disable(this.gl.BLEND)},r.prototype.clear=function(){return this.nodeFront.use(),this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.nodeFront.end()},r.prototype.clamp=function(t,e){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.clampShader.use().int("source",0).float("low",t).float("high",e),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},r.prototype.multiply=function(t){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.multiplyShader.use().int("source",0).float("value",t),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},r.prototype.blur=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.heatmap.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.nodeFront.bind(0),this.nodeBack.use(),this.blurShader.use().int("source",0).vec2("viewport",this.width,this.height),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.nodeBack.end(),this.swap()},r.prototype.swap=function(){var t;return t=this.nodeFront,this.nodeFront=this.nodeBack,this.nodeBack=t},r.prototype.addVertex=function(t,e,n,r,i){return this.vertexBufferData[this.bufferIndex++]=t,this.vertexBufferData[this.bufferIndex++]=e,this.vertexBufferData[this.bufferIndex++]=n,this.vertexBufferData[this.bufferIndex++]=r,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i,this.vertexBufferData[this.bufferIndex++]=i},r.prototype.addPoint=function(t,e,n,r){var i;return null==n&&(n=50),null==r&&(r=.2),this.pointCount>=this.maxPointCount-1&&this.update(),e=this.height-e,i=n/2,this.addVertex(t,e,-i,-i,r),this.addVertex(t,e,+i,-i,r),this.addVertex(t,e,-i,+i,r),this.addVertex(t,e,-i,+i,r),this.addVertex(t,e,+i,-i,r),this.addVertex(t,e,+i,+i,r),this.pointCount+=1},e.exports=r},{"./heatmap-node":984,"./heatmap-shader":985,path:26}],984:[function(t,e,n){"use strict";function r(t,e,n){var r;this.gl=t,this.width=e,this.height=n,r=this.gl.getFloatExtension({require:["renderable"]}),this.texture=new i(this.gl,{type:r.type}).bind(0).setSize(this.width,this.height).nearest().clampToEdge(),this.fbo=new o(this.gl).bind().color(this.texture).unbind()}var i=t("./heatmap-texture"),o=t("./framebuffer");r.prototype.use=function(){return this.fbo.bind()},r.prototype.bind=function(t){return this.texture.bind(t)},r.prototype.end=function(){return this.fbo.unbind()},r.prototype.resize=function(t,e){return this.width=t,this.height=e,this.texture.bind(0).setSize(this.width,this.height)},e.exports=r},{"./framebuffer":982,"./heatmap-texture":986}],985:[function(t,e,n){"use strict";function r(t,e){var n,r;this.gl=t,r=e.vertex,n=e.fragment,this.program=this.gl.createProgram(),this.vs=this.gl.createShader(this.gl.VERTEX_SHADER),this.fs=this.gl.createShader(this.gl.FRAGMENT_SHADER),this.gl.attachShader(this.program,this.vs),this.gl.attachShader(this.program,this.fs),this.compileShader(this.vs,r),this.compileShader(this.fs,n),this.link(),this.value_cache={},this.uniform_cache={},this.attribCache={}}r.prototype.attribLocation=function(t){var e;return e=this.attribCache[t],void 0===e&&(e=this.attribCache[t]=this.gl.getAttribLocation(this.program,t)),e},r.prototype.compileShader=function(t,e){if(this.gl.shaderSource(t,e),this.gl.compileShader(t),!this.gl.getShaderParameter(t,this.gl.COMPILE_STATUS))throw"Shader Compile Error: "+this.gl.getShaderInfoLog(t)},r.prototype.link=function(){if(this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))throw"Shader Link Error: "+this.gl.getProgramInfoLog(this.program)},r.prototype.use=function(){return this.gl.useProgram(this.program),this},r.prototype.uniformLoc=function(t){var e;return e=this.uniform_cache[t],void 0===e&&(e=this.uniform_cache[t]=this.gl.getUniformLocation(this.program,t)),e},r.prototype.int=function(t,e){var n,r;return n=this.value_cache[t],n!==e&&(this.value_cache[t]=e,r=this.uniformLoc(t),r&&this.gl.uniform1i(r,e)),this},r.prototype.vec2=function(t,e,n){var r;return r=this.uniformLoc(t),r&&this.gl.uniform2f(r,e,n),this},r.prototype.float=function(t,e){var n,r;return n=this.value_cache[t],n!==e&&(this.value_cache[t]=e,r=this.uniformLoc(t),r&&this.gl.uniform1f(r,e)),this},e.exports=r},{}],986:[function(t,e,n){"use strict";function r(t,e){var n,r;switch(this.gl=t,null==e&&(e={}),this.channels=this.gl[(null!=(n=e.channels)?n:"rgba").toUpperCase()],"number"==typeof e.type?this.type=e.type:this.type=this.gl[(null!=(r=e.type)?r:"unsigned_byte").toUpperCase()],this.channels){case this.gl.RGBA:this.chancount=4;break;case this.gl.RGB:this.chancount=3;break;case this.gl.LUMINANCE_ALPHA:this.chancount=2;break;default:this.chancount=1}this.target=this.gl.TEXTURE_2D,this.handle=this.gl.createTexture()}r.prototype.destroy=function(){return this.gl.deleteTexture(this.handle)},r.prototype.bind=function(t){if(null==t&&(t=0),t>15)throw"Texture unit too large: "+t;return this.gl.activeTexture(this.gl.TEXTURE0+t),this.gl.bindTexture(this.target,this.handle),this},r.prototype.setSize=function(t,e){return this.width=t,this.height=e,this.gl.texImage2D(this.target,0,this.channels,this.width,this.height,0,this.channels,this.type,null),this},r.prototype.upload=function(t){return this.width=t.width,this.height=t.height,this.gl.texImage2D(this.target,0,this.channels,this.channels,this.type,t),this},r.prototype.linear=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this},r.prototype.nearest=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST),this},r.prototype.clampToEdge=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this},r.prototype.repeat=function(){return this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this},e.exports=r},{}],987:[function(t,e,n){function r(){var t,e,n,r;if(null!=window.WebGLRenderingContext)return r=["WEBKIT","MOZ","MS","O"],n=/^WEBKIT_(.*)|MOZ_(.*)|MS_(.*)|O_(.*)/,t=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(e){var i,o,a,s,u;if(o=e.match(n),null!==o&&(e=o[1]),i=t.call(this,e),null===i){for(s=0,u=r.length;s<u;s++)if(a=r[s],i=t.call(this,a+"_"+e),null!==i)return i;return null}return i},e=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var t,r,i,o,s,u;for(o=e.call(this),i=[],s=0,u=o.length;s<u;s++)t=o[s],r=t.match(n),null!==r&&(t=r[1]),a.call(i,t)<0&&i.push(t);return i}}function i(){var t,e,n,r,i,o,s,u,c,l,f,h,p,d;if(i=function(){var t,e,n;return t=document.createElement("canvas"),t.width=2,t.height=2,e=t.getContext("2d"),n=e.getImageData(0,0,2,2),n.data.set(new Uint8ClampedArray([0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255])),e.putImageData(n,0,0),t},i(),e=function(t,e){var n,r,o,a,s,u,c,l,f,h,p,d,v,m;if(u=t.createProgram(),v=t.createShader(t.VERTEX_SHADER),t.attachShader(u,v),t.shaderSource(v,"attribute vec2 position;\nvoid main(){\n    gl_Position = vec4(position, 0.0, 1.0);\n}"),t.compileShader(v),!t.getShaderParameter(v,t.COMPILE_STATUS))throw t.getShaderInfoLog(v);if(o=t.createShader(t.FRAGMENT_SHADER),t.attachShader(u,o),t.shaderSource(o,"uniform sampler2D source;\nvoid main(){\n    gl_FragColor = texture2D(source, vec2(1.0, 1.0));\n}"),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw t.getShaderInfoLog(o);if(t.linkProgram(u),!t.getProgramParameter(u,t.LINK_STATUS))throw t.getProgramInfoLog(u);return t.useProgram(u),r=function(){return t.deleteShader(o),t.deleteShader(v),t.deleteProgram(u),t.deleteBuffer(n),t.deleteTexture(f),t.deleteTexture(d),t.deleteFramebuffer(a),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)},d=t.createTexture(),t.bindTexture(t.TEXTURE_2D,d),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),a=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,a),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,d,0),h=i(),f=t.createTexture(),t.bindTexture(t.TEXTURE_2D,f),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,e,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),m=new Float32Array([1,1,-1,1,-1,-1,1,1,-1,-1,1,-1]),n=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,m,t.STATIC_DRAW),s=t.getAttribLocation(u,"position"),p=t.getUniformLocation(u,"source"),t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.uniform1i(p,0),t.drawArrays(t.TRIANGLES,0,6),c=new Uint8Array(16),t.readPixels(0,0,2,2,t.RGBA,t.UNSIGNED_BYTE,c),l=Math.abs(c[0]-127)<10,r(),l},r=function(t,e){var n;return n=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,e,null),0===t.getError()?(t.deleteTexture(n),!0):(t.deleteTexture(n),!1)},t=function(t,e){var n,r,i;return i=t.createTexture(),t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,e,null),r=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),n=t.checkFramebufferStatus(t.FRAMEBUFFER),t.deleteTexture(i),t.deleteFramebuffer(r),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),n===t.FRAMEBUFFER_COMPLETE},c=[],l={},f=[],n=function(){var n,i,o,a,s,u,h;n=document.createElement("canvas"),o=null;try{o=n.getContext("experimental-webgl"),null===o&&(o=n.getContext("webgl"))}catch(t){}if(null!=o&&(u=o.getExtension("OES_texture_float"),null===u?r(o,o.FLOAT)?(h=!0,c.push("OES_texture_float"),l.OES_texture_float={shim:!0}):(h=!1,f.push("OES_texture_float")):r(o,o.FLOAT)?(h=!0,c.push("OES_texture_float")):(h=!1,f.push("OES_texture_float")),h&&(i=o.getExtension("WEBGL_color_buffer_float"),null===i?t(o,o.FLOAT)?(c.push("WEBGL_color_buffer_float"),l.WEBGL_color_buffer_float={shim:!0,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):f.push("WEBGL_color_buffer_float"):t(o,o.FLOAT)?c.push("WEBGL_color_buffer_float"):f.push("WEBGL_color_buffer_float"),i=o.getExtension("OES_texture_float_linear"),null===i?e(o,o.FLOAT)?(c.push("OES_texture_float_linear"),l.OES_texture_float_linear={shim:!0}):f.push("OES_texture_float_linear"):e(o,o.FLOAT)?c.push("OES_texture_float_linear"):f.push("OES_texture_float_linear")),a=o.getExtension("OES_texture_half_float"),null===a?r(o,36193)?(s=!0,c.push("OES_texture_half_float"),a=l.OES_texture_half_float={HALF_FLOAT_OES:36193,shim:!0}):(s=!1,f.push("OES_texture_half_float")):r(o,a.HALF_FLOAT_OES)?(s=!0,c.push("OES_texture_half_float")):(s=!1,f.push("OES_texture_half_float")),s))return i=o.getExtension("EXT_color_buffer_half_float"),null===i?t(o,a.HALF_FLOAT_OES)?(c.push("EXT_color_buffer_half_float"),l.EXT_color_buffer_half_float={shim:!0,RGBA16F_EXT:34842,RGB16F_EXT:34843,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863}):f.push("EXT_color_buffer_half_float"):t(o,a.HALF_FLOAT_OES)?c.push("EXT_color_buffer_half_float"):f.push("EXT_color_buffer_half_float"),i=o.getExtension("OES_texture_half_float_linear"),null===i?e(o,a.HALF_FLOAT_OES)?(c.push("OES_texture_half_float_linear"),l.OES_texture_half_float_linear={shim:!0}):f.push("OES_texture_half_float_linear"):e(o,a.HALF_FLOAT_OES)?c.push("OES_texture_half_float_linear"):f.push("OES_texture_half_float_linear")},null!=window.WebGLRenderingContext){for(n(),h={},p=0,d=f.length;p<d;p++)u=f[p],h[u]=!0;return o=WebGLRenderingContext.prototype.getExtension,WebGLRenderingContext.prototype.getExtension=function(t){var e;return e=l[t],void 0===e?h[t]?null:o.call(this,t):e},s=WebGLRenderingContext.prototype.getSupportedExtensions,WebGLRenderingContext.prototype.getSupportedExtensions=function(){var t,e,n,r,i,o,u;for(n=s.call(this),e=[],r=0,o=n.length;r<o;r++)t=n[r],void 0===h[t]&&e.push(t);for(i=0,u=c.length;i<u;i++)t=c[i],a.call(e,t)<0&&e.push(t);return e},WebGLRenderingContext.prototype.getFloatExtension=function(t){var e,n,r,i,o,a,s,c,l,f,h,p,d,v,m,y,g,_,b,w,x,E,T,S,M,O;for(null==t.prefer&&(t.prefer=["half"]),null==t.require&&(t.require=[]),null==t.throws&&(t.throws=!0),v=this.getExtension("OES_texture_float"),a=this.getExtension("OES_texture_half_float"),p=this.getExtension("WEBGL_color_buffer_float"),i=this.getExtension("EXT_color_buffer_half_float"),d=this.getExtension("OES_texture_float_linear"),o=this.getExtension("OES_texture_half_float_linear"),h={texture:null!==v,filterable:null!==d,renderable:null!==p,score:0,precision:"single",half:!1,single:!0,type:this.FLOAT},r={texture:null!==a,filterable:null!==o,renderable:null!==i,score:0,precision:"half",half:!0,single:!1,type:null!=(S=null!=a?a.HALF_FLOAT_OES:void 0)?S:null},n=[],h.texture&&n.push(h),r.texture&&n.push(r),f=[],y=0,b=n.length;y<b;y++){for(e=n[y],m=!0,M=t.require,g=0,w=M.length;g<w;g++)u=M[g],e[u]===!1&&(m=!1);m&&f.push(e)}for(_=0,x=f.length;_<x;_++)for(e=f[_],O=t.prefer,s=T=0,E=O.length;T<E;s=++T)l=O[s],c=Math.pow(2,t.prefer.length-s-1),e[l]&&(e.score+=c);if(f.sort(function(t,e){return t.score===e.score?0:t.score<e.score?1:t.score>e.score?-1:void 0}),0===f.length){if(t.throws)throw"No floating point texture support that is "+t.require.join(", ");return null}return f=f[0],{filterable:f.filterable,renderable:f.renderable,type:f.type,precision:f.precision}}}}
var o=t("./webgl-heatmap"),a=(t("./heatmap-texture"),t("path"),[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1});r(),i(),e.exports=o},{"./heatmap-texture":986,"./webgl-heatmap":988,path:26}],988:[function(t,e,n){"use strict";function r(t){var e,n,r,c,l,f,h,p,d,v,m,y;m=null!=t?t:{},this.canvas=m.canvas,this.width=m.width,this.height=m.height,h=m.intensityToAlpha,l=m.gradientTexture,n=m.alphaRange,this.canvas||(this.canvas=i.createElement("canvas"));try{if(this.gl=this.canvas.getContext("experimental-webgl",{depth:!1,antialias:!1}),null===this.gl&&(this.gl=this.canvas.getContext("webgl",{depth:!1,antialias:!1}),null===this.gl))throw"WebGL not supported"}catch(t){throw t,"WebGL not supported"}null!=o.WebGLDebugUtils&&(console.log("debugging mode"),this.gl=WebGLDebugUtils.makeDebugContext(this.gl,function(t,e,n){throw WebGLDebugUtils.glEnumToString(t)+" was caused by call to: "+e})),this.gl.enableVertexAttribArray(0),this.gl.blendFunc(this.gl.ONE,this.gl.ONE),l?(v=this.gradientTexture=new a(this.gl,{channels:"rgba"}).bind(0).setSize(2,2).nearest().clampToEdge(),"string"==typeof l?(f=new o.Image,f.onload=function(){return v.bind().upload(f)},f.src=l):l.width>0&&l.height>0?v.upload(l):l.onload=function(){return v.upload(l)},c="uniform sampler2D gradientTexture;\nvec3 getColor(float intensity){\n    return texture2D(gradientTexture, vec2(intensity, 0.0)).rgb;\n}"):(v=null,c="vec3 getColor(float intensity){\n    vec3 blue = vec3(0.0, 0.0, 1.0);\n    vec3 cyan = vec3(0.0, 1.0, 1.0);\n    vec3 green = vec3(0.0, 1.0, 0.0);\n    vec3 yellow = vec3(1.0, 1.0, 0.0);\n    vec3 red = vec3(1.0, 0.0, 0.0);\n\n    vec3 color = (\n        fade(-0.25, 0.25, intensity)*blue +\n        fade(0.0, 0.5, intensity)*cyan +\n        fade(0.25, 0.75, intensity)*green +\n        fade(0.5, 1.0, intensity)*yellow +\n        smoothstep(0.75, 1.0, intensity)*red\n    );\n    return color;\n}"),null==h&&(h=!0),h?(y=null!=n?n:[0,1],r=y[0],e=y[1],p="vec4 alphaFun(vec3 color, float intensity){\n    float alpha = smoothstep("+r.toFixed(8)+", "+e.toFixed(8)+", intensity);\n    return vec4(color*alpha, alpha);\n}"):p="vec4 alphaFun(vec3 color, float intensity){\n    return vec4(color, 1.0);\n}",this.shader=new u(this.gl,{vertex:"attribute vec4 position;\nvarying vec2 texcoord;\nvoid main() {\n  texcoord = position.xy * 0.5 + 0.5;\n  gl_Position = position;\n}",fragment:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp int;\n    precision highp float;\n#else\n    precision mediump int;\n    precision mediump float;\n#endif\nuniform sampler2D source;\nvarying vec2 texcoord;float linstep(float low, float high, float value){\n    return clamp((value-low)/(high-low), 0.0, 1.0);\n}\n\nfloat fade(float low, float high, float value){\n    float mid = (low+high)*0.5;\n    float range = (high-low)*0.5;\n    float x = 1.0 - clamp(abs(mid-value)/range, 0.0, 1.0);\n    return smoothstep(0.0, 1.0, x);\n}\n\n"+c+"\n"+p+"\n\nvoid main(){\n    float intensity = smoothstep(0.0, 1.0, texture2D(source, texcoord).r);\n    vec3 color = getColor(intensity);\n    gl_FragColor = alphaFun(color, intensity);\n}"}),null==this.width&&(this.width=this.canvas.offsetWidth||2),null==this.height&&(this.height=this.canvas.offsetHeight||2),this.canvas.width=this.width,this.canvas.height=this.height,this.gl.viewport(0,0,this.width,this.height),this.quad=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),d=new Float32Array([-1,-1,0,1,1,-1,0,1,-1,1,0,1,-1,1,0,1,1,-1,0,1,1,1,0,1]),this.gl.bufferData(this.gl.ARRAY_BUFFER,d,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.heights=new s(this,this.gl,this.width,this.height)}var i=t("global/document"),o=t("global/window"),a=(t("path"),t("./heatmap-texture")),s=t("./heatmap-heights"),u=t("./heatmap-shader");r.prototype.adjustSize=function(){var t,e;if(e=this.canvas.offsetWidth||2,t=this.canvas.offsetHeight||2,this.width!==e||this.height!==t)return this.gl.viewport(0,0,e,t),this.canvas.width=e,this.canvas.height=t,this.width=e,this.height=t,this.heights.resize(this.width,this.height)},r.prototype.display=function(){return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.quad),this.gl.vertexAttribPointer(0,4,this.gl.FLOAT,!1,0,0),this.heights.nodeFront.bind(0),this.gradientTexture&&this.gradientTexture.bind(1),this.shader.use().int("source",0).int("gradientTexture",1),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},r.prototype.update=function(){return this.heights.update()},r.prototype.clear=function(){return this.heights.clear()},r.prototype.clamp=function(t,e){return null==t&&(t=0),null==e&&(e=1),this.heights.clamp(t,e)},r.prototype.multiply=function(t){return null==t&&(t=.95),this.heights.multiply(t)},r.prototype.blur=function(){return this.heights.blur()},r.prototype.addPoint=function(t,e,n,r){return this.heights.addPoint(t,e,n,r)},r.prototype.addPoints=function(t){var e,n,r,i;for(i=[],n=0,r=t.length;n<r;n++)e=t[n],i.push(this.addPoint(e.x,e.y,e.size,e.intensity));return i},e.exports=r},{"./heatmap-heights":983,"./heatmap-shader":985,"./heatmap-texture":986,"global/document":481,"global/window":482,path:26}],989:[function(t,e,n){var r=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;e.exports=function(t,e){function n(t){m[t]=!0;for(var e in i[t][1]){var r=i[t][1][e];m[r]||n(r)}}for(var s,u=Object.keys(o),c=0,l=u.length;c<l;c++){var f=u[c],h=o[f].exports;if(h===t||h&&h.default===t){s=f;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var p={},c=0,l=u.length;c<l;c++){var f=u[c];p[f]=f}i[s]=[Function(["require","module","exports"],"("+t+")(self)"),p]}var d=Math.floor(Math.pow(16,8)*Math.random()).toString(16),v={};v[s]=s,i[d]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),v];var m={};n(d);var y="("+r+")({"+Object.keys(m).map(function(t){return a(t)+":["+i[t][0]+","+a(i[t][1])+"]"}).join(",")+"},{},["+a(d)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(e&&e.bare)return _;var b=g.createObjectURL(_),w=new Worker(b);return w.objectURL=b,w}},{}],990:[function(t,e,n){e.exports.RADIUS=6378137,e.exports.FLATTENING=1/298.257223563,e.exports.POLAR_RADIUS=6356752.3142},{}],991:[function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return y.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function u(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function l(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(y.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(y.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y.arrayBuffer&&y.blob&&_(t))this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function m(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var y={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(y.arrayBuffer)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&g.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},f.call(p.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var t=new m(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];m.redirect=function(t,e){if(x.indexOf(e)===-1)throw new RangeError("Invalid status code");return new m(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=m,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL"),n(new m("response"in o?o.response:o.responseText,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send(void 0===i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],992:[function(t,e,n){!function(t,r){"object"==typeof n&&void 0!==e?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r(t.WhooTS=t.WhooTS||{})}(this,function(t){function e(t,e,r,i,o,a){return a=a||{},t+"?"+["bbox="+n(r,i,o),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+e].join("&")}function n(t,e,n){e=Math.pow(2,n)-e-1;var i=r(256*t,256*e,n),o=r(256*(t+1),256*(e+1),n);return i[0]+","+i[1]+","+o[0]+","+o[1]}function r(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[t*r-2*Math.PI*6378137/2,e*r-2*Math.PI*6378137/2]}t.getURL=e,t.getTileBBox=n,t.getMercCoords=r,Object.defineProperty(t,"__esModule",{value:!0})})},{}]},{},[46]);
